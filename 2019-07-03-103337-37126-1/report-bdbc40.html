<!doctype html>
<html>
<head>
<title>/Users/u237002/Dropbox/Hacking/sat/arts/3rdparty/Eigen/src/Core/DenseStorage.h</title>

<style type="text/css">
body { color:#000000; background-color:#ffffff }
body { font-family:Helvetica, sans-serif; font-size:10pt }
h1 { font-size:14pt }
.FileName { margin-top: 5px; margin-bottom: 5px; display: inline; }
.FileNav { margin-left: 5px; margin-right: 5px; display: inline; }
.FileNav a { text-decoration:none; font-size: larger; }
.divider { margin-top: 30px; margin-bottom: 30px; height: 15px; }
.divider { background-color: gray; }
.code { border-collapse:collapse; width:100%; }
.code { font-family: "Monospace", monospace; font-size:10pt }
.code { line-height: 1.2em }
.comment { color: green; font-style: oblique }
.keyword { color: blue }
.string_literal { color: red }
.directive { color: darkmagenta }
/* Macro expansions. */
.expansion { display: none; }
.macro:hover .expansion {
  display: block;
  border: 2px solid #FF0000;
  padding: 2px;
  background-color:#FFF0F0;
  font-weight: normal;
  -webkit-border-radius:5px;
  -webkit-box-shadow:1px 1px 7px #000;
  border-radius:5px;
  box-shadow:1px 1px 7px #000;
  position: absolute;
  top: -1em;
  left:10em;
  z-index: 1
}

#tooltiphint {
  position: fixed;
  width: 50em;
  margin-left: -25em;
  left: 50%;
  padding: 10px;
  border: 1px solid #b0b0b0;
  border-radius: 2px;
  box-shadow: 1px 1px 7px black;
  background-color: #c0c0c0;
  z-index: 2;
}
.macro {
  color: darkmagenta;
  background-color:LemonChiffon;
  /* Macros are position: relative to provide base for expansions. */
  position: relative;
}

.num { width:2.5em; padding-right:2ex; background-color:#eeeeee }
.num { text-align:right; font-size:8pt }
.num { color:#444444 }
.line { padding-left: 1ex; border-left: 3px solid #ccc }
.line { white-space: pre }
.msg { -webkit-box-shadow:1px 1px 7px #000 }
.msg { box-shadow:1px 1px 7px #000 }
.msg { -webkit-border-radius:5px }
.msg { border-radius:5px }
.msg { font-family:Helvetica, sans-serif; font-size:8pt }
.msg { float:left }
.msg { padding:0.25em 1ex 0.25em 1ex }
.msg { margin-top:10px; margin-bottom:10px }
.msg { font-weight:bold }
.msg { max-width:60em; word-wrap: break-word; white-space: pre-wrap }
.msgT { padding:0x; spacing:0x }
.msgEvent { background-color:#fff8b4; color:#000000 }
.msgControl { background-color:#bbbbbb; color:#000000 }
.msgNote { background-color:#ddeeff; color:#000000 }
.mrange { background-color:#dfddf3 }
.mrange { border-bottom:1px solid #6F9DBE }
.PathIndex { font-weight: bold; padding:0px 5px; margin-right:5px; }
.PathIndex { -webkit-border-radius:8px }
.PathIndex { border-radius:8px }
.PathIndexEvent { background-color:#bfba87 }
.PathIndexControl { background-color:#8c8c8c }
.PathNav a { text-decoration:none; font-size: larger }
.CodeInsertionHint { font-weight: bold; background-color: #10dd10 }
.CodeRemovalHint { background-color:#de1010 }
.CodeRemovalHint { border-bottom:1px solid #6F9DBE }
.selected{ background-color:orange !important; }

table.simpletable {
  padding: 5px;
  font-size:12pt;
  margin:20px;
  border-collapse: collapse; border-spacing: 0px;
}
td.rowname {
  text-align: right;
  vertical-align: top;
  font-weight: bold;
  color:#444444;
  padding-right:2ex;
}

/* Hidden text. */
input.spoilerhider + label {
  cursor: pointer;
  text-decoration: underline;
  display: block;
}
input.spoilerhider {
 display: none;
}
input.spoilerhider ~ .spoiler {
  overflow: hidden;
  margin: 10px auto 0;
  height: 0;
  opacity: 0;
}
input.spoilerhider:checked + label + .spoiler{
  height: auto;
  opacity: 1;
}
</style>
</head>
<body>
<!-- BUGDESC Use of memory after it is freed -->

<!-- BUGTYPE Use-after-free -->

<!-- BUGCATEGORY Memory error -->

<!-- BUGFILE /Users/u237002/Dropbox/Hacking/sat/arts/3rdparty/Eigen/src/Core/DenseStorage.h -->

<!-- FILENAME DenseStorage.h -->

<!-- FUNCTIONNAME data -->

<!-- ISSUEHASHCONTENTOFLINEINCONTEXT 953cfd0c2ff1167643be47fbebb0da1c -->

<!-- BUGLINE 565 -->

<!-- BUGCOLUMN 35 -->

<!-- BUGPATHLENGTH 69 -->

<!-- BUGMETAEND -->
<!-- REPORTHEADER -->
<h3>Bug Summary</h3>
<table class="simpletable">
<tr><td class="rowname">File:</td><td>3rdparty/Eigen/src/Core/DenseStorage.h</td></tr>
<tr><td class="rowname">Warning:</td><td><a href="#EndPath">line 565, column 35</a><br />Use of memory after it is freed</td></tr>

</table>
<!-- REPORTSUMMARYEXTRA -->
<h3>Annotated Source Code</h3>
<p>Press <a href="#" onclick="toggleHelp(); return false;">'?'</a>
   to see keyboard shortcuts</p>
<input type="checkbox" class="spoilerhider" id="showinvocation" />
<label for="showinvocation" >Show analyzer invocation</label>
<div class="spoiler">clang -cc1 -triple x86_64-apple-macosx10.14.0 -Wdeprecated-objc-isa-usage -Werror=deprecated-objc-isa-usage -analyze -disable-free -disable-llvm-verifier -discard-value-names -main-file-name absorption.cc -analyzer-store=region -analyzer-opt-analyze-nested-blocks -analyzer-checker=core -analyzer-checker=apiModeling -analyzer-checker=unix -analyzer-checker=osx -analyzer-checker=deadcode -analyzer-checker=cplusplus -analyzer-checker=security.insecureAPI.UncheckedReturn -analyzer-checker=security.insecureAPI.getpw -analyzer-checker=security.insecureAPI.gets -analyzer-checker=security.insecureAPI.mktemp -analyzer-checker=security.insecureAPI.mkstemp -analyzer-checker=security.insecureAPI.vfork -analyzer-checker=nullability.NullPassedToNonnull -analyzer-checker=nullability.NullReturnedFromNonnull -analyzer-output plist -w -mrelocation-model pic -pic-level 2 -mthread-model posix -mdisable-fp-elim -masm-verbose -munwind-tables -target-sdk-version=10.14 -target-cpu penryn -dwarf-column-info -debugger-tuning=lldb -ggnu-pubnames -target-linker-version 409.12 -resource-dir /opt/local/libexec/llvm-8.0/lib/clang/8.0.0 -isystem /Users/u237002/Dropbox/Hacking/sat/arts/3rdparty -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.14.sdk -D HAVE_CONFIG_H -I /Users/u237002/Hacking/arts-build/clang-analyze/src -I /Users/u237002/Dropbox/Hacking/sat/arts/src -I /opt/local/include -I /Users/u237002/Dropbox/Hacking/sat/arts/3rdparty/invlib/src -I/usr/local/include -stdlib=libc++ -internal-isystem /opt/local/libexec/llvm-8.0/bin/../include/c++/v1 -O2 -Wno-sign-conversion -Wno-unknown-pragmas -Wno-return-type-c-linkage -Wno-strict-overflow -std=c++11 -fdeprecated-macro -fdebug-compilation-dir /Users/u237002/Hacking/arts-build/clang-analyze/src -ferror-limit 19 -fmessage-length 0 -fvisibility hidden -fvisibility-inlines-hidden -stack-protector 1 -fblocks -fencode-extended-block-signature -fregister-global-dtors-with-atexit -fobjc-runtime=macosx-10.14.0 -fcxx-exceptions -fexceptions -fmax-type-align=16 -fdiagnostics-show-option -vectorize-loops -vectorize-slp -analyzer-output=html -o /Users/u237002/Hacking/arts-build/clang-analyze/report/2019-07-03-103337-37126-1 -x c++ /Users/u237002/Dropbox/Hacking/sat/arts/src/absorption.cc
</div>
<div id='tooltiphint' hidden="true">
  <p>Keyboard shortcuts: </p>
  <ul>
    <li>Use 'j/k' keys for keyboard navigation</li>
    <li>Use 'Shift+S' to show/hide relevant lines</li>
    <li>Use '?' to toggle this window</li>
  </ul>
  <a href="#" onclick="toggleHelp(); return false;">Close</a>
</div>
<script type='text/javascript'>
var relevant_lines = {"1": {"202": 1, "203": 1, "204": 1, "205": 1, "2143": 1, "2144": 1, "2145": 1, "2146": 1, "2147": 1, "2148": 1, "2149": 1, "2150": 1, "2151": 1, "2152": 1, "2153": 1, "2154": 1, "2155": 1, "2156": 1, "2157": 1, "2158": 1, "2159": 1, "2160": 1, "2161": 1, "2163": 1, "2164": 1, "2165": 1, "2166": 1, "2167": 1, "2170": 1, "2171": 1, "2172": 1, "2175": 1, "2179": 1, "2182": 1, "2183": 1, "2184": 1, "2185": 1, "2186": 1, "2188": 1, "2190": 1, "2191": 1, "2192": 1, "2195": 1, "2196": 1, "2197": 1, "2200": 1, "2201": 1, "2202": 1, "2203": 1, "2204": 1, "2210": 1, "2211": 1, "2214": 1, "2215": 1, "2216": 1, "2217": 1, "2218": 1, "2219": 1, "2224": 1, "2246": 1, "2247": 1, "2248": 1, "2249": 1, "2250": 1, "2252": 1, "2253": 1, "2254": 1, "2255": 1, "2256": 1, "2258": 1, "2260": 1}, "5228": {"206": 1}, "31041": {"615": 1}, "31203": {"389": 1, "390": 1}, "34163": {"277": 1, "278": 1}, "34178": {"114": 1}, "34196": {"89": 1, "109": 1, "110": 1, "111": 1, "120": 1, "121": 1}, "34297": {"146": 1, "147": 1, "153": 1, "154": 1, "155": 1, "157": 1, "159": 1, "161": 1, "167": 1, "170": 1, "174": 1, "175": 1, "177": 1, "212": 1, "213": 1, "214": 1, "228": 1, "229": 1, "230": 1, "286": 1, "287": 1, "288": 1, "369": 1, "370": 1, "371": 1, "373": 1, "374": 1, "375": 1, "387": 1, "412": 1, "413": 1, "414": 1, "416": 1, "439": 1, "440": 1, "441": 1, "442": 1, "443": 1, "445": 1, "449": 1}, "36412": {"19": 1, "20": 1}, "36443": {"23": 1, "48": 1}, "36494": {"34": 1, "300": 1, "478": 1, "551": 1, "581": 1, "582": 1, "583": 1}, "36607": {"218": 1, "219": 1, "220": 1, "221": 1, "230": 1, "231": 1, "232": 1, "233": 1, "591": 1, "592": 1}, "36681": {"545": 1, "546": 1, "547": 1, "888": 1, "889": 1, "891": 1}, "36758": {"459": 1}, "37520": {"29": 1, "45": 1, "48": 1, "51": 1, "52": 1, "59": 1, "62": 1, "66": 1}, "37593": {"109": 1, "127": 1, "154": 1, "155": 1, "156": 1, "236": 1, "243": 1, "244": 1, "245": 1, "455": 1, "472": 1, "473": 1, "474": 1, "808": 1, "821": 1, "822": 1, "823": 1, "824": 1, "825": 1, "896": 1, "923": 1, "924": 1, "925": 1, "952": 1, "996": 1, "997": 1, "1113": 1, "1120": 1, "1121": 1, "1122": 1, "1124": 1}, "37976": {"322": 1, "323": 1, "324": 1, "325": 1, "368": 1, "384": 1, "385": 1, "386": 1, "387": 1, "388": 1, "389": 1, "397": 1, "398": 1, "399": 1, "410": 1, "411": 1, "413": 1, "415": 1, "418": 1, "518": 1, "519": 1, "530": 1, "531": 1, "536": 1, "537": 1, "538": 1, "539": 1, "540": 1, "542": 1, "610": 1, "611": 1, "612": 1, "618": 1, "619": 1, "620": 1, "687": 1, "688": 1, "689": 1, "705": 1, "706": 1, "707": 1, "710": 1, "714": 1, "715": 1, "716": 1, "717": 1, "718": 1, "719": 1, "721": 1, "725": 1, "726": 1, "730": 1, "734": 1, "736": 1, "739": 1, "741": 1, "779": 1, "780": 1, "781": 1, "782": 1, "801": 1, "802": 1, "803": 1, "804": 1, "818": 1, "819": 1, "820": 1, "829": 1, "836": 1, "873": 1, "874": 1, "876": 1, "879": 1}, "40458": {"344": 1, "391": 1, "394": 1, "395": 1, "402": 1, "403": 1, "404": 1, "413": 1, "414": 1, "416": 1, "417": 1, "500": 1, "542": 1, "544": 1, "545": 1, "551": 1, "552": 1, "553": 1, "555": 1, "556": 1, "557": 1, "562": 1, "564": 1, "565": 1}, "40629": {"36": 1, "48": 1, "49": 1, "50": 1, "51": 1, "101": 1, "102": 1, "103": 1}, "40633": {"40": 1, "41": 1, "44": 1, "45": 1, "46": 1, "47": 1, "98": 1, "151": 1, "153": 1, "255": 1, "256": 1, "259": 1, "260": 1, "279": 1, "280": 1, "281": 1, "286": 1, "293": 1, "309": 1, "310": 1, "312": 1, "316": 1, "319": 1, "484": 1, "485": 1, "712": 1, "713": 1, "714": 1, "715": 1, "738": 1, "739": 1, "743": 1, "772": 1, "773": 1, "774": 1, "776": 1, "777": 1, "780": 1, "901": 1, "902": 1}, "40926": {"178": 1, "223": 1, "224": 1, "225": 1, "259": 1, "260": 1, "261": 1, "293": 1, "294": 1, "295": 1, "296": 1, "301": 1, "302": 1, "303": 1, "304": 1, "382": 1, "383": 1}, "42295": {"68": 1, "69": 1, "70": 1, "71": 1, "78": 1, "80": 1, "84": 1, "108": 1, "109": 1, "110": 1, "111": 1, "173": 1, "174": 1, "175": 1, "176": 1, "325": 1, "326": 1, "327": 1, "499": 1, "500": 1, "501": 1}, "42543": {"63": 1, "64": 1, "65": 1, "66": 1, "71": 1, "72": 1, "73": 1, "77": 1, "80": 1}, "42563": {"89": 1, "91": 1, "99": 1, "170": 1, "171": 1, "172": 1, "173": 1, "176": 1, "197": 1, "198": 1, "215": 1, "247": 1, "249": 1, "281": 1}, "42664": {"108": 1, "109": 1, "110": 1, "114": 1, "115": 1, "116": 1}, "42683": {"58": 1, "82": 1, "83": 1, "84": 1, "85": 1, "86": 1, "87": 1, "96": 1, "97": 1, "100": 1, "105": 1, "107": 1, "108": 1, "111": 1, "113": 1, "116": 1, "117": 1, "192": 1, "208": 1, "209": 1, "210": 1, "212": 1, "234": 1, "244": 1, "245": 1, "246": 1, "250": 1, "271": 1, "272": 1, "273": 1, "274": 1}, "42797": {"139": 1, "140": 1, "141": 1, "142": 1, "143": 1, "144": 1, "146": 1, "165": 1, "166": 1, "371": 1, "372": 1, "373": 1, "374": 1, "375": 1, "376": 1, "377": 1, "391": 1, "392": 1, "393": 1, "394": 1, "400": 1, "401": 1, "402": 1, "435": 1, "436": 1, "437": 1, "438": 1}, "42912": {"75": 1, "76": 1, "77": 1, "78": 1, "79": 1}, "42935": {"386": 1, "387": 1, "392": 1, "393": 1, "394": 1}, "61018": {"330": 1, "335": 1, "393": 1}, "61019": {"374": 1, "376": 1}, "63744": {"53": 1}};

var filterCounterexample = function (hide) {
  var tables = document.getElementsByClassName("code");
  for (var t=0; t<tables.length; t++) {
    var table = tables[t];
    var file_id = table.getAttribute("data-fileid");
    var lines_in_fid = relevant_lines[file_id];
    if (!lines_in_fid) {
      lines_in_fid = {};
    }
    var lines = table.getElementsByClassName("codeline");
    for (var i=0; i<lines.length; i++) {
        var el = lines[i];
        var lineNo = el.getAttribute("data-linenumber");
        if (!lines_in_fid[lineNo]) {
          if (hide) {
            el.setAttribute("hidden", "");
          } else {
            el.removeAttribute("hidden");
          }
        }
    }
  }
}

window.addEventListener("keydown", function (event) {
  if (event.defaultPrevented) {
    return;
  }
  if (event.key == "S") {
    var checked = document.getElementsByName("showCounterexample")[0].checked;
    filterCounterexample(!checked);
    document.getElementsByName("showCounterexample")[0].checked = !checked;
  } else {
    return;
  }
  event.preventDefault();
}, true);

document.addEventListener("DOMContentLoaded", function() {
    document.querySelector('input[name="showCounterexample"]').onchange=
        function (event) {
      filterCounterexample(this.checked);
    };
});
</script>

<form>
    <input type="checkbox" name="showCounterexample" id="showCounterexample" />
    <label for="showCounterexample">
       Show only relevant lines
    </label>
</form>

<script type='text/javascript'>
var digitMatcher = new RegExp("[0-9]+");

document.addEventListener("DOMContentLoaded", function() {
    document.querySelectorAll(".PathNav > a").forEach(
        function(currentValue, currentIndex) {
            var hrefValue = currentValue.getAttribute("href");
            currentValue.onclick = function() {
                scrollTo(document.querySelector(hrefValue));
                return false;
            };
        });
});

var findNum = function() {
    var s = document.querySelector(".selected");
    if (!s || s.id == "EndPath") {
        return 0;
    }
    var out = parseInt(digitMatcher.exec(s.id)[0]);
    return out;
};

var scrollTo = function(el) {
    document.querySelectorAll(".selected").forEach(function(s) {
        s.classList.remove("selected");
    });
    el.classList.add("selected");
    window.scrollBy(0, el.getBoundingClientRect().top -
        (window.innerHeight / 2));
}

var move = function(num, up, numItems) {
  if (num == 1 && up || num == numItems - 1 && !up) {
    return 0;
  } else if (num == 0 && up) {
    return numItems - 1;
  } else if (num == 0 && !up) {
    return 1 % numItems;
  }
  return up ? num - 1 : num + 1;
}

var numToId = function(num) {
  if (num == 0) {
    return document.getElementById("EndPath")
  }
  return document.getElementById("Path" + num);
};

var navigateTo = function(up) {
  var numItems = document.querySelectorAll(
      ".line > .msgEvent, .line > .msgControl").length;
  var currentSelected = findNum();
  var newSelected = move(currentSelected, up, numItems);
  var newEl = numToId(newSelected, numItems);

  // Scroll element into center.
  scrollTo(newEl);
};

window.addEventListener("keydown", function (event) {
  if (event.defaultPrevented) {
    return;
  }
  if (event.key == "j") {
    navigateTo(/*up=*/false);
  } else if (event.key == "k") {
    navigateTo(/*up=*/true);
  } else {
    return;
  }
  event.preventDefault();
}, true);
</script>
  
<script type='text/javascript'>

var toggleHelp = function() {
    var hint = document.querySelector("#tooltiphint");
    var attributeName = "hidden";
    if (hint.hasAttribute(attributeName)) {
      hint.removeAttribute(attributeName);
    } else {
      hint.setAttribute("hidden", "true");
    }
};
window.addEventListener("keydown", function (event) {
  if (event.defaultPrevented) {
    return;
  }
  if (event.key == "?") {
    toggleHelp();
  } else {
    return;
  }
  event.preventDefault();
});
</script>
<div id=File1>
<h4 class=FileName>/Users/u237002/Dropbox/Hacking/sat/arts/src/absorption.cc</h4>
<div class=FileNav><a href="#File40926">&#x2192;</a></div></div>
<table class="code" data-fileid="1">
<tr class="codeline" data-linenumber="1"><td class="num" id="LN1">1</td><td class="line"><span class='comment'>/* Copyright (C) 2000-2012</span></td></tr>
<tr class="codeline" data-linenumber="2"><td class="num" id="LN2">2</td><td class="line">   <span class='comment'>Stefan Buehler  &lt;sbuehler@ltu.se&gt;</span></td></tr>
<tr class="codeline" data-linenumber="3"><td class="num" id="LN3">3</td><td class="line">   <span class='comment'>Axel von Engeln &lt;engeln@uni-bremen.de&gt;</span></td></tr>
<tr class="codeline" data-linenumber="4"><td class="num" id="LN4">4</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="5"><td class="num" id="LN5">5</td><td class="line">   <span class='comment'>This program is free software; you can redistribute it and/or modify it</span></td></tr>
<tr class="codeline" data-linenumber="6"><td class="num" id="LN6">6</td><td class="line">   <span class='comment'>under the terms of the GNU General Public License as published by the</span></td></tr>
<tr class="codeline" data-linenumber="7"><td class="num" id="LN7">7</td><td class="line">   <span class='comment'>Free Software Foundation; either version 2, or (at your option) any</span></td></tr>
<tr class="codeline" data-linenumber="8"><td class="num" id="LN8">8</td><td class="line">   <span class='comment'>later version.</span></td></tr>
<tr class="codeline" data-linenumber="9"><td class="num" id="LN9">9</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="10"><td class="num" id="LN10">10</td><td class="line">   <span class='comment'>This program is distributed in the hope that it will be useful,</span></td></tr>
<tr class="codeline" data-linenumber="11"><td class="num" id="LN11">11</td><td class="line">   <span class='comment'>but WITHOUT ANY WARRANTY; without even the implied warranty of</span></td></tr>
<tr class="codeline" data-linenumber="12"><td class="num" id="LN12">12</td><td class="line">   <span class='comment'>MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></td></tr>
<tr class="codeline" data-linenumber="13"><td class="num" id="LN13">13</td><td class="line">   <span class='comment'>GNU General Public License for more details.</span></td></tr>
<tr class="codeline" data-linenumber="14"><td class="num" id="LN14">14</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="15"><td class="num" id="LN15">15</td><td class="line">   <span class='comment'>You should have received a copy of the GNU General Public License</span></td></tr>
<tr class="codeline" data-linenumber="16"><td class="num" id="LN16">16</td><td class="line">   <span class='comment'>along with this program; if not, write to the Free Software</span></td></tr>
<tr class="codeline" data-linenumber="17"><td class="num" id="LN17">17</td><td class="line">   <span class='comment'>Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307,</span></td></tr>
<tr class="codeline" data-linenumber="18"><td class="num" id="LN18">18</td><td class="line">   <span class='comment'>USA. */</span></td></tr>
<tr class="codeline" data-linenumber="19"><td class="num" id="LN19">19</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="20"><td class="num" id="LN20">20</td><td class="line"><span class='comment'>/**</span></td></tr>
<tr class="codeline" data-linenumber="21"><td class="num" id="LN21">21</td><td class="line">  <span class='comment'>\file   absorption.cc</span></td></tr>
<tr class="codeline" data-linenumber="22"><td class="num" id="LN22">22</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="23"><td class="num" id="LN23">23</td><td class="line">  <span class='comment'>Physical absorption routines.</span> </td></tr>
<tr class="codeline" data-linenumber="24"><td class="num" id="LN24">24</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="25"><td class="num" id="LN25">25</td><td class="line">  <span class='comment'>The absorption workspace methods are</span></td></tr>
<tr class="codeline" data-linenumber="26"><td class="num" id="LN26">26</td><td class="line">  <span class='comment'>in file m_abs.cc</span></td></tr>
<tr class="codeline" data-linenumber="27"><td class="num" id="LN27">27</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="28"><td class="num" id="LN28">28</td><td class="line">  <span class='comment'>This is the file from arts-1-0, back-ported to arts-1-1.</span></td></tr>
<tr class="codeline" data-linenumber="29"><td class="num" id="LN29">29</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="30"><td class="num" id="LN30">30</td><td class="line">  <span class='comment'>\author Stefan Buehler and Axel von Engeln</span></td></tr>
<tr class="codeline" data-linenumber="31"><td class="num" id="LN31">31</td><td class="line"><span class='comment'>*/</span></td></tr>
<tr class="codeline" data-linenumber="32"><td class="num" id="LN32">32</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="33"><td class="num" id="LN33">33</td><td class="line"><span class='directive'>#include "arts.h"</span></td></tr>
<tr class="codeline" data-linenumber="34"><td class="num" id="LN34">34</td><td class="line"><span class='directive'>#include "auto_md.h"</span></td></tr>
<tr class="codeline" data-linenumber="35"><td class="num" id="LN35">35</td><td class="line"><span class='directive'>#include &lt;map&gt;</span></td></tr>
<tr class="codeline" data-linenumber="36"><td class="num" id="LN36">36</td><td class="line"><span class='directive'>#include &lt;cfloat&gt;</span></td></tr>
<tr class="codeline" data-linenumber="37"><td class="num" id="LN37">37</td><td class="line"><span class='directive'>#include &lt;algorithm&gt;</span></td></tr>
<tr class="codeline" data-linenumber="38"><td class="num" id="LN38">38</td><td class="line"><span class='directive'>#include &lt;cmath&gt;</span></td></tr>
<tr class="codeline" data-linenumber="39"><td class="num" id="LN39">39</td><td class="line"><span class='directive'>#include &lt;cstdlib&gt;</span></td></tr>
<tr class="codeline" data-linenumber="40"><td class="num" id="LN40">40</td><td class="line"><span class='directive'>#include "file.h"</span></td></tr>
<tr class="codeline" data-linenumber="41"><td class="num" id="LN41">41</td><td class="line"><span class='directive'>#include "absorption.h"</span></td></tr>
<tr class="codeline" data-linenumber="42"><td class="num" id="LN42">42</td><td class="line"><span class='directive'>#include "math_funcs.h"</span></td></tr>
<tr class="codeline" data-linenumber="43"><td class="num" id="LN43">43</td><td class="line"><span class='directive'>#include "messages.h"</span></td></tr>
<tr class="codeline" data-linenumber="44"><td class="num" id="LN44">44</td><td class="line"><span class='directive'>#include "logic.h"</span></td></tr>
<tr class="codeline" data-linenumber="45"><td class="num" id="LN45">45</td><td class="line"><span class='directive'>#include "interpolation_poly.h"</span></td></tr>
<tr class="codeline" data-linenumber="46"><td class="num" id="LN46">46</td><td class="line"><span class='directive'>#include "linemixingdata.h"</span></td></tr>
<tr class="codeline" data-linenumber="47"><td class="num" id="LN47">47</td><td class="line"><span class='directive'>#include "linescaling.h"</span></td></tr>
<tr class="codeline" data-linenumber="48"><td class="num" id="LN48">48</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="49"><td class="num" id="LN49">49</td><td class="line"><span class='directive'>#include "global_data.h"</span></td></tr>
<tr class="codeline" data-linenumber="50"><td class="num" id="LN50">50</td><td class="line"><span class='directive'>#include "linefunctions.h"</span></td></tr>
<tr class="codeline" data-linenumber="51"><td class="num" id="LN51">51</td><td class="line"><span class='directive'>#include "partial_derivatives.h"</span></td></tr>
<tr class="codeline" data-linenumber="52"><td class="num" id="LN52">52</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="53"><td class="num" id="LN53">53</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="54"><td class="num" id="LN54">54</td><td class="line"><span class='comment'>/** Mapping of species auxiliary type names to SpeciesAuxData::AuxType enum */</span></td></tr>
<tr class="codeline" data-linenumber="55"><td class="num" id="LN55">55</td><td class="line"><span class='keyword'>static</span> <span class='keyword'>const</span> <span class='keyword'>char</span> *SpeciesAuxTypeNames[] = {</td></tr>
<tr class="codeline" data-linenumber="56"><td class="num" id="LN56">56</td><td class="line">    <span class='string_literal'>"NONE"</span>,</td></tr>
<tr class="codeline" data-linenumber="57"><td class="num" id="LN57">57</td><td class="line">    <span class='string_literal'>"ISORATIO"</span>,   <span class='comment'>//Built-in type</span></td></tr>
<tr class="codeline" data-linenumber="58"><td class="num" id="LN58">58</td><td class="line">    <span class='string_literal'>"ISOQUANTUM"</span>,</td></tr>
<tr class="codeline" data-linenumber="59"><td class="num" id="LN59">59</td><td class="line">    <span class='string_literal'>"PART_TFIELD"</span>,</td></tr>
<tr class="codeline" data-linenumber="60"><td class="num" id="LN60">60</td><td class="line">    <span class='string_literal'>"PART_COEFF"</span>, <span class='comment'>//Built-in type</span></td></tr>
<tr class="codeline" data-linenumber="61"><td class="num" id="LN61">61</td><td class="line">    <span class='string_literal'>"PART_COEFF_VIBROT"</span></td></tr>
<tr class="codeline" data-linenumber="62"><td class="num" id="LN62">62</td><td class="line">};</td></tr>
<tr class="codeline" data-linenumber="63"><td class="num" id="LN63">63</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="64"><td class="num" id="LN64">64</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="65"><td class="num" id="LN65">65</td><td class="line"><span class='comment'>// member fct of isotopologuerecord, calculates the partition fct at the</span></td></tr>
<tr class="codeline" data-linenumber="66"><td class="num" id="LN66">66</td><td class="line"><span class='comment'>// given temperature  from the partition fct coefficients (3rd order</span></td></tr>
<tr class="codeline" data-linenumber="67"><td class="num" id="LN67">67</td><td class="line"><span class='comment'>// polynomial in temperature)</span></td></tr>
<tr class="codeline" data-linenumber="68"><td class="num" id="LN68">68</td><td class="line">Numeric IsotopologueRecord::CalculatePartitionFctAtTempFromCoeff_OldUnused( Numeric</td></tr>
<tr class="codeline" data-linenumber="69"><td class="num" id="LN69">69</td><td class="line">                                                    temperature ) <span class='keyword'>const</span></td></tr>
<tr class="codeline" data-linenumber="70"><td class="num" id="LN70">70</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="71"><td class="num" id="LN71">71</td><td class="line">  Numeric result = 0.;</td></tr>
<tr class="codeline" data-linenumber="72"><td class="num" id="LN72">72</td><td class="line">  Numeric exponent = 1.;</td></tr>
<tr class="codeline" data-linenumber="73"><td class="num" id="LN73">73</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="74"><td class="num" id="LN74">74</td><td class="line">  Vector::const_iterator it;</td></tr>
<tr class="codeline" data-linenumber="75"><td class="num" id="LN75">75</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="76"><td class="num" id="LN76">76</td><td class="line"><span class='comment'>//      cout &lt;&lt; "T: " &lt;&lt; temperature &lt;&lt; "\n";</span></td></tr>
<tr class="codeline" data-linenumber="77"><td class="num" id="LN77">77</td><td class="line">  <span class='keyword'>for</span> (it=mqcoeff.begin(); it != mqcoeff.end(); ++it)</td></tr>
<tr class="codeline" data-linenumber="78"><td class="num" id="LN78">78</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="79"><td class="num" id="LN79">79</td><td class="line">      result += *it * exponent;</td></tr>
<tr class="codeline" data-linenumber="80"><td class="num" id="LN80">80</td><td class="line">      exponent *= temperature;</td></tr>
<tr class="codeline" data-linenumber="81"><td class="num" id="LN81">81</td><td class="line"><span class='comment'>//      cout &lt;&lt; "it: " &lt;&lt; it &lt;&lt; "\n";</span></td></tr>
<tr class="codeline" data-linenumber="82"><td class="num" id="LN82">82</td><td class="line"><span class='comment'>//      cout &lt;&lt; "res: " &lt;&lt; result &lt;&lt; ", exp: " &lt;&lt; exponent &lt;&lt; "\n";</span></td></tr>
<tr class="codeline" data-linenumber="83"><td class="num" id="LN83">83</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="84"><td class="num" id="LN84">84</td><td class="line">  <span class='keyword'>return</span> result;</td></tr>
<tr class="codeline" data-linenumber="85"><td class="num" id="LN85">85</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="86"><td class="num" id="LN86">86</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="87"><td class="num" id="LN87">87</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="88"><td class="num" id="LN88">88</td><td class="line"><span class='comment'>// member fct of isotopologuerecord, calculates the partition fct at the</span></td></tr>
<tr class="codeline" data-linenumber="89"><td class="num" id="LN89">89</td><td class="line"><span class='comment'>// given temperature  from the partition fct coefficients (3rd order</span></td></tr>
<tr class="codeline" data-linenumber="90"><td class="num" id="LN90">90</td><td class="line"><span class='comment'>// polynomial in temperature)</span></td></tr>
<tr class="codeline" data-linenumber="91"><td class="num" id="LN91">91</td><td class="line">Numeric IsotopologueRecord::CalculatePartitionFctAtTempFromData_OldUnused( Numeric</td></tr>
<tr class="codeline" data-linenumber="92"><td class="num" id="LN92">92</td><td class="line">temperature ) <span class='keyword'>const</span></td></tr>
<tr class="codeline" data-linenumber="93"><td class="num" id="LN93">93</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="94"><td class="num" id="LN94">94</td><td class="line">    GridPosPoly gp;</td></tr>
<tr class="codeline" data-linenumber="95"><td class="num" id="LN95">95</td><td class="line">    gridpos_poly( gp, mqcoeffgrid, temperature, mqcoeffinterporder);</td></tr>
<tr class="codeline" data-linenumber="96"><td class="num" id="LN96">96</td><td class="line">    Vector itw;</td></tr>
<tr class="codeline" data-linenumber="97"><td class="num" id="LN97">97</td><td class="line">    interpweights(itw, gp );</td></tr>
<tr class="codeline" data-linenumber="98"><td class="num" id="LN98">98</td><td class="line">    <span class='keyword'>return</span> interp(  itw, mqcoeff, gp );</td></tr>
<tr class="codeline" data-linenumber="99"><td class="num" id="LN99">99</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="100"><td class="num" id="LN100">100</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="101"><td class="num" id="LN101">101</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="102"><td class="num" id="LN102">102</td><td class="line"><span class='keyword'>void</span> SpeciesAuxData::InitFromSpeciesData()</td></tr>
<tr class="codeline" data-linenumber="103"><td class="num" id="LN103">103</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="104"><td class="num" id="LN104">104</td><td class="line">    <span class='keyword'>using</span> global_data::species_data;</td></tr>
<tr class="codeline" data-linenumber="105"><td class="num" id="LN105">105</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="106"><td class="num" id="LN106">106</td><td class="line">    mparams.resize(species_data.nelem());</td></tr>
<tr class="codeline" data-linenumber="107"><td class="num" id="LN107">107</td><td class="line">    mparam_type.resize(species_data.nelem());</td></tr>
<tr class="codeline" data-linenumber="108"><td class="num" id="LN108">108</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="109"><td class="num" id="LN109">109</td><td class="line">    <span class='keyword'>for</span> (Index isp = 0; isp &lt; species_data.nelem(); isp++)</td></tr>
<tr class="codeline" data-linenumber="110"><td class="num" id="LN110">110</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="111"><td class="num" id="LN111">111</td><td class="line">        <span class='keyword'>const</span> Index niso = species_data[isp].Isotopologue().nelem();</td></tr>
<tr class="codeline" data-linenumber="112"><td class="num" id="LN112">112</td><td class="line">        mparams[isp].resize(niso);</td></tr>
<tr class="codeline" data-linenumber="113"><td class="num" id="LN113">113</td><td class="line">        mparam_type[isp].resize(niso);</td></tr>
<tr class="codeline" data-linenumber="114"><td class="num" id="LN114">114</td><td class="line">        <span class='keyword'>for</span> (Index iso = 0; iso &lt; niso; iso++)</td></tr>
<tr class="codeline" data-linenumber="115"><td class="num" id="LN115">115</td><td class="line">        {</td></tr>
<tr class="codeline" data-linenumber="116"><td class="num" id="LN116">116</td><td class="line">            mparams[isp][iso].resize(0);</td></tr>
<tr class="codeline" data-linenumber="117"><td class="num" id="LN117">117</td><td class="line">            mparam_type[isp][iso] = SpeciesAuxData::AT_NONE;</td></tr>
<tr class="codeline" data-linenumber="118"><td class="num" id="LN118">118</td><td class="line">        }</td></tr>
<tr class="codeline" data-linenumber="119"><td class="num" id="LN119">119</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="120"><td class="num" id="LN120">120</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="121"><td class="num" id="LN121">121</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="122"><td class="num" id="LN122">122</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="123"><td class="num" id="LN123">123</td><td class="line"><span class='keyword'>void</span> SpeciesAuxData::setParam(<span class='keyword'>const</span> Index species,</td></tr>
<tr class="codeline" data-linenumber="124"><td class="num" id="LN124">124</td><td class="line">                              <span class='keyword'>const</span> Index isotopologue,</td></tr>
<tr class="codeline" data-linenumber="125"><td class="num" id="LN125">125</td><td class="line">                              <span class='keyword'>const</span> AuxType auxtype,</td></tr>
<tr class="codeline" data-linenumber="126"><td class="num" id="LN126">126</td><td class="line">                              <span class='keyword'>const</span> ArrayOfGriddedField1&amp; auxdata)</td></tr>
<tr class="codeline" data-linenumber="127"><td class="num" id="LN127">127</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="128"><td class="num" id="LN128">128</td><td class="line">    mparam_type[species][isotopologue] = auxtype;</td></tr>
<tr class="codeline" data-linenumber="129"><td class="num" id="LN129">129</td><td class="line">    mparams[species][isotopologue] = auxdata;</td></tr>
<tr class="codeline" data-linenumber="130"><td class="num" id="LN130">130</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="131"><td class="num" id="LN131">131</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="132"><td class="num" id="LN132">132</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="133"><td class="num" id="LN133">133</td><td class="line"><span class='keyword'>void</span> SpeciesAuxData::setParam(<span class='keyword'>const</span> String&amp; artstag,</td></tr>
<tr class="codeline" data-linenumber="134"><td class="num" id="LN134">134</td><td class="line">                              <span class='keyword'>const</span> String&amp; auxtype,</td></tr>
<tr class="codeline" data-linenumber="135"><td class="num" id="LN135">135</td><td class="line">                              <span class='keyword'>const</span> ArrayOfGriddedField1&amp; auxdata)</td></tr>
<tr class="codeline" data-linenumber="136"><td class="num" id="LN136">136</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="137"><td class="num" id="LN137">137</td><td class="line">    <span class='comment'>// Global species lookup data:</span></td></tr>
<tr class="codeline" data-linenumber="138"><td class="num" id="LN138">138</td><td class="line">    <span class='keyword'>using</span> global_data::species_data;</td></tr>
<tr class="codeline" data-linenumber="139"><td class="num" id="LN139">139</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="140"><td class="num" id="LN140">140</td><td class="line">    <span class='comment'>// We need a species index sorted by Arts identifier. Keep this in a</span></td></tr>
<tr class="codeline" data-linenumber="141"><td class="num" id="LN141">141</td><td class="line">    <span class='comment'>// static variable, so that we have to do this only once.  The ARTS</span></td></tr>
<tr class="codeline" data-linenumber="142"><td class="num" id="LN142">142</td><td class="line">    <span class='comment'>// species index is ArtsMap[&lt;Arts String&gt;].</span></td></tr>
<tr class="codeline" data-linenumber="143"><td class="num" id="LN143">143</td><td class="line">    <span class='keyword'>static</span> map&lt;String, SpecIsoMap&gt; ArtsMap;</td></tr>
<tr class="codeline" data-linenumber="144"><td class="num" id="LN144">144</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="145"><td class="num" id="LN145">145</td><td class="line">    <span class='comment'>// Remember if this stuff has already been initialized:</span></td></tr>
<tr class="codeline" data-linenumber="146"><td class="num" id="LN146">146</td><td class="line">    <span class='keyword'>static</span> <span class='keyword'>bool</span> hinit = <span class='keyword'>false</span>;</td></tr>
<tr class="codeline" data-linenumber="147"><td class="num" id="LN147">147</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="148"><td class="num" id="LN148">148</td><td class="line">    <span class='keyword'>if</span> ( !hinit )</td></tr>
<tr class="codeline" data-linenumber="149"><td class="num" id="LN149">149</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="150"><td class="num" id="LN150">150</td><td class="line">        <span class='keyword'>for</span> ( Index i=0; i&lt;species_data.nelem(); ++i )</td></tr>
<tr class="codeline" data-linenumber="151"><td class="num" id="LN151">151</td><td class="line">        {</td></tr>
<tr class="codeline" data-linenumber="152"><td class="num" id="LN152">152</td><td class="line">            <span class='keyword'>const</span> SpeciesRecord&amp; sr = species_data[i];</td></tr>
<tr class="codeline" data-linenumber="153"><td class="num" id="LN153">153</td><td class="line">            <span class='keyword'>for</span> ( Index j=0; j&lt;sr.Isotopologue().nelem(); ++j)</td></tr>
<tr class="codeline" data-linenumber="154"><td class="num" id="LN154">154</td><td class="line">            {</td></tr>
<tr class="codeline" data-linenumber="155"><td class="num" id="LN155">155</td><td class="line">                SpecIsoMap indicies(i,j);</td></tr>
<tr class="codeline" data-linenumber="156"><td class="num" id="LN156">156</td><td class="line">                String buf = sr.Name()+<span class='string_literal'>"-"</span>+sr.Isotopologue()[j].Name();</td></tr>
<tr class="codeline" data-linenumber="157"><td class="num" id="LN157">157</td><td class="line">                ArtsMap[buf] = indicies;</td></tr>
<tr class="codeline" data-linenumber="158"><td class="num" id="LN158">158</td><td class="line">            }</td></tr>
<tr class="codeline" data-linenumber="159"><td class="num" id="LN159">159</td><td class="line">        }</td></tr>
<tr class="codeline" data-linenumber="160"><td class="num" id="LN160">160</td><td class="line">        hinit = <span class='keyword'>true</span>;</td></tr>
<tr class="codeline" data-linenumber="161"><td class="num" id="LN161">161</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="162"><td class="num" id="LN162">162</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="163"><td class="num" id="LN163">163</td><td class="line">    Index species;</td></tr>
<tr class="codeline" data-linenumber="164"><td class="num" id="LN164">164</td><td class="line">    Index isotopologue;</td></tr>
<tr class="codeline" data-linenumber="165"><td class="num" id="LN165">165</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="166"><td class="num" id="LN166">166</td><td class="line">    <span class='comment'>// ok, now for the cool index map:</span></td></tr>
<tr class="codeline" data-linenumber="167"><td class="num" id="LN167">167</td><td class="line">    <span class='comment'>// is this arts identifier valid?</span></td></tr>
<tr class="codeline" data-linenumber="168"><td class="num" id="LN168">168</td><td class="line">    <span class='keyword'>const</span> map&lt;String, SpecIsoMap&gt;::const_iterator i = ArtsMap.find(artstag);</td></tr>
<tr class="codeline" data-linenumber="169"><td class="num" id="LN169">169</td><td class="line">    <span class='keyword'>if</span> ( i == ArtsMap.end() )</td></tr>
<tr class="codeline" data-linenumber="170"><td class="num" id="LN170">170</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="171"><td class="num" id="LN171">171</td><td class="line">        ostringstream os;</td></tr>
<tr class="codeline" data-linenumber="172"><td class="num" id="LN172">172</td><td class="line">        os &lt;&lt; <span class='string_literal'>"ARTS Tag: "</span> &lt;&lt; artstag &lt;&lt; <span class='string_literal'>" is unknown."</span>;</td></tr>
<tr class="codeline" data-linenumber="173"><td class="num" id="LN173">173</td><td class="line">        <span class='keyword'>throw</span> runtime_error(os.str());</td></tr>
<tr class="codeline" data-linenumber="174"><td class="num" id="LN174">174</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="175"><td class="num" id="LN175">175</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="176"><td class="num" id="LN176">176</td><td class="line">    SpecIsoMap id = i-&gt;second;</td></tr>
<tr class="codeline" data-linenumber="177"><td class="num" id="LN177">177</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="178"><td class="num" id="LN178">178</td><td class="line">    <span class='comment'>// Set mspecies:</span></td></tr>
<tr class="codeline" data-linenumber="179"><td class="num" id="LN179">179</td><td class="line">    species = id.Speciesindex();</td></tr>
<tr class="codeline" data-linenumber="180"><td class="num" id="LN180">180</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="181"><td class="num" id="LN181">181</td><td class="line">    <span class='comment'>// Set misotopologue:</span></td></tr>
<tr class="codeline" data-linenumber="182"><td class="num" id="LN182">182</td><td class="line">    isotopologue = id.Isotopologueindex();</td></tr>
<tr class="codeline" data-linenumber="183"><td class="num" id="LN183">183</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="184"><td class="num" id="LN184">184</td><td class="line">    Index this_auxtype = 0;</td></tr>
<tr class="codeline" data-linenumber="185"><td class="num" id="LN185">185</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="186"><td class="num" id="LN186">186</td><td class="line">    <span class='keyword'>while</span> (this_auxtype &lt; AT_FINAL_ENTRY &amp;&amp; auxtype != SpeciesAuxTypeNames[this_auxtype])</td></tr>
<tr class="codeline" data-linenumber="187"><td class="num" id="LN187">187</td><td class="line">        this_auxtype++;</td></tr>
<tr class="codeline" data-linenumber="188"><td class="num" id="LN188">188</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="189"><td class="num" id="LN189">189</td><td class="line">    <span class='keyword'>if</span> (this_auxtype != AT_FINAL_ENTRY)</td></tr>
<tr class="codeline" data-linenumber="190"><td class="num" id="LN190">190</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="191"><td class="num" id="LN191">191</td><td class="line">        setParam(species, isotopologue, (AuxType)this_auxtype, auxdata);</td></tr>
<tr class="codeline" data-linenumber="192"><td class="num" id="LN192">192</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="193"><td class="num" id="LN193">193</td><td class="line">    <span class='keyword'>else</span></td></tr>
<tr class="codeline" data-linenumber="194"><td class="num" id="LN194">194</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="195"><td class="num" id="LN195">195</td><td class="line">        ostringstream os;</td></tr>
<tr class="codeline" data-linenumber="196"><td class="num" id="LN196">196</td><td class="line">        os &lt;&lt; <span class='string_literal'>"Unknown SpeciesAuxData type: "</span> &lt;&lt; auxtype;</td></tr>
<tr class="codeline" data-linenumber="197"><td class="num" id="LN197">197</td><td class="line">        std::runtime_error(os.str());</td></tr>
<tr class="codeline" data-linenumber="198"><td class="num" id="LN198">198</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="199"><td class="num" id="LN199">199</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="200"><td class="num" id="LN200">200</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="201"><td class="num" id="LN201">201</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="202"><td class="num" id="LN202">202</td><td class="line"><span class='keyword'>const</span> ArrayOfGriddedField1&amp; SpeciesAuxData::getParam(<span class='keyword'>const</span> Index species,</td></tr>
<tr class="codeline" data-linenumber="203"><td class="num" id="LN203">203</td><td class="line">                                                     <span class='keyword'>const</span> Index isotopologue) <span class='keyword'>const</span></td></tr>
<tr class="codeline" data-linenumber="204"><td class="num" id="LN204">204</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="205"><td class="num" id="LN205">205</td><td class="line">    <span class='keyword'>return</span> mparams[species][isotopologue];</td></tr>
<tr class="codeline" data-linenumber="206"><td class="num" id="LN206">206</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="207"><td class="num" id="LN207">207</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="208"><td class="num" id="LN208">208</td><td class="line">Numeric SpeciesAuxData::getIsotopologueRatio(<span class='keyword'>const</span> SpeciesTag&amp; st) <span class='keyword'>const</span></td></tr>
<tr class="codeline" data-linenumber="209"><td class="num" id="LN209">209</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="210"><td class="num" id="LN210">210</td><td class="line">  Numeric val=1.0;</td></tr>
<tr class="codeline" data-linenumber="211"><td class="num" id="LN211">211</td><td class="line">  <span class='keyword'>if</span>(st.Isotopologue() &gt; -1)</td></tr>
<tr class="codeline" data-linenumber="212"><td class="num" id="LN212">212</td><td class="line">    val = getParam(st.Species(), st.Isotopologue())[0].data[0];</td></tr>
<tr class="codeline" data-linenumber="213"><td class="num" id="LN213">213</td><td class="line">  <span class='keyword'>return</span> val;</td></tr>
<tr class="codeline" data-linenumber="214"><td class="num" id="LN214">214</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="215"><td class="num" id="LN215">215</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="216"><td class="num" id="LN216">216</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="217"><td class="num" id="LN217">217</td><td class="line">String SpeciesAuxData::getTypeString(<span class='keyword'>const</span> Index species, <span class='keyword'>const</span> Index isotopologue) <span class='keyword'>const</span></td></tr>
<tr class="codeline" data-linenumber="218"><td class="num" id="LN218">218</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="219"><td class="num" id="LN219">219</td><td class="line">    <span class='macro'>assert(mparam_type[species][isotopologue] &lt; AT_FINAL_ENTRY)<span class='expansion'>(__builtin_expect(!(mparam_type[species][isotopologue] &lt; AT_FINAL_ENTRY<br>), 0) ? __assert_rtn(__func__, "/Users/u237002/Dropbox/Hacking/sat/arts/src/absorption.cc"<br>, 219, "mparam_type[species][isotopologue] &lt; AT_FINAL_ENTRY"<br>) : (void)0)</span></span>;</td></tr>
<tr class="codeline" data-linenumber="220"><td class="num" id="LN220">220</td><td class="line">    <span class='keyword'>return</span> SpeciesAuxTypeNames[mparam_type[species][isotopologue]];</td></tr>
<tr class="codeline" data-linenumber="221"><td class="num" id="LN221">221</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="222"><td class="num" id="LN222">222</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="223"><td class="num" id="LN223">223</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="224"><td class="num" id="LN224">224</td><td class="line"><span class='keyword'>bool</span> SpeciesAuxData::ReadFromStream(String&amp; artsid, istream&amp; is, Index nparams, <span class='keyword'>const</span> Verbosity&amp; verbosity)</td></tr>
<tr class="codeline" data-linenumber="225"><td class="num" id="LN225">225</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="226"><td class="num" id="LN226">226</td><td class="line">    <span class='macro'>CREATE_OUT3<span class='expansion'>ArtsOut3 out3(verbosity)</span></span>;</td></tr>
<tr class="codeline" data-linenumber="227"><td class="num" id="LN227">227</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="228"><td class="num" id="LN228">228</td><td class="line">    <span class='comment'>// Global species lookup data:</span></td></tr>
<tr class="codeline" data-linenumber="229"><td class="num" id="LN229">229</td><td class="line">    <span class='keyword'>using</span> global_data::species_data;</td></tr>
<tr class="codeline" data-linenumber="230"><td class="num" id="LN230">230</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="231"><td class="num" id="LN231">231</td><td class="line">    <span class='comment'>// We need a species index sorted by Arts identifier. Keep this in a</span></td></tr>
<tr class="codeline" data-linenumber="232"><td class="num" id="LN232">232</td><td class="line">    <span class='comment'>// static variable, so that we have to do this only once.  The ARTS</span></td></tr>
<tr class="codeline" data-linenumber="233"><td class="num" id="LN233">233</td><td class="line">    <span class='comment'>// species index is ArtsMap[&lt;Arts String&gt;].</span></td></tr>
<tr class="codeline" data-linenumber="234"><td class="num" id="LN234">234</td><td class="line">    <span class='keyword'>static</span> map&lt;String, SpecIsoMap&gt; ArtsMap;</td></tr>
<tr class="codeline" data-linenumber="235"><td class="num" id="LN235">235</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="236"><td class="num" id="LN236">236</td><td class="line">    <span class='comment'>// Remember if this stuff has already been initialized:</span></td></tr>
<tr class="codeline" data-linenumber="237"><td class="num" id="LN237">237</td><td class="line">    <span class='keyword'>static</span> <span class='keyword'>bool</span> hinit = <span class='keyword'>false</span>;</td></tr>
<tr class="codeline" data-linenumber="238"><td class="num" id="LN238">238</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="239"><td class="num" id="LN239">239</td><td class="line">    <span class='keyword'>if</span> ( !hinit )</td></tr>
<tr class="codeline" data-linenumber="240"><td class="num" id="LN240">240</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="241"><td class="num" id="LN241">241</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="242"><td class="num" id="LN242">242</td><td class="line">        out3 &lt;&lt; <span class='string_literal'>"  ARTS index table:\n"</span>;</td></tr>
<tr class="codeline" data-linenumber="243"><td class="num" id="LN243">243</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="244"><td class="num" id="LN244">244</td><td class="line">        <span class='keyword'>for</span> ( Index i=0; i&lt;species_data.nelem(); ++i )</td></tr>
<tr class="codeline" data-linenumber="245"><td class="num" id="LN245">245</td><td class="line">        {</td></tr>
<tr class="codeline" data-linenumber="246"><td class="num" id="LN246">246</td><td class="line">            <span class='keyword'>const</span> SpeciesRecord&amp; sr = species_data[i];</td></tr>
<tr class="codeline" data-linenumber="247"><td class="num" id="LN247">247</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="248"><td class="num" id="LN248">248</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="249"><td class="num" id="LN249">249</td><td class="line">            <span class='keyword'>for</span> ( Index j=0; j&lt;sr.Isotopologue().nelem(); ++j)</td></tr>
<tr class="codeline" data-linenumber="250"><td class="num" id="LN250">250</td><td class="line">            {</td></tr>
<tr class="codeline" data-linenumber="251"><td class="num" id="LN251">251</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="252"><td class="num" id="LN252">252</td><td class="line">                SpecIsoMap indicies(i,j);</td></tr>
<tr class="codeline" data-linenumber="253"><td class="num" id="LN253">253</td><td class="line">                String buf = sr.Name()+<span class='string_literal'>"-"</span>+sr.Isotopologue()[j].Name();</td></tr>
<tr class="codeline" data-linenumber="254"><td class="num" id="LN254">254</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="255"><td class="num" id="LN255">255</td><td class="line">                ArtsMap[buf] = indicies;</td></tr>
<tr class="codeline" data-linenumber="256"><td class="num" id="LN256">256</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="257"><td class="num" id="LN257">257</td><td class="line">                <span class='comment'>// Print the generated data structures (for debugging):</span></td></tr>
<tr class="codeline" data-linenumber="258"><td class="num" id="LN258">258</td><td class="line">                <span class='comment'>// The explicit conversion of Name to a c-String is</span></td></tr>
<tr class="codeline" data-linenumber="259"><td class="num" id="LN259">259</td><td class="line">                <span class='comment'>// necessary, because setw does not work correctly for</span></td></tr>
<tr class="codeline" data-linenumber="260"><td class="num" id="LN260">260</td><td class="line">                <span class='comment'>// stl Strings.</span></td></tr>
<tr class="codeline" data-linenumber="261"><td class="num" id="LN261">261</td><td class="line">                <span class='keyword'>const</span> Index&amp; i1 = ArtsMap[buf].Speciesindex();</td></tr>
<tr class="codeline" data-linenumber="262"><td class="num" id="LN262">262</td><td class="line">                <span class='keyword'>const</span> Index&amp; i2 = ArtsMap[buf].Isotopologueindex();</td></tr>
<tr class="codeline" data-linenumber="263"><td class="num" id="LN263">263</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="264"><td class="num" id="LN264">264</td><td class="line">                out3 &lt;&lt; <span class='string_literal'>"  Arts Identifier = "</span> &lt;&lt; buf &lt;&lt; <span class='string_literal'>"   Species = "</span></td></tr>
<tr class="codeline" data-linenumber="265"><td class="num" id="LN265">265</td><td class="line">                &lt;&lt; setw(10) &lt;&lt; setiosflags(ios::left)</td></tr>
<tr class="codeline" data-linenumber="266"><td class="num" id="LN266">266</td><td class="line">                &lt;&lt; species_data[i1].Name().c_str()</td></tr>
<tr class="codeline" data-linenumber="267"><td class="num" id="LN267">267</td><td class="line">                &lt;&lt; <span class='string_literal'>"iso = "</span></td></tr>
<tr class="codeline" data-linenumber="268"><td class="num" id="LN268">268</td><td class="line">                &lt;&lt; species_data[i1].Isotopologue()[i2].Name().c_str()</td></tr>
<tr class="codeline" data-linenumber="269"><td class="num" id="LN269">269</td><td class="line">                &lt;&lt; <span class='string_literal'>"\n"</span>;</td></tr>
<tr class="codeline" data-linenumber="270"><td class="num" id="LN270">270</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="271"><td class="num" id="LN271">271</td><td class="line">            }</td></tr>
<tr class="codeline" data-linenumber="272"><td class="num" id="LN272">272</td><td class="line">        }</td></tr>
<tr class="codeline" data-linenumber="273"><td class="num" id="LN273">273</td><td class="line">        hinit = <span class='keyword'>true</span>;</td></tr>
<tr class="codeline" data-linenumber="274"><td class="num" id="LN274">274</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="275"><td class="num" id="LN275">275</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="276"><td class="num" id="LN276">276</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="277"><td class="num" id="LN277">277</td><td class="line">    <span class='comment'>// This always contains the rest of the line to parse. At the</span></td></tr>
<tr class="codeline" data-linenumber="278"><td class="num" id="LN278">278</td><td class="line">    <span class='comment'>// beginning the entire line. Line gets shorter and shorter as we</span></td></tr>
<tr class="codeline" data-linenumber="279"><td class="num" id="LN279">279</td><td class="line">    <span class='comment'>// continue to extract stuff from the beginning.</span></td></tr>
<tr class="codeline" data-linenumber="280"><td class="num" id="LN280">280</td><td class="line">    String line;</td></tr>
<tr class="codeline" data-linenumber="281"><td class="num" id="LN281">281</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="282"><td class="num" id="LN282">282</td><td class="line">    <span class='comment'>// Look for more comments?</span></td></tr>
<tr class="codeline" data-linenumber="283"><td class="num" id="LN283">283</td><td class="line">    <span class='keyword'>bool</span> comment = <span class='keyword'>true</span>;</td></tr>
<tr class="codeline" data-linenumber="284"><td class="num" id="LN284">284</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="285"><td class="num" id="LN285">285</td><td class="line">    <span class='keyword'>while</span> (comment)</td></tr>
<tr class="codeline" data-linenumber="286"><td class="num" id="LN286">286</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="287"><td class="num" id="LN287">287</td><td class="line">        <span class='comment'>// Return true if eof is reached:</span></td></tr>
<tr class="codeline" data-linenumber="288"><td class="num" id="LN288">288</td><td class="line">        <span class='keyword'>if</span> (is.eof()) <span class='keyword'>return</span> <span class='keyword'>true</span>;</td></tr>
<tr class="codeline" data-linenumber="289"><td class="num" id="LN289">289</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="290"><td class="num" id="LN290">290</td><td class="line">        <span class='comment'>// Throw runtime_error if stream is bad:</span></td></tr>
<tr class="codeline" data-linenumber="291"><td class="num" id="LN291">291</td><td class="line">        <span class='keyword'>if</span> (!is) <span class='keyword'>throw</span> runtime_error (<span class='string_literal'>"Stream bad."</span>);</td></tr>
<tr class="codeline" data-linenumber="292"><td class="num" id="LN292">292</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="293"><td class="num" id="LN293">293</td><td class="line">        <span class='comment'>// Read line from file into linebuffer:</span></td></tr>
<tr class="codeline" data-linenumber="294"><td class="num" id="LN294">294</td><td class="line">        getline(is,line);</td></tr>
<tr class="codeline" data-linenumber="295"><td class="num" id="LN295">295</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="296"><td class="num" id="LN296">296</td><td class="line">        <span class='comment'>// It is possible that we were exactly at the end of the file before</span></td></tr>
<tr class="codeline" data-linenumber="297"><td class="num" id="LN297">297</td><td class="line">        <span class='comment'>// calling getline. In that case the previous eof() was still false</span></td></tr>
<tr class="codeline" data-linenumber="298"><td class="num" id="LN298">298</td><td class="line">        <span class='comment'>// because eof() evaluates only to true if one tries to read after the</span></td></tr>
<tr class="codeline" data-linenumber="299"><td class="num" id="LN299">299</td><td class="line">        <span class='comment'>// end of the file. The following check catches this.</span></td></tr>
<tr class="codeline" data-linenumber="300"><td class="num" id="LN300">300</td><td class="line">        <span class='keyword'>if</span> (line.nelem() == 0 &amp;&amp; is.eof()) <span class='keyword'>return</span> <span class='keyword'>true</span>;</td></tr>
<tr class="codeline" data-linenumber="301"><td class="num" id="LN301">301</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="302"><td class="num" id="LN302">302</td><td class="line">        <span class='comment'>// @ as first character marks catalogue entry</span></td></tr>
<tr class="codeline" data-linenumber="303"><td class="num" id="LN303">303</td><td class="line">        <span class='keyword'>char</span> c;</td></tr>
<tr class="codeline" data-linenumber="304"><td class="num" id="LN304">304</td><td class="line">        extract(c,line,1);</td></tr>
<tr class="codeline" data-linenumber="305"><td class="num" id="LN305">305</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="306"><td class="num" id="LN306">306</td><td class="line">        <span class='comment'>// check for empty line</span></td></tr>
<tr class="codeline" data-linenumber="307"><td class="num" id="LN307">307</td><td class="line">        <span class='keyword'>if</span> (c == '@')</td></tr>
<tr class="codeline" data-linenumber="308"><td class="num" id="LN308">308</td><td class="line">        {</td></tr>
<tr class="codeline" data-linenumber="309"><td class="num" id="LN309">309</td><td class="line">            comment = <span class='keyword'>false</span>;</td></tr>
<tr class="codeline" data-linenumber="310"><td class="num" id="LN310">310</td><td class="line">        }</td></tr>
<tr class="codeline" data-linenumber="311"><td class="num" id="LN311">311</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="312"><td class="num" id="LN312">312</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="313"><td class="num" id="LN313">313</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="314"><td class="num" id="LN314">314</td><td class="line">    <span class='comment'>// read the arts identifier String</span></td></tr>
<tr class="codeline" data-linenumber="315"><td class="num" id="LN315">315</td><td class="line">    istringstream icecream(line);</td></tr>
<tr class="codeline" data-linenumber="316"><td class="num" id="LN316">316</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="317"><td class="num" id="LN317">317</td><td class="line">    icecream &gt;&gt; artsid;</td></tr>
<tr class="codeline" data-linenumber="318"><td class="num" id="LN318">318</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="319"><td class="num" id="LN319">319</td><td class="line">    <span class='keyword'>if</span> (artsid.length() != 0)</td></tr>
<tr class="codeline" data-linenumber="320"><td class="num" id="LN320">320</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="321"><td class="num" id="LN321">321</td><td class="line">        Index mspecies;</td></tr>
<tr class="codeline" data-linenumber="322"><td class="num" id="LN322">322</td><td class="line">        Index misotopologue;</td></tr>
<tr class="codeline" data-linenumber="323"><td class="num" id="LN323">323</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="324"><td class="num" id="LN324">324</td><td class="line">        <span class='comment'>// ok, now for the cool index map:</span></td></tr>
<tr class="codeline" data-linenumber="325"><td class="num" id="LN325">325</td><td class="line">        <span class='comment'>// is this arts identifier valid?</span></td></tr>
<tr class="codeline" data-linenumber="326"><td class="num" id="LN326">326</td><td class="line">        <span class='keyword'>const</span> map&lt;String, SpecIsoMap&gt;::const_iterator i = ArtsMap.find(artsid);</td></tr>
<tr class="codeline" data-linenumber="327"><td class="num" id="LN327">327</td><td class="line">        <span class='keyword'>if</span> ( i == ArtsMap.end() )</td></tr>
<tr class="codeline" data-linenumber="328"><td class="num" id="LN328">328</td><td class="line">        {</td></tr>
<tr class="codeline" data-linenumber="329"><td class="num" id="LN329">329</td><td class="line">            ostringstream os;</td></tr>
<tr class="codeline" data-linenumber="330"><td class="num" id="LN330">330</td><td class="line">            os &lt;&lt; <span class='string_literal'>"ARTS Tag: "</span> &lt;&lt; artsid &lt;&lt; <span class='string_literal'>" is unknown."</span>;</td></tr>
<tr class="codeline" data-linenumber="331"><td class="num" id="LN331">331</td><td class="line">            <span class='keyword'>throw</span> runtime_error(os.str());</td></tr>
<tr class="codeline" data-linenumber="332"><td class="num" id="LN332">332</td><td class="line">        }</td></tr>
<tr class="codeline" data-linenumber="333"><td class="num" id="LN333">333</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="334"><td class="num" id="LN334">334</td><td class="line">        SpecIsoMap id = i-&gt;second;</td></tr>
<tr class="codeline" data-linenumber="335"><td class="num" id="LN335">335</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="336"><td class="num" id="LN336">336</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="337"><td class="num" id="LN337">337</td><td class="line">        <span class='comment'>// Set mspecies:</span></td></tr>
<tr class="codeline" data-linenumber="338"><td class="num" id="LN338">338</td><td class="line">        mspecies = id.Speciesindex();</td></tr>
<tr class="codeline" data-linenumber="339"><td class="num" id="LN339">339</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="340"><td class="num" id="LN340">340</td><td class="line">        <span class='comment'>// Set misotopologue:</span></td></tr>
<tr class="codeline" data-linenumber="341"><td class="num" id="LN341">341</td><td class="line">        misotopologue = id.Isotopologueindex();</td></tr>
<tr class="codeline" data-linenumber="342"><td class="num" id="LN342">342</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="343"><td class="num" id="LN343">343</td><td class="line">        ArrayOfGriddedField1 ratios;</td></tr>
<tr class="codeline" data-linenumber="344"><td class="num" id="LN344">344</td><td class="line">        ratios.resize(1);</td></tr>
<tr class="codeline" data-linenumber="345"><td class="num" id="LN345">345</td><td class="line">        <span class='comment'>// Extract accuracies:</span></td></tr>
<tr class="codeline" data-linenumber="346"><td class="num" id="LN346">346</td><td class="line">        <span class='keyword'>try</span></td></tr>
<tr class="codeline" data-linenumber="347"><td class="num" id="LN347">347</td><td class="line">        {</td></tr>
<tr class="codeline" data-linenumber="348"><td class="num" id="LN348">348</td><td class="line">            Numeric p = <span class='macro'>NAN<span class='expansion'>__builtin_nanf("0x7fc00000")</span></span>;</td></tr>
<tr class="codeline" data-linenumber="349"><td class="num" id="LN349">349</td><td class="line">            std::vector&lt;Numeric&gt; aux;</td></tr>
<tr class="codeline" data-linenumber="350"><td class="num" id="LN350">350</td><td class="line">            <span class='keyword'>for</span> (Index ip = 0; ip &lt; nparams; ip++)</td></tr>
<tr class="codeline" data-linenumber="351"><td class="num" id="LN351">351</td><td class="line">            {</td></tr>
<tr class="codeline" data-linenumber="352"><td class="num" id="LN352">352</td><td class="line">                icecream &gt;&gt; double_imanip() &gt;&gt; p;</td></tr>
<tr class="codeline" data-linenumber="353"><td class="num" id="LN353">353</td><td class="line">                aux.push_back(p);</td></tr>
<tr class="codeline" data-linenumber="354"><td class="num" id="LN354">354</td><td class="line">            }</td></tr>
<tr class="codeline" data-linenumber="355"><td class="num" id="LN355">355</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="356"><td class="num" id="LN356">356</td><td class="line">            Vector grid;</td></tr>
<tr class="codeline" data-linenumber="357"><td class="num" id="LN357">357</td><td class="line">            <span class='keyword'>if</span> (aux.size() &gt; 1)</td></tr>
<tr class="codeline" data-linenumber="358"><td class="num" id="LN358">358</td><td class="line">                nlinspace(grid, 1, (Numeric)aux.size(), aux.size());</td></tr>
<tr class="codeline" data-linenumber="359"><td class="num" id="LN359">359</td><td class="line">            <span class='keyword'>else</span></td></tr>
<tr class="codeline" data-linenumber="360"><td class="num" id="LN360">360</td><td class="line">                grid = Vector(1, .1);</td></tr>
<tr class="codeline" data-linenumber="361"><td class="num" id="LN361">361</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="362"><td class="num" id="LN362">362</td><td class="line">            ratios[0].set_grid(0, grid);</td></tr>
<tr class="codeline" data-linenumber="363"><td class="num" id="LN363">363</td><td class="line">            ratios[0].data = aux;</td></tr>
<tr class="codeline" data-linenumber="364"><td class="num" id="LN364">364</td><td class="line">            mparams[mspecies][misotopologue] = ratios;</td></tr>
<tr class="codeline" data-linenumber="365"><td class="num" id="LN365">365</td><td class="line">        }</td></tr>
<tr class="codeline" data-linenumber="366"><td class="num" id="LN366">366</td><td class="line">        <span class='keyword'>catch</span> (<span class='keyword'>const</span> runtime_error &amp;)</td></tr>
<tr class="codeline" data-linenumber="367"><td class="num" id="LN367">367</td><td class="line">        {</td></tr>
<tr class="codeline" data-linenumber="368"><td class="num" id="LN368">368</td><td class="line">            <span class='keyword'>throw</span> runtime_error(<span class='string_literal'>"Error reading SpeciesAuxData."</span>);</td></tr>
<tr class="codeline" data-linenumber="369"><td class="num" id="LN369">369</td><td class="line">        }</td></tr>
<tr class="codeline" data-linenumber="370"><td class="num" id="LN370">370</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="371"><td class="num" id="LN371">371</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="372"><td class="num" id="LN372">372</td><td class="line">    <span class='comment'>// That's it!</span></td></tr>
<tr class="codeline" data-linenumber="373"><td class="num" id="LN373">373</td><td class="line">    <span class='keyword'>return</span> <span class='keyword'>false</span>;</td></tr>
<tr class="codeline" data-linenumber="374"><td class="num" id="LN374">374</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="375"><td class="num" id="LN375">375</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="376"><td class="num" id="LN376">376</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="377"><td class="num" id="LN377">377</td><td class="line"><span class='keyword'>void</span> checkIsotopologueRatios(<span class='keyword'>const</span> ArrayOfArrayOfSpeciesTag&amp; abs_species,</td></tr>
<tr class="codeline" data-linenumber="378"><td class="num" id="LN378">378</td><td class="line">                             <span class='keyword'>const</span> SpeciesAuxData&amp; isoratios)</td></tr>
<tr class="codeline" data-linenumber="379"><td class="num" id="LN379">379</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="380"><td class="num" id="LN380">380</td><td class="line">    <span class='keyword'>using</span> global_data::species_data;</td></tr>
<tr class="codeline" data-linenumber="381"><td class="num" id="LN381">381</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="382"><td class="num" id="LN382">382</td><td class="line">    <span class='comment'>// Check total number of species:</span></td></tr>
<tr class="codeline" data-linenumber="383"><td class="num" id="LN383">383</td><td class="line">    <span class='keyword'>if</span> (species_data.nelem() != isoratios.nspecies())</td></tr>
<tr class="codeline" data-linenumber="384"><td class="num" id="LN384">384</td><td class="line">      {</td></tr>
<tr class="codeline" data-linenumber="385"><td class="num" id="LN385">385</td><td class="line">        ostringstream os;</td></tr>
<tr class="codeline" data-linenumber="386"><td class="num" id="LN386">386</td><td class="line">        os &lt;&lt; <span class='string_literal'>"Number of species in SpeciesAuxData ("</span> &lt;&lt; isoratios.nspecies() &lt;&lt; <span class='string_literal'>") "</span></td></tr>
<tr class="codeline" data-linenumber="387"><td class="num" id="LN387">387</td><td class="line">        &lt;&lt; <span class='string_literal'>"does not fit builtin species data ("</span> &lt;&lt; species_data.nelem() &lt;&lt; <span class='string_literal'>")."</span>;</td></tr>
<tr class="codeline" data-linenumber="388"><td class="num" id="LN388">388</td><td class="line">        <span class='keyword'>throw</span> runtime_error(os.str());</td></tr>
<tr class="codeline" data-linenumber="389"><td class="num" id="LN389">389</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="390"><td class="num" id="LN390">390</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="391"><td class="num" id="LN391">391</td><td class="line">    <span class='comment'>// For the selected species, we check all isotopes by looping over the</span></td></tr>
<tr class="codeline" data-linenumber="392"><td class="num" id="LN392">392</td><td class="line">    <span class='comment'>// species data. (Trying to check only the isotopes actually used gets</span></td></tr>
<tr class="codeline" data-linenumber="393"><td class="num" id="LN393">393</td><td class="line">    <span class='comment'>// quite complicated, actually, so we do the simple thing here.)</span></td></tr>
<tr class="codeline" data-linenumber="394"><td class="num" id="LN394">394</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="395"><td class="num" id="LN395">395</td><td class="line">    <span class='comment'>// Loop over the absorption species:</span></td></tr>
<tr class="codeline" data-linenumber="396"><td class="num" id="LN396">396</td><td class="line">    <span class='keyword'>for</span> (Index i=0; i&lt;abs_species.nelem(); i++)</td></tr>
<tr class="codeline" data-linenumber="397"><td class="num" id="LN397">397</td><td class="line">      {</td></tr>
<tr class="codeline" data-linenumber="398"><td class="num" id="LN398">398</td><td class="line">        <span class='comment'>// sp is the index of this species in the internal lookup table</span></td></tr>
<tr class="codeline" data-linenumber="399"><td class="num" id="LN399">399</td><td class="line">        <span class='keyword'>const</span> Index sp = abs_species[i][0].Species();</td></tr>
<tr class="codeline" data-linenumber="400"><td class="num" id="LN400">400</td><td class="line">        </td></tr>
<tr class="codeline" data-linenumber="401"><td class="num" id="LN401">401</td><td class="line">        <span class='comment'>// Get handle on species data for this species:</span></td></tr>
<tr class="codeline" data-linenumber="402"><td class="num" id="LN402">402</td><td class="line">        <span class='keyword'>const</span> SpeciesRecord&amp; this_sd = species_data[sp];</td></tr>
<tr class="codeline" data-linenumber="403"><td class="num" id="LN403">403</td><td class="line">     </td></tr>
<tr class="codeline" data-linenumber="404"><td class="num" id="LN404">404</td><td class="line">        <span class='comment'>// Check number of isotopologues:</span></td></tr>
<tr class="codeline" data-linenumber="405"><td class="num" id="LN405">405</td><td class="line">        <span class='keyword'>if</span> (this_sd.Isotopologue().nelem() != isoratios.nisotopologues(sp))</td></tr>
<tr class="codeline" data-linenumber="406"><td class="num" id="LN406">406</td><td class="line">          {</td></tr>
<tr class="codeline" data-linenumber="407"><td class="num" id="LN407">407</td><td class="line">            ostringstream os;</td></tr>
<tr class="codeline" data-linenumber="408"><td class="num" id="LN408">408</td><td class="line">            os &lt;&lt; <span class='string_literal'>"Incorrect number of isotopologues in isotopologue data.\n"</span></td></tr>
<tr class="codeline" data-linenumber="409"><td class="num" id="LN409">409</td><td class="line">            &lt;&lt; <span class='string_literal'>"Species: "</span> &lt;&lt; this_sd.Name() &lt;&lt; <span class='string_literal'>".\n"</span></td></tr>
<tr class="codeline" data-linenumber="410"><td class="num" id="LN410">410</td><td class="line">            &lt;&lt; <span class='string_literal'>"Number of isotopes in SpeciesAuxData ("</span></td></tr>
<tr class="codeline" data-linenumber="411"><td class="num" id="LN411">411</td><td class="line">            &lt;&lt; isoratios.nisotopologues(sp) &lt;&lt; <span class='string_literal'>") "</span></td></tr>
<tr class="codeline" data-linenumber="412"><td class="num" id="LN412">412</td><td class="line">            &lt;&lt; <span class='string_literal'>"does not fit builtin species data ("</span> &lt;&lt; this_sd.Isotopologue().nelem() &lt;&lt; <span class='string_literal'>")."</span>;</td></tr>
<tr class="codeline" data-linenumber="413"><td class="num" id="LN413">413</td><td class="line">            <span class='keyword'>throw</span> runtime_error(os.str());</td></tr>
<tr class="codeline" data-linenumber="414"><td class="num" id="LN414">414</td><td class="line">          }</td></tr>
<tr class="codeline" data-linenumber="415"><td class="num" id="LN415">415</td><td class="line">        </td></tr>
<tr class="codeline" data-linenumber="416"><td class="num" id="LN416">416</td><td class="line">        <span class='keyword'>for</span> (Index iso = 0; iso &lt; this_sd.Isotopologue().nelem(); ++iso)</td></tr>
<tr class="codeline" data-linenumber="417"><td class="num" id="LN417">417</td><td class="line">          {</td></tr>
<tr class="codeline" data-linenumber="418"><td class="num" id="LN418">418</td><td class="line">            <span class='comment'>// For "real" species (not representing continau) the isotopologue</span></td></tr>
<tr class="codeline" data-linenumber="419"><td class="num" id="LN419">419</td><td class="line">            <span class='comment'>// ratio must not be NAN or below zero.</span></td></tr>
<tr class="codeline" data-linenumber="420"><td class="num" id="LN420">420</td><td class="line">            <span class='keyword'>if</span> (!this_sd.Isotopologue()[iso].isContinuum()) {</td></tr>
<tr class="codeline" data-linenumber="421"><td class="num" id="LN421">421</td><td class="line">                <span class='keyword'>if</span> (std::isnan(isoratios.getParam(sp, iso)[0].data[0]) ||</td></tr>
<tr class="codeline" data-linenumber="422"><td class="num" id="LN422">422</td><td class="line">                    isoratios.getParam(sp, iso)[0].data[0] &lt; 0.) {</td></tr>
<tr class="codeline" data-linenumber="423"><td class="num" id="LN423">423</td><td class="line">                    </td></tr>
<tr class="codeline" data-linenumber="424"><td class="num" id="LN424">424</td><td class="line">                    ostringstream os;</td></tr>
<tr class="codeline" data-linenumber="425"><td class="num" id="LN425">425</td><td class="line">                    os &lt;&lt; <span class='string_literal'>"Invalid isotopologue ratio.\n"</span></td></tr>
<tr class="codeline" data-linenumber="426"><td class="num" id="LN426">426</td><td class="line">                    &lt;&lt; <span class='string_literal'>"Species: "</span> &lt;&lt; this_sd.Name() &lt;&lt; <span class='string_literal'>"-"</span></td></tr>
<tr class="codeline" data-linenumber="427"><td class="num" id="LN427">427</td><td class="line">                    &lt;&lt; this_sd.Isotopologue()[iso].Name() &lt;&lt; <span class='string_literal'>"\n"</span></td></tr>
<tr class="codeline" data-linenumber="428"><td class="num" id="LN428">428</td><td class="line">                    &lt;&lt; <span class='string_literal'>"Ratio:   "</span> &lt;&lt; isoratios.getParam(sp, iso)[0].data[0];</td></tr>
<tr class="codeline" data-linenumber="429"><td class="num" id="LN429">429</td><td class="line">                    <span class='keyword'>throw</span> runtime_error(os.str());</td></tr>
<tr class="codeline" data-linenumber="430"><td class="num" id="LN430">430</td><td class="line">                }</td></tr>
<tr class="codeline" data-linenumber="431"><td class="num" id="LN431">431</td><td class="line">            }</td></tr>
<tr class="codeline" data-linenumber="432"><td class="num" id="LN432">432</td><td class="line">          }</td></tr>
<tr class="codeline" data-linenumber="433"><td class="num" id="LN433">433</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="434"><td class="num" id="LN434">434</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="435"><td class="num" id="LN435">435</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="436"><td class="num" id="LN436">436</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="437"><td class="num" id="LN437">437</td><td class="line"><span class='keyword'>void</span> checkPartitionFunctions(<span class='keyword'>const</span> ArrayOfArrayOfSpeciesTag&amp; abs_species,</td></tr>
<tr class="codeline" data-linenumber="438"><td class="num" id="LN438">438</td><td class="line">                             <span class='keyword'>const</span> SpeciesAuxData&amp; partfun)</td></tr>
<tr class="codeline" data-linenumber="439"><td class="num" id="LN439">439</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="440"><td class="num" id="LN440">440</td><td class="line">  <span class='keyword'>using</span> global_data::species_data;</td></tr>
<tr class="codeline" data-linenumber="441"><td class="num" id="LN441">441</td><td class="line">  </td></tr>
<tr class="codeline" data-linenumber="442"><td class="num" id="LN442">442</td><td class="line">  <span class='comment'>// Check total number of species:</span></td></tr>
<tr class="codeline" data-linenumber="443"><td class="num" id="LN443">443</td><td class="line">  <span class='keyword'>if</span> (species_data.nelem() != partfun.nspecies())</td></tr>
<tr class="codeline" data-linenumber="444"><td class="num" id="LN444">444</td><td class="line">  {</td></tr>
<tr class="codeline" data-linenumber="445"><td class="num" id="LN445">445</td><td class="line">    ostringstream os;</td></tr>
<tr class="codeline" data-linenumber="446"><td class="num" id="LN446">446</td><td class="line">    os &lt;&lt; <span class='string_literal'>"Number of species in SpeciesAuxData ("</span> &lt;&lt; partfun.nspecies() &lt;&lt; <span class='string_literal'>") "</span></td></tr>
<tr class="codeline" data-linenumber="447"><td class="num" id="LN447">447</td><td class="line">    &lt;&lt; <span class='string_literal'>"does not fit builtin species data ("</span> &lt;&lt; species_data.nelem() &lt;&lt; <span class='string_literal'>")."</span>;</td></tr>
<tr class="codeline" data-linenumber="448"><td class="num" id="LN448">448</td><td class="line">    <span class='keyword'>throw</span> runtime_error(os.str());</td></tr>
<tr class="codeline" data-linenumber="449"><td class="num" id="LN449">449</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="450"><td class="num" id="LN450">450</td><td class="line">  </td></tr>
<tr class="codeline" data-linenumber="451"><td class="num" id="LN451">451</td><td class="line">  <span class='comment'>// For the selected species, we check all isotopes by looping over the</span></td></tr>
<tr class="codeline" data-linenumber="452"><td class="num" id="LN452">452</td><td class="line">  <span class='comment'>// species data. (Trying to check only the isotopes actually used gets</span></td></tr>
<tr class="codeline" data-linenumber="453"><td class="num" id="LN453">453</td><td class="line">  <span class='comment'>// quite complicated, actually, so we do the simple thing here.)</span></td></tr>
<tr class="codeline" data-linenumber="454"><td class="num" id="LN454">454</td><td class="line">  </td></tr>
<tr class="codeline" data-linenumber="455"><td class="num" id="LN455">455</td><td class="line">  <span class='comment'>// Loop over the absorption species:</span></td></tr>
<tr class="codeline" data-linenumber="456"><td class="num" id="LN456">456</td><td class="line">  <span class='keyword'>for</span> (Index i=0; i&lt;abs_species.nelem(); i++)</td></tr>
<tr class="codeline" data-linenumber="457"><td class="num" id="LN457">457</td><td class="line">  {</td></tr>
<tr class="codeline" data-linenumber="458"><td class="num" id="LN458">458</td><td class="line">    <span class='comment'>// sp is the index of this species in the internal lookup table</span></td></tr>
<tr class="codeline" data-linenumber="459"><td class="num" id="LN459">459</td><td class="line">    <span class='keyword'>const</span> Index sp = abs_species[i][0].Species();</td></tr>
<tr class="codeline" data-linenumber="460"><td class="num" id="LN460">460</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="461"><td class="num" id="LN461">461</td><td class="line">    <span class='comment'>// Get handle on species data for this species:</span></td></tr>
<tr class="codeline" data-linenumber="462"><td class="num" id="LN462">462</td><td class="line">    <span class='keyword'>const</span> SpeciesRecord&amp; this_sd = species_data[sp];</td></tr>
<tr class="codeline" data-linenumber="463"><td class="num" id="LN463">463</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="464"><td class="num" id="LN464">464</td><td class="line">    <span class='comment'>// Check number of isotopologues:</span></td></tr>
<tr class="codeline" data-linenumber="465"><td class="num" id="LN465">465</td><td class="line">    <span class='keyword'>if</span> (this_sd.Isotopologue().nelem() != partfun.nisotopologues(sp))</td></tr>
<tr class="codeline" data-linenumber="466"><td class="num" id="LN466">466</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="467"><td class="num" id="LN467">467</td><td class="line">      ostringstream os;</td></tr>
<tr class="codeline" data-linenumber="468"><td class="num" id="LN468">468</td><td class="line">      os &lt;&lt; <span class='string_literal'>"Incorrect number of isotopologues in partition function data.\n"</span></td></tr>
<tr class="codeline" data-linenumber="469"><td class="num" id="LN469">469</td><td class="line">      &lt;&lt; <span class='string_literal'>"Species: "</span> &lt;&lt; this_sd.Name() &lt;&lt; <span class='string_literal'>".\n"</span></td></tr>
<tr class="codeline" data-linenumber="470"><td class="num" id="LN470">470</td><td class="line">      &lt;&lt; <span class='string_literal'>"Number of isotopes in SpeciesAuxData ("</span></td></tr>
<tr class="codeline" data-linenumber="471"><td class="num" id="LN471">471</td><td class="line">      &lt;&lt; partfun.nisotopologues(sp) &lt;&lt; <span class='string_literal'>") "</span></td></tr>
<tr class="codeline" data-linenumber="472"><td class="num" id="LN472">472</td><td class="line">      &lt;&lt; <span class='string_literal'>"does not fit builtin species data ("</span> &lt;&lt; this_sd.Isotopologue().nelem() &lt;&lt; <span class='string_literal'>")."</span>;</td></tr>
<tr class="codeline" data-linenumber="473"><td class="num" id="LN473">473</td><td class="line">      <span class='keyword'>throw</span> runtime_error(os.str());</td></tr>
<tr class="codeline" data-linenumber="474"><td class="num" id="LN474">474</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="475"><td class="num" id="LN475">475</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="476"><td class="num" id="LN476">476</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="477"><td class="num" id="LN477">477</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="478"><td class="num" id="LN478">478</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="479"><td class="num" id="LN479">479</td><td class="line"><span class='keyword'>void</span> fillSpeciesAuxDataWithIsotopologueRatiosFromSpeciesData(SpeciesAuxData&amp; sad)</td></tr>
<tr class="codeline" data-linenumber="480"><td class="num" id="LN480">480</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="481"><td class="num" id="LN481">481</td><td class="line">    <span class='keyword'>using</span> global_data::species_data;</td></tr>
<tr class="codeline" data-linenumber="482"><td class="num" id="LN482">482</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="483"><td class="num" id="LN483">483</td><td class="line">    sad.InitFromSpeciesData();</td></tr>
<tr class="codeline" data-linenumber="484"><td class="num" id="LN484">484</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="485"><td class="num" id="LN485">485</td><td class="line">    Vector grid(1, 1.);</td></tr>
<tr class="codeline" data-linenumber="486"><td class="num" id="LN486">486</td><td class="line">    ArrayOfGriddedField1 ratios;</td></tr>
<tr class="codeline" data-linenumber="487"><td class="num" id="LN487">487</td><td class="line">    ratios.resize(1);</td></tr>
<tr class="codeline" data-linenumber="488"><td class="num" id="LN488">488</td><td class="line">    ratios[0].set_name(<span class='string_literal'>"IsoRatios"</span>);</td></tr>
<tr class="codeline" data-linenumber="489"><td class="num" id="LN489">489</td><td class="line">    ratios[0].set_grid_name(0, <span class='string_literal'>"Index"</span>);</td></tr>
<tr class="codeline" data-linenumber="490"><td class="num" id="LN490">490</td><td class="line">    ratios[0].set_grid(0, grid);</td></tr>
<tr class="codeline" data-linenumber="491"><td class="num" id="LN491">491</td><td class="line">    ratios[0].resize(1);</td></tr>
<tr class="codeline" data-linenumber="492"><td class="num" id="LN492">492</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="493"><td class="num" id="LN493">493</td><td class="line">    <span class='keyword'>for</span> (Index isp = 0; isp &lt; species_data.nelem(); isp++)</td></tr>
<tr class="codeline" data-linenumber="494"><td class="num" id="LN494">494</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="495"><td class="num" id="LN495">495</td><td class="line">        <span class='keyword'>for</span> (Index iiso = 0; iiso &lt; species_data[isp].Isotopologue().nelem(); iiso++)</td></tr>
<tr class="codeline" data-linenumber="496"><td class="num" id="LN496">496</td><td class="line">        {</td></tr>
<tr class="codeline" data-linenumber="497"><td class="num" id="LN497">497</td><td class="line">            ratios[0].data[0] = species_data[isp].Isotopologue()[iiso].Abundance();</td></tr>
<tr class="codeline" data-linenumber="498"><td class="num" id="LN498">498</td><td class="line">            sad.setParam(isp, iiso,</td></tr>
<tr class="codeline" data-linenumber="499"><td class="num" id="LN499">499</td><td class="line">                         SpeciesAuxData::AT_ISOTOPOLOGUE_RATIO, ratios);</td></tr>
<tr class="codeline" data-linenumber="500"><td class="num" id="LN500">500</td><td class="line">        }</td></tr>
<tr class="codeline" data-linenumber="501"><td class="num" id="LN501">501</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="502"><td class="num" id="LN502">502</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="503"><td class="num" id="LN503">503</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="504"><td class="num" id="LN504">504</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="505"><td class="num" id="LN505">505</td><td class="line"><span class='keyword'>void</span> fillSpeciesAuxDataWithPartitionFunctionsFromSpeciesData(SpeciesAuxData&amp; sad)</td></tr>
<tr class="codeline" data-linenumber="506"><td class="num" id="LN506">506</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="507"><td class="num" id="LN507">507</td><td class="line">    <span class='keyword'>using</span> global_data::species_data;</td></tr>
<tr class="codeline" data-linenumber="508"><td class="num" id="LN508">508</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="509"><td class="num" id="LN509">509</td><td class="line">    sad.InitFromSpeciesData();</td></tr>
<tr class="codeline" data-linenumber="510"><td class="num" id="LN510">510</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="511"><td class="num" id="LN511">511</td><td class="line">    ArrayOfGriddedField1 pfuncs;</td></tr>
<tr class="codeline" data-linenumber="512"><td class="num" id="LN512">512</td><td class="line">    pfuncs.resize(2);</td></tr>
<tr class="codeline" data-linenumber="513"><td class="num" id="LN513">513</td><td class="line">    pfuncs[0].set_name(<span class='string_literal'>"PartitionFunction"</span>);</td></tr>
<tr class="codeline" data-linenumber="514"><td class="num" id="LN514">514</td><td class="line">    pfuncs[0].set_grid_name(0, <span class='string_literal'>"Coeff"</span>);</td></tr>
<tr class="codeline" data-linenumber="515"><td class="num" id="LN515">515</td><td class="line">    pfuncs[1].set_grid_name(0, <span class='string_literal'>"Temperature"</span>);</td></tr>
<tr class="codeline" data-linenumber="516"><td class="num" id="LN516">516</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="517"><td class="num" id="LN517">517</td><td class="line">    ArrayOfString tgrid;</td></tr>
<tr class="codeline" data-linenumber="518"><td class="num" id="LN518">518</td><td class="line">    tgrid.resize(2);</td></tr>
<tr class="codeline" data-linenumber="519"><td class="num" id="LN519">519</td><td class="line">    tgrid[0] = <span class='string_literal'>"Tlower"</span>;</td></tr>
<tr class="codeline" data-linenumber="520"><td class="num" id="LN520">520</td><td class="line">    tgrid[1] = <span class='string_literal'>"Tupper"</span>;</td></tr>
<tr class="codeline" data-linenumber="521"><td class="num" id="LN521">521</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="522"><td class="num" id="LN522">522</td><td class="line">    <span class='keyword'>for</span> (Index isp = 0; isp &lt; species_data.nelem(); isp++)</td></tr>
<tr class="codeline" data-linenumber="523"><td class="num" id="LN523">523</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="524"><td class="num" id="LN524">524</td><td class="line">        <span class='keyword'>for</span> (Index iiso = 0; iiso &lt; species_data[isp].Isotopologue().nelem(); iiso++)</td></tr>
<tr class="codeline" data-linenumber="525"><td class="num" id="LN525">525</td><td class="line">        {</td></tr>
<tr class="codeline" data-linenumber="526"><td class="num" id="LN526">526</td><td class="line">            Vector grid;</td></tr>
<tr class="codeline" data-linenumber="527"><td class="num" id="LN527">527</td><td class="line">            <span class='keyword'>const</span> Vector&amp; coeffs = species_data[isp].Isotopologue()[iiso].GetCoeff();</td></tr>
<tr class="codeline" data-linenumber="528"><td class="num" id="LN528">528</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="529"><td class="num" id="LN529">529</td><td class="line">            <span class='macro'>assert(coeffs.nelem() &gt;= 2)<span class='expansion'>(__builtin_expect(!(coeffs.nelem() &gt;= 2), 0) ? __assert_rtn<br>(__func__, "/Users/u237002/Dropbox/Hacking/sat/arts/src/absorption.cc"<br>, 529, "coeffs.nelem() &gt;= 2") : (void)0)</span></span>;</td></tr>
<tr class="codeline" data-linenumber="530"><td class="num" id="LN530">530</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="531"><td class="num" id="LN531">531</td><td class="line">            nlinspace(grid, 0, (Numeric)coeffs.nelem()-1., coeffs.nelem());</td></tr>
<tr class="codeline" data-linenumber="532"><td class="num" id="LN532">532</td><td class="line">            pfuncs[0].set_grid(0, grid);</td></tr>
<tr class="codeline" data-linenumber="533"><td class="num" id="LN533">533</td><td class="line">            pfuncs[0].data = coeffs;</td></tr>
<tr class="codeline" data-linenumber="534"><td class="num" id="LN534">534</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="535"><td class="num" id="LN535">535</td><td class="line">            <span class='keyword'>const</span> Vector&amp; temp_range = species_data[isp].Isotopologue()[iiso].GetCoeffGrid();</td></tr>
<tr class="codeline" data-linenumber="536"><td class="num" id="LN536">536</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="537"><td class="num" id="LN537">537</td><td class="line">            <span class='comment'>// Temperature data should either contain two Ts, lower and upper value of</span></td></tr>
<tr class="codeline" data-linenumber="538"><td class="num" id="LN538">538</td><td class="line">            <span class='comment'>// the valid range or be empty</span></td></tr>
<tr class="codeline" data-linenumber="539"><td class="num" id="LN539">539</td><td class="line">            <span class='macro'>assert(temp_range.nelem() == 0 || temp_range.nelem() == 2)<span class='expansion'>(__builtin_expect(!(temp_range.nelem() == 0 || temp_range.nelem<br>() == 2), 0) ? __assert_rtn(__func__, "/Users/u237002/Dropbox/Hacking/sat/arts/src/absorption.cc"<br>, 539, "temp_range.nelem() == 0 || temp_range.nelem() == 2") :<br> (void)0)</span></span>;</td></tr>
<tr class="codeline" data-linenumber="540"><td class="num" id="LN540">540</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="541"><td class="num" id="LN541">541</td><td class="line">            <span class='keyword'>if</span> (temp_range.nelem() == 2)</td></tr>
<tr class="codeline" data-linenumber="542"><td class="num" id="LN542">542</td><td class="line">            {</td></tr>
<tr class="codeline" data-linenumber="543"><td class="num" id="LN543">543</td><td class="line">                pfuncs[1].set_grid(0, tgrid);</td></tr>
<tr class="codeline" data-linenumber="544"><td class="num" id="LN544">544</td><td class="line">                pfuncs[1].data = temp_range;</td></tr>
<tr class="codeline" data-linenumber="545"><td class="num" id="LN545">545</td><td class="line">            }</td></tr>
<tr class="codeline" data-linenumber="546"><td class="num" id="LN546">546</td><td class="line">            <span class='keyword'>else</span></td></tr>
<tr class="codeline" data-linenumber="547"><td class="num" id="LN547">547</td><td class="line">            {</td></tr>
<tr class="codeline" data-linenumber="548"><td class="num" id="LN548">548</td><td class="line">                pfuncs[1].resize(0);</td></tr>
<tr class="codeline" data-linenumber="549"><td class="num" id="LN549">549</td><td class="line">                pfuncs[1].set_grid(0, ArrayOfString());</td></tr>
<tr class="codeline" data-linenumber="550"><td class="num" id="LN550">550</td><td class="line">            }</td></tr>
<tr class="codeline" data-linenumber="551"><td class="num" id="LN551">551</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="552"><td class="num" id="LN552">552</td><td class="line">            sad.setParam(isp, iiso,</td></tr>
<tr class="codeline" data-linenumber="553"><td class="num" id="LN553">553</td><td class="line">                         SpeciesAuxData::AT_PARTITIONFUNCTION_COEFF, pfuncs);</td></tr>
<tr class="codeline" data-linenumber="554"><td class="num" id="LN554">554</td><td class="line">        }</td></tr>
<tr class="codeline" data-linenumber="555"><td class="num" id="LN555">555</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="556"><td class="num" id="LN556">556</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="557"><td class="num" id="LN557">557</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="558"><td class="num" id="LN558">558</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="559"><td class="num" id="LN559">559</td><td class="line">ostream&amp; <span class='keyword'>operator</span>&lt;&lt; (ostream&amp; os, <span class='keyword'>const</span> SpeciesRecord&amp; sr)</td></tr>
<tr class="codeline" data-linenumber="560"><td class="num" id="LN560">560</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="561"><td class="num" id="LN561">561</td><td class="line">  <span class='keyword'>for</span> ( Index j=0; j&lt;sr.Isotopologue().nelem(); ++j)</td></tr>
<tr class="codeline" data-linenumber="562"><td class="num" id="LN562">562</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="563"><td class="num" id="LN563">563</td><td class="line">      os &lt;&lt; sr.Name() &lt;&lt; <span class='string_literal'>"-"</span> &lt;&lt; sr.Isotopologue()[j].Name() &lt;&lt; <span class='string_literal'>"\n"</span>;</td></tr>
<tr class="codeline" data-linenumber="564"><td class="num" id="LN564">564</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="565"><td class="num" id="LN565">565</td><td class="line">  <span class='keyword'>return</span> os;</td></tr>
<tr class="codeline" data-linenumber="566"><td class="num" id="LN566">566</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="567"><td class="num" id="LN567">567</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="568"><td class="num" id="LN568">568</td><td class="line">      </td></tr>
<tr class="codeline" data-linenumber="569"><td class="num" id="LN569">569</td><td class="line">ostream&amp; <span class='keyword'>operator</span>&lt;&lt; (ostream&amp; os, <span class='keyword'>const</span> SpeciesAuxData&amp; sad)</td></tr>
<tr class="codeline" data-linenumber="570"><td class="num" id="LN570">570</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="571"><td class="num" id="LN571">571</td><td class="line">    <span class='keyword'>using</span> global_data::species_data;</td></tr>
<tr class="codeline" data-linenumber="572"><td class="num" id="LN572">572</td><td class="line">    <span class='keyword'>for</span> (Index sp = 0; sp &lt; sad.nspecies(); sp++)</td></tr>
<tr class="codeline" data-linenumber="573"><td class="num" id="LN573">573</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="574"><td class="num" id="LN574">574</td><td class="line">        <span class='keyword'>for</span> (Index iso = 0; iso &lt; sad.nisotopologues(sp); iso++)</td></tr>
<tr class="codeline" data-linenumber="575"><td class="num" id="LN575">575</td><td class="line">        {</td></tr>
<tr class="codeline" data-linenumber="576"><td class="num" id="LN576">576</td><td class="line">            os &lt;&lt; species_name_from_species_index(sp) &lt;&lt; <span class='string_literal'>"-"</span></td></tr>
<tr class="codeline" data-linenumber="577"><td class="num" id="LN577">577</td><td class="line">            &lt;&lt; global_data::species_data[sp].Isotopologue()[iso].Name();</td></tr>
<tr class="codeline" data-linenumber="578"><td class="num" id="LN578">578</td><td class="line">            os &lt;&lt; <span class='string_literal'>" "</span> &lt;&lt; sad.getTypeString(sp, iso) &lt;&lt; std::endl;</td></tr>
<tr class="codeline" data-linenumber="579"><td class="num" id="LN579">579</td><td class="line">            <span class='keyword'>for</span> (Index ip = 0; ip &lt; sad.getParam(sp, iso).nelem(); ip++)</td></tr>
<tr class="codeline" data-linenumber="580"><td class="num" id="LN580">580</td><td class="line">                os &lt;&lt; <span class='string_literal'>"AuxData "</span> &lt;&lt; ip &lt;&lt; <span class='string_literal'>" "</span> &lt;&lt; sad.getParam(sp, iso) &lt;&lt; std::endl;</td></tr>
<tr class="codeline" data-linenumber="581"><td class="num" id="LN581">581</td><td class="line">        }</td></tr>
<tr class="codeline" data-linenumber="582"><td class="num" id="LN582">582</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="583"><td class="num" id="LN583">583</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="584"><td class="num" id="LN584">584</td><td class="line">    <span class='keyword'>return</span> os;</td></tr>
<tr class="codeline" data-linenumber="585"><td class="num" id="LN585">585</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="586"><td class="num" id="LN586">586</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="587"><td class="num" id="LN587">587</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="588"><td class="num" id="LN588">588</td><td class="line"><span class='comment'>/** Calculate line absorption cross sections for one tag group. All</span></td></tr>
<tr class="codeline" data-linenumber="589"><td class="num" id="LN589">589</td><td class="line">    <span class='comment'>lines in the line list must belong to the same species. This must</span></td></tr>
<tr class="codeline" data-linenumber="590"><td class="num" id="LN590">590</td><td class="line">    <span class='comment'>be ensured by abs_lines_per_speciesCreateFromLines, so it is only verified</span></td></tr>
<tr class="codeline" data-linenumber="591"><td class="num" id="LN591">591</td><td class="line">    <span class='comment'>with assert. Also, the input vectors abs_p, and abs_t must all</span></td></tr>
<tr class="codeline" data-linenumber="592"><td class="num" id="LN592">592</td><td class="line">    <span class='comment'>have the same dimension.</span></td></tr>
<tr class="codeline" data-linenumber="593"><td class="num" id="LN593">593</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="594"><td class="num" id="LN594">594</td><td class="line">    <span class='comment'>This is mainly a copy of abs_species which is removed now, with</span></td></tr>
<tr class="codeline" data-linenumber="595"><td class="num" id="LN595">595</td><td class="line">    <span class='comment'>the difference that the vmrs are removed from the absorption</span></td></tr>
<tr class="codeline" data-linenumber="596"><td class="num" id="LN596">596</td><td class="line">    <span class='comment'>coefficient calculation. (the vmr is still used for the self</span></td></tr>
<tr class="codeline" data-linenumber="597"><td class="num" id="LN597">597</td><td class="line">    <span class='comment'>broadening)</span></td></tr>
<tr class="codeline" data-linenumber="598"><td class="num" id="LN598">598</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="599"><td class="num" id="LN599">599</td><td class="line">    <span class='comment'>Continua are not handled by this function, you have to call</span></td></tr>
<tr class="codeline" data-linenumber="600"><td class="num" id="LN600">600</td><td class="line">    <span class='comment'>xsec_continuum_tag for those.</span></td></tr>
<tr class="codeline" data-linenumber="601"><td class="num" id="LN601">601</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="602"><td class="num" id="LN602">602</td><td class="line">    <span class='comment'>\retval xsec_attenuation   Cross section of one tag group. This is now the</span></td></tr>
<tr class="codeline" data-linenumber="603"><td class="num" id="LN603">603</td><td class="line">                               <span class='comment'>true absorption cross section in units of m^2.</span></td></tr>
<tr class="codeline" data-linenumber="604"><td class="num" id="LN604">604</td><td class="line">    <span class='comment'>\retval xsec_phase         Cross section of one tag group. This is now the</span></td></tr>
<tr class="codeline" data-linenumber="605"><td class="num" id="LN605">605</td><td class="line">                               <span class='comment'>true dispersion cross section in units of m^2.</span></td></tr>
<tr class="codeline" data-linenumber="606"><td class="num" id="LN606">606</td><td class="line">    <span class='comment'>\param f_grid       Frequency grid.</span></td></tr>
<tr class="codeline" data-linenumber="607"><td class="num" id="LN607">607</td><td class="line">    <span class='comment'>\param abs_p        Pressure grid.</span></td></tr>
<tr class="codeline" data-linenumber="608"><td class="num" id="LN608">608</td><td class="line">    <span class='comment'>\param abs_t        Temperatures associated with abs_p.</span></td></tr>
<tr class="codeline" data-linenumber="609"><td class="num" id="LN609">609</td><td class="line">    <span class='comment'>\param all_vmrs     Gas volume mixing ratios [nspecies, np].</span></td></tr>
<tr class="codeline" data-linenumber="610"><td class="num" id="LN610">610</td><td class="line">    <span class='comment'>\param abs_species  Species tags for all species.</span></td></tr>
<tr class="codeline" data-linenumber="611"><td class="num" id="LN611">611</td><td class="line">    <span class='comment'>\param this_species Index of the current species in abs_species.</span></td></tr>
<tr class="codeline" data-linenumber="612"><td class="num" id="LN612">612</td><td class="line">    <span class='comment'>\param abs_lines    The spectroscopic line list.</span></td></tr>
<tr class="codeline" data-linenumber="613"><td class="num" id="LN613">613</td><td class="line">    <span class='comment'>\param ind_ls       Index to lineshape function.</span></td></tr>
<tr class="codeline" data-linenumber="614"><td class="num" id="LN614">614</td><td class="line">    <span class='comment'>\param ind_lsn      Index to lineshape norm.</span></td></tr>
<tr class="codeline" data-linenumber="615"><td class="num" id="LN615">615</td><td class="line">    <span class='comment'>\param cutoff       Lineshape cutoff.</span></td></tr>
<tr class="codeline" data-linenumber="616"><td class="num" id="LN616">616</td><td class="line">    <span class='comment'>\param isotopologue_ratios  Isotopologue ratios.</span></td></tr>
<tr class="codeline" data-linenumber="617"><td class="num" id="LN617">617</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="618"><td class="num" id="LN618">618</td><td class="line">    <span class='comment'>\author Stefan Buehler and Axel von Engeln</span></td></tr>
<tr class="codeline" data-linenumber="619"><td class="num" id="LN619">619</td><td class="line">    <span class='comment'>\date   2001-01-11</span> </td></tr>
<tr class="codeline" data-linenumber="620"><td class="num" id="LN620">620</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="621"><td class="num" id="LN621">621</td><td class="line">    <span class='comment'>Changed from pseudo cross sections to true cross sections</span></td></tr>
<tr class="codeline" data-linenumber="622"><td class="num" id="LN622">622</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="623"><td class="num" id="LN623">623</td><td class="line">    <span class='comment'>\author Stefan Buehler</span> </td></tr>
<tr class="codeline" data-linenumber="624"><td class="num" id="LN624">624</td><td class="line">    <span class='comment'>\date   2007-08-08</span> </td></tr>
<tr class="codeline" data-linenumber="625"><td class="num" id="LN625">625</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="626"><td class="num" id="LN626">626</td><td class="line">    <span class='comment'>Adapted to new Perrin line parameters, treating broadening by different</span> </td></tr>
<tr class="codeline" data-linenumber="627"><td class="num" id="LN627">627</td><td class="line">    <span class='comment'>gases explicitly</span></td></tr>
<tr class="codeline" data-linenumber="628"><td class="num" id="LN628">628</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="629"><td class="num" id="LN629">629</td><td class="line">    <span class='comment'>\author Stefan Buehler</span></td></tr>
<tr class="codeline" data-linenumber="630"><td class="num" id="LN630">630</td><td class="line">    <span class='comment'>\date   2012-09-03</span></td></tr>
<tr class="codeline" data-linenumber="631"><td class="num" id="LN631">631</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="632"><td class="num" id="LN632">632</td><td class="line">    <span class='comment'>Adapted to LineRecord independency in central parts of function.</span></td></tr>
<tr class="codeline" data-linenumber="633"><td class="num" id="LN633">633</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="634"><td class="num" id="LN634">634</td><td class="line">    <span class='comment'>\author Richard Larsson</span></td></tr>
<tr class="codeline" data-linenumber="635"><td class="num" id="LN635">635</td><td class="line">    <span class='comment'>\date   2014-10-29</span></td></tr>
<tr class="codeline" data-linenumber="636"><td class="num" id="LN636">636</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="637"><td class="num" id="LN637">637</td><td class="line"><span class='comment'>*/</span></td></tr>
<tr class="codeline" data-linenumber="638"><td class="num" id="LN638">638</td><td class="line"><span class='keyword'>void</span> xsec_species( MatrixView               xsec_attenuation,</td></tr>
<tr class="codeline" data-linenumber="639"><td class="num" id="LN639">639</td><td class="line">                   MatrixView               xsec_source,</td></tr>
<tr class="codeline" data-linenumber="640"><td class="num" id="LN640">640</td><td class="line">                   MatrixView               xsec_phase,</td></tr>
<tr class="codeline" data-linenumber="641"><td class="num" id="LN641">641</td><td class="line">                   ConstVectorView          f_grid,</td></tr>
<tr class="codeline" data-linenumber="642"><td class="num" id="LN642">642</td><td class="line">                   ConstVectorView          abs_p,</td></tr>
<tr class="codeline" data-linenumber="643"><td class="num" id="LN643">643</td><td class="line">                   ConstVectorView          abs_t,</td></tr>
<tr class="codeline" data-linenumber="644"><td class="num" id="LN644">644</td><td class="line">                   ConstMatrixView          abs_t_nlte,</td></tr>
<tr class="codeline" data-linenumber="645"><td class="num" id="LN645">645</td><td class="line">                   ConstMatrixView          all_vmrs,</td></tr>
<tr class="codeline" data-linenumber="646"><td class="num" id="LN646">646</td><td class="line">                   <span class='keyword'>const</span> ArrayOfArrayOfSpeciesTag&amp; abs_species,</td></tr>
<tr class="codeline" data-linenumber="647"><td class="num" id="LN647">647</td><td class="line">                   <span class='keyword'>const</span> Index              this_species,</td></tr>
<tr class="codeline" data-linenumber="648"><td class="num" id="LN648">648</td><td class="line">                   <span class='keyword'>const</span> ArrayOfLineRecord&amp; abs_lines,</td></tr>
<tr class="codeline" data-linenumber="649"><td class="num" id="LN649">649</td><td class="line">                   <span class='keyword'>const</span> Index              ind_ls,</td></tr>
<tr class="codeline" data-linenumber="650"><td class="num" id="LN650">650</td><td class="line">                   <span class='keyword'>const</span> Index              ind_lsn,</td></tr>
<tr class="codeline" data-linenumber="651"><td class="num" id="LN651">651</td><td class="line">                   <span class='keyword'>const</span> Numeric            cutoff,</td></tr>
<tr class="codeline" data-linenumber="652"><td class="num" id="LN652">652</td><td class="line">                   <span class='keyword'>const</span> SpeciesAuxData&amp;    isotopologue_ratios,</td></tr>
<tr class="codeline" data-linenumber="653"><td class="num" id="LN653">653</td><td class="line">                   <span class='keyword'>const</span> SpeciesAuxData&amp;    partition_functions,</td></tr>
<tr class="codeline" data-linenumber="654"><td class="num" id="LN654">654</td><td class="line">                   <span class='keyword'>const</span> Verbosity&amp;         verbosity )</td></tr>
<tr class="codeline" data-linenumber="655"><td class="num" id="LN655">655</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="656"><td class="num" id="LN656">656</td><td class="line">    <span class='macro'>CREATE_OUT3<span class='expansion'>ArtsOut3 out3(verbosity)</span></span>;</td></tr>
<tr class="codeline" data-linenumber="657"><td class="num" id="LN657">657</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="658"><td class="num" id="LN658">658</td><td class="line">    <span class='keyword'>extern</span> <span class='keyword'>const</span> Numeric DOPPLER_CONST;</td></tr>
<tr class="codeline" data-linenumber="659"><td class="num" id="LN659">659</td><td class="line">    <span class='keyword'>static</span> <span class='keyword'>const</span> Numeric doppler_const = DOPPLER_CONST;</td></tr>
<tr class="codeline" data-linenumber="660"><td class="num" id="LN660">660</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="661"><td class="num" id="LN661">661</td><td class="line">    <span class='comment'>// dimension of f_grid, abs_lines</span></td></tr>
<tr class="codeline" data-linenumber="662"><td class="num" id="LN662">662</td><td class="line">    <span class='keyword'>const</span> Index nf = f_grid.nelem();</td></tr>
<tr class="codeline" data-linenumber="663"><td class="num" id="LN663">663</td><td class="line">    <span class='keyword'>const</span> Index nl = abs_lines.nelem();</td></tr>
<tr class="codeline" data-linenumber="664"><td class="num" id="LN664">664</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="665"><td class="num" id="LN665">665</td><td class="line">    <span class='comment'>// number of pressure levels:</span></td></tr>
<tr class="codeline" data-linenumber="666"><td class="num" id="LN666">666</td><td class="line">    <span class='keyword'>const</span> Index np = abs_p.nelem();</td></tr>
<tr class="codeline" data-linenumber="667"><td class="num" id="LN667">667</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="668"><td class="num" id="LN668">668</td><td class="line">    <span class='comment'>// Define the vector for the line shape function and the</span></td></tr>
<tr class="codeline" data-linenumber="669"><td class="num" id="LN669">669</td><td class="line">    <span class='comment'>// normalization factor of the lineshape here, so that we don't need</span></td></tr>
<tr class="codeline" data-linenumber="670"><td class="num" id="LN670">670</td><td class="line">    <span class='comment'>// so many free store allocations.  the last element is used to</span></td></tr>
<tr class="codeline" data-linenumber="671"><td class="num" id="LN671">671</td><td class="line">    <span class='comment'>// calculate the value at the cutoff frequency</span></td></tr>
<tr class="codeline" data-linenumber="672"><td class="num" id="LN672">672</td><td class="line">    Vector ls_attenuation(nf+1);</td></tr>
<tr class="codeline" data-linenumber="673"><td class="num" id="LN673">673</td><td class="line">    Vector ls_phase_dummy;</td></tr>
<tr class="codeline" data-linenumber="674"><td class="num" id="LN674">674</td><td class="line">    Vector fac(nf+1);</td></tr>
<tr class="codeline" data-linenumber="675"><td class="num" id="LN675">675</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="676"><td class="num" id="LN676">676</td><td class="line">    <span class='keyword'>const</span> <span class='keyword'>bool</span> cut = (cutoff != -1) ? <span class='keyword'>true</span> : <span class='keyword'>false</span>;</td></tr>
<tr class="codeline" data-linenumber="677"><td class="num" id="LN677">677</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="678"><td class="num" id="LN678">678</td><td class="line">    <span class='keyword'>const</span> <span class='keyword'>bool</span> calc_phase = 0;</td></tr>
<tr class="codeline" data-linenumber="679"><td class="num" id="LN679">679</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="680"><td class="num" id="LN680">680</td><td class="line">    <span class='comment'>// Check that the frequency grid is sorted in the case of lineshape</span></td></tr>
<tr class="codeline" data-linenumber="681"><td class="num" id="LN681">681</td><td class="line">    <span class='comment'>// with cutoff. Duplicate frequency values are allowed.</span></td></tr>
<tr class="codeline" data-linenumber="682"><td class="num" id="LN682">682</td><td class="line">    <span class='keyword'>if</span> (cut)</td></tr>
<tr class="codeline" data-linenumber="683"><td class="num" id="LN683">683</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="684"><td class="num" id="LN684">684</td><td class="line">        <span class='keyword'>if</span> ( ! is_sorted( f_grid ) )</td></tr>
<tr class="codeline" data-linenumber="685"><td class="num" id="LN685">685</td><td class="line">        {</td></tr>
<tr class="codeline" data-linenumber="686"><td class="num" id="LN686">686</td><td class="line">            std::ostringstream os;</td></tr>
<tr class="codeline" data-linenumber="687"><td class="num" id="LN687">687</td><td class="line">            os &lt;&lt; <span class='string_literal'>"If you use a lineshape function with cutoff, your\n"</span></td></tr>
<tr class="codeline" data-linenumber="688"><td class="num" id="LN688">688</td><td class="line">               &lt;&lt; <span class='string_literal'>"frequency grid *f_grid* must be sorted.\n"</span></td></tr>
<tr class="codeline" data-linenumber="689"><td class="num" id="LN689">689</td><td class="line">               &lt;&lt; <span class='string_literal'>"(Duplicate values are allowed.)"</span>;</td></tr>
<tr class="codeline" data-linenumber="690"><td class="num" id="LN690">690</td><td class="line">            <span class='keyword'>throw</span> std::runtime_error(os.str());</td></tr>
<tr class="codeline" data-linenumber="691"><td class="num" id="LN691">691</td><td class="line">        }</td></tr>
<tr class="codeline" data-linenumber="692"><td class="num" id="LN692">692</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="693"><td class="num" id="LN693">693</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="694"><td class="num" id="LN694">694</td><td class="line">    <span class='comment'>// Check that all temperatures are non-negative</span></td></tr>
<tr class="codeline" data-linenumber="695"><td class="num" id="LN695">695</td><td class="line">    <span class='keyword'>bool</span> negative = <span class='keyword'>false</span>;</td></tr>
<tr class="codeline" data-linenumber="696"><td class="num" id="LN696">696</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="697"><td class="num" id="LN697">697</td><td class="line">    <span class='keyword'>for</span> (Index i = 0; !negative &amp;&amp; i &lt; abs_t.nelem (); i++)</td></tr>
<tr class="codeline" data-linenumber="698"><td class="num" id="LN698">698</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="699"><td class="num" id="LN699">699</td><td class="line">        <span class='keyword'>if</span> (abs_t[i] &lt; 0.)</td></tr>
<tr class="codeline" data-linenumber="700"><td class="num" id="LN700">700</td><td class="line">            negative = <span class='keyword'>true</span>;</td></tr>
<tr class="codeline" data-linenumber="701"><td class="num" id="LN701">701</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="702"><td class="num" id="LN702">702</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="703"><td class="num" id="LN703">703</td><td class="line">    <span class='keyword'>if</span> (negative)</td></tr>
<tr class="codeline" data-linenumber="704"><td class="num" id="LN704">704</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="705"><td class="num" id="LN705">705</td><td class="line">        std::ostringstream os;</td></tr>
<tr class="codeline" data-linenumber="706"><td class="num" id="LN706">706</td><td class="line">        os &lt;&lt; <span class='string_literal'>"abs_t contains at least one negative temperature value.\n"</span></td></tr>
<tr class="codeline" data-linenumber="707"><td class="num" id="LN707">707</td><td class="line">           &lt;&lt; <span class='string_literal'>"This is not allowed."</span>;</td></tr>
<tr class="codeline" data-linenumber="708"><td class="num" id="LN708">708</td><td class="line">        <span class='keyword'>throw</span> std::runtime_error(os.str());</td></tr>
<tr class="codeline" data-linenumber="709"><td class="num" id="LN709">709</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="710"><td class="num" id="LN710">710</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="711"><td class="num" id="LN711">711</td><td class="line">    <span class='comment'>// We need a local copy of f_grid which is 1 element longer, because</span></td></tr>
<tr class="codeline" data-linenumber="712"><td class="num" id="LN712">712</td><td class="line">    <span class='comment'>// we append a possible cutoff to it.</span></td></tr>
<tr class="codeline" data-linenumber="713"><td class="num" id="LN713">713</td><td class="line">    <span class='comment'>// The initialization of this has to be inside the line loop!</span></td></tr>
<tr class="codeline" data-linenumber="714"><td class="num" id="LN714">714</td><td class="line">    Vector f_local( nf + 1 );</td></tr>
<tr class="codeline" data-linenumber="715"><td class="num" id="LN715">715</td><td class="line">    f_local[Range(0,nf)] = f_grid;</td></tr>
<tr class="codeline" data-linenumber="716"><td class="num" id="LN716">716</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="717"><td class="num" id="LN717">717</td><td class="line">    <span class='comment'>// Voigt generally needs a different frequency grid. If we allocate</span></td></tr>
<tr class="codeline" data-linenumber="718"><td class="num" id="LN718">718</td><td class="line">    <span class='comment'>// that in the outer loop, instead of in voigt, we don't have the</span></td></tr>
<tr class="codeline" data-linenumber="719"><td class="num" id="LN719">719</td><td class="line">    <span class='comment'>// free store allocation at each lineshape call. Calculation is</span></td></tr>
<tr class="codeline" data-linenumber="720"><td class="num" id="LN720">720</td><td class="line">    <span class='comment'>// still done in the voigt routine itself, this is just an auxillary</span></td></tr>
<tr class="codeline" data-linenumber="721"><td class="num" id="LN721">721</td><td class="line">    <span class='comment'>// parameter, passed to lineshape. For selected lineshapes (e.g.,</span></td></tr>
<tr class="codeline" data-linenumber="722"><td class="num" id="LN722">722</td><td class="line">    <span class='comment'>// Rosenkranz) it is used additionally to pass parameters needed in</span></td></tr>
<tr class="codeline" data-linenumber="723"><td class="num" id="LN723">723</td><td class="line">    <span class='comment'>// the lineshape (e.g., overlap, ...). Consequently we have to</span></td></tr>
<tr class="codeline" data-linenumber="724"><td class="num" id="LN724">724</td><td class="line">    <span class='comment'>// assure that aux has a dimension not less then the number of</span></td></tr>
<tr class="codeline" data-linenumber="725"><td class="num" id="LN725">725</td><td class="line">    <span class='comment'>// parameters passed.</span></td></tr>
<tr class="codeline" data-linenumber="726"><td class="num" id="LN726">726</td><td class="line">    Index ii = (nf+1 &lt; 10) ? 10 : nf+1;</td></tr>
<tr class="codeline" data-linenumber="727"><td class="num" id="LN727">727</td><td class="line">    Vector aux(ii);</td></tr>
<tr class="codeline" data-linenumber="728"><td class="num" id="LN728">728</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="729"><td class="num" id="LN729">729</td><td class="line">    <span class='comment'>// Check that abs_p, abs_t, and abs_vmrs have consistent</span></td></tr>
<tr class="codeline" data-linenumber="730"><td class="num" id="LN730">730</td><td class="line">    <span class='comment'>// dimensions. This could be a user error, so we throw a</span></td></tr>
<tr class="codeline" data-linenumber="731"><td class="num" id="LN731">731</td><td class="line">    <span class='comment'>// runtime_error.</span></td></tr>
<tr class="codeline" data-linenumber="732"><td class="num" id="LN732">732</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="733"><td class="num" id="LN733">733</td><td class="line">    <span class='keyword'>if</span> ( abs_t.nelem() != np )</td></tr>
<tr class="codeline" data-linenumber="734"><td class="num" id="LN734">734</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="735"><td class="num" id="LN735">735</td><td class="line">        std::ostringstream os;</td></tr>
<tr class="codeline" data-linenumber="736"><td class="num" id="LN736">736</td><td class="line">        os &lt;&lt; <span class='string_literal'>"Variable abs_t must have the same dimension as abs_p.\n"</span></td></tr>
<tr class="codeline" data-linenumber="737"><td class="num" id="LN737">737</td><td class="line">           &lt;&lt; <span class='string_literal'>"abs_t.nelem() = "</span> &lt;&lt; abs_t.nelem() &lt;&lt; '\n'</td></tr>
<tr class="codeline" data-linenumber="738"><td class="num" id="LN738">738</td><td class="line">           &lt;&lt; <span class='string_literal'>"abs_p.nelem() = "</span> &lt;&lt; np;</td></tr>
<tr class="codeline" data-linenumber="739"><td class="num" id="LN739">739</td><td class="line">        <span class='keyword'>throw</span> std::runtime_error(os.str());</td></tr>
<tr class="codeline" data-linenumber="740"><td class="num" id="LN740">740</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="741"><td class="num" id="LN741">741</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="742"><td class="num" id="LN742">742</td><td class="line">    <span class='comment'>// all_vmrs should have dimensions [nspecies, np]:</span></td></tr>
<tr class="codeline" data-linenumber="743"><td class="num" id="LN743">743</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="744"><td class="num" id="LN744">744</td><td class="line">    <span class='keyword'>if</span> ( all_vmrs.ncols() != np )</td></tr>
<tr class="codeline" data-linenumber="745"><td class="num" id="LN745">745</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="746"><td class="num" id="LN746">746</td><td class="line">        std::ostringstream os;</td></tr>
<tr class="codeline" data-linenumber="747"><td class="num" id="LN747">747</td><td class="line">        os &lt;&lt; <span class='string_literal'>"Number of columns of all_vmrs must match abs_p.\n"</span></td></tr>
<tr class="codeline" data-linenumber="748"><td class="num" id="LN748">748</td><td class="line">           &lt;&lt; <span class='string_literal'>"all_vmrs.ncols() = "</span> &lt;&lt; all_vmrs.ncols() &lt;&lt; '\n'</td></tr>
<tr class="codeline" data-linenumber="749"><td class="num" id="LN749">749</td><td class="line">           &lt;&lt; <span class='string_literal'>"abs_p.nelem() = "</span> &lt;&lt; np;</td></tr>
<tr class="codeline" data-linenumber="750"><td class="num" id="LN750">750</td><td class="line">        <span class='keyword'>throw</span> std::runtime_error(os.str());</td></tr>
<tr class="codeline" data-linenumber="751"><td class="num" id="LN751">751</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="752"><td class="num" id="LN752">752</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="753"><td class="num" id="LN753">753</td><td class="line">    <span class='keyword'>const</span> Index nspecies = abs_species.nelem();</td></tr>
<tr class="codeline" data-linenumber="754"><td class="num" id="LN754">754</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="755"><td class="num" id="LN755">755</td><td class="line">    <span class='keyword'>if</span> ( all_vmrs.nrows() != nspecies)</td></tr>
<tr class="codeline" data-linenumber="756"><td class="num" id="LN756">756</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="757"><td class="num" id="LN757">757</td><td class="line">        std::ostringstream os;</td></tr>
<tr class="codeline" data-linenumber="758"><td class="num" id="LN758">758</td><td class="line">        os &lt;&lt; <span class='string_literal'>"Number of rows of all_vmrs must match abs_species.\n"</span></td></tr>
<tr class="codeline" data-linenumber="759"><td class="num" id="LN759">759</td><td class="line">           &lt;&lt; <span class='string_literal'>"all_vmrs.nrows() = "</span> &lt;&lt; all_vmrs.nrows() &lt;&lt; '\n'</td></tr>
<tr class="codeline" data-linenumber="760"><td class="num" id="LN760">760</td><td class="line">           &lt;&lt; <span class='string_literal'>"abs_species.nelem() = "</span> &lt;&lt; nspecies;</td></tr>
<tr class="codeline" data-linenumber="761"><td class="num" id="LN761">761</td><td class="line">        <span class='keyword'>throw</span> std::runtime_error(os.str());</td></tr>
<tr class="codeline" data-linenumber="762"><td class="num" id="LN762">762</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="763"><td class="num" id="LN763">763</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="764"><td class="num" id="LN764">764</td><td class="line">    <span class='comment'>// Check that the dimension of xsec is indeed [f_grid.nelem(),</span></td></tr>
<tr class="codeline" data-linenumber="765"><td class="num" id="LN765">765</td><td class="line">    <span class='comment'>// abs_p.nelem()]:</span></td></tr>
<tr class="codeline" data-linenumber="766"><td class="num" id="LN766">766</td><td class="line">    <span class='keyword'>if</span> ( xsec_attenuation.nrows() != nf || xsec_attenuation.ncols() != np )</td></tr>
<tr class="codeline" data-linenumber="767"><td class="num" id="LN767">767</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="768"><td class="num" id="LN768">768</td><td class="line">        std::ostringstream os;</td></tr>
<tr class="codeline" data-linenumber="769"><td class="num" id="LN769">769</td><td class="line">        os &lt;&lt; <span class='string_literal'>"Variable xsec_attenuation must have dimensions [f_grid.nelem(),abs_p.nelem()].\n"</span></td></tr>
<tr class="codeline" data-linenumber="770"><td class="num" id="LN770">770</td><td class="line">           &lt;&lt; <span class='string_literal'>"[xsec_attenuation.nrows(),xsec_attenuation.ncols()] = ["</span> &lt;&lt; xsec_attenuation.nrows()</td></tr>
<tr class="codeline" data-linenumber="771"><td class="num" id="LN771">771</td><td class="line">           &lt;&lt; <span class='string_literal'>", "</span> &lt;&lt; xsec_attenuation.ncols() &lt;&lt; <span class='string_literal'>"]\n"</span></td></tr>
<tr class="codeline" data-linenumber="772"><td class="num" id="LN772">772</td><td class="line">           &lt;&lt; <span class='string_literal'>"f_grid.nelem() = "</span> &lt;&lt; nf &lt;&lt; '\n'</td></tr>
<tr class="codeline" data-linenumber="773"><td class="num" id="LN773">773</td><td class="line">           &lt;&lt; <span class='string_literal'>"abs_p.nelem() = "</span> &lt;&lt; np;</td></tr>
<tr class="codeline" data-linenumber="774"><td class="num" id="LN774">774</td><td class="line">        <span class='keyword'>throw</span> std::runtime_error(os.str());</td></tr>
<tr class="codeline" data-linenumber="775"><td class="num" id="LN775">775</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="776"><td class="num" id="LN776">776</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="777"><td class="num" id="LN777">777</td><td class="line">    <span class='comment'>// Check that the dimension of xsec source is [f_grid.nelem(), abs_p.nelem()]:</span></td></tr>
<tr class="codeline" data-linenumber="778"><td class="num" id="LN778">778</td><td class="line">    <span class='keyword'>bool</span> calc_src;</td></tr>
<tr class="codeline" data-linenumber="779"><td class="num" id="LN779">779</td><td class="line">    <span class='keyword'>if</span> ( xsec_source.nrows() != nf || xsec_source.ncols() != np )</td></tr>
<tr class="codeline" data-linenumber="780"><td class="num" id="LN780">780</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="781"><td class="num" id="LN781">781</td><td class="line">      <span class='keyword'>if</span>( xsec_source.nrows() != 0 || xsec_source.ncols() != 0 )</td></tr>
<tr class="codeline" data-linenumber="782"><td class="num" id="LN782">782</td><td class="line">      {</td></tr>
<tr class="codeline" data-linenumber="783"><td class="num" id="LN783">783</td><td class="line">        std::ostringstream os;</td></tr>
<tr class="codeline" data-linenumber="784"><td class="num" id="LN784">784</td><td class="line">        os &lt;&lt; <span class='string_literal'>"Variable xsec_source must have dimensions [f_grid.nelem(),abs_p.nelem()] or [0,0].\n"</span></td></tr>
<tr class="codeline" data-linenumber="785"><td class="num" id="LN785">785</td><td class="line">           &lt;&lt; <span class='string_literal'>"[xsec_source.nrows(),xsec_source.ncols()] = ["</span> &lt;&lt; xsec_source.nrows()</td></tr>
<tr class="codeline" data-linenumber="786"><td class="num" id="LN786">786</td><td class="line">           &lt;&lt; <span class='string_literal'>", "</span> &lt;&lt; xsec_source.ncols() &lt;&lt; <span class='string_literal'>"]\n"</span></td></tr>
<tr class="codeline" data-linenumber="787"><td class="num" id="LN787">787</td><td class="line">           &lt;&lt; <span class='string_literal'>"f_grid.nelem() = "</span> &lt;&lt; nf &lt;&lt; '\n'</td></tr>
<tr class="codeline" data-linenumber="788"><td class="num" id="LN788">788</td><td class="line">           &lt;&lt; <span class='string_literal'>"abs_p.nelem() = "</span> &lt;&lt; np;</td></tr>
<tr class="codeline" data-linenumber="789"><td class="num" id="LN789">789</td><td class="line">        <span class='keyword'>throw</span> std::runtime_error(os.str());</td></tr>
<tr class="codeline" data-linenumber="790"><td class="num" id="LN790">790</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="791"><td class="num" id="LN791">791</td><td class="line">      <span class='keyword'>else</span> </td></tr>
<tr class="codeline" data-linenumber="792"><td class="num" id="LN792">792</td><td class="line">      {</td></tr>
<tr class="codeline" data-linenumber="793"><td class="num" id="LN793">793</td><td class="line">	calc_src = <span class='keyword'>false</span>;</td></tr>
<tr class="codeline" data-linenumber="794"><td class="num" id="LN794">794</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="795"><td class="num" id="LN795">795</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="796"><td class="num" id="LN796">796</td><td class="line">    <span class='keyword'>else</span></td></tr>
<tr class="codeline" data-linenumber="797"><td class="num" id="LN797">797</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="798"><td class="num" id="LN798">798</td><td class="line">      calc_src = <span class='keyword'>true</span>;</td></tr>
<tr class="codeline" data-linenumber="799"><td class="num" id="LN799">799</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="800"><td class="num" id="LN800">800</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="801"><td class="num" id="LN801">801</td><td class="line">    <span class='keyword'>if</span> ( xsec_phase.nrows() != 0 || xsec_phase.ncols() != 0 )</td></tr>
<tr class="codeline" data-linenumber="802"><td class="num" id="LN802">802</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="803"><td class="num" id="LN803">803</td><td class="line">        std::ostringstream os;</td></tr>
<tr class="codeline" data-linenumber="804"><td class="num" id="LN804">804</td><td class="line">        os &lt;&lt; <span class='string_literal'>"Variable xsec_phase must have dimensions [0,0] here.\n"</span></td></tr>
<tr class="codeline" data-linenumber="805"><td class="num" id="LN805">805</td><td class="line">           &lt;&lt; <span class='string_literal'>"[xsec_phase.nrows(),xsec_phase.ncols()] = ["</span> &lt;&lt; xsec_phase.nrows()</td></tr>
<tr class="codeline" data-linenumber="806"><td class="num" id="LN806">806</td><td class="line">           &lt;&lt; <span class='string_literal'>", "</span> &lt;&lt; xsec_phase.ncols() &lt;&lt; <span class='string_literal'>"]\n"</span></td></tr>
<tr class="codeline" data-linenumber="807"><td class="num" id="LN807">807</td><td class="line">           &lt;&lt; <span class='string_literal'>"f_grid.nelem() = "</span> &lt;&lt; nf &lt;&lt; '\n'</td></tr>
<tr class="codeline" data-linenumber="808"><td class="num" id="LN808">808</td><td class="line">           &lt;&lt; <span class='string_literal'>"abs_p.nelem() = "</span> &lt;&lt; np;</td></tr>
<tr class="codeline" data-linenumber="809"><td class="num" id="LN809">809</td><td class="line">        <span class='keyword'>throw</span> std::runtime_error(os.str());</td></tr>
<tr class="codeline" data-linenumber="810"><td class="num" id="LN810">810</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="811"><td class="num" id="LN811">811</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="812"><td class="num" id="LN812">812</td><td class="line">    String fail_msg;</td></tr>
<tr class="codeline" data-linenumber="813"><td class="num" id="LN813">813</td><td class="line">    <span class='keyword'>bool</span> failed = <span class='keyword'>false</span>;</td></tr>
<tr class="codeline" data-linenumber="814"><td class="num" id="LN814">814</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="815"><td class="num" id="LN815">815</td><td class="line">    <span class='comment'>// Loop all pressures:</span></td></tr>
<tr class="codeline" data-linenumber="816"><td class="num" id="LN816">816</td><td class="line">    <span class='keyword'>if</span> (np)</td></tr>
<tr class="codeline" data-linenumber="817"><td class="num" id="LN817">817</td><td class="line"><span class='directive'>#pragma omp parallel for                    \</span></td></tr>
<tr class="codeline" data-linenumber="818"><td class="num" id="LN818">818</td><td class="line"><span class='directive'>if (!arts_omp_in_parallel()               \</span></td></tr>
<tr class="codeline" data-linenumber="819"><td class="num" id="LN819">819</td><td class="line"><span class='directive'>&amp;&amp; np &gt;= arts_omp_get_max_threads())  \</span></td></tr>
<tr class="codeline" data-linenumber="820"><td class="num" id="LN820">820</td><td class="line"><span class='directive'>firstprivate(ls_attenuation, fac, f_local, aux)</span></td></tr>
<tr class="codeline" data-linenumber="821"><td class="num" id="LN821">821</td><td class="line">        <span class='keyword'>for</span> ( Index i=0; i&lt;np; ++i )</td></tr>
<tr class="codeline" data-linenumber="822"><td class="num" id="LN822">822</td><td class="line">        {</td></tr>
<tr class="codeline" data-linenumber="823"><td class="num" id="LN823">823</td><td class="line">            <span class='keyword'>if</span> (failed) <span class='keyword'>continue</span>;</td></tr>
<tr class="codeline" data-linenumber="824"><td class="num" id="LN824">824</td><td class="line">            </td></tr>
<tr class="codeline" data-linenumber="825"><td class="num" id="LN825">825</td><td class="line">            <span class='comment'>// holder when things can be empty</span></td></tr>
<tr class="codeline" data-linenumber="826"><td class="num" id="LN826">826</td><td class="line">            Vector empty_vector(0);</td></tr>
<tr class="codeline" data-linenumber="827"><td class="num" id="LN827">827</td><td class="line">            </td></tr>
<tr class="codeline" data-linenumber="828"><td class="num" id="LN828">828</td><td class="line">            <span class='comment'>// Store input profile variables, this is perhaps slightly faster.</span></td></tr>
<tr class="codeline" data-linenumber="829"><td class="num" id="LN829">829</td><td class="line">            <span class='keyword'>const</span> Numeric p_i       = abs_p[i];</td></tr>
<tr class="codeline" data-linenumber="830"><td class="num" id="LN830">830</td><td class="line">            <span class='keyword'>const</span> Numeric t_i       = abs_t[i];</td></tr>
<tr class="codeline" data-linenumber="831"><td class="num" id="LN831">831</td><td class="line">            ConstVectorView t_nlte_i  = calc_src ? abs_t_nlte(joker,i):empty_vector;</td></tr>
<tr class="codeline" data-linenumber="832"><td class="num" id="LN832">832</td><td class="line">            </td></tr>
<tr class="codeline" data-linenumber="833"><td class="num" id="LN833">833</td><td class="line">            <span class='comment'>//out3 &lt;&lt; "  p = " &lt;&lt; p_i &lt;&lt; " Pa\n";</span></td></tr>
<tr class="codeline" data-linenumber="834"><td class="num" id="LN834">834</td><td class="line">            </td></tr>
<tr class="codeline" data-linenumber="835"><td class="num" id="LN835">835</td><td class="line">            <span class='comment'>// Calculate total number density from pressure and temperature.</span></td></tr>
<tr class="codeline" data-linenumber="836"><td class="num" id="LN836">836</td><td class="line">            <span class='comment'>// n = n0*T0/p0 * p/T or n = p/kB/t, ideal gas law</span></td></tr>
<tr class="codeline" data-linenumber="837"><td class="num" id="LN837">837</td><td class="line">            <span class='comment'>//      const Numeric n = p_i / BOLTZMAN_CONST / t_i;</span></td></tr>
<tr class="codeline" data-linenumber="838"><td class="num" id="LN838">838</td><td class="line">            <span class='comment'>// This is not needed anymore, since we now calculate true cross</span></td></tr>
<tr class="codeline" data-linenumber="839"><td class="num" id="LN839">839</td><td class="line">            <span class='comment'>// sections, which do not contain the n.</span></td></tr>
<tr class="codeline" data-linenumber="840"><td class="num" id="LN840">840</td><td class="line">            </td></tr>
<tr class="codeline" data-linenumber="841"><td class="num" id="LN841">841</td><td class="line">            <span class='comment'>// Get handle on xsec for this pressure level i.</span></td></tr>
<tr class="codeline" data-linenumber="842"><td class="num" id="LN842">842</td><td class="line">            <span class='comment'>// Watch out! This is output, we have to be careful not to</span></td></tr>
<tr class="codeline" data-linenumber="843"><td class="num" id="LN843">843</td><td class="line">            <span class='comment'>// introduce race conditions when writing to it.</span></td></tr>
<tr class="codeline" data-linenumber="844"><td class="num" id="LN844">844</td><td class="line">            VectorView xsec_i_attenuation = xsec_attenuation(Range(joker),i);</td></tr>
<tr class="codeline" data-linenumber="845"><td class="num" id="LN845">845</td><td class="line">            VectorView xsec_i_source = calc_src ? xsec_source(Range(joker),i) : empty_vector;</td></tr>
<tr class="codeline" data-linenumber="846"><td class="num" id="LN846">846</td><td class="line">            </td></tr>
<tr class="codeline" data-linenumber="847"><td class="num" id="LN847">847</td><td class="line">            </td></tr>
<tr class="codeline" data-linenumber="848"><td class="num" id="LN848">848</td><td class="line">            <span class='comment'>//       if (omp_in_parallel())</span></td></tr>
<tr class="codeline" data-linenumber="849"><td class="num" id="LN849">849</td><td class="line">            <span class='comment'>//         cout &lt;&lt; "omp_in_parallel: true\n";</span></td></tr>
<tr class="codeline" data-linenumber="850"><td class="num" id="LN850">850</td><td class="line">            <span class='comment'>//       else</span></td></tr>
<tr class="codeline" data-linenumber="851"><td class="num" id="LN851">851</td><td class="line">            <span class='comment'>//         cout &lt;&lt; "omp_in_parallel: false\n";</span></td></tr>
<tr class="codeline" data-linenumber="852"><td class="num" id="LN852">852</td><td class="line">            </td></tr>
<tr class="codeline" data-linenumber="853"><td class="num" id="LN853">853</td><td class="line">            </td></tr>
<tr class="codeline" data-linenumber="854"><td class="num" id="LN854">854</td><td class="line">            <span class='comment'>// Prepare a variable that can be used by the individual LBL</span></td></tr>
<tr class="codeline" data-linenumber="855"><td class="num" id="LN855">855</td><td class="line">            <span class='comment'>// threads to add up absorption:</span></td></tr>
<tr class="codeline" data-linenumber="856"><td class="num" id="LN856">856</td><td class="line">            Index n_lbl_threads;</td></tr>
<tr class="codeline" data-linenumber="857"><td class="num" id="LN857">857</td><td class="line">            <span class='keyword'>if</span> (arts_omp_in_parallel())</td></tr>
<tr class="codeline" data-linenumber="858"><td class="num" id="LN858">858</td><td class="line">            {</td></tr>
<tr class="codeline" data-linenumber="859"><td class="num" id="LN859">859</td><td class="line">                <span class='comment'>// If we already are running parallel, then the LBL loop</span></td></tr>
<tr class="codeline" data-linenumber="860"><td class="num" id="LN860">860</td><td class="line">                <span class='comment'>// will not be parallelized.</span></td></tr>
<tr class="codeline" data-linenumber="861"><td class="num" id="LN861">861</td><td class="line">                n_lbl_threads = 1;</td></tr>
<tr class="codeline" data-linenumber="862"><td class="num" id="LN862">862</td><td class="line">            }</td></tr>
<tr class="codeline" data-linenumber="863"><td class="num" id="LN863">863</td><td class="line">            <span class='keyword'>else</span></td></tr>
<tr class="codeline" data-linenumber="864"><td class="num" id="LN864">864</td><td class="line">            {</td></tr>
<tr class="codeline" data-linenumber="865"><td class="num" id="LN865">865</td><td class="line">                n_lbl_threads = arts_omp_get_max_threads();</td></tr>
<tr class="codeline" data-linenumber="866"><td class="num" id="LN866">866</td><td class="line">            }</td></tr>
<tr class="codeline" data-linenumber="867"><td class="num" id="LN867">867</td><td class="line">            Matrix xsec_accum_attenuation(n_lbl_threads, xsec_i_attenuation.nelem(), 0);</td></tr>
<tr class="codeline" data-linenumber="868"><td class="num" id="LN868">868</td><td class="line">            Matrix xsec_accum_source(n_lbl_threads, xsec_i_source.nelem());</td></tr>
<tr class="codeline" data-linenumber="869"><td class="num" id="LN869">869</td><td class="line">            <span class='keyword'>if</span>(calc_src)</td></tr>
<tr class="codeline" data-linenumber="870"><td class="num" id="LN870">870</td><td class="line">              xsec_accum_source=0.0;</td></tr>
<tr class="codeline" data-linenumber="871"><td class="num" id="LN871">871</td><td class="line">            </td></tr>
<tr class="codeline" data-linenumber="872"><td class="num" id="LN872">872</td><td class="line">            <span class='comment'>// Simple caching of partition function to avoid recalculating things.</span></td></tr>
<tr class="codeline" data-linenumber="873"><td class="num" id="LN873">873</td><td class="line">            Numeric qt_cache=-1, qref_cache=-1;</td></tr>
<tr class="codeline" data-linenumber="874"><td class="num" id="LN874">874</td><td class="line">            Index iso_cache = - 1;</td></tr>
<tr class="codeline" data-linenumber="875"><td class="num" id="LN875">875</td><td class="line">            Numeric line_t_cache = - 1;</td></tr>
<tr class="codeline" data-linenumber="876"><td class="num" id="LN876">876</td><td class="line">            </td></tr>
<tr class="codeline" data-linenumber="877"><td class="num" id="LN877">877</td><td class="line">            ConstVectorView vmrs = all_vmrs(joker,i);</td></tr>
<tr class="codeline" data-linenumber="878"><td class="num" id="LN878">878</td><td class="line">            </td></tr>
<tr class="codeline" data-linenumber="879"><td class="num" id="LN879">879</td><td class="line">            <span class='comment'>// Loop all lines:</span></td></tr>
<tr class="codeline" data-linenumber="880"><td class="num" id="LN880">880</td><td class="line">            <span class='keyword'>if</span> (nl)</td></tr>
<tr class="codeline" data-linenumber="881"><td class="num" id="LN881">881</td><td class="line">            {</td></tr>
<tr class="codeline" data-linenumber="882"><td class="num" id="LN882">882</td><td class="line"><span class='directive'>#pragma omp parallel for                   \</span></td></tr>
<tr class="codeline" data-linenumber="883"><td class="num" id="LN883">883</td><td class="line"><span class='directive'>if (!arts_omp_in_parallel()               \</span></td></tr>
<tr class="codeline" data-linenumber="884"><td class="num" id="LN884">884</td><td class="line"><span class='directive'>&amp;&amp; nl &gt;= arts_omp_get_max_threads())  \</span></td></tr>
<tr class="codeline" data-linenumber="885"><td class="num" id="LN885">885</td><td class="line"><span class='directive'>firstprivate(ls_attenuation, fac, f_local, aux, qt_cache, qref_cache, iso_cache, line_t_cache)</span></td></tr>
<tr class="codeline" data-linenumber="886"><td class="num" id="LN886">886</td><td class="line">                <span class='keyword'>for</span> ( Index l=0; l&lt; nl; ++l )</td></tr>
<tr class="codeline" data-linenumber="887"><td class="num" id="LN887">887</td><td class="line">                {</td></tr>
<tr class="codeline" data-linenumber="888"><td class="num" id="LN888">888</td><td class="line">                    <span class='comment'>// Skip remaining iterations if an error occurred</span></td></tr>
<tr class="codeline" data-linenumber="889"><td class="num" id="LN889">889</td><td class="line">                    <span class='keyword'>if</span> (failed) <span class='keyword'>continue</span>;</td></tr>
<tr class="codeline" data-linenumber="890"><td class="num" id="LN890">890</td><td class="line">                    </td></tr>
<tr class="codeline" data-linenumber="891"><td class="num" id="LN891">891</td><td class="line">                    <span class='comment'>//           if (omp_in_parallel())</span></td></tr>
<tr class="codeline" data-linenumber="892"><td class="num" id="LN892">892</td><td class="line">                    <span class='comment'>//             cout &lt;&lt; "LBL: omp_in_parallel: true\n";</span></td></tr>
<tr class="codeline" data-linenumber="893"><td class="num" id="LN893">893</td><td class="line">                    <span class='comment'>//           else</span></td></tr>
<tr class="codeline" data-linenumber="894"><td class="num" id="LN894">894</td><td class="line">                    <span class='comment'>//             cout &lt;&lt; "LBL: omp_in_parallel: false\n";</span></td></tr>
<tr class="codeline" data-linenumber="895"><td class="num" id="LN895">895</td><td class="line">                    </td></tr>
<tr class="codeline" data-linenumber="896"><td class="num" id="LN896">896</td><td class="line">                    </td></tr>
<tr class="codeline" data-linenumber="897"><td class="num" id="LN897">897</td><td class="line">                    <span class='comment'>// The try block here is necessary to correctly handle</span></td></tr>
<tr class="codeline" data-linenumber="898"><td class="num" id="LN898">898</td><td class="line">                    <span class='comment'>// exceptions inside the parallel region.</span></td></tr>
<tr class="codeline" data-linenumber="899"><td class="num" id="LN899">899</td><td class="line">                    <span class='keyword'>try</span></td></tr>
<tr class="codeline" data-linenumber="900"><td class="num" id="LN900">900</td><td class="line">                    {</td></tr>
<tr class="codeline" data-linenumber="901"><td class="num" id="LN901">901</td><td class="line">                        <span class='keyword'>const</span> LineRecord&amp; l_l = abs_lines[l];</td></tr>
<tr class="codeline" data-linenumber="902"><td class="num" id="LN902">902</td><td class="line">                        </td></tr>
<tr class="codeline" data-linenumber="903"><td class="num" id="LN903">903</td><td class="line">                        <span class='comment'>// Prepare pressure broadening parameters</span></td></tr>
<tr class="codeline" data-linenumber="904"><td class="num" id="LN904">904</td><td class="line">                        Numeric gamma_0,gamma_2,eta,df_0,df_2,f_VC;</td></tr>
<tr class="codeline" data-linenumber="905"><td class="num" id="LN905">905</td><td class="line">                        l_l.SetPressureBroadeningParameters(gamma_0,gamma_2,eta,df_0,df_2,f_VC,</td></tr>
<tr class="codeline" data-linenumber="906"><td class="num" id="LN906">906</td><td class="line">                                                            t_i, p_i, this_species, vmrs, abs_species);</td></tr>
<tr class="codeline" data-linenumber="907"><td class="num" id="LN907">907</td><td class="line">                        </td></tr>
<tr class="codeline" data-linenumber="908"><td class="num" id="LN908">908</td><td class="line">                        <span class='comment'>// Check the chache is the tempearture of the line and the isotope is the same to avoid recalculating the partition sum</span></td></tr>
<tr class="codeline" data-linenumber="909"><td class="num" id="LN909">909</td><td class="line">                        <span class='keyword'>if</span>(iso_cache!=l_l.Isotopologue() || line_t_cache != l_l.Ti0())</td></tr>
<tr class="codeline" data-linenumber="910"><td class="num" id="LN910">910</td><td class="line">                        {</td></tr>
<tr class="codeline" data-linenumber="911"><td class="num" id="LN911">911</td><td class="line">                          iso_cache = l_l.Isotopologue();</td></tr>
<tr class="codeline" data-linenumber="912"><td class="num" id="LN912">912</td><td class="line">                          line_t_cache = l_l.Ti0();</td></tr>
<tr class="codeline" data-linenumber="913"><td class="num" id="LN913">913</td><td class="line">                          qref_cache=-1;<span class='comment'>// no need to reset qt since it is done internally.</span></td></tr>
<tr class="codeline" data-linenumber="914"><td class="num" id="LN914">914</td><td class="line">                        }</td></tr>
<tr class="codeline" data-linenumber="915"><td class="num" id="LN915">915</td><td class="line">                        </td></tr>
<tr class="codeline" data-linenumber="916"><td class="num" id="LN916">916</td><td class="line">                        <span class='comment'>// Prepare line strength scaling</span></td></tr>
<tr class="codeline" data-linenumber="917"><td class="num" id="LN917">917</td><td class="line">                        Numeric partition_ratio, K1, K2, abs_nlte_ratio, src_nlte_ratio;</td></tr>
<tr class="codeline" data-linenumber="918"><td class="num" id="LN918">918</td><td class="line">                        GetLineScalingData(qt_cache,</td></tr>
<tr class="codeline" data-linenumber="919"><td class="num" id="LN919">919</td><td class="line">                                           qref_cache,</td></tr>
<tr class="codeline" data-linenumber="920"><td class="num" id="LN920">920</td><td class="line">                                           partition_ratio, </td></tr>
<tr class="codeline" data-linenumber="921"><td class="num" id="LN921">921</td><td class="line">                                           K1, </td></tr>
<tr class="codeline" data-linenumber="922"><td class="num" id="LN922">922</td><td class="line">                                           K2,</td></tr>
<tr class="codeline" data-linenumber="923"><td class="num" id="LN923">923</td><td class="line">                                           abs_nlte_ratio, </td></tr>
<tr class="codeline" data-linenumber="924"><td class="num" id="LN924">924</td><td class="line">                                           src_nlte_ratio, </td></tr>
<tr class="codeline" data-linenumber="925"><td class="num" id="LN925">925</td><td class="line">                                           partition_functions.getParamType(l_l.Species(), l_l.Isotopologue()),</td></tr>
<tr class="codeline" data-linenumber="926"><td class="num" id="LN926">926</td><td class="line">                                           partition_functions.getParam(l_l.Species(), l_l.Isotopologue()),</td></tr>
<tr class="codeline" data-linenumber="927"><td class="num" id="LN927">927</td><td class="line">                                           t_i,</td></tr>
<tr class="codeline" data-linenumber="928"><td class="num" id="LN928">928</td><td class="line">                                           l_l.Ti0(),</td></tr>
<tr class="codeline" data-linenumber="929"><td class="num" id="LN929">929</td><td class="line">                                           l_l.F(),</td></tr>
<tr class="codeline" data-linenumber="930"><td class="num" id="LN930">930</td><td class="line">                                           l_l.Elow(),</td></tr>
<tr class="codeline" data-linenumber="931"><td class="num" id="LN931">931</td><td class="line">                                           calc_src,</td></tr>
<tr class="codeline" data-linenumber="932"><td class="num" id="LN932">932</td><td class="line">                                           l_l.Evlow(),</td></tr>
<tr class="codeline" data-linenumber="933"><td class="num" id="LN933">933</td><td class="line">                                           l_l.Evupp(),</td></tr>
<tr class="codeline" data-linenumber="934"><td class="num" id="LN934">934</td><td class="line">                                           l_l.NLTELowerIndex(),</td></tr>
<tr class="codeline" data-linenumber="935"><td class="num" id="LN935">935</td><td class="line">                                           l_l.NLTEUpperIndex(),</td></tr>
<tr class="codeline" data-linenumber="936"><td class="num" id="LN936">936</td><td class="line">                                           t_nlte_i);</td></tr>
<tr class="codeline" data-linenumber="937"><td class="num" id="LN937">937</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="938"><td class="num" id="LN938">938</td><td class="line">                        <span class='comment'>// Dopple broadening</span></td></tr>
<tr class="codeline" data-linenumber="939"><td class="num" id="LN939">939</td><td class="line">                        <span class='keyword'>const</span> Numeric sigma = l_l.F() * doppler_const *sqrt( t_i / l_l.IsotopologueData().Mass());</td></tr>
<tr class="codeline" data-linenumber="940"><td class="num" id="LN940">940</td><td class="line">                        </td></tr>
<tr class="codeline" data-linenumber="941"><td class="num" id="LN941">941</td><td class="line">                        <span class='keyword'>const</span> <span class='keyword'>bool</span> calc_partials=<span class='keyword'>false</span>;</td></tr>
<tr class="codeline" data-linenumber="942"><td class="num" id="LN942">942</td><td class="line">                        Vector da_dF, dp_dF, da_dP, dp_dP;</td></tr>
<tr class="codeline" data-linenumber="943"><td class="num" id="LN943">943</td><td class="line">                        </td></tr>
<tr class="codeline" data-linenumber="944"><td class="num" id="LN944">944</td><td class="line">                        Range this_f_range(0,0);</td></tr>
<tr class="codeline" data-linenumber="945"><td class="num" id="LN945">945</td><td class="line">                        </td></tr>
<tr class="codeline" data-linenumber="946"><td class="num" id="LN946">946</td><td class="line">                        <span class='comment'>// Calculate line cross section</span></td></tr>
<tr class="codeline" data-linenumber="947"><td class="num" id="LN947">947</td><td class="line">                        xsec_single_line(<span class='comment'>// OUTPUT</span></td></tr>
<tr class="codeline" data-linenumber="948"><td class="num" id="LN948">948</td><td class="line">                                         xsec_accum_attenuation(arts_omp_get_thread_num(),joker),</td></tr>
<tr class="codeline" data-linenumber="949"><td class="num" id="LN949">949</td><td class="line">                                         xsec_accum_source(arts_omp_get_thread_num(),joker),</td></tr>
<tr class="codeline" data-linenumber="950"><td class="num" id="LN950">950</td><td class="line">                                         empty_vector,</td></tr>
<tr class="codeline" data-linenumber="951"><td class="num" id="LN951">951</td><td class="line">                                         <span class='comment'>// HELPER:</span></td></tr>
<tr class="codeline" data-linenumber="952"><td class="num" id="LN952">952</td><td class="line">                                         ls_attenuation,</td></tr>
<tr class="codeline" data-linenumber="953"><td class="num" id="LN953">953</td><td class="line">                                         ls_phase_dummy,</td></tr>
<tr class="codeline" data-linenumber="954"><td class="num" id="LN954">954</td><td class="line">                                         da_dF,</td></tr>
<tr class="codeline" data-linenumber="955"><td class="num" id="LN955">955</td><td class="line">                                         dp_dF,</td></tr>
<tr class="codeline" data-linenumber="956"><td class="num" id="LN956">956</td><td class="line">                                         da_dP,</td></tr>
<tr class="codeline" data-linenumber="957"><td class="num" id="LN957">957</td><td class="line">                                         dp_dP,</td></tr>
<tr class="codeline" data-linenumber="958"><td class="num" id="LN958">958</td><td class="line">                                         this_f_range,</td></tr>
<tr class="codeline" data-linenumber="959"><td class="num" id="LN959">959</td><td class="line">                                         fac,</td></tr>
<tr class="codeline" data-linenumber="960"><td class="num" id="LN960">960</td><td class="line">                                         aux,</td></tr>
<tr class="codeline" data-linenumber="961"><td class="num" id="LN961">961</td><td class="line">                                         <span class='comment'>// FREQUENCY</span></td></tr>
<tr class="codeline" data-linenumber="962"><td class="num" id="LN962">962</td><td class="line">                                         f_local,</td></tr>
<tr class="codeline" data-linenumber="963"><td class="num" id="LN963">963</td><td class="line">                                         f_grid,</td></tr>
<tr class="codeline" data-linenumber="964"><td class="num" id="LN964">964</td><td class="line">                                         nf,</td></tr>
<tr class="codeline" data-linenumber="965"><td class="num" id="LN965">965</td><td class="line">                                         cutoff,</td></tr>
<tr class="codeline" data-linenumber="966"><td class="num" id="LN966">966</td><td class="line">                                         l_l.F(),</td></tr>
<tr class="codeline" data-linenumber="967"><td class="num" id="LN967">967</td><td class="line">                                         <span class='comment'>// LINE STRENGTH</span></td></tr>
<tr class="codeline" data-linenumber="968"><td class="num" id="LN968">968</td><td class="line">                                         l_l.I0(),</td></tr>
<tr class="codeline" data-linenumber="969"><td class="num" id="LN969">969</td><td class="line">                                         partition_ratio,</td></tr>
<tr class="codeline" data-linenumber="970"><td class="num" id="LN970">970</td><td class="line">                                         K1*K2,</td></tr>
<tr class="codeline" data-linenumber="971"><td class="num" id="LN971">971</td><td class="line">                                         abs_nlte_ratio,</td></tr>
<tr class="codeline" data-linenumber="972"><td class="num" id="LN972">972</td><td class="line">                                         src_nlte_ratio,</td></tr>
<tr class="codeline" data-linenumber="973"><td class="num" id="LN973">973</td><td class="line">                                         isotopologue_ratios.getParam(l_l.Species(),l_l.Isotopologue())[0].data[0],</td></tr>
<tr class="codeline" data-linenumber="974"><td class="num" id="LN974">974</td><td class="line">                                         <span class='comment'>// ATMOSPHERIC TEMPERATURE</span></td></tr>
<tr class="codeline" data-linenumber="975"><td class="num" id="LN975">975</td><td class="line">                                         t_i,</td></tr>
<tr class="codeline" data-linenumber="976"><td class="num" id="LN976">976</td><td class="line">                                         <span class='comment'>// LINE SHAPE</span></td></tr>
<tr class="codeline" data-linenumber="977"><td class="num" id="LN977">977</td><td class="line">                                         ind_ls,</td></tr>
<tr class="codeline" data-linenumber="978"><td class="num" id="LN978">978</td><td class="line">                                         ind_lsn,</td></tr>
<tr class="codeline" data-linenumber="979"><td class="num" id="LN979">979</td><td class="line">                                         <span class='comment'>// LINE BROADENING</span></td></tr>
<tr class="codeline" data-linenumber="980"><td class="num" id="LN980">980</td><td class="line">                                         gamma_0,</td></tr>
<tr class="codeline" data-linenumber="981"><td class="num" id="LN981">981</td><td class="line">                                         gamma_2,</td></tr>
<tr class="codeline" data-linenumber="982"><td class="num" id="LN982">982</td><td class="line">                                         eta,</td></tr>
<tr class="codeline" data-linenumber="983"><td class="num" id="LN983">983</td><td class="line">                                         df_0,</td></tr>
<tr class="codeline" data-linenumber="984"><td class="num" id="LN984">984</td><td class="line">                                         df_2,</td></tr>
<tr class="codeline" data-linenumber="985"><td class="num" id="LN985">985</td><td class="line">                                         sigma,</td></tr>
<tr class="codeline" data-linenumber="986"><td class="num" id="LN986">986</td><td class="line">                                         f_VC,</td></tr>
<tr class="codeline" data-linenumber="987"><td class="num" id="LN987">987</td><td class="line">                                         <span class='comment'>// LINE MIXING</span></td></tr>
<tr class="codeline" data-linenumber="988"><td class="num" id="LN988">988</td><td class="line">                                         0,</td></tr>
<tr class="codeline" data-linenumber="989"><td class="num" id="LN989">989</td><td class="line">                                         0,</td></tr>
<tr class="codeline" data-linenumber="990"><td class="num" id="LN990">990</td><td class="line">                                         0,</td></tr>
<tr class="codeline" data-linenumber="991"><td class="num" id="LN991">991</td><td class="line">                                         <span class='comment'>// FEATURE FLAGS</span></td></tr>
<tr class="codeline" data-linenumber="992"><td class="num" id="LN992">992</td><td class="line">                                         cut,</td></tr>
<tr class="codeline" data-linenumber="993"><td class="num" id="LN993">993</td><td class="line">                                         calc_phase,</td></tr>
<tr class="codeline" data-linenumber="994"><td class="num" id="LN994">994</td><td class="line">                                         calc_partials,</td></tr>
<tr class="codeline" data-linenumber="995"><td class="num" id="LN995">995</td><td class="line">                                         calc_src);</td></tr>
<tr class="codeline" data-linenumber="996"><td class="num" id="LN996">996</td><td class="line">                        </td></tr>
<tr class="codeline" data-linenumber="997"><td class="num" id="LN997">997</td><td class="line">                    } <span class='comment'>// end of try block</span></td></tr>
<tr class="codeline" data-linenumber="998"><td class="num" id="LN998">998</td><td class="line">                    <span class='keyword'>catch</span> (<span class='keyword'>const</span> std::runtime_error &amp;e)</td></tr>
<tr class="codeline" data-linenumber="999"><td class="num" id="LN999">999</td><td class="line">                    {</td></tr>
<tr class="codeline" data-linenumber="1000"><td class="num" id="LN1000">1000</td><td class="line">                        <span class='directive'>#pragma omp critical (xsec_species_fail)</span></td></tr>
<tr class="codeline" data-linenumber="1001"><td class="num" id="LN1001">1001</td><td class="line">                        { fail_msg = e.what(); failed = <span class='keyword'>true</span>; }</td></tr>
<tr class="codeline" data-linenumber="1002"><td class="num" id="LN1002">1002</td><td class="line">                    }</td></tr>
<tr class="codeline" data-linenumber="1003"><td class="num" id="LN1003">1003</td><td class="line">                    </td></tr>
<tr class="codeline" data-linenumber="1004"><td class="num" id="LN1004">1004</td><td class="line">                } <span class='comment'>// end of parallel LBL loop</span></td></tr>
<tr class="codeline" data-linenumber="1005"><td class="num" id="LN1005">1005</td><td class="line">            }</td></tr>
<tr class="codeline" data-linenumber="1006"><td class="num" id="LN1006">1006</td><td class="line">                </td></tr>
<tr class="codeline" data-linenumber="1007"><td class="num" id="LN1007">1007</td><td class="line">            <span class='comment'>// Bail out if an error occurred in the LBL loop</span></td></tr>
<tr class="codeline" data-linenumber="1008"><td class="num" id="LN1008">1008</td><td class="line">            <span class='keyword'>if</span> (failed) <span class='keyword'>continue</span>;</td></tr>
<tr class="codeline" data-linenumber="1009"><td class="num" id="LN1009">1009</td><td class="line">            </td></tr>
<tr class="codeline" data-linenumber="1010"><td class="num" id="LN1010">1010</td><td class="line">            <span class='comment'>// Now we just have to add up all the rows of xsec_accum:</span></td></tr>
<tr class="codeline" data-linenumber="1011"><td class="num" id="LN1011">1011</td><td class="line">            <span class='keyword'>for</span> (Index j=0; j&lt;xsec_accum_attenuation.nrows(); ++j)</td></tr>
<tr class="codeline" data-linenumber="1012"><td class="num" id="LN1012">1012</td><td class="line">            {</td></tr>
<tr class="codeline" data-linenumber="1013"><td class="num" id="LN1013">1013</td><td class="line">                xsec_i_attenuation += xsec_accum_attenuation(j, Range(joker));</td></tr>
<tr class="codeline" data-linenumber="1014"><td class="num" id="LN1014">1014</td><td class="line">                <span class='keyword'>if</span>(calc_src)</td></tr>
<tr class="codeline" data-linenumber="1015"><td class="num" id="LN1015">1015</td><td class="line">                    {</td></tr>
<tr class="codeline" data-linenumber="1016"><td class="num" id="LN1016">1016</td><td class="line">                        xsec_i_source += xsec_accum_source(j, Range(joker));</td></tr>
<tr class="codeline" data-linenumber="1017"><td class="num" id="LN1017">1017</td><td class="line">                    }</td></tr>
<tr class="codeline" data-linenumber="1018"><td class="num" id="LN1018">1018</td><td class="line">            }</td></tr>
<tr class="codeline" data-linenumber="1019"><td class="num" id="LN1019">1019</td><td class="line">    } <span class='comment'>// end of parallel pressure loop</span></td></tr>
<tr class="codeline" data-linenumber="1020"><td class="num" id="LN1020">1020</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="1021"><td class="num" id="LN1021">1021</td><td class="line">    <span class='keyword'>if</span> (failed) <span class='keyword'>throw</span> std::runtime_error(<span class='string_literal'>"Run-time error in function: xsec_species\n"</span> + fail_msg);</td></tr>
<tr class="codeline" data-linenumber="1022"><td class="num" id="LN1022">1022</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="1023"><td class="num" id="LN1023">1023</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1024"><td class="num" id="LN1024">1024</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1025"><td class="num" id="LN1025">1025</td><td class="line"><span class='comment'>/**</span> </td></tr>
<tr class="codeline" data-linenumber="1026"><td class="num" id="LN1026">1026</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1027"><td class="num" id="LN1027">1027</td><td class="line">   <span class='comment'>Calculate line absorption cross sections for one line at one layer</span></td></tr>
<tr class="codeline" data-linenumber="1028"><td class="num" id="LN1028">1028</td><td class="line">   <span class='comment'>and accumulates to the total phase and attenuation change.</span></td></tr>
<tr class="codeline" data-linenumber="1029"><td class="num" id="LN1029">1029</td><td class="line">   </td></tr>
<tr class="codeline" data-linenumber="1030"><td class="num" id="LN1030">1030</td><td class="line">   <span class='comment'>No dependency on LineRecord to increase speed for wrapper applications.</span></td></tr>
<tr class="codeline" data-linenumber="1031"><td class="num" id="LN1031">1031</td><td class="line">   </td></tr>
<tr class="codeline" data-linenumber="1032"><td class="num" id="LN1032">1032</td><td class="line">   <span class='comment'>\retval xsec_accum_attenuation   Cross section of one tag group. This is now the</span></td></tr>
<tr class="codeline" data-linenumber="1033"><td class="num" id="LN1033">1033</td><td class="line">                                    <span class='comment'>true absorption cross section in units of m^2.</span></td></tr>
<tr class="codeline" data-linenumber="1034"><td class="num" id="LN1034">1034</td><td class="line">                                    <span class='comment'>It has inputs of all previously calculated lines.</span></td></tr>
<tr class="codeline" data-linenumber="1035"><td class="num" id="LN1035">1035</td><td class="line">   <span class='comment'>\retval xsec_accum_source        Deviation of line cross section from LTE cross-section</span></td></tr>
<tr class="codeline" data-linenumber="1036"><td class="num" id="LN1036">1036</td><td class="line">   <span class='comment'>\retval xsec_accum_phase         Cross section of one tag group. This is now the</span></td></tr>
<tr class="codeline" data-linenumber="1037"><td class="num" id="LN1037">1037</td><td class="line">                                    <span class='comment'>true dispersion cross section in units of m^2.</span></td></tr>
<tr class="codeline" data-linenumber="1038"><td class="num" id="LN1038">1038</td><td class="line">                                    <span class='comment'>It has inputs of all previously calculated lines.</span></td></tr>
<tr class="codeline" data-linenumber="1039"><td class="num" id="LN1039">1039</td><td class="line">   <span class='comment'>\retval attenuation              Input only to increase speed.  Holds attenuation internally.</span></td></tr>
<tr class="codeline" data-linenumber="1040"><td class="num" id="LN1040">1040</td><td class="line">   <span class='comment'>\retval phase                    Input only to increase speed.  Holds phase internally.</span></td></tr>
<tr class="codeline" data-linenumber="1041"><td class="num" id="LN1041">1041</td><td class="line">   <span class='comment'>\retval fac                      Input only to increase speed.  Holds lineshape factor internally.</span></td></tr>
<tr class="codeline" data-linenumber="1042"><td class="num" id="LN1042">1042</td><td class="line">   <span class='comment'>\retval aux                      Input only to increase speed.  Holds f_grid factor internally.</span></td></tr>
<tr class="codeline" data-linenumber="1043"><td class="num" id="LN1043">1043</td><td class="line">   <span class='comment'>\retval f_local                  Input only to increase speed.  Holds f_grid internally.</span></td></tr>
<tr class="codeline" data-linenumber="1044"><td class="num" id="LN1044">1044</td><td class="line">   <span class='comment'>\param f_grid,                   Frequency grid</span></td></tr>
<tr class="codeline" data-linenumber="1045"><td class="num" id="LN1045">1045</td><td class="line">   <span class='comment'>\param nf,                       Number of frequencies to calculate</span></td></tr>
<tr class="codeline" data-linenumber="1046"><td class="num" id="LN1046">1046</td><td class="line">   <span class='comment'>\param cutoff,                   Lineshape cutoff.</span></td></tr>
<tr class="codeline" data-linenumber="1047"><td class="num" id="LN1047">1047</td><td class="line">   <span class='comment'>\param F0,                       Line center</span></td></tr>
<tr class="codeline" data-linenumber="1048"><td class="num" id="LN1048">1048</td><td class="line">   <span class='comment'>\param intensity,                Line intensity</span></td></tr>
<tr class="codeline" data-linenumber="1049"><td class="num" id="LN1049">1049</td><td class="line">   <span class='comment'>\param part_fct_ratio            Ratio of partition sums to atmospheric temperature</span></td></tr>
<tr class="codeline" data-linenumber="1050"><td class="num" id="LN1050">1050</td><td class="line">   <span class='comment'>\param boltzmann_ratio           Ratio of Boltzmann statistics to atmospheric temperature</span></td></tr>
<tr class="codeline" data-linenumber="1051"><td class="num" id="LN1051">1051</td><td class="line">   <span class='comment'>\param abs_nlte_ratio            Ratio of absorption intensity to LTE</span></td></tr>
<tr class="codeline" data-linenumber="1052"><td class="num" id="LN1052">1052</td><td class="line">   <span class='comment'>\param src_nlte_ratio            Ratio of emission intesity to LTE</span></td></tr>
<tr class="codeline" data-linenumber="1053"><td class="num" id="LN1053">1053</td><td class="line">   <span class='comment'>\param Isotopologue_Ratio,       Ratio of the isotopologue in the atmosphere</span></td></tr>
<tr class="codeline" data-linenumber="1054"><td class="num" id="LN1054">1054</td><td class="line">   <span class='comment'>\param temperature,              Atmospheric temperature</span></td></tr>
<tr class="codeline" data-linenumber="1055"><td class="num" id="LN1055">1055</td><td class="line">   <span class='comment'>\param ind_ls,                   Index to lineshape function.</span></td></tr>
<tr class="codeline" data-linenumber="1056"><td class="num" id="LN1056">1056</td><td class="line">   <span class='comment'>\param ind_lsn,                  Index to lineshape norm.</span></td></tr>
<tr class="codeline" data-linenumber="1057"><td class="num" id="LN1057">1057</td><td class="line">   <span class='comment'>\param gamma_0,                  Line pressure broadening</span></td></tr>
<tr class="codeline" data-linenumber="1058"><td class="num" id="LN1058">1058</td><td class="line">   <span class='comment'>\param gamma_2,                  Speed-dependent line pressure broadening</span></td></tr>
<tr class="codeline" data-linenumber="1059"><td class="num" id="LN1059">1059</td><td class="line">   <span class='comment'>\param eta,                      Correlation of pressure broadening parameters</span></td></tr>
<tr class="codeline" data-linenumber="1060"><td class="num" id="LN1060">1060</td><td class="line">   <span class='comment'>\param df_0,                     Line pressure shift</span></td></tr>
<tr class="codeline" data-linenumber="1061"><td class="num" id="LN1061">1061</td><td class="line">   <span class='comment'>\param df_2,                     Speed-dependent line pressure shift</span></td></tr>
<tr class="codeline" data-linenumber="1062"><td class="num" id="LN1062">1062</td><td class="line">   <span class='comment'>\param sigma,                    Doppler broadening</span></td></tr>
<tr class="codeline" data-linenumber="1063"><td class="num" id="LN1063">1063</td><td class="line">   <span class='comment'>\param f_VC,                     Collisional frequency limit</span></td></tr>
<tr class="codeline" data-linenumber="1064"><td class="num" id="LN1064">1064</td><td class="line">   <span class='comment'>\param LM_DF,                    Line mixing frequency shift</span></td></tr>
<tr class="codeline" data-linenumber="1065"><td class="num" id="LN1065">1065</td><td class="line">   <span class='comment'>\param LM_Y,                     Line mixing dispersion dependency</span></td></tr>
<tr class="codeline" data-linenumber="1066"><td class="num" id="LN1066">1066</td><td class="line">   <span class='comment'>\param LM_G,                     Line mixing added attenuation</span></td></tr>
<tr class="codeline" data-linenumber="1067"><td class="num" id="LN1067">1067</td><td class="line">   <span class='comment'>\param cut,                      Is cutoff applied?</span></td></tr>
<tr class="codeline" data-linenumber="1068"><td class="num" id="LN1068">1068</td><td class="line">   <span class='comment'>\param calc_phase,               Is dispersion calculated?</span></td></tr>
<tr class="codeline" data-linenumber="1069"><td class="num" id="LN1069">1069</td><td class="line">   <span class='comment'>\param calc_src,                 Is source calculated?</span></td></tr>
<tr class="codeline" data-linenumber="1070"><td class="num" id="LN1070">1070</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1071"><td class="num" id="LN1071">1071</td><td class="line">   <span class='comment'>\author Stefan Buehler and Axel von Engeln</span></td></tr>
<tr class="codeline" data-linenumber="1072"><td class="num" id="LN1072">1072</td><td class="line">   <span class='comment'>\date   2001-01-11</span> </td></tr>
<tr class="codeline" data-linenumber="1073"><td class="num" id="LN1073">1073</td><td class="line">   </td></tr>
<tr class="codeline" data-linenumber="1074"><td class="num" id="LN1074">1074</td><td class="line">   <span class='comment'>Changed from pseudo cross sections to true cross sections</span></td></tr>
<tr class="codeline" data-linenumber="1075"><td class="num" id="LN1075">1075</td><td class="line">   </td></tr>
<tr class="codeline" data-linenumber="1076"><td class="num" id="LN1076">1076</td><td class="line">   <span class='comment'>\author Stefan Buehler</span> </td></tr>
<tr class="codeline" data-linenumber="1077"><td class="num" id="LN1077">1077</td><td class="line">   <span class='comment'>\date   2007-08-08</span> </td></tr>
<tr class="codeline" data-linenumber="1078"><td class="num" id="LN1078">1078</td><td class="line">   </td></tr>
<tr class="codeline" data-linenumber="1079"><td class="num" id="LN1079">1079</td><td class="line">   <span class='comment'>Adapted to new Perrin line parameters, treating broadening by different</span> </td></tr>
<tr class="codeline" data-linenumber="1080"><td class="num" id="LN1080">1080</td><td class="line">   <span class='comment'>gases explicitly</span></td></tr>
<tr class="codeline" data-linenumber="1081"><td class="num" id="LN1081">1081</td><td class="line">   </td></tr>
<tr class="codeline" data-linenumber="1082"><td class="num" id="LN1082">1082</td><td class="line">   <span class='comment'>\author Stefan Buehler</span></td></tr>
<tr class="codeline" data-linenumber="1083"><td class="num" id="LN1083">1083</td><td class="line">   <span class='comment'>\date   2012-09-03</span></td></tr>
<tr class="codeline" data-linenumber="1084"><td class="num" id="LN1084">1084</td><td class="line">   </td></tr>
<tr class="codeline" data-linenumber="1085"><td class="num" id="LN1085">1085</td><td class="line">   <span class='comment'>Removed LineRecord dependency.</span></td></tr>
<tr class="codeline" data-linenumber="1086"><td class="num" id="LN1086">1086</td><td class="line">   </td></tr>
<tr class="codeline" data-linenumber="1087"><td class="num" id="LN1087">1087</td><td class="line">   <span class='comment'>\author Richard Larsson</span></td></tr>
<tr class="codeline" data-linenumber="1088"><td class="num" id="LN1088">1088</td><td class="line">   <span class='comment'>\date   2014-10-29</span></td></tr>
<tr class="codeline" data-linenumber="1089"><td class="num" id="LN1089">1089</td><td class="line">   </td></tr>
<tr class="codeline" data-linenumber="1090"><td class="num" id="LN1090">1090</td><td class="line"><span class='comment'>*/</span></td></tr>
<tr class="codeline" data-linenumber="1091"><td class="num" id="LN1091">1091</td><td class="line"><span class='keyword'>void</span> xsec_single_line(<span class='comment'>// Output:</span></td></tr>
<tr class="codeline" data-linenumber="1092"><td class="num" id="LN1092">1092</td><td class="line">                      VectorView xsec_accum_attenuation, </td></tr>
<tr class="codeline" data-linenumber="1093"><td class="num" id="LN1093">1093</td><td class="line">                      VectorView xsec_accum_source, </td></tr>
<tr class="codeline" data-linenumber="1094"><td class="num" id="LN1094">1094</td><td class="line">                      VectorView xsec_accum_phase, </td></tr>
<tr class="codeline" data-linenumber="1095"><td class="num" id="LN1095">1095</td><td class="line">                      <span class='comment'>// Helper variables</span></td></tr>
<tr class="codeline" data-linenumber="1096"><td class="num" id="LN1096">1096</td><td class="line">                      Vector&amp; attenuation, </td></tr>
<tr class="codeline" data-linenumber="1097"><td class="num" id="LN1097">1097</td><td class="line">                      Vector&amp; phase,</td></tr>
<tr class="codeline" data-linenumber="1098"><td class="num" id="LN1098">1098</td><td class="line">                      Vector&amp; dFa_dx,</td></tr>
<tr class="codeline" data-linenumber="1099"><td class="num" id="LN1099">1099</td><td class="line">                      Vector&amp; dFb_dx,</td></tr>
<tr class="codeline" data-linenumber="1100"><td class="num" id="LN1100">1100</td><td class="line">                      Vector&amp; dFa_dy,</td></tr>
<tr class="codeline" data-linenumber="1101"><td class="num" id="LN1101">1101</td><td class="line">                      Vector&amp; dFb_dy,</td></tr>
<tr class="codeline" data-linenumber="1102"><td class="num" id="LN1102">1102</td><td class="line">                      Range&amp;  this_f_range,</td></tr>
<tr class="codeline" data-linenumber="1103"><td class="num" id="LN1103">1103</td><td class="line">                      Vector&amp; fac, </td></tr>
<tr class="codeline" data-linenumber="1104"><td class="num" id="LN1104">1104</td><td class="line">                      Vector&amp; aux, </td></tr>
<tr class="codeline" data-linenumber="1105"><td class="num" id="LN1105">1105</td><td class="line">                      <span class='comment'>// Frequency grid:</span></td></tr>
<tr class="codeline" data-linenumber="1106"><td class="num" id="LN1106">1106</td><td class="line">                      Vector&amp; f_local, </td></tr>
<tr class="codeline" data-linenumber="1107"><td class="num" id="LN1107">1107</td><td class="line">                      <span class='keyword'>const</span> ConstVectorView f_grid, </td></tr>
<tr class="codeline" data-linenumber="1108"><td class="num" id="LN1108">1108</td><td class="line">                      <span class='keyword'>const</span> Index nf, </td></tr>
<tr class="codeline" data-linenumber="1109"><td class="num" id="LN1109">1109</td><td class="line">                      <span class='keyword'>const</span> Numeric cutoff,</td></tr>
<tr class="codeline" data-linenumber="1110"><td class="num" id="LN1110">1110</td><td class="line">                      Numeric F0, </td></tr>
<tr class="codeline" data-linenumber="1111"><td class="num" id="LN1111">1111</td><td class="line">                      <span class='comment'>// Line strength:</span></td></tr>
<tr class="codeline" data-linenumber="1112"><td class="num" id="LN1112">1112</td><td class="line">                      Numeric intensity, </td></tr>
<tr class="codeline" data-linenumber="1113"><td class="num" id="LN1113">1113</td><td class="line">                      <span class='keyword'>const</span> Numeric part_fct_ratio,  </td></tr>
<tr class="codeline" data-linenumber="1114"><td class="num" id="LN1114">1114</td><td class="line">                      <span class='keyword'>const</span> Numeric boltzmann_ratio,</td></tr>
<tr class="codeline" data-linenumber="1115"><td class="num" id="LN1115">1115</td><td class="line">                      <span class='keyword'>const</span> Numeric abs_nlte_ratio,</td></tr>
<tr class="codeline" data-linenumber="1116"><td class="num" id="LN1116">1116</td><td class="line">                      <span class='keyword'>const</span> Numeric src_nlte_ratio,</td></tr>
<tr class="codeline" data-linenumber="1117"><td class="num" id="LN1117">1117</td><td class="line">                      <span class='keyword'>const</span> Numeric Isotopologue_Ratio,</td></tr>
<tr class="codeline" data-linenumber="1118"><td class="num" id="LN1118">1118</td><td class="line">                      <span class='comment'>// Atmospheric state</span></td></tr>
<tr class="codeline" data-linenumber="1119"><td class="num" id="LN1119">1119</td><td class="line">                      <span class='keyword'>const</span> Numeric temperature, </td></tr>
<tr class="codeline" data-linenumber="1120"><td class="num" id="LN1120">1120</td><td class="line">                      <span class='comment'>// Line shape:</span></td></tr>
<tr class="codeline" data-linenumber="1121"><td class="num" id="LN1121">1121</td><td class="line">                      <span class='keyword'>const</span> Index ind_ls, </td></tr>
<tr class="codeline" data-linenumber="1122"><td class="num" id="LN1122">1122</td><td class="line">                      <span class='keyword'>const</span> Index ind_lsn,  </td></tr>
<tr class="codeline" data-linenumber="1123"><td class="num" id="LN1123">1123</td><td class="line">                      <span class='comment'>// Line broadening:</span></td></tr>
<tr class="codeline" data-linenumber="1124"><td class="num" id="LN1124">1124</td><td class="line">                      <span class='keyword'>const</span> Numeric gamma_0,</td></tr>
<tr class="codeline" data-linenumber="1125"><td class="num" id="LN1125">1125</td><td class="line">                      <span class='keyword'>const</span> Numeric gamma_2,</td></tr>
<tr class="codeline" data-linenumber="1126"><td class="num" id="LN1126">1126</td><td class="line">                      <span class='keyword'>const</span> Numeric eta,</td></tr>
<tr class="codeline" data-linenumber="1127"><td class="num" id="LN1127">1127</td><td class="line">                      <span class='keyword'>const</span> Numeric df_0,</td></tr>
<tr class="codeline" data-linenumber="1128"><td class="num" id="LN1128">1128</td><td class="line">                      <span class='keyword'>const</span> Numeric df_2,</td></tr>
<tr class="codeline" data-linenumber="1129"><td class="num" id="LN1129">1129</td><td class="line">                      <span class='keyword'>const</span> Numeric sigma,</td></tr>
<tr class="codeline" data-linenumber="1130"><td class="num" id="LN1130">1130</td><td class="line">                      <span class='keyword'>const</span> Numeric f_VC,</td></tr>
<tr class="codeline" data-linenumber="1131"><td class="num" id="LN1131">1131</td><td class="line">                      <span class='comment'>// Line mixing</span></td></tr>
<tr class="codeline" data-linenumber="1132"><td class="num" id="LN1132">1132</td><td class="line">                      <span class='keyword'>const</span> Numeric LM_DF,</td></tr>
<tr class="codeline" data-linenumber="1133"><td class="num" id="LN1133">1133</td><td class="line">                      <span class='keyword'>const</span> Numeric LM_Y, </td></tr>
<tr class="codeline" data-linenumber="1134"><td class="num" id="LN1134">1134</td><td class="line">                      <span class='keyword'>const</span> Numeric LM_G,</td></tr>
<tr class="codeline" data-linenumber="1135"><td class="num" id="LN1135">1135</td><td class="line">                      <span class='comment'>// Feature flags</span></td></tr>
<tr class="codeline" data-linenumber="1136"><td class="num" id="LN1136">1136</td><td class="line">                      <span class='keyword'>const</span> <span class='keyword'>bool</span> calc_cut, </td></tr>
<tr class="codeline" data-linenumber="1137"><td class="num" id="LN1137">1137</td><td class="line">                      <span class='keyword'>const</span> <span class='keyword'>bool</span> calc_phase,</td></tr>
<tr class="codeline" data-linenumber="1138"><td class="num" id="LN1138">1138</td><td class="line">                      <span class='keyword'>const</span> <span class='keyword'>bool</span> calc_partials,</td></tr>
<tr class="codeline" data-linenumber="1139"><td class="num" id="LN1139">1139</td><td class="line">                      <span class='keyword'>const</span> <span class='keyword'>bool</span> calc_src)</td></tr>
<tr class="codeline" data-linenumber="1140"><td class="num" id="LN1140">1140</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="1141"><td class="num" id="LN1141">1141</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="1142"><td class="num" id="LN1142">1142</td><td class="line">    <span class='comment'>// Copy f_grid to the beginning of f_local. There is one</span></td></tr>
<tr class="codeline" data-linenumber="1143"><td class="num" id="LN1143">1143</td><td class="line">    <span class='comment'>// element left at the end of f_local.</span></td></tr>
<tr class="codeline" data-linenumber="1144"><td class="num" id="LN1144">1144</td><td class="line">    <span class='comment'>// THIS HAS TO BE INSIDE THE LINE LOOP, BECAUSE THE CUTOFF</span></td></tr>
<tr class="codeline" data-linenumber="1145"><td class="num" id="LN1145">1145</td><td class="line">    <span class='comment'>// FREQUENCY IS ALWAYS PUT IN A DIFFERENT PLACE!</span></td></tr>
<tr class="codeline" data-linenumber="1146"><td class="num" id="LN1146">1146</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="1147"><td class="num" id="LN1147">1147</td><td class="line">                                              </td></tr>
<tr class="codeline" data-linenumber="1148"><td class="num" id="LN1148">1148</td><td class="line">    <span class='comment'>// This will hold the actual number of frequencies to add to</span></td></tr>
<tr class="codeline" data-linenumber="1149"><td class="num" id="LN1149">1149</td><td class="line">    <span class='comment'>// xsec later on:</span></td></tr>
<tr class="codeline" data-linenumber="1150"><td class="num" id="LN1150">1150</td><td class="line">    Index nfl = nf;</td></tr>
<tr class="codeline" data-linenumber="1151"><td class="num" id="LN1151">1151</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="1152"><td class="num" id="LN1152">1152</td><td class="line">    <span class='comment'>// This will hold the actual number of frequencies for the</span></td></tr>
<tr class="codeline" data-linenumber="1153"><td class="num" id="LN1153">1153</td><td class="line">    <span class='comment'>// call to the lineshape functions later on:</span></td></tr>
<tr class="codeline" data-linenumber="1154"><td class="num" id="LN1154">1154</td><td class="line">    Index nfls = nf;</td></tr>
<tr class="codeline" data-linenumber="1155"><td class="num" id="LN1155">1155</td><td class="line">        </td></tr>
<tr class="codeline" data-linenumber="1156"><td class="num" id="LN1156">1156</td><td class="line">    <span class='comment'>// intensity at temperature</span></td></tr>
<tr class="codeline" data-linenumber="1157"><td class="num" id="LN1157">1157</td><td class="line">    <span class='comment'>// (calculate the line intensity according to the standard</span></td></tr>
<tr class="codeline" data-linenumber="1158"><td class="num" id="LN1158">1158</td><td class="line">    <span class='comment'>// expression given in HITRAN)</span></td></tr>
<tr class="codeline" data-linenumber="1159"><td class="num" id="LN1159">1159</td><td class="line">    intensity *= part_fct_ratio * boltzmann_ratio;</td></tr>
<tr class="codeline" data-linenumber="1160"><td class="num" id="LN1160">1160</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="1161"><td class="num" id="LN1161">1161</td><td class="line">    <span class='comment'>// Apply pressure shift:</span></td></tr>
<tr class="codeline" data-linenumber="1162"><td class="num" id="LN1162">1162</td><td class="line">    <span class='comment'>//</span></td></tr>
<tr class="codeline" data-linenumber="1163"><td class="num" id="LN1163">1163</td><td class="line">    <span class='comment'>// 2017-10-15: Stuart Fox had reported the bug that for mirror</span></td></tr>
<tr class="codeline" data-linenumber="1164"><td class="num" id="LN1164">1164</td><td class="line">    <span class='comment'>// lines (negative F0) the shift was in the wrong direction. The</span></td></tr>
<tr class="codeline" data-linenumber="1165"><td class="num" id="LN1165">1165</td><td class="line">    <span class='comment'>// if statement below makes sure that the shift goes in the other</span></td></tr>
<tr class="codeline" data-linenumber="1166"><td class="num" id="LN1166">1166</td><td class="line">    <span class='comment'>// direction for negative frequency mirror lines, so that they</span></td></tr>
<tr class="codeline" data-linenumber="1167"><td class="num" id="LN1167">1167</td><td class="line">    <span class='comment'>// really end up at the negative of the frequency of the original</span></td></tr>
<tr class="codeline" data-linenumber="1168"><td class="num" id="LN1168">1168</td><td class="line">    <span class='comment'>// line.</span></td></tr>
<tr class="codeline" data-linenumber="1169"><td class="num" id="LN1169">1169</td><td class="line">    <span class='keyword'>if</span> (F0 &gt;= 0)</td></tr>
<tr class="codeline" data-linenumber="1170"><td class="num" id="LN1170">1170</td><td class="line">      F0 += ( df_0 + LM_DF );</td></tr>
<tr class="codeline" data-linenumber="1171"><td class="num" id="LN1171">1171</td><td class="line">    <span class='keyword'>else</span></td></tr>
<tr class="codeline" data-linenumber="1172"><td class="num" id="LN1172">1172</td><td class="line">      F0 -= ( df_0 + LM_DF );</td></tr>
<tr class="codeline" data-linenumber="1173"><td class="num" id="LN1173">1173</td><td class="line">    <span class='comment'>// FIXME:  This is probably not compatible with HTP line shape</span></td></tr>
<tr class="codeline" data-linenumber="1174"><td class="num" id="LN1174">1174</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="1175"><td class="num" id="LN1175">1175</td><td class="line">    <span class='comment'>// Indices pointing at begin/end frequencies of f_grid or at</span></td></tr>
<tr class="codeline" data-linenumber="1176"><td class="num" id="LN1176">1176</td><td class="line">    <span class='comment'>// the elements that have to be calculated in case of cutoff</span></td></tr>
<tr class="codeline" data-linenumber="1177"><td class="num" id="LN1177">1177</td><td class="line">    Index i_f_min = 0;</td></tr>
<tr class="codeline" data-linenumber="1178"><td class="num" id="LN1178">1178</td><td class="line">    Index i_f_max = nf-1;</td></tr>
<tr class="codeline" data-linenumber="1179"><td class="num" id="LN1179">1179</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="1180"><td class="num" id="LN1180">1180</td><td class="line">    <span class='comment'>// cutoff ?</span></td></tr>
<tr class="codeline" data-linenumber="1181"><td class="num" id="LN1181">1181</td><td class="line">    <span class='keyword'>if</span> ( calc_cut )</td></tr>
<tr class="codeline" data-linenumber="1182"><td class="num" id="LN1182">1182</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="1183"><td class="num" id="LN1183">1183</td><td class="line">        <span class='comment'>// Check whether we have elements in ls that can be</span></td></tr>
<tr class="codeline" data-linenumber="1184"><td class="num" id="LN1184">1184</td><td class="line">        <span class='comment'>// ignored at lower frequencies of f_grid.</span></td></tr>
<tr class="codeline" data-linenumber="1185"><td class="num" id="LN1185">1185</td><td class="line">        <span class='comment'>//</span></td></tr>
<tr class="codeline" data-linenumber="1186"><td class="num" id="LN1186">1186</td><td class="line">        <span class='comment'>// Loop through all frequencies, finding min value and</span></td></tr>
<tr class="codeline" data-linenumber="1187"><td class="num" id="LN1187">1187</td><td class="line">        <span class='comment'>// set all values to zero on that way.</span></td></tr>
<tr class="codeline" data-linenumber="1188"><td class="num" id="LN1188">1188</td><td class="line">        <span class='keyword'>while</span> ( i_f_min &lt; nf &amp;&amp; (F0 - cutoff) &gt; f_grid[i_f_min] )</td></tr>
<tr class="codeline" data-linenumber="1189"><td class="num" id="LN1189">1189</td><td class="line">        {</td></tr>
<tr class="codeline" data-linenumber="1190"><td class="num" id="LN1190">1190</td><td class="line">            <span class='comment'>//              ls[i_f_min] = 0;</span></td></tr>
<tr class="codeline" data-linenumber="1191"><td class="num" id="LN1191">1191</td><td class="line">            ++i_f_min;</td></tr>
<tr class="codeline" data-linenumber="1192"><td class="num" id="LN1192">1192</td><td class="line">        }</td></tr>
<tr class="codeline" data-linenumber="1193"><td class="num" id="LN1193">1193</td><td class="line">        </td></tr>
<tr class="codeline" data-linenumber="1194"><td class="num" id="LN1194">1194</td><td class="line">        </td></tr>
<tr class="codeline" data-linenumber="1195"><td class="num" id="LN1195">1195</td><td class="line">        <span class='comment'>// Check whether we have elements in ls that can be</span></td></tr>
<tr class="codeline" data-linenumber="1196"><td class="num" id="LN1196">1196</td><td class="line">        <span class='comment'>// ignored at higher frequencies of f_grid.</span></td></tr>
<tr class="codeline" data-linenumber="1197"><td class="num" id="LN1197">1197</td><td class="line">        <span class='comment'>//</span></td></tr>
<tr class="codeline" data-linenumber="1198"><td class="num" id="LN1198">1198</td><td class="line">        <span class='comment'>// Loop through all frequencies, finding max value and</span></td></tr>
<tr class="codeline" data-linenumber="1199"><td class="num" id="LN1199">1199</td><td class="line">        <span class='comment'>// set all values to zero on that way.</span></td></tr>
<tr class="codeline" data-linenumber="1200"><td class="num" id="LN1200">1200</td><td class="line">        <span class='keyword'>while</span> ( i_f_max &gt;= 0 &amp;&amp; (F0 + cutoff) &lt; f_grid[i_f_max] )</td></tr>
<tr class="codeline" data-linenumber="1201"><td class="num" id="LN1201">1201</td><td class="line">        {</td></tr>
<tr class="codeline" data-linenumber="1202"><td class="num" id="LN1202">1202</td><td class="line">            <span class='comment'>//              ls[i_f_max] = 0;</span></td></tr>
<tr class="codeline" data-linenumber="1203"><td class="num" id="LN1203">1203</td><td class="line">            --i_f_max;</td></tr>
<tr class="codeline" data-linenumber="1204"><td class="num" id="LN1204">1204</td><td class="line">        }</td></tr>
<tr class="codeline" data-linenumber="1205"><td class="num" id="LN1205">1205</td><td class="line">        </td></tr>
<tr class="codeline" data-linenumber="1206"><td class="num" id="LN1206">1206</td><td class="line">        <span class='comment'>// Append the cutoff frequency to f_local:</span></td></tr>
<tr class="codeline" data-linenumber="1207"><td class="num" id="LN1207">1207</td><td class="line">        ++i_f_max;</td></tr>
<tr class="codeline" data-linenumber="1208"><td class="num" id="LN1208">1208</td><td class="line">        f_local[i_f_max] = F0 + cutoff;</td></tr>
<tr class="codeline" data-linenumber="1209"><td class="num" id="LN1209">1209</td><td class="line">        </td></tr>
<tr class="codeline" data-linenumber="1210"><td class="num" id="LN1210">1210</td><td class="line">        <span class='comment'>// Number of frequencies to calculate:</span></td></tr>
<tr class="codeline" data-linenumber="1211"><td class="num" id="LN1211">1211</td><td class="line">        nfls = i_f_max - i_f_min + 1; <span class='comment'>// Add one because indices</span></td></tr>
<tr class="codeline" data-linenumber="1212"><td class="num" id="LN1212">1212</td><td class="line">                                      <span class='comment'>// are pointing to first and</span></td></tr>
<tr class="codeline" data-linenumber="1213"><td class="num" id="LN1213">1213</td><td class="line">                                      <span class='comment'>// last valid element. This</span></td></tr>
<tr class="codeline" data-linenumber="1214"><td class="num" id="LN1214">1214</td><td class="line">                                      <span class='comment'>// is for the lineshape</span></td></tr>
<tr class="codeline" data-linenumber="1215"><td class="num" id="LN1215">1215</td><td class="line">                                      <span class='comment'>// calls.</span></td></tr>
<tr class="codeline" data-linenumber="1216"><td class="num" id="LN1216">1216</td><td class="line">        nfl = nfls -1;              <span class='comment'>// This is for xsec.</span></td></tr>
<tr class="codeline" data-linenumber="1217"><td class="num" id="LN1217">1217</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="1218"><td class="num" id="LN1218">1218</td><td class="line">    <span class='keyword'>else</span></td></tr>
<tr class="codeline" data-linenumber="1219"><td class="num" id="LN1219">1219</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="1220"><td class="num" id="LN1220">1220</td><td class="line">        <span class='comment'>// Nothing to do here. Note that nfl and nfls are both still set to nf.</span></td></tr>
<tr class="codeline" data-linenumber="1221"><td class="num" id="LN1221">1221</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="1222"><td class="num" id="LN1222">1222</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="1223"><td class="num" id="LN1223">1223</td><td class="line">    <span class='comment'>//          cout &lt;&lt; "nf, nfl, nfls = " &lt;&lt; nf &lt;&lt; ", " &lt;&lt; nfl &lt;&lt; ", " &lt;&lt; nfls &lt;&lt; ".\n";</span></td></tr>
<tr class="codeline" data-linenumber="1224"><td class="num" id="LN1224">1224</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="1225"><td class="num" id="LN1225">1225</td><td class="line">    <span class='comment'>// Maybe there are no frequencies left to compute?  Note that</span></td></tr>
<tr class="codeline" data-linenumber="1226"><td class="num" id="LN1226">1226</td><td class="line">    <span class='comment'>// the number that counts here is nfl, since only these are</span></td></tr>
<tr class="codeline" data-linenumber="1227"><td class="num" id="LN1227">1227</td><td class="line">    <span class='comment'>// the `real' frequencies, for which xsec is changed. nfls</span></td></tr>
<tr class="codeline" data-linenumber="1228"><td class="num" id="LN1228">1228</td><td class="line">    <span class='comment'>// will always be at least one, because it contains the cutoff.</span></td></tr>
<tr class="codeline" data-linenumber="1229"><td class="num" id="LN1229">1229</td><td class="line">    <span class='keyword'>if</span> ( nfl &gt; 0 )</td></tr>
<tr class="codeline" data-linenumber="1230"><td class="num" id="LN1230">1230</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="1231"><td class="num" id="LN1231">1231</td><td class="line">        this_f_range = Range(i_f_min,nfl);</td></tr>
<tr class="codeline" data-linenumber="1232"><td class="num" id="LN1232">1232</td><td class="line">        Range that_f_range(i_f_min,nfls);</td></tr>
<tr class="codeline" data-linenumber="1233"><td class="num" id="LN1233">1233</td><td class="line">        </td></tr>
<tr class="codeline" data-linenumber="1234"><td class="num" id="LN1234">1234</td><td class="line">        <span class='comment'>// Calculate the line shape:</span></td></tr>
<tr class="codeline" data-linenumber="1235"><td class="num" id="LN1235">1235</td><td class="line">        global_data::lineshape_data[ind_ls].Function()(attenuation, phase,</td></tr>
<tr class="codeline" data-linenumber="1236"><td class="num" id="LN1236">1236</td><td class="line">                                                       dFa_dx, dFb_dx, dFa_dy, dFb_dy, <span class='comment'>//partial derivatives</span></td></tr>
<tr class="codeline" data-linenumber="1237"><td class="num" id="LN1237">1237</td><td class="line">                                                       aux, F0, gamma_0, gamma_2, eta, 0.0, <span class='comment'>// FIXME: H-T ls...</span></td></tr>
<tr class="codeline" data-linenumber="1238"><td class="num" id="LN1238">1238</td><td class="line">                                                       df_2, sigma, f_VC, f_local[that_f_range],</td></tr>
<tr class="codeline" data-linenumber="1239"><td class="num" id="LN1239">1239</td><td class="line">                                                       calc_phase, calc_partials);</td></tr>
<tr class="codeline" data-linenumber="1240"><td class="num" id="LN1240">1240</td><td class="line">        </td></tr>
<tr class="codeline" data-linenumber="1241"><td class="num" id="LN1241">1241</td><td class="line">        <span class='comment'>// Calculate the chosen normalization factor:</span></td></tr>
<tr class="codeline" data-linenumber="1242"><td class="num" id="LN1242">1242</td><td class="line">        global_data::lineshape_norm_data[ind_lsn].Function()(fac, F0,</td></tr>
<tr class="codeline" data-linenumber="1243"><td class="num" id="LN1243">1243</td><td class="line">                                                             f_local[that_f_range],</td></tr>
<tr class="codeline" data-linenumber="1244"><td class="num" id="LN1244">1244</td><td class="line">                                                             temperature);</td></tr>
<tr class="codeline" data-linenumber="1245"><td class="num" id="LN1245">1245</td><td class="line">        </td></tr>
<tr class="codeline" data-linenumber="1246"><td class="num" id="LN1246">1246</td><td class="line">        <span class='comment'>// Reset f_local for next loop through now that cutoff is calculated</span></td></tr>
<tr class="codeline" data-linenumber="1247"><td class="num" id="LN1247">1247</td><td class="line">        <span class='keyword'>if</span>( i_f_max &lt; nf )</td></tr>
<tr class="codeline" data-linenumber="1248"><td class="num" id="LN1248">1248</td><td class="line">            f_local[i_f_max] = f_grid[i_f_max];</td></tr>
<tr class="codeline" data-linenumber="1249"><td class="num" id="LN1249">1249</td><td class="line">        </td></tr>
<tr class="codeline" data-linenumber="1250"><td class="num" id="LN1250">1250</td><td class="line">        <span class='comment'>// Attenuation output</span></td></tr>
<tr class="codeline" data-linenumber="1251"><td class="num" id="LN1251">1251</td><td class="line">        VectorView this_xsec_attenuation      = xsec_accum_attenuation[this_f_range];</td></tr>
<tr class="codeline" data-linenumber="1252"><td class="num" id="LN1252">1252</td><td class="line">        </td></tr>
<tr class="codeline" data-linenumber="1253"><td class="num" id="LN1253">1253</td><td class="line">        <span class='comment'>// Optional outputs</span></td></tr>
<tr class="codeline" data-linenumber="1254"><td class="num" id="LN1254">1254</td><td class="line">        Vector empty_vector;</td></tr>
<tr class="codeline" data-linenumber="1255"><td class="num" id="LN1255">1255</td><td class="line">        VectorView this_xsec_source           = calc_src ? xsec_accum_source[this_f_range] : empty_vector;</td></tr>
<tr class="codeline" data-linenumber="1256"><td class="num" id="LN1256">1256</td><td class="line">        VectorView this_xsec_phase            = calc_phase ? xsec_accum_phase[this_f_range] : empty_vector;</td></tr>
<tr class="codeline" data-linenumber="1257"><td class="num" id="LN1257">1257</td><td class="line">        </td></tr>
<tr class="codeline" data-linenumber="1258"><td class="num" id="LN1258">1258</td><td class="line">        <span class='comment'>// Store cutoff values</span></td></tr>
<tr class="codeline" data-linenumber="1259"><td class="num" id="LN1259">1259</td><td class="line">        <span class='keyword'>const</span> Numeric </td></tr>
<tr class="codeline" data-linenumber="1260"><td class="num" id="LN1260">1260</td><td class="line">        cutoff_attenuation = calc_cut?attenuation[nfls-1]:0.0, </td></tr>
<tr class="codeline" data-linenumber="1261"><td class="num" id="LN1261">1261</td><td class="line">        cutoff_phase       = calc_phase?calc_cut?phase[nfls-1]:0.0:0.0,</td></tr>
<tr class="codeline" data-linenumber="1262"><td class="num" id="LN1262">1262</td><td class="line">        cutoff_dFa_dx      = calc_partials?calc_cut?dFa_dx[nfls-1]:0.0:0.0, </td></tr>
<tr class="codeline" data-linenumber="1263"><td class="num" id="LN1263">1263</td><td class="line">        cutoff_dFb_dx      = calc_phase?calc_partials?calc_cut?dFb_dx[nfls-1]:0.0:0.0:0.0, </td></tr>
<tr class="codeline" data-linenumber="1264"><td class="num" id="LN1264">1264</td><td class="line">        cutoff_dFa_dy      = calc_partials?calc_cut?dFa_dy[nfls-1]:0.0:0.0, </td></tr>
<tr class="codeline" data-linenumber="1265"><td class="num" id="LN1265">1265</td><td class="line">        cutoff_dFb_dy      = calc_phase?calc_partials?calc_cut?dFb_dy[nfls-1]:0.0:0.0:0.0;</td></tr>
<tr class="codeline" data-linenumber="1266"><td class="num" id="LN1266">1266</td><td class="line">        </td></tr>
<tr class="codeline" data-linenumber="1267"><td class="num" id="LN1267">1267</td><td class="line">        <span class='comment'>// If one of these is non-zero, then there are line mixing calculations required</span></td></tr>
<tr class="codeline" data-linenumber="1268"><td class="num" id="LN1268">1268</td><td class="line">        <span class='keyword'>const</span> <span class='keyword'>bool</span> calc_LM = LM_G!=0||LM_Y!=0;</td></tr>
<tr class="codeline" data-linenumber="1269"><td class="num" id="LN1269">1269</td><td class="line">        </td></tr>
<tr class="codeline" data-linenumber="1270"><td class="num" id="LN1270">1270</td><td class="line">        <span class='comment'>// Line strength is going to be stored in attenuation to ensure the right numeric value.</span></td></tr>
<tr class="codeline" data-linenumber="1271"><td class="num" id="LN1271">1271</td><td class="line">        <span class='keyword'>const</span> Numeric str_line = Isotopologue_Ratio*intensity*(calc_src?abs_nlte_ratio:1.0);</td></tr>
<tr class="codeline" data-linenumber="1272"><td class="num" id="LN1272">1272</td><td class="line">        </td></tr>
<tr class="codeline" data-linenumber="1273"><td class="num" id="LN1273">1273</td><td class="line">        <span class='comment'>// To make this readable, we loop over the frequencies</span></td></tr>
<tr class="codeline" data-linenumber="1274"><td class="num" id="LN1274">1274</td><td class="line">        <span class='keyword'>for</span>(Index jj =0; jj&lt;this_xsec_attenuation.nelem();jj++)</td></tr>
<tr class="codeline" data-linenumber="1275"><td class="num" id="LN1275">1275</td><td class="line">        {</td></tr>
<tr class="codeline" data-linenumber="1276"><td class="num" id="LN1276">1276</td><td class="line">            <span class='keyword'>const</span> Numeric str_scale = fac[jj]*str_line;</td></tr>
<tr class="codeline" data-linenumber="1277"><td class="num" id="LN1277">1277</td><td class="line">            <span class='keyword'>if</span>(jj&lt;=nfl)</td></tr>
<tr class="codeline" data-linenumber="1278"><td class="num" id="LN1278">1278</td><td class="line">            {   </td></tr>
<tr class="codeline" data-linenumber="1279"><td class="num" id="LN1279">1279</td><td class="line">                <span class='comment'>// This ensures that output attenuation is the physically correct attenuation</span></td></tr>
<tr class="codeline" data-linenumber="1280"><td class="num" id="LN1280">1280</td><td class="line">                <span class='keyword'>if</span>(calc_cut)</td></tr>
<tr class="codeline" data-linenumber="1281"><td class="num" id="LN1281">1281</td><td class="line">                    attenuation[jj]-=cutoff_attenuation;</td></tr>
<tr class="codeline" data-linenumber="1282"><td class="num" id="LN1282">1282</td><td class="line">                attenuation[jj]*=str_scale;</td></tr>
<tr class="codeline" data-linenumber="1283"><td class="num" id="LN1283">1283</td><td class="line">                </td></tr>
<tr class="codeline" data-linenumber="1284"><td class="num" id="LN1284">1284</td><td class="line">                <span class='comment'>// This ensures that output phase is the physically correct phase</span></td></tr>
<tr class="codeline" data-linenumber="1285"><td class="num" id="LN1285">1285</td><td class="line">                <span class='keyword'>if</span>(calc_phase||calc_LM)</td></tr>
<tr class="codeline" data-linenumber="1286"><td class="num" id="LN1286">1286</td><td class="line">                {</td></tr>
<tr class="codeline" data-linenumber="1287"><td class="num" id="LN1287">1287</td><td class="line">                    <span class='keyword'>if</span>(calc_cut)</td></tr>
<tr class="codeline" data-linenumber="1288"><td class="num" id="LN1288">1288</td><td class="line">                        phase[jj]-=cutoff_phase;</td></tr>
<tr class="codeline" data-linenumber="1289"><td class="num" id="LN1289">1289</td><td class="line">                    phase[jj]*=str_scale;</td></tr>
<tr class="codeline" data-linenumber="1290"><td class="num" id="LN1290">1290</td><td class="line">                }</td></tr>
<tr class="codeline" data-linenumber="1291"><td class="num" id="LN1291">1291</td><td class="line">                </td></tr>
<tr class="codeline" data-linenumber="1292"><td class="num" id="LN1292">1292</td><td class="line">                <span class='keyword'>if</span>(calc_partials)</td></tr>
<tr class="codeline" data-linenumber="1293"><td class="num" id="LN1293">1293</td><td class="line">                {</td></tr>
<tr class="codeline" data-linenumber="1294"><td class="num" id="LN1294">1294</td><td class="line">                    <span class='keyword'>if</span>(calc_cut)</td></tr>
<tr class="codeline" data-linenumber="1295"><td class="num" id="LN1295">1295</td><td class="line">                    {</td></tr>
<tr class="codeline" data-linenumber="1296"><td class="num" id="LN1296">1296</td><td class="line">                        dFa_dx[jj]-=cutoff_dFa_dx;</td></tr>
<tr class="codeline" data-linenumber="1297"><td class="num" id="LN1297">1297</td><td class="line">                        dFa_dy[jj]-=cutoff_dFa_dy;</td></tr>
<tr class="codeline" data-linenumber="1298"><td class="num" id="LN1298">1298</td><td class="line">                        <span class='keyword'>if</span>(calc_phase)</td></tr>
<tr class="codeline" data-linenumber="1299"><td class="num" id="LN1299">1299</td><td class="line">                        {</td></tr>
<tr class="codeline" data-linenumber="1300"><td class="num" id="LN1300">1300</td><td class="line">                            dFb_dx[jj]-=cutoff_dFb_dx;</td></tr>
<tr class="codeline" data-linenumber="1301"><td class="num" id="LN1301">1301</td><td class="line">                            dFb_dy[jj]-=cutoff_dFb_dy;</td></tr>
<tr class="codeline" data-linenumber="1302"><td class="num" id="LN1302">1302</td><td class="line">                        }</td></tr>
<tr class="codeline" data-linenumber="1303"><td class="num" id="LN1303">1303</td><td class="line">                    }</td></tr>
<tr class="codeline" data-linenumber="1304"><td class="num" id="LN1304">1304</td><td class="line">                    dFa_dx[jj]*=str_scale;</td></tr>
<tr class="codeline" data-linenumber="1305"><td class="num" id="LN1305">1305</td><td class="line">                    dFa_dy[jj]*=str_scale;</td></tr>
<tr class="codeline" data-linenumber="1306"><td class="num" id="LN1306">1306</td><td class="line">                    <span class='keyword'>if</span>(calc_phase)</td></tr>
<tr class="codeline" data-linenumber="1307"><td class="num" id="LN1307">1307</td><td class="line">                    {</td></tr>
<tr class="codeline" data-linenumber="1308"><td class="num" id="LN1308">1308</td><td class="line">                        dFb_dx[jj]*=str_scale;</td></tr>
<tr class="codeline" data-linenumber="1309"><td class="num" id="LN1309">1309</td><td class="line">                        dFb_dy[jj]*=str_scale;</td></tr>
<tr class="codeline" data-linenumber="1310"><td class="num" id="LN1310">1310</td><td class="line">                    }</td></tr>
<tr class="codeline" data-linenumber="1311"><td class="num" id="LN1311">1311</td><td class="line">                }</td></tr>
<tr class="codeline" data-linenumber="1312"><td class="num" id="LN1312">1312</td><td class="line">                </td></tr>
<tr class="codeline" data-linenumber="1313"><td class="num" id="LN1313">1313</td><td class="line">                <span class='comment'>// Attenuation is by tradition added to total attenuation from here</span></td></tr>
<tr class="codeline" data-linenumber="1314"><td class="num" id="LN1314">1314</td><td class="line">                <span class='keyword'>if</span>(calc_LM&amp;&amp;calc_src)</td></tr>
<tr class="codeline" data-linenumber="1315"><td class="num" id="LN1315">1315</td><td class="line">                {</td></tr>
<tr class="codeline" data-linenumber="1316"><td class="num" id="LN1316">1316</td><td class="line">                    <span class='keyword'>const</span> Numeric tmp =(1.+LM_G)*attenuation[jj]+LM_Y*phase[jj];</td></tr>
<tr class="codeline" data-linenumber="1317"><td class="num" id="LN1317">1317</td><td class="line">                    this_xsec_source[jj] += ( src_nlte_ratio/abs_nlte_ratio - 1.0 ) * tmp;</td></tr>
<tr class="codeline" data-linenumber="1318"><td class="num" id="LN1318">1318</td><td class="line">                    this_xsec_attenuation[jj] += tmp;</td></tr>
<tr class="codeline" data-linenumber="1319"><td class="num" id="LN1319">1319</td><td class="line">                }</td></tr>
<tr class="codeline" data-linenumber="1320"><td class="num" id="LN1320">1320</td><td class="line">                <span class='keyword'>else</span> <span class='keyword'>if</span>(calc_src)</td></tr>
<tr class="codeline" data-linenumber="1321"><td class="num" id="LN1321">1321</td><td class="line">                {</td></tr>
<tr class="codeline" data-linenumber="1322"><td class="num" id="LN1322">1322</td><td class="line">                    this_xsec_source[jj] += ( src_nlte_ratio/abs_nlte_ratio - 1.0 ) * attenuation[jj];</td></tr>
<tr class="codeline" data-linenumber="1323"><td class="num" id="LN1323">1323</td><td class="line">                    this_xsec_attenuation[jj] += attenuation[jj];</td></tr>
<tr class="codeline" data-linenumber="1324"><td class="num" id="LN1324">1324</td><td class="line">                }</td></tr>
<tr class="codeline" data-linenumber="1325"><td class="num" id="LN1325">1325</td><td class="line">                <span class='keyword'>else</span> <span class='keyword'>if</span>(calc_LM)</td></tr>
<tr class="codeline" data-linenumber="1326"><td class="num" id="LN1326">1326</td><td class="line">                    this_xsec_attenuation[jj] += (1.+LM_G)*attenuation[jj]+LM_Y*phase[jj];</td></tr>
<tr class="codeline" data-linenumber="1327"><td class="num" id="LN1327">1327</td><td class="line">                <span class='keyword'>else</span></td></tr>
<tr class="codeline" data-linenumber="1328"><td class="num" id="LN1328">1328</td><td class="line">                    this_xsec_attenuation[jj] += attenuation[jj];</td></tr>
<tr class="codeline" data-linenumber="1329"><td class="num" id="LN1329">1329</td><td class="line">                </td></tr>
<tr class="codeline" data-linenumber="1330"><td class="num" id="LN1330">1330</td><td class="line">                <span class='comment'>// Phase follows the attenuation practice</span></td></tr>
<tr class="codeline" data-linenumber="1331"><td class="num" id="LN1331">1331</td><td class="line">                <span class='keyword'>if</span>(calc_phase&amp;&amp;calc_LM)</td></tr>
<tr class="codeline" data-linenumber="1332"><td class="num" id="LN1332">1332</td><td class="line">                    this_xsec_phase[jj] += (1.+LM_G)*phase[jj] - LM_Y*attenuation[jj];</td></tr>
<tr class="codeline" data-linenumber="1333"><td class="num" id="LN1333">1333</td><td class="line">                <span class='keyword'>else</span> <span class='keyword'>if</span>(calc_phase)</td></tr>
<tr class="codeline" data-linenumber="1334"><td class="num" id="LN1334">1334</td><td class="line">                    this_xsec_phase[jj] += phase[jj];</td></tr>
<tr class="codeline" data-linenumber="1335"><td class="num" id="LN1335">1335</td><td class="line">                </td></tr>
<tr class="codeline" data-linenumber="1336"><td class="num" id="LN1336">1336</td><td class="line">                <span class='comment'>// Partials (Assuming F(v,v0) = C*F'(v,v0), where F' is from our lineshape functions, then the below is </span></td></tr>
<tr class="codeline" data-linenumber="1337"><td class="num" id="LN1337">1337</td><td class="line">                <span class='comment'>// only the C*dF'/dt part.  The dC/dt*F' part remains to be calculated.  The CF is output as </span></td></tr>
<tr class="codeline" data-linenumber="1338"><td class="num" id="LN1338">1338</td><td class="line">                <span class='comment'>// attenuation and phase variables [NOTE: attenuation and phase are without line mixing corrections!])</span></td></tr>
<tr class="codeline" data-linenumber="1339"><td class="num" id="LN1339">1339</td><td class="line">                <span class='keyword'>if</span>(calc_partials&amp;&amp;calc_LM)</td></tr>
<tr class="codeline" data-linenumber="1340"><td class="num" id="LN1340">1340</td><td class="line">                {</td></tr>
<tr class="codeline" data-linenumber="1341"><td class="num" id="LN1341">1341</td><td class="line">                    <span class='keyword'>const</span> Numeric orig_dFa_dx=dFa_dx[jj];</td></tr>
<tr class="codeline" data-linenumber="1342"><td class="num" id="LN1342">1342</td><td class="line">                    <span class='keyword'>const</span> Numeric orig_dFa_dy=dFa_dy[jj];</td></tr>
<tr class="codeline" data-linenumber="1343"><td class="num" id="LN1343">1343</td><td class="line">                    </td></tr>
<tr class="codeline" data-linenumber="1344"><td class="num" id="LN1344">1344</td><td class="line">                    dFa_dx[jj] = (1.+LM_G)*orig_dFa_dx + LM_Y*dFb_dx[jj];</td></tr>
<tr class="codeline" data-linenumber="1345"><td class="num" id="LN1345">1345</td><td class="line">                    dFb_dx[jj] = (1.+LM_G)*dFb_dx[jj]  - LM_Y*orig_dFa_dx;</td></tr>
<tr class="codeline" data-linenumber="1346"><td class="num" id="LN1346">1346</td><td class="line">                    dFa_dy[jj] = (1.+LM_G)*orig_dFa_dy + LM_Y*dFb_dy[jj];</td></tr>
<tr class="codeline" data-linenumber="1347"><td class="num" id="LN1347">1347</td><td class="line">                    dFb_dy[jj] = (1.+LM_G)*dFb_dy[jj]  - LM_Y*orig_dFa_dy;</td></tr>
<tr class="codeline" data-linenumber="1348"><td class="num" id="LN1348">1348</td><td class="line">                }</td></tr>
<tr class="codeline" data-linenumber="1349"><td class="num" id="LN1349">1349</td><td class="line">            }</td></tr>
<tr class="codeline" data-linenumber="1350"><td class="num" id="LN1350">1350</td><td class="line">        }  </td></tr>
<tr class="codeline" data-linenumber="1351"><td class="num" id="LN1351">1351</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="1352"><td class="num" id="LN1352">1352</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="1353"><td class="num" id="LN1353">1353</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1354"><td class="num" id="LN1354">1354</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1355"><td class="num" id="LN1355">1355</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1356"><td class="num" id="LN1356">1356</td><td class="line"><span class='comment'>/** A little helper function to convert energy from units of</span></td></tr>
<tr class="codeline" data-linenumber="1357"><td class="num" id="LN1357">1357</td><td class="line">    <span class='comment'>wavenumber (cm^-1) to Joule (J).</span> </td></tr>
<tr class="codeline" data-linenumber="1358"><td class="num" id="LN1358">1358</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1359"><td class="num" id="LN1359">1359</td><td class="line">    <span class='comment'>This is used when reading HITRAN or JPL catalogue files, which</span></td></tr>
<tr class="codeline" data-linenumber="1360"><td class="num" id="LN1360">1360</td><td class="line">    <span class='comment'>have the lower state energy in cm^-1.</span></td></tr>
<tr class="codeline" data-linenumber="1361"><td class="num" id="LN1361">1361</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1362"><td class="num" id="LN1362">1362</td><td class="line">    <span class='comment'>\return Energy in J.</span></td></tr>
<tr class="codeline" data-linenumber="1363"><td class="num" id="LN1363">1363</td><td class="line">    <span class='comment'>\param  e Energy in cm^-1.</span></td></tr>
<tr class="codeline" data-linenumber="1364"><td class="num" id="LN1364">1364</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1365"><td class="num" id="LN1365">1365</td><td class="line">    <span class='comment'>\author Stefan Buehler</span></td></tr>
<tr class="codeline" data-linenumber="1366"><td class="num" id="LN1366">1366</td><td class="line">    <span class='comment'>\date   2001-06-26 */</span></td></tr>
<tr class="codeline" data-linenumber="1367"><td class="num" id="LN1367">1367</td><td class="line">Numeric wavenumber_to_joule(Numeric e)</td></tr>
<tr class="codeline" data-linenumber="1368"><td class="num" id="LN1368">1368</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="1369"><td class="num" id="LN1369">1369</td><td class="line">  <span class='comment'>// Planck constant [Js]</span></td></tr>
<tr class="codeline" data-linenumber="1370"><td class="num" id="LN1370">1370</td><td class="line">  <span class='keyword'>extern</span> <span class='keyword'>const</span> Numeric PLANCK_CONST;</td></tr>
<tr class="codeline" data-linenumber="1371"><td class="num" id="LN1371">1371</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1372"><td class="num" id="LN1372">1372</td><td class="line">  <span class='comment'>// Speed of light [m/s]</span></td></tr>
<tr class="codeline" data-linenumber="1373"><td class="num" id="LN1373">1373</td><td class="line">  <span class='keyword'>extern</span> <span class='keyword'>const</span> Numeric SPEED_OF_LIGHT;</td></tr>
<tr class="codeline" data-linenumber="1374"><td class="num" id="LN1374">1374</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1375"><td class="num" id="LN1375">1375</td><td class="line">  <span class='comment'>// Constant to convert lower state energy from cm^-1 to J</span></td></tr>
<tr class="codeline" data-linenumber="1376"><td class="num" id="LN1376">1376</td><td class="line">  <span class='keyword'>const</span> Numeric lower_energy_const = PLANCK_CONST * SPEED_OF_LIGHT * 1E2;</td></tr>
<tr class="codeline" data-linenumber="1377"><td class="num" id="LN1377">1377</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1378"><td class="num" id="LN1378">1378</td><td class="line">  <span class='keyword'>return</span> e*lower_energy_const; </td></tr>
<tr class="codeline" data-linenumber="1379"><td class="num" id="LN1379">1379</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="1380"><td class="num" id="LN1380">1380</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1381"><td class="num" id="LN1381">1381</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1382"><td class="num" id="LN1382">1382</td><td class="line"><span class='comment'>//======================================================================</span></td></tr>
<tr class="codeline" data-linenumber="1383"><td class="num" id="LN1383">1383</td><td class="line"><span class='comment'>//             Functions related to species</span></td></tr>
<tr class="codeline" data-linenumber="1384"><td class="num" id="LN1384">1384</td><td class="line"><span class='comment'>//======================================================================</span></td></tr>
<tr class="codeline" data-linenumber="1385"><td class="num" id="LN1385">1385</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1386"><td class="num" id="LN1386">1386</td><td class="line"><span class='comment'>//! Return species index for given species name.</span></td></tr>
<tr class="codeline" data-linenumber="1387"><td class="num" id="LN1387">1387</td><td class="line"><span class='comment'>/*!</span> </td></tr>
<tr class="codeline" data-linenumber="1388"><td class="num" id="LN1388">1388</td><td class="line">  <span class='comment'>This is useful in connection with other functions that need a species</span></td></tr>
<tr class="codeline" data-linenumber="1389"><td class="num" id="LN1389">1389</td><td class="line">  <span class='comment'>index.</span></td></tr>
<tr class="codeline" data-linenumber="1390"><td class="num" id="LN1390">1390</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1391"><td class="num" id="LN1391">1391</td><td class="line">  <span class='comment'>\see find_first_species_tg.</span></td></tr>
<tr class="codeline" data-linenumber="1392"><td class="num" id="LN1392">1392</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1393"><td class="num" id="LN1393">1393</td><td class="line">  <span class='comment'>\param name Species name.</span></td></tr>
<tr class="codeline" data-linenumber="1394"><td class="num" id="LN1394">1394</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1395"><td class="num" id="LN1395">1395</td><td class="line">  <span class='comment'>\return Species index, -1 means not found.</span></td></tr>
<tr class="codeline" data-linenumber="1396"><td class="num" id="LN1396">1396</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1397"><td class="num" id="LN1397">1397</td><td class="line">  <span class='comment'>\author Stefan Buehler</span></td></tr>
<tr class="codeline" data-linenumber="1398"><td class="num" id="LN1398">1398</td><td class="line">  <span class='comment'>\date   2003-01-13</span></td></tr>
<tr class="codeline" data-linenumber="1399"><td class="num" id="LN1399">1399</td><td class="line"><span class='comment'>*/</span></td></tr>
<tr class="codeline" data-linenumber="1400"><td class="num" id="LN1400">1400</td><td class="line">Index species_index_from_species_name( String name )</td></tr>
<tr class="codeline" data-linenumber="1401"><td class="num" id="LN1401">1401</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="1402"><td class="num" id="LN1402">1402</td><td class="line">  <span class='keyword'>using</span> global_data::SpeciesMap;</td></tr>
<tr class="codeline" data-linenumber="1403"><td class="num" id="LN1403">1403</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1404"><td class="num" id="LN1404">1404</td><td class="line">  <span class='comment'>// For the return value:</span></td></tr>
<tr class="codeline" data-linenumber="1405"><td class="num" id="LN1405">1405</td><td class="line">  Index mspecies;</td></tr>
<tr class="codeline" data-linenumber="1406"><td class="num" id="LN1406">1406</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1407"><td class="num" id="LN1407">1407</td><td class="line">  <span class='comment'>// Trim whitespace</span></td></tr>
<tr class="codeline" data-linenumber="1408"><td class="num" id="LN1408">1408</td><td class="line">  name.trim();</td></tr>
<tr class="codeline" data-linenumber="1409"><td class="num" id="LN1409">1409</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1410"><td class="num" id="LN1410">1410</td><td class="line">  <span class='comment'>//  cout &lt;&lt; "name / def = " &lt;&lt; name &lt;&lt; " / " &lt;&lt; def &lt;&lt; endl;</span></td></tr>
<tr class="codeline" data-linenumber="1411"><td class="num" id="LN1411">1411</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1412"><td class="num" id="LN1412">1412</td><td class="line">  <span class='comment'>// Look for species name in species map:</span></td></tr>
<tr class="codeline" data-linenumber="1413"><td class="num" id="LN1413">1413</td><td class="line">  map&lt;String, Index&gt;::const_iterator mi = SpeciesMap.find(name);</td></tr>
<tr class="codeline" data-linenumber="1414"><td class="num" id="LN1414">1414</td><td class="line">  <span class='keyword'>if</span> ( mi != SpeciesMap.end() )</td></tr>
<tr class="codeline" data-linenumber="1415"><td class="num" id="LN1415">1415</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="1416"><td class="num" id="LN1416">1416</td><td class="line">      <span class='comment'>// Ok, we've found the species. Set mspecies.</span></td></tr>
<tr class="codeline" data-linenumber="1417"><td class="num" id="LN1417">1417</td><td class="line">      mspecies = mi-&gt;second;</td></tr>
<tr class="codeline" data-linenumber="1418"><td class="num" id="LN1418">1418</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="1419"><td class="num" id="LN1419">1419</td><td class="line">  <span class='keyword'>else</span></td></tr>
<tr class="codeline" data-linenumber="1420"><td class="num" id="LN1420">1420</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="1421"><td class="num" id="LN1421">1421</td><td class="line">      <span class='comment'>// The species does not exist!</span></td></tr>
<tr class="codeline" data-linenumber="1422"><td class="num" id="LN1422">1422</td><td class="line">      mspecies = -1;</td></tr>
<tr class="codeline" data-linenumber="1423"><td class="num" id="LN1423">1423</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="1424"><td class="num" id="LN1424">1424</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1425"><td class="num" id="LN1425">1425</td><td class="line">  <span class='keyword'>return</span> mspecies;</td></tr>
<tr class="codeline" data-linenumber="1426"><td class="num" id="LN1426">1426</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="1427"><td class="num" id="LN1427">1427</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1428"><td class="num" id="LN1428">1428</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1429"><td class="num" id="LN1429">1429</td><td class="line"><span class='comment'>//! Return species name for given species index.</span></td></tr>
<tr class="codeline" data-linenumber="1430"><td class="num" id="LN1430">1430</td><td class="line"><span class='comment'>/*!</span></td></tr>
<tr class="codeline" data-linenumber="1431"><td class="num" id="LN1431">1431</td><td class="line"> <span class='comment'>This is useful in connection with other functions that use a species</span></td></tr>
<tr class="codeline" data-linenumber="1432"><td class="num" id="LN1432">1432</td><td class="line"> <span class='comment'>index.</span></td></tr>
<tr class="codeline" data-linenumber="1433"><td class="num" id="LN1433">1433</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1434"><td class="num" id="LN1434">1434</td><td class="line"> <span class='comment'>Does an assertion that the index really corresponds to a species.</span></td></tr>
<tr class="codeline" data-linenumber="1435"><td class="num" id="LN1435">1435</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1436"><td class="num" id="LN1436">1436</td><td class="line"> <span class='comment'>\param spec_ind Species index.</span></td></tr>
<tr class="codeline" data-linenumber="1437"><td class="num" id="LN1437">1437</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1438"><td class="num" id="LN1438">1438</td><td class="line"> <span class='comment'>\return Species name</span></td></tr>
<tr class="codeline" data-linenumber="1439"><td class="num" id="LN1439">1439</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1440"><td class="num" id="LN1440">1440</td><td class="line"> <span class='comment'>\author Stefan Buehler</span></td></tr>
<tr class="codeline" data-linenumber="1441"><td class="num" id="LN1441">1441</td><td class="line"> <span class='comment'>\date   2013-01-04</span></td></tr>
<tr class="codeline" data-linenumber="1442"><td class="num" id="LN1442">1442</td><td class="line"> <span class='comment'>*/</span></td></tr>
<tr class="codeline" data-linenumber="1443"><td class="num" id="LN1443">1443</td><td class="line">String species_name_from_species_index( <span class='keyword'>const</span> Index spec_ind )</td></tr>
<tr class="codeline" data-linenumber="1444"><td class="num" id="LN1444">1444</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="1445"><td class="num" id="LN1445">1445</td><td class="line">    <span class='comment'>// Species lookup data:</span></td></tr>
<tr class="codeline" data-linenumber="1446"><td class="num" id="LN1446">1446</td><td class="line">    <span class='keyword'>using</span> global_data::species_data;</td></tr>
<tr class="codeline" data-linenumber="1447"><td class="num" id="LN1447">1447</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1448"><td class="num" id="LN1448">1448</td><td class="line">    <span class='comment'>// Assert that spec_ind is inside species data. (This is an assertion,</span></td></tr>
<tr class="codeline" data-linenumber="1449"><td class="num" id="LN1449">1449</td><td class="line">    <span class='comment'>// because species indices should never be user input, but set by the</span></td></tr>
<tr class="codeline" data-linenumber="1450"><td class="num" id="LN1450">1450</td><td class="line">    <span class='comment'>// program automatically, based on species names.)</span></td></tr>
<tr class="codeline" data-linenumber="1451"><td class="num" id="LN1451">1451</td><td class="line">    <span class='macro'>assert( spec_ind&gt;=0 )<span class='expansion'>(__builtin_expect(!(spec_ind&gt;=0), 0) ? __assert_rtn(__func__<br>, "/Users/u237002/Dropbox/Hacking/sat/arts/src/absorption.cc"<br>, 1451, "spec_ind&gt;=0") : (void)0)</span></span>;</td></tr>
<tr class="codeline" data-linenumber="1452"><td class="num" id="LN1452">1452</td><td class="line">    <span class='macro'>assert( spec_ind&lt;species_data.nelem() )<span class='expansion'>(__builtin_expect(!(spec_ind&lt;species_data.nelem()), 0) ? __assert_rtn<br>(__func__, "/Users/u237002/Dropbox/Hacking/sat/arts/src/absorption.cc"<br>, 1452, "spec_ind&lt;species_data.nelem()") : (void)0)</span></span>;</td></tr>
<tr class="codeline" data-linenumber="1453"><td class="num" id="LN1453">1453</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="1454"><td class="num" id="LN1454">1454</td><td class="line">    <span class='comment'>// A reference to the relevant record of the species data:</span></td></tr>
<tr class="codeline" data-linenumber="1455"><td class="num" id="LN1455">1455</td><td class="line">    <span class='keyword'>const</span>  SpeciesRecord&amp; spr = species_data[spec_ind];</td></tr>
<tr class="codeline" data-linenumber="1456"><td class="num" id="LN1456">1456</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="1457"><td class="num" id="LN1457">1457</td><td class="line">    <span class='keyword'>return</span> spr.Name();</td></tr>
<tr class="codeline" data-linenumber="1458"><td class="num" id="LN1458">1458</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="1459"><td class="num" id="LN1459">1459</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1460"><td class="num" id="LN1460">1460</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1461"><td class="num" id="LN1461">1461</td><td class="line"><span class='comment'>//======================================================================</span></td></tr>
<tr class="codeline" data-linenumber="1462"><td class="num" id="LN1462">1462</td><td class="line"><span class='comment'>//        Functions to convert the accuracy index to ARTS units</span></td></tr>
<tr class="codeline" data-linenumber="1463"><td class="num" id="LN1463">1463</td><td class="line"><span class='comment'>//======================================================================</span></td></tr>
<tr class="codeline" data-linenumber="1464"><td class="num" id="LN1464">1464</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1465"><td class="num" id="LN1465">1465</td><td class="line"><span class='comment'>// ********* for HITRAN database *************</span></td></tr>
<tr class="codeline" data-linenumber="1466"><td class="num" id="LN1466">1466</td><td class="line"><span class='comment'>//convert HITRAN index for line position accuracy to ARTS</span></td></tr>
<tr class="codeline" data-linenumber="1467"><td class="num" id="LN1467">1467</td><td class="line"><span class='comment'>//units (Hz).</span></td></tr>
<tr class="codeline" data-linenumber="1468"><td class="num" id="LN1468">1468</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1469"><td class="num" id="LN1469">1469</td><td class="line"><span class='keyword'>void</span> convHitranIERF(     </td></tr>
<tr class="codeline" data-linenumber="1470"><td class="num" id="LN1470">1470</td><td class="line">                    Numeric&amp;     mdf,</td></tr>
<tr class="codeline" data-linenumber="1471"><td class="num" id="LN1471">1471</td><td class="line">              <span class='keyword'>const</span> Index&amp;       df </td></tr>
<tr class="codeline" data-linenumber="1472"><td class="num" id="LN1472">1472</td><td class="line">                    )</td></tr>
<tr class="codeline" data-linenumber="1473"><td class="num" id="LN1473">1473</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="1474"><td class="num" id="LN1474">1474</td><td class="line">  <span class='keyword'>switch</span> ( df )</td></tr>
<tr class="codeline" data-linenumber="1475"><td class="num" id="LN1475">1475</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="1476"><td class="num" id="LN1476">1476</td><td class="line">    <span class='keyword'>case</span> 0:</td></tr>
<tr class="codeline" data-linenumber="1477"><td class="num" id="LN1477">1477</td><td class="line">      { </td></tr>
<tr class="codeline" data-linenumber="1478"><td class="num" id="LN1478">1478</td><td class="line">        mdf = -1;</td></tr>
<tr class="codeline" data-linenumber="1479"><td class="num" id="LN1479">1479</td><td class="line">        <span class='keyword'>break</span>; </td></tr>
<tr class="codeline" data-linenumber="1480"><td class="num" id="LN1480">1480</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="1481"><td class="num" id="LN1481">1481</td><td class="line">    <span class='keyword'>case</span> 1:</td></tr>
<tr class="codeline" data-linenumber="1482"><td class="num" id="LN1482">1482</td><td class="line">      {</td></tr>
<tr class="codeline" data-linenumber="1483"><td class="num" id="LN1483">1483</td><td class="line">        mdf = 30*1E9;</td></tr>
<tr class="codeline" data-linenumber="1484"><td class="num" id="LN1484">1484</td><td class="line">        <span class='keyword'>break</span>; </td></tr>
<tr class="codeline" data-linenumber="1485"><td class="num" id="LN1485">1485</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="1486"><td class="num" id="LN1486">1486</td><td class="line">    <span class='keyword'>case</span> 2:</td></tr>
<tr class="codeline" data-linenumber="1487"><td class="num" id="LN1487">1487</td><td class="line">      {</td></tr>
<tr class="codeline" data-linenumber="1488"><td class="num" id="LN1488">1488</td><td class="line">        mdf = 3*1E9;</td></tr>
<tr class="codeline" data-linenumber="1489"><td class="num" id="LN1489">1489</td><td class="line">        <span class='keyword'>break</span>; </td></tr>
<tr class="codeline" data-linenumber="1490"><td class="num" id="LN1490">1490</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="1491"><td class="num" id="LN1491">1491</td><td class="line">    <span class='keyword'>case</span> 3:</td></tr>
<tr class="codeline" data-linenumber="1492"><td class="num" id="LN1492">1492</td><td class="line">      {</td></tr>
<tr class="codeline" data-linenumber="1493"><td class="num" id="LN1493">1493</td><td class="line">        mdf = 300*1E6;</td></tr>
<tr class="codeline" data-linenumber="1494"><td class="num" id="LN1494">1494</td><td class="line">        <span class='keyword'>break</span>; </td></tr>
<tr class="codeline" data-linenumber="1495"><td class="num" id="LN1495">1495</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="1496"><td class="num" id="LN1496">1496</td><td class="line">    <span class='keyword'>case</span> 4:</td></tr>
<tr class="codeline" data-linenumber="1497"><td class="num" id="LN1497">1497</td><td class="line">      {</td></tr>
<tr class="codeline" data-linenumber="1498"><td class="num" id="LN1498">1498</td><td class="line">        mdf = 30*1E6;</td></tr>
<tr class="codeline" data-linenumber="1499"><td class="num" id="LN1499">1499</td><td class="line">        <span class='keyword'>break</span>; </td></tr>
<tr class="codeline" data-linenumber="1500"><td class="num" id="LN1500">1500</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="1501"><td class="num" id="LN1501">1501</td><td class="line">    <span class='keyword'>case</span> 5:</td></tr>
<tr class="codeline" data-linenumber="1502"><td class="num" id="LN1502">1502</td><td class="line">      {</td></tr>
<tr class="codeline" data-linenumber="1503"><td class="num" id="LN1503">1503</td><td class="line">        mdf = 3*1E6;</td></tr>
<tr class="codeline" data-linenumber="1504"><td class="num" id="LN1504">1504</td><td class="line">        <span class='keyword'>break</span>; </td></tr>
<tr class="codeline" data-linenumber="1505"><td class="num" id="LN1505">1505</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="1506"><td class="num" id="LN1506">1506</td><td class="line">    <span class='keyword'>case</span> 6:</td></tr>
<tr class="codeline" data-linenumber="1507"><td class="num" id="LN1507">1507</td><td class="line">      {</td></tr>
<tr class="codeline" data-linenumber="1508"><td class="num" id="LN1508">1508</td><td class="line">        mdf = 0.3*1E6;</td></tr>
<tr class="codeline" data-linenumber="1509"><td class="num" id="LN1509">1509</td><td class="line">        <span class='keyword'>break</span>; </td></tr>
<tr class="codeline" data-linenumber="1510"><td class="num" id="LN1510">1510</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="1511"><td class="num" id="LN1511">1511</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="1512"><td class="num" id="LN1512">1512</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="1513"><td class="num" id="LN1513">1513</td><td class="line">                    </td></tr>
<tr class="codeline" data-linenumber="1514"><td class="num" id="LN1514">1514</td><td class="line"><span class='comment'>//convert HITRAN index for intensity and halfwidth accuracy to ARTS</span></td></tr>
<tr class="codeline" data-linenumber="1515"><td class="num" id="LN1515">1515</td><td class="line"><span class='comment'>//units (relative difference).</span></td></tr>
<tr class="codeline" data-linenumber="1516"><td class="num" id="LN1516">1516</td><td class="line"><span class='keyword'>void</span> convHitranIERSH(     </td></tr>
<tr class="codeline" data-linenumber="1517"><td class="num" id="LN1517">1517</td><td class="line">                    Numeric&amp;     mdh,</td></tr>
<tr class="codeline" data-linenumber="1518"><td class="num" id="LN1518">1518</td><td class="line">              <span class='keyword'>const</span> Index&amp;       dh </td></tr>
<tr class="codeline" data-linenumber="1519"><td class="num" id="LN1519">1519</td><td class="line">                    )</td></tr>
<tr class="codeline" data-linenumber="1520"><td class="num" id="LN1520">1520</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="1521"><td class="num" id="LN1521">1521</td><td class="line">  <span class='keyword'>switch</span> ( dh )</td></tr>
<tr class="codeline" data-linenumber="1522"><td class="num" id="LN1522">1522</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="1523"><td class="num" id="LN1523">1523</td><td class="line">    <span class='keyword'>case</span> 0:</td></tr>
<tr class="codeline" data-linenumber="1524"><td class="num" id="LN1524">1524</td><td class="line">      { </td></tr>
<tr class="codeline" data-linenumber="1525"><td class="num" id="LN1525">1525</td><td class="line">        mdh = -1;</td></tr>
<tr class="codeline" data-linenumber="1526"><td class="num" id="LN1526">1526</td><td class="line">        <span class='keyword'>break</span>; </td></tr>
<tr class="codeline" data-linenumber="1527"><td class="num" id="LN1527">1527</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="1528"><td class="num" id="LN1528">1528</td><td class="line">    <span class='keyword'>case</span> 1:</td></tr>
<tr class="codeline" data-linenumber="1529"><td class="num" id="LN1529">1529</td><td class="line">      {</td></tr>
<tr class="codeline" data-linenumber="1530"><td class="num" id="LN1530">1530</td><td class="line">        mdh = -1;</td></tr>
<tr class="codeline" data-linenumber="1531"><td class="num" id="LN1531">1531</td><td class="line">        <span class='keyword'>break</span>; </td></tr>
<tr class="codeline" data-linenumber="1532"><td class="num" id="LN1532">1532</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="1533"><td class="num" id="LN1533">1533</td><td class="line">    <span class='keyword'>case</span> 2:</td></tr>
<tr class="codeline" data-linenumber="1534"><td class="num" id="LN1534">1534</td><td class="line">      {</td></tr>
<tr class="codeline" data-linenumber="1535"><td class="num" id="LN1535">1535</td><td class="line">        mdh = -1;</td></tr>
<tr class="codeline" data-linenumber="1536"><td class="num" id="LN1536">1536</td><td class="line">        <span class='keyword'>break</span>; </td></tr>
<tr class="codeline" data-linenumber="1537"><td class="num" id="LN1537">1537</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="1538"><td class="num" id="LN1538">1538</td><td class="line">    <span class='keyword'>case</span> 3:</td></tr>
<tr class="codeline" data-linenumber="1539"><td class="num" id="LN1539">1539</td><td class="line">      {</td></tr>
<tr class="codeline" data-linenumber="1540"><td class="num" id="LN1540">1540</td><td class="line">        mdh = 30;</td></tr>
<tr class="codeline" data-linenumber="1541"><td class="num" id="LN1541">1541</td><td class="line">        <span class='keyword'>break</span>; </td></tr>
<tr class="codeline" data-linenumber="1542"><td class="num" id="LN1542">1542</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="1543"><td class="num" id="LN1543">1543</td><td class="line">    <span class='keyword'>case</span> 4:</td></tr>
<tr class="codeline" data-linenumber="1544"><td class="num" id="LN1544">1544</td><td class="line">      {</td></tr>
<tr class="codeline" data-linenumber="1545"><td class="num" id="LN1545">1545</td><td class="line">        mdh = 20;</td></tr>
<tr class="codeline" data-linenumber="1546"><td class="num" id="LN1546">1546</td><td class="line">        <span class='keyword'>break</span>; </td></tr>
<tr class="codeline" data-linenumber="1547"><td class="num" id="LN1547">1547</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="1548"><td class="num" id="LN1548">1548</td><td class="line">    <span class='keyword'>case</span> 5:</td></tr>
<tr class="codeline" data-linenumber="1549"><td class="num" id="LN1549">1549</td><td class="line">      {</td></tr>
<tr class="codeline" data-linenumber="1550"><td class="num" id="LN1550">1550</td><td class="line">        mdh = 10;</td></tr>
<tr class="codeline" data-linenumber="1551"><td class="num" id="LN1551">1551</td><td class="line">        <span class='keyword'>break</span>; </td></tr>
<tr class="codeline" data-linenumber="1552"><td class="num" id="LN1552">1552</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="1553"><td class="num" id="LN1553">1553</td><td class="line">    <span class='keyword'>case</span> 6:</td></tr>
<tr class="codeline" data-linenumber="1554"><td class="num" id="LN1554">1554</td><td class="line">      {</td></tr>
<tr class="codeline" data-linenumber="1555"><td class="num" id="LN1555">1555</td><td class="line">        mdh =5;</td></tr>
<tr class="codeline" data-linenumber="1556"><td class="num" id="LN1556">1556</td><td class="line">        <span class='keyword'>break</span>; </td></tr>
<tr class="codeline" data-linenumber="1557"><td class="num" id="LN1557">1557</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="1558"><td class="num" id="LN1558">1558</td><td class="line">    <span class='keyword'>case</span> 7:</td></tr>
<tr class="codeline" data-linenumber="1559"><td class="num" id="LN1559">1559</td><td class="line">      {</td></tr>
<tr class="codeline" data-linenumber="1560"><td class="num" id="LN1560">1560</td><td class="line">        mdh =2;</td></tr>
<tr class="codeline" data-linenumber="1561"><td class="num" id="LN1561">1561</td><td class="line">        <span class='keyword'>break</span>; </td></tr>
<tr class="codeline" data-linenumber="1562"><td class="num" id="LN1562">1562</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="1563"><td class="num" id="LN1563">1563</td><td class="line">    <span class='keyword'>case</span> 8:</td></tr>
<tr class="codeline" data-linenumber="1564"><td class="num" id="LN1564">1564</td><td class="line">      {</td></tr>
<tr class="codeline" data-linenumber="1565"><td class="num" id="LN1565">1565</td><td class="line">        mdh =1;</td></tr>
<tr class="codeline" data-linenumber="1566"><td class="num" id="LN1566">1566</td><td class="line">        <span class='keyword'>break</span>; </td></tr>
<tr class="codeline" data-linenumber="1567"><td class="num" id="LN1567">1567</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="1568"><td class="num" id="LN1568">1568</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="1569"><td class="num" id="LN1569">1569</td><td class="line">  mdh=mdh/100;              </td></tr>
<tr class="codeline" data-linenumber="1570"><td class="num" id="LN1570">1570</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="1571"><td class="num" id="LN1571">1571</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1572"><td class="num" id="LN1572">1572</td><td class="line"><span class='comment'>// ********* for MYTRAN database ************* </span></td></tr>
<tr class="codeline" data-linenumber="1573"><td class="num" id="LN1573">1573</td><td class="line"><span class='comment'>//convert MYTRAN index for intensity and halfwidth accuracy to ARTS</span></td></tr>
<tr class="codeline" data-linenumber="1574"><td class="num" id="LN1574">1574</td><td class="line"><span class='comment'>//units (relative difference).</span></td></tr>
<tr class="codeline" data-linenumber="1575"><td class="num" id="LN1575">1575</td><td class="line"><span class='keyword'>void</span> convMytranIER(     </td></tr>
<tr class="codeline" data-linenumber="1576"><td class="num" id="LN1576">1576</td><td class="line">                    Numeric&amp;     mdh,</td></tr>
<tr class="codeline" data-linenumber="1577"><td class="num" id="LN1577">1577</td><td class="line">              <span class='keyword'>const</span> Index  &amp;      dh </td></tr>
<tr class="codeline" data-linenumber="1578"><td class="num" id="LN1578">1578</td><td class="line">                    )</td></tr>
<tr class="codeline" data-linenumber="1579"><td class="num" id="LN1579">1579</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="1580"><td class="num" id="LN1580">1580</td><td class="line">  <span class='keyword'>switch</span> ( dh )</td></tr>
<tr class="codeline" data-linenumber="1581"><td class="num" id="LN1581">1581</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="1582"><td class="num" id="LN1582">1582</td><td class="line">    <span class='keyword'>case</span> 0:</td></tr>
<tr class="codeline" data-linenumber="1583"><td class="num" id="LN1583">1583</td><td class="line">      { </td></tr>
<tr class="codeline" data-linenumber="1584"><td class="num" id="LN1584">1584</td><td class="line">        mdh = 200;</td></tr>
<tr class="codeline" data-linenumber="1585"><td class="num" id="LN1585">1585</td><td class="line">        <span class='keyword'>break</span>; </td></tr>
<tr class="codeline" data-linenumber="1586"><td class="num" id="LN1586">1586</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="1587"><td class="num" id="LN1587">1587</td><td class="line">    <span class='keyword'>case</span> 1:</td></tr>
<tr class="codeline" data-linenumber="1588"><td class="num" id="LN1588">1588</td><td class="line">      {</td></tr>
<tr class="codeline" data-linenumber="1589"><td class="num" id="LN1589">1589</td><td class="line">        mdh = 100;</td></tr>
<tr class="codeline" data-linenumber="1590"><td class="num" id="LN1590">1590</td><td class="line">        <span class='keyword'>break</span>; </td></tr>
<tr class="codeline" data-linenumber="1591"><td class="num" id="LN1591">1591</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="1592"><td class="num" id="LN1592">1592</td><td class="line">    <span class='keyword'>case</span> 2:</td></tr>
<tr class="codeline" data-linenumber="1593"><td class="num" id="LN1593">1593</td><td class="line">      {</td></tr>
<tr class="codeline" data-linenumber="1594"><td class="num" id="LN1594">1594</td><td class="line">        mdh = 50;</td></tr>
<tr class="codeline" data-linenumber="1595"><td class="num" id="LN1595">1595</td><td class="line">        <span class='keyword'>break</span>; </td></tr>
<tr class="codeline" data-linenumber="1596"><td class="num" id="LN1596">1596</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="1597"><td class="num" id="LN1597">1597</td><td class="line">    <span class='keyword'>case</span> 3:</td></tr>
<tr class="codeline" data-linenumber="1598"><td class="num" id="LN1598">1598</td><td class="line">      {</td></tr>
<tr class="codeline" data-linenumber="1599"><td class="num" id="LN1599">1599</td><td class="line">        mdh = 30;</td></tr>
<tr class="codeline" data-linenumber="1600"><td class="num" id="LN1600">1600</td><td class="line">        <span class='keyword'>break</span>; </td></tr>
<tr class="codeline" data-linenumber="1601"><td class="num" id="LN1601">1601</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="1602"><td class="num" id="LN1602">1602</td><td class="line">    <span class='keyword'>case</span> 4:</td></tr>
<tr class="codeline" data-linenumber="1603"><td class="num" id="LN1603">1603</td><td class="line">      {</td></tr>
<tr class="codeline" data-linenumber="1604"><td class="num" id="LN1604">1604</td><td class="line">        mdh = 20;</td></tr>
<tr class="codeline" data-linenumber="1605"><td class="num" id="LN1605">1605</td><td class="line">        <span class='keyword'>break</span>; </td></tr>
<tr class="codeline" data-linenumber="1606"><td class="num" id="LN1606">1606</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="1607"><td class="num" id="LN1607">1607</td><td class="line">    <span class='keyword'>case</span> 5:</td></tr>
<tr class="codeline" data-linenumber="1608"><td class="num" id="LN1608">1608</td><td class="line">      {</td></tr>
<tr class="codeline" data-linenumber="1609"><td class="num" id="LN1609">1609</td><td class="line">        mdh = 10;</td></tr>
<tr class="codeline" data-linenumber="1610"><td class="num" id="LN1610">1610</td><td class="line">        <span class='keyword'>break</span>; </td></tr>
<tr class="codeline" data-linenumber="1611"><td class="num" id="LN1611">1611</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="1612"><td class="num" id="LN1612">1612</td><td class="line">    <span class='keyword'>case</span> 6:</td></tr>
<tr class="codeline" data-linenumber="1613"><td class="num" id="LN1613">1613</td><td class="line">      {</td></tr>
<tr class="codeline" data-linenumber="1614"><td class="num" id="LN1614">1614</td><td class="line">        mdh =5;</td></tr>
<tr class="codeline" data-linenumber="1615"><td class="num" id="LN1615">1615</td><td class="line">        <span class='keyword'>break</span>; </td></tr>
<tr class="codeline" data-linenumber="1616"><td class="num" id="LN1616">1616</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="1617"><td class="num" id="LN1617">1617</td><td class="line">    <span class='keyword'>case</span> 7:</td></tr>
<tr class="codeline" data-linenumber="1618"><td class="num" id="LN1618">1618</td><td class="line">      {</td></tr>
<tr class="codeline" data-linenumber="1619"><td class="num" id="LN1619">1619</td><td class="line">        mdh = 2;</td></tr>
<tr class="codeline" data-linenumber="1620"><td class="num" id="LN1620">1620</td><td class="line">        <span class='keyword'>break</span>; </td></tr>
<tr class="codeline" data-linenumber="1621"><td class="num" id="LN1621">1621</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="1622"><td class="num" id="LN1622">1622</td><td class="line">    <span class='keyword'>case</span> 8:</td></tr>
<tr class="codeline" data-linenumber="1623"><td class="num" id="LN1623">1623</td><td class="line">      {</td></tr>
<tr class="codeline" data-linenumber="1624"><td class="num" id="LN1624">1624</td><td class="line">        mdh = 1;</td></tr>
<tr class="codeline" data-linenumber="1625"><td class="num" id="LN1625">1625</td><td class="line">        <span class='keyword'>break</span>; </td></tr>
<tr class="codeline" data-linenumber="1626"><td class="num" id="LN1626">1626</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="1627"><td class="num" id="LN1627">1627</td><td class="line">    <span class='keyword'>case</span> 9:</td></tr>
<tr class="codeline" data-linenumber="1628"><td class="num" id="LN1628">1628</td><td class="line">      {</td></tr>
<tr class="codeline" data-linenumber="1629"><td class="num" id="LN1629">1629</td><td class="line">        mdh = 0.5;</td></tr>
<tr class="codeline" data-linenumber="1630"><td class="num" id="LN1630">1630</td><td class="line">        <span class='keyword'>break</span>; </td></tr>
<tr class="codeline" data-linenumber="1631"><td class="num" id="LN1631">1631</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="1632"><td class="num" id="LN1632">1632</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="1633"><td class="num" id="LN1633">1633</td><td class="line">  mdh=mdh/100;              </td></tr>
<tr class="codeline" data-linenumber="1634"><td class="num" id="LN1634">1634</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="1635"><td class="num" id="LN1635">1635</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1636"><td class="num" id="LN1636">1636</td><td class="line">ostream&amp; <span class='keyword'>operator</span>&lt;&lt; (ostream &amp;os, <span class='keyword'>const</span> LineshapeSpec&amp; lsspec)</td></tr>
<tr class="codeline" data-linenumber="1637"><td class="num" id="LN1637">1637</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="1638"><td class="num" id="LN1638">1638</td><td class="line">    os &lt;&lt; <span class='string_literal'>"LineshapeSpec Index: "</span> &lt;&lt; lsspec.Ind_ls() &lt;&lt; <span class='string_literal'>", NormIndex: "</span> &lt;&lt; lsspec.Ind_lsn()</td></tr>
<tr class="codeline" data-linenumber="1639"><td class="num" id="LN1639">1639</td><td class="line">    &lt;&lt; <span class='string_literal'>", Cutoff: "</span> &lt;&lt; lsspec.Cutoff() &lt;&lt; endl;</td></tr>
<tr class="codeline" data-linenumber="1640"><td class="num" id="LN1640">1640</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1641"><td class="num" id="LN1641">1641</td><td class="line">    <span class='keyword'>return</span> os;</td></tr>
<tr class="codeline" data-linenumber="1642"><td class="num" id="LN1642">1642</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="1643"><td class="num" id="LN1643">1643</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1644"><td class="num" id="LN1644">1644</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1645"><td class="num" id="LN1645">1645</td><td class="line"><span class='comment'>/**</span></td></tr>
<tr class="codeline" data-linenumber="1646"><td class="num" id="LN1646">1646</td><td class="line"> <span class='comment'>*</span>  </td></tr>
<tr class="codeline" data-linenumber="1647"><td class="num" id="LN1647">1647</td><td class="line"> <span class='comment'>*  This will work as a wrapper for linemixing when abs_species contain relevant data.</span></td></tr>
<tr class="codeline" data-linenumber="1648"><td class="num" id="LN1648">1648</td><td class="line"> <span class='comment'>*  The funciton will only pass on arguments to xsec_species if there is no linemixing.</span></td></tr>
<tr class="codeline" data-linenumber="1649"><td class="num" id="LN1649">1649</td><td class="line"> <span class='comment'>*</span>  </td></tr>
<tr class="codeline" data-linenumber="1650"><td class="num" id="LN1650">1650</td><td class="line"> <span class='comment'>*  \retval xsec_attenuation    Cross section of one tag group. This is now the</span></td></tr>
<tr class="codeline" data-linenumber="1651"><td class="num" id="LN1651">1651</td><td class="line"> <span class='comment'>*                              true attenuation cross section in units of m^2.</span></td></tr>
<tr class="codeline" data-linenumber="1652"><td class="num" id="LN1652">1652</td><td class="line"> <span class='comment'>*  \retval xsec_source         Cross section of one tag group. This is now the</span></td></tr>
<tr class="codeline" data-linenumber="1653"><td class="num" id="LN1653">1653</td><td class="line"> <span class='comment'>*                              true source cross section in units of m^2.</span></td></tr>
<tr class="codeline" data-linenumber="1654"><td class="num" id="LN1654">1654</td><td class="line"> <span class='comment'>*  \retval xsec_phase          Cross section of one tag group. This is now the</span></td></tr>
<tr class="codeline" data-linenumber="1655"><td class="num" id="LN1655">1655</td><td class="line"> <span class='comment'>*                              true phase cross section in units of m^2.</span></td></tr>
<tr class="codeline" data-linenumber="1656"><td class="num" id="LN1656">1656</td><td class="line"> <span class='comment'>*  \param f_grid               Frequency grid.</span></td></tr>
<tr class="codeline" data-linenumber="1657"><td class="num" id="LN1657">1657</td><td class="line"> <span class='comment'>*  \param abs_p                Pressure grid.</span></td></tr>
<tr class="codeline" data-linenumber="1658"><td class="num" id="LN1658">1658</td><td class="line"> <span class='comment'>*  \param abs_t                Temperatures associated with abs_p.</span></td></tr>
<tr class="codeline" data-linenumber="1659"><td class="num" id="LN1659">1659</td><td class="line"> <span class='comment'>*  \param all_vmrs             Gas volume mixing ratios [nspecies, np].</span></td></tr>
<tr class="codeline" data-linenumber="1660"><td class="num" id="LN1660">1660</td><td class="line"> <span class='comment'>*  \param abs_species          Species tags for all species.</span></td></tr>
<tr class="codeline" data-linenumber="1661"><td class="num" id="LN1661">1661</td><td class="line"> <span class='comment'>*  \param this_species         Index of the current species in abs_species.</span></td></tr>
<tr class="codeline" data-linenumber="1662"><td class="num" id="LN1662">1662</td><td class="line"> <span class='comment'>*  \param abs_lines            The spectroscopic line list.</span></td></tr>
<tr class="codeline" data-linenumber="1663"><td class="num" id="LN1663">1663</td><td class="line"> <span class='comment'>*  \param ind_ls               Index to lineshape function.</span></td></tr>
<tr class="codeline" data-linenumber="1664"><td class="num" id="LN1664">1664</td><td class="line"> <span class='comment'>*  \param ind_lsn              Index to lineshape norm.</span></td></tr>
<tr class="codeline" data-linenumber="1665"><td class="num" id="LN1665">1665</td><td class="line"> <span class='comment'>*  \param cutoff               Lineshape cutoff.</span></td></tr>
<tr class="codeline" data-linenumber="1666"><td class="num" id="LN1666">1666</td><td class="line"> <span class='comment'>*  \param isotopologue_ratios  Isotopologue ratios.</span></td></tr>
<tr class="codeline" data-linenumber="1667"><td class="num" id="LN1667">1667</td><td class="line"> <span class='comment'>*</span> </td></tr>
<tr class="codeline" data-linenumber="1668"><td class="num" id="LN1668">1668</td><td class="line"> <span class='comment'>*  \author Richard Larsson</span></td></tr>
<tr class="codeline" data-linenumber="1669"><td class="num" id="LN1669">1669</td><td class="line"> <span class='comment'>*  \date   2013-04-24</span></td></tr>
<tr class="codeline" data-linenumber="1670"><td class="num" id="LN1670">1670</td><td class="line"> <span class='comment'>*</span> </td></tr>
<tr class="codeline" data-linenumber="1671"><td class="num" id="LN1671">1671</td><td class="line"> <span class='comment'>*/</span></td></tr>
<tr class="codeline" data-linenumber="1672"><td class="num" id="LN1672">1672</td><td class="line"><span class='keyword'>void</span> xsec_species_line_mixing_wrapper(  MatrixView               xsec_attenuation,</td></tr>
<tr class="codeline" data-linenumber="1673"><td class="num" id="LN1673">1673</td><td class="line">                                        MatrixView               xsec_source,</td></tr>
<tr class="codeline" data-linenumber="1674"><td class="num" id="LN1674">1674</td><td class="line">                                        MatrixView               xsec_phase,</td></tr>
<tr class="codeline" data-linenumber="1675"><td class="num" id="LN1675">1675</td><td class="line">                                        ArrayOfMatrix&amp;           partial_xsec_attenuation,</td></tr>
<tr class="codeline" data-linenumber="1676"><td class="num" id="LN1676">1676</td><td class="line">                                        ArrayOfMatrix&amp;           partial_xsec_source,</td></tr>
<tr class="codeline" data-linenumber="1677"><td class="num" id="LN1677">1677</td><td class="line">                                        ArrayOfMatrix&amp;           partial_xsec_phase,</td></tr>
<tr class="codeline" data-linenumber="1678"><td class="num" id="LN1678">1678</td><td class="line">                                        <span class='keyword'>const</span> ArrayOfRetrievalQuantity&amp; flag_partials,</td></tr>
<tr class="codeline" data-linenumber="1679"><td class="num" id="LN1679">1679</td><td class="line">                                        <span class='keyword'>const</span> ArrayOfIndex&amp; flag_partials_position,</td></tr>
<tr class="codeline" data-linenumber="1680"><td class="num" id="LN1680">1680</td><td class="line">                                        ConstVectorView          f_grid,</td></tr>
<tr class="codeline" data-linenumber="1681"><td class="num" id="LN1681">1681</td><td class="line">                                        ConstVectorView          abs_p,</td></tr>
<tr class="codeline" data-linenumber="1682"><td class="num" id="LN1682">1682</td><td class="line">                                        ConstVectorView          abs_t,</td></tr>
<tr class="codeline" data-linenumber="1683"><td class="num" id="LN1683">1683</td><td class="line">                                        ConstMatrixView          abs_t_nlte,</td></tr>
<tr class="codeline" data-linenumber="1684"><td class="num" id="LN1684">1684</td><td class="line">                                        ConstMatrixView          all_vmrs,</td></tr>
<tr class="codeline" data-linenumber="1685"><td class="num" id="LN1685">1685</td><td class="line">                                        <span class='keyword'>const</span> ArrayOfArrayOfSpeciesTag&amp; abs_species,</td></tr>
<tr class="codeline" data-linenumber="1686"><td class="num" id="LN1686">1686</td><td class="line">                                        <span class='keyword'>const</span> Index              this_species,</td></tr>
<tr class="codeline" data-linenumber="1687"><td class="num" id="LN1687">1687</td><td class="line">                                        <span class='keyword'>const</span> ArrayOfLineRecord&amp; abs_lines,</td></tr>
<tr class="codeline" data-linenumber="1688"><td class="num" id="LN1688">1688</td><td class="line">                                        <span class='keyword'>const</span> Numeric            H_magntitude_Zeeman,</td></tr>
<tr class="codeline" data-linenumber="1689"><td class="num" id="LN1689">1689</td><td class="line">                                        <span class='keyword'>const</span> Index              ind_ls,</td></tr>
<tr class="codeline" data-linenumber="1690"><td class="num" id="LN1690">1690</td><td class="line">                                        <span class='keyword'>const</span> Index              ind_lsn,</td></tr>
<tr class="codeline" data-linenumber="1691"><td class="num" id="LN1691">1691</td><td class="line">                                        <span class='keyword'>const</span> Numeric            cutoff,</td></tr>
<tr class="codeline" data-linenumber="1692"><td class="num" id="LN1692">1692</td><td class="line">                                        <span class='keyword'>const</span> SpeciesAuxData&amp;    isotopologue_ratios,</td></tr>
<tr class="codeline" data-linenumber="1693"><td class="num" id="LN1693">1693</td><td class="line">                                        <span class='keyword'>const</span> SpeciesAuxData&amp;    partition_functions)</td></tr>
<tr class="codeline" data-linenumber="1694"><td class="num" id="LN1694">1694</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="1695"><td class="num" id="LN1695">1695</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="1696"><td class="num" id="LN1696">1696</td><td class="line">    <span class='comment'>// Optional paths through the code...</span></td></tr>
<tr class="codeline" data-linenumber="1697"><td class="num" id="LN1697">1697</td><td class="line">    <span class='keyword'>const</span> <span class='keyword'>bool</span> cut = (cutoff != -1) ? <span class='keyword'>true</span> : <span class='keyword'>false</span>;</td></tr>
<tr class="codeline" data-linenumber="1698"><td class="num" id="LN1698">1698</td><td class="line">    <span class='keyword'>const</span> <span class='keyword'>bool</span> calc_partials = flag_partials_position.nelem();</td></tr>
<tr class="codeline" data-linenumber="1699"><td class="num" id="LN1699">1699</td><td class="line">    <span class='keyword'>const</span> <span class='keyword'>bool</span> calc_partials_phase = partial_xsec_phase.nelem()==partial_xsec_attenuation.nelem();</td></tr>
<tr class="codeline" data-linenumber="1700"><td class="num" id="LN1700">1700</td><td class="line">    <span class='keyword'>const</span> <span class='keyword'>bool</span> do_zeeman = (abs_lines.nelem()?(abs_lines[0].ZeemanEffect().PolarizationType()==ZeemanPolarizationType::None?<span class='keyword'>false</span>:<span class='keyword'>true</span>):<span class='keyword'>false</span>);</td></tr>
<tr class="codeline" data-linenumber="1701"><td class="num" id="LN1701">1701</td><td class="line">    <span class='keyword'>const</span> <span class='keyword'>bool</span> do_lm     = abs_species[this_species][0].LineMixing() != SpeciesTag::LINE_MIXING_OFF;</td></tr>
<tr class="codeline" data-linenumber="1702"><td class="num" id="LN1702">1702</td><td class="line">    <span class='keyword'>const</span> <span class='keyword'>bool</span> no_ls_partials = supports_LBL_without_phase(flag_partials);</td></tr>
<tr class="codeline" data-linenumber="1703"><td class="num" id="LN1703">1703</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="1704"><td class="num" id="LN1704">1704</td><td class="line">    <span class='keyword'>const</span> <span class='keyword'>bool</span> we_need_phase = do_zeeman || do_lm || calc_partials_phase;</td></tr>
<tr class="codeline" data-linenumber="1705"><td class="num" id="LN1705">1705</td><td class="line">    <span class='keyword'>const</span> <span class='keyword'>bool</span> we_need_partials =calc_partials&amp;&amp;!no_ls_partials;</td></tr>
<tr class="codeline" data-linenumber="1706"><td class="num" id="LN1706">1706</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="1707"><td class="num" id="LN1707">1707</td><td class="line">    <span class='comment'>// Must have the phase for two of the options</span></td></tr>
<tr class="codeline" data-linenumber="1708"><td class="num" id="LN1708">1708</td><td class="line">    <span class='keyword'>using</span> global_data::lineshape_data;</td></tr>
<tr class="codeline" data-linenumber="1709"><td class="num" id="LN1709">1709</td><td class="line">    <span class='keyword'>if</span> (!lineshape_data[ind_ls].Phase() &amp;&amp; we_need_phase )</td></tr>
<tr class="codeline" data-linenumber="1710"><td class="num" id="LN1710">1710</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="1711"><td class="num" id="LN1711">1711</td><td class="line">        std::ostringstream os;</td></tr>
<tr class="codeline" data-linenumber="1712"><td class="num" id="LN1712">1712</td><td class="line">        os &lt;&lt;  <span class='string_literal'>"This is an error message. You are using "</span> &lt;&lt; lineshape_data[ind_ls].Name() &lt;&lt;</td></tr>
<tr class="codeline" data-linenumber="1713"><td class="num" id="LN1713">1713</td><td class="line">        <span class='string_literal'>".\n"</span>&lt;&lt;<span class='string_literal'>"This line shape does not include phase in its calculations and\nis therefore invalid for "</span> &lt;&lt;</td></tr>
<tr class="codeline" data-linenumber="1714"><td class="num" id="LN1714">1714</td><td class="line">        <span class='string_literal'>"line mixing, Zeeman effect, and certain partial derivatives.\nYou are using one of these or you should not see this error.\n"</span>;</td></tr>
<tr class="codeline" data-linenumber="1715"><td class="num" id="LN1715">1715</td><td class="line">        <span class='keyword'>throw</span> std::runtime_error(os.str());</td></tr>
<tr class="codeline" data-linenumber="1716"><td class="num" id="LN1716">1716</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="1717"><td class="num" id="LN1717">1717</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="1718"><td class="num" id="LN1718">1718</td><td class="line">    <span class='keyword'>if</span>(we_need_partials&amp;&amp;!lineshape_data[ind_ls].Partials())</td></tr>
<tr class="codeline" data-linenumber="1719"><td class="num" id="LN1719">1719</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="1720"><td class="num" id="LN1720">1720</td><td class="line">        std::ostringstream os;</td></tr>
<tr class="codeline" data-linenumber="1721"><td class="num" id="LN1721">1721</td><td class="line">        os &lt;&lt;  <span class='string_literal'>"This is an error message. You are using "</span> &lt;&lt; lineshape_data[ind_ls].Name() &lt;&lt;<span class='string_literal'>".\n"</span></td></tr>
<tr class="codeline" data-linenumber="1722"><td class="num" id="LN1722">1722</td><td class="line">           &lt;&lt;  <span class='string_literal'>"Your selected *jacobian_quantities* requires that the line shape returns partial\n"</span></td></tr>
<tr class="codeline" data-linenumber="1723"><td class="num" id="LN1723">1723</td><td class="line">           &lt;&lt;  <span class='string_literal'>"derivatives."</span>;</td></tr>
<tr class="codeline" data-linenumber="1724"><td class="num" id="LN1724">1724</td><td class="line">           </td></tr>
<tr class="codeline" data-linenumber="1725"><td class="num" id="LN1725">1725</td><td class="line">        <span class='keyword'>throw</span> std::runtime_error(os.str());</td></tr>
<tr class="codeline" data-linenumber="1726"><td class="num" id="LN1726">1726</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="1727"><td class="num" id="LN1727">1727</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="1728"><td class="num" id="LN1728">1728</td><td class="line">    <span class='keyword'>extern</span> <span class='keyword'>const</span> Numeric DOPPLER_CONST;</td></tr>
<tr class="codeline" data-linenumber="1729"><td class="num" id="LN1729">1729</td><td class="line">    <span class='keyword'>static</span> <span class='keyword'>const</span> Numeric doppler_const = DOPPLER_CONST;</td></tr>
<tr class="codeline" data-linenumber="1730"><td class="num" id="LN1730">1730</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="1731"><td class="num" id="LN1731">1731</td><td class="line">    Index test_polarization = -100;</td></tr>
<tr class="codeline" data-linenumber="1732"><td class="num" id="LN1732">1732</td><td class="line">    <span class='keyword'>for</span>(<span class='keyword'>auto</span>&amp; lr : abs_lines) {</td></tr>
<tr class="codeline" data-linenumber="1733"><td class="num" id="LN1733">1733</td><td class="line">      <span class='keyword'>if</span>(test_polarization == -100)</td></tr>
<tr class="codeline" data-linenumber="1734"><td class="num" id="LN1734">1734</td><td class="line">        test_polarization = Index(lr.ZeemanEffect().PolarizationType());</td></tr>
<tr class="codeline" data-linenumber="1735"><td class="num" id="LN1735">1735</td><td class="line">      <span class='keyword'>else</span> <span class='keyword'>if</span>(test_polarization <span class='keyword'>not_eq</span> Index(lr.ZeemanEffect().PolarizationType())) { </td></tr>
<tr class="codeline" data-linenumber="1736"><td class="num" id="LN1736">1736</td><td class="line">        <span class='keyword'>throw</span> std::runtime_error(<span class='string_literal'>"Cannot mix polarization types in this method..."</span>);</td></tr>
<tr class="codeline" data-linenumber="1737"><td class="num" id="LN1737">1737</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="1738"><td class="num" id="LN1738">1738</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="1739"><td class="num" id="LN1739">1739</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="1740"><td class="num" id="LN1740">1740</td><td class="line">    <span class='comment'>// Check that the frequency grid is sorted in the case of lineshape</span></td></tr>
<tr class="codeline" data-linenumber="1741"><td class="num" id="LN1741">1741</td><td class="line">    <span class='comment'>// with cutoff. Duplicate frequency values are allowed.</span></td></tr>
<tr class="codeline" data-linenumber="1742"><td class="num" id="LN1742">1742</td><td class="line">    <span class='keyword'>if</span> (cut)</td></tr>
<tr class="codeline" data-linenumber="1743"><td class="num" id="LN1743">1743</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="1744"><td class="num" id="LN1744">1744</td><td class="line">        <span class='keyword'>if</span> ( ! is_sorted( f_grid ) )</td></tr>
<tr class="codeline" data-linenumber="1745"><td class="num" id="LN1745">1745</td><td class="line">        {</td></tr>
<tr class="codeline" data-linenumber="1746"><td class="num" id="LN1746">1746</td><td class="line">            std::ostringstream os;</td></tr>
<tr class="codeline" data-linenumber="1747"><td class="num" id="LN1747">1747</td><td class="line">            os &lt;&lt; <span class='string_literal'>"If you use a lineshape function with cutoff, your\n"</span></td></tr>
<tr class="codeline" data-linenumber="1748"><td class="num" id="LN1748">1748</td><td class="line">            &lt;&lt; <span class='string_literal'>"frequency grid *f_grid* must be sorted.\n"</span></td></tr>
<tr class="codeline" data-linenumber="1749"><td class="num" id="LN1749">1749</td><td class="line">            &lt;&lt; <span class='string_literal'>"(Duplicate values are allowed.)"</span>;</td></tr>
<tr class="codeline" data-linenumber="1750"><td class="num" id="LN1750">1750</td><td class="line">            <span class='keyword'>throw</span> std::runtime_error(os.str());</td></tr>
<tr class="codeline" data-linenumber="1751"><td class="num" id="LN1751">1751</td><td class="line">        }</td></tr>
<tr class="codeline" data-linenumber="1752"><td class="num" id="LN1752">1752</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="1753"><td class="num" id="LN1753">1753</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="1754"><td class="num" id="LN1754">1754</td><td class="line">    <span class='comment'>// Check that all temperatures are non-negative</span></td></tr>
<tr class="codeline" data-linenumber="1755"><td class="num" id="LN1755">1755</td><td class="line">    <span class='keyword'>bool</span> negative = <span class='keyword'>false</span>;</td></tr>
<tr class="codeline" data-linenumber="1756"><td class="num" id="LN1756">1756</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="1757"><td class="num" id="LN1757">1757</td><td class="line">    <span class='keyword'>for</span> (Index i = 0; !negative &amp;&amp; i &lt; abs_t.nelem (); i++)</td></tr>
<tr class="codeline" data-linenumber="1758"><td class="num" id="LN1758">1758</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="1759"><td class="num" id="LN1759">1759</td><td class="line">        <span class='keyword'>if</span> (abs_t[i] &lt; 0.)</td></tr>
<tr class="codeline" data-linenumber="1760"><td class="num" id="LN1760">1760</td><td class="line">            negative = <span class='keyword'>true</span>;</td></tr>
<tr class="codeline" data-linenumber="1761"><td class="num" id="LN1761">1761</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="1762"><td class="num" id="LN1762">1762</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="1763"><td class="num" id="LN1763">1763</td><td class="line">    <span class='keyword'>if</span> (negative)</td></tr>
<tr class="codeline" data-linenumber="1764"><td class="num" id="LN1764">1764</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="1765"><td class="num" id="LN1765">1765</td><td class="line">        std::ostringstream os;</td></tr>
<tr class="codeline" data-linenumber="1766"><td class="num" id="LN1766">1766</td><td class="line">        os &lt;&lt; <span class='string_literal'>"abs_t contains at least one negative temperature value.\n"</span></td></tr>
<tr class="codeline" data-linenumber="1767"><td class="num" id="LN1767">1767</td><td class="line">        &lt;&lt; <span class='string_literal'>"This is not allowed."</span>;</td></tr>
<tr class="codeline" data-linenumber="1768"><td class="num" id="LN1768">1768</td><td class="line">        <span class='keyword'>throw</span> std::runtime_error(os.str());</td></tr>
<tr class="codeline" data-linenumber="1769"><td class="num" id="LN1769">1769</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="1770"><td class="num" id="LN1770">1770</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="1771"><td class="num" id="LN1771">1771</td><td class="line">    <span class='keyword'>if</span> ( abs_t.nelem() != abs_p.nelem() )</td></tr>
<tr class="codeline" data-linenumber="1772"><td class="num" id="LN1772">1772</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="1773"><td class="num" id="LN1773">1773</td><td class="line">        std::ostringstream os;</td></tr>
<tr class="codeline" data-linenumber="1774"><td class="num" id="LN1774">1774</td><td class="line">        os &lt;&lt; <span class='string_literal'>"Variable abs_t must have the same dimension as abs_p.\n"</span></td></tr>
<tr class="codeline" data-linenumber="1775"><td class="num" id="LN1775">1775</td><td class="line">        &lt;&lt; <span class='string_literal'>"abs_t.nelem() = "</span> &lt;&lt; abs_t.nelem() &lt;&lt; '\n'</td></tr>
<tr class="codeline" data-linenumber="1776"><td class="num" id="LN1776">1776</td><td class="line">        &lt;&lt; <span class='string_literal'>"abs_p.nelem() = "</span> &lt;&lt; abs_p.nelem();</td></tr>
<tr class="codeline" data-linenumber="1777"><td class="num" id="LN1777">1777</td><td class="line">        <span class='keyword'>throw</span> std::runtime_error(os.str());</td></tr>
<tr class="codeline" data-linenumber="1778"><td class="num" id="LN1778">1778</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="1779"><td class="num" id="LN1779">1779</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="1780"><td class="num" id="LN1780">1780</td><td class="line">    <span class='comment'>// all_vmrs should have dimensions [nspecies, np]:</span></td></tr>
<tr class="codeline" data-linenumber="1781"><td class="num" id="LN1781">1781</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="1782"><td class="num" id="LN1782">1782</td><td class="line">    <span class='keyword'>if</span> ( all_vmrs.ncols() != abs_p.nelem() )</td></tr>
<tr class="codeline" data-linenumber="1783"><td class="num" id="LN1783">1783</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="1784"><td class="num" id="LN1784">1784</td><td class="line">        std::ostringstream os;</td></tr>
<tr class="codeline" data-linenumber="1785"><td class="num" id="LN1785">1785</td><td class="line">        os &lt;&lt; <span class='string_literal'>"Number of columns of all_vmrs must match abs_p.\n"</span></td></tr>
<tr class="codeline" data-linenumber="1786"><td class="num" id="LN1786">1786</td><td class="line">        &lt;&lt; <span class='string_literal'>"all_vmrs.ncols() = "</span> &lt;&lt; all_vmrs.ncols() &lt;&lt; '\n'</td></tr>
<tr class="codeline" data-linenumber="1787"><td class="num" id="LN1787">1787</td><td class="line">        &lt;&lt; <span class='string_literal'>"abs_p.nelem() = "</span> &lt;&lt; abs_p.nelem();</td></tr>
<tr class="codeline" data-linenumber="1788"><td class="num" id="LN1788">1788</td><td class="line">        <span class='keyword'>throw</span> std::runtime_error(os.str());</td></tr>
<tr class="codeline" data-linenumber="1789"><td class="num" id="LN1789">1789</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="1790"><td class="num" id="LN1790">1790</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="1791"><td class="num" id="LN1791">1791</td><td class="line">    <span class='comment'>// Check that the dimension of xsec is indeed [f_grid.nelem(),</span></td></tr>
<tr class="codeline" data-linenumber="1792"><td class="num" id="LN1792">1792</td><td class="line">    <span class='comment'>// abs_p.nelem()]:</span></td></tr>
<tr class="codeline" data-linenumber="1793"><td class="num" id="LN1793">1793</td><td class="line">    <span class='keyword'>if</span> ( xsec_attenuation.nrows() != f_grid.nelem() || xsec_attenuation.ncols() != abs_p.nelem() )</td></tr>
<tr class="codeline" data-linenumber="1794"><td class="num" id="LN1794">1794</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="1795"><td class="num" id="LN1795">1795</td><td class="line">        std::ostringstream os;</td></tr>
<tr class="codeline" data-linenumber="1796"><td class="num" id="LN1796">1796</td><td class="line">        os &lt;&lt; <span class='string_literal'>"Variable xsec must have dimensions [f_grid.nelem(),abs_p.nelem()].\n"</span></td></tr>
<tr class="codeline" data-linenumber="1797"><td class="num" id="LN1797">1797</td><td class="line">        &lt;&lt; <span class='string_literal'>"[xsec_attenuation.nrows(),xsec_attenuation.ncols()] = ["</span> &lt;&lt; xsec_attenuation.nrows()</td></tr>
<tr class="codeline" data-linenumber="1798"><td class="num" id="LN1798">1798</td><td class="line">        &lt;&lt; <span class='string_literal'>", "</span> &lt;&lt; xsec_attenuation.ncols() &lt;&lt; <span class='string_literal'>"]\n"</span></td></tr>
<tr class="codeline" data-linenumber="1799"><td class="num" id="LN1799">1799</td><td class="line">        &lt;&lt; <span class='string_literal'>"f_grid.nelem() = "</span> &lt;&lt; f_grid.nelem() &lt;&lt; '\n'</td></tr>
<tr class="codeline" data-linenumber="1800"><td class="num" id="LN1800">1800</td><td class="line">        &lt;&lt; <span class='string_literal'>"abs_p.nelem() = "</span> &lt;&lt; abs_p.nelem();</td></tr>
<tr class="codeline" data-linenumber="1801"><td class="num" id="LN1801">1801</td><td class="line">        <span class='keyword'>throw</span> std::runtime_error(os.str());</td></tr>
<tr class="codeline" data-linenumber="1802"><td class="num" id="LN1802">1802</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="1803"><td class="num" id="LN1803">1803</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="1804"><td class="num" id="LN1804">1804</td><td class="line">    <span class='comment'>// Check that the dimension of xsec source is [f_grid.nelem(), abs_p.nelem()]:</span></td></tr>
<tr class="codeline" data-linenumber="1805"><td class="num" id="LN1805">1805</td><td class="line">    <span class='keyword'>bool</span> calc_src;</td></tr>
<tr class="codeline" data-linenumber="1806"><td class="num" id="LN1806">1806</td><td class="line">    <span class='keyword'>if</span> ( xsec_source.nrows() != f_grid.nelem() || xsec_source.ncols() != abs_p.nelem() )</td></tr>
<tr class="codeline" data-linenumber="1807"><td class="num" id="LN1807">1807</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="1808"><td class="num" id="LN1808">1808</td><td class="line">      <span class='keyword'>if</span>( xsec_source.nrows() != 0 || xsec_source.ncols() != 0 )</td></tr>
<tr class="codeline" data-linenumber="1809"><td class="num" id="LN1809">1809</td><td class="line">      {</td></tr>
<tr class="codeline" data-linenumber="1810"><td class="num" id="LN1810">1810</td><td class="line">        std::ostringstream os;</td></tr>
<tr class="codeline" data-linenumber="1811"><td class="num" id="LN1811">1811</td><td class="line">        os &lt;&lt; <span class='string_literal'>"Variable xsec must have dimensions [f_grid.nelem(),abs_p.nelem()] or [0,0].\n"</span></td></tr>
<tr class="codeline" data-linenumber="1812"><td class="num" id="LN1812">1812</td><td class="line">           &lt;&lt; <span class='string_literal'>"[xsec_source.nrows(),xsec_source.ncols()] = ["</span> &lt;&lt; xsec_source.nrows()</td></tr>
<tr class="codeline" data-linenumber="1813"><td class="num" id="LN1813">1813</td><td class="line">           &lt;&lt; <span class='string_literal'>", "</span> &lt;&lt; xsec_source.ncols() &lt;&lt; <span class='string_literal'>"]\n"</span></td></tr>
<tr class="codeline" data-linenumber="1814"><td class="num" id="LN1814">1814</td><td class="line">           &lt;&lt; <span class='string_literal'>"f_grid.nelem() = "</span> &lt;&lt; f_grid.nelem() &lt;&lt; '\n'</td></tr>
<tr class="codeline" data-linenumber="1815"><td class="num" id="LN1815">1815</td><td class="line">           &lt;&lt; <span class='string_literal'>"abs_p.nelem() = "</span> &lt;&lt; abs_p.nelem();</td></tr>
<tr class="codeline" data-linenumber="1816"><td class="num" id="LN1816">1816</td><td class="line">        <span class='keyword'>throw</span> std::runtime_error(os.str());</td></tr>
<tr class="codeline" data-linenumber="1817"><td class="num" id="LN1817">1817</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="1818"><td class="num" id="LN1818">1818</td><td class="line">      <span class='keyword'>else</span> </td></tr>
<tr class="codeline" data-linenumber="1819"><td class="num" id="LN1819">1819</td><td class="line">      {</td></tr>
<tr class="codeline" data-linenumber="1820"><td class="num" id="LN1820">1820</td><td class="line">	calc_src = 0;</td></tr>
<tr class="codeline" data-linenumber="1821"><td class="num" id="LN1821">1821</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="1822"><td class="num" id="LN1822">1822</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="1823"><td class="num" id="LN1823">1823</td><td class="line">    <span class='keyword'>else</span></td></tr>
<tr class="codeline" data-linenumber="1824"><td class="num" id="LN1824">1824</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="1825"><td class="num" id="LN1825">1825</td><td class="line">      calc_src = 1;</td></tr>
<tr class="codeline" data-linenumber="1826"><td class="num" id="LN1826">1826</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="1827"><td class="num" id="LN1827">1827</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="1828"><td class="num" id="LN1828">1828</td><td class="line">    <span class='keyword'>if</span> ( xsec_phase.nrows() != f_grid.nelem() || xsec_phase.ncols() != abs_p.nelem() )</td></tr>
<tr class="codeline" data-linenumber="1829"><td class="num" id="LN1829">1829</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="1830"><td class="num" id="LN1830">1830</td><td class="line">        std::ostringstream os;</td></tr>
<tr class="codeline" data-linenumber="1831"><td class="num" id="LN1831">1831</td><td class="line">        os &lt;&lt; <span class='string_literal'>"Variable xsec must have dimensions [f_grid.nelem(),abs_p.nelem()].\n"</span></td></tr>
<tr class="codeline" data-linenumber="1832"><td class="num" id="LN1832">1832</td><td class="line">        &lt;&lt; <span class='string_literal'>"[xsec_phase.nrows(),xsec_phase.ncols()] = ["</span> &lt;&lt; xsec_phase.nrows()</td></tr>
<tr class="codeline" data-linenumber="1833"><td class="num" id="LN1833">1833</td><td class="line">        &lt;&lt; <span class='string_literal'>", "</span> &lt;&lt; xsec_phase.ncols() &lt;&lt; <span class='string_literal'>"]\n"</span></td></tr>
<tr class="codeline" data-linenumber="1834"><td class="num" id="LN1834">1834</td><td class="line">        &lt;&lt; <span class='string_literal'>"f_grid.nelem() = "</span> &lt;&lt; f_grid.nelem() &lt;&lt; '\n'</td></tr>
<tr class="codeline" data-linenumber="1835"><td class="num" id="LN1835">1835</td><td class="line">        &lt;&lt; <span class='string_literal'>"abs_p.nelem() = "</span> &lt;&lt; abs_p.nelem();</td></tr>
<tr class="codeline" data-linenumber="1836"><td class="num" id="LN1836">1836</td><td class="line">        <span class='keyword'>throw</span> std::runtime_error(os.str());</td></tr>
<tr class="codeline" data-linenumber="1837"><td class="num" id="LN1837">1837</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="1838"><td class="num" id="LN1838">1838</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="1839"><td class="num" id="LN1839">1839</td><td class="line">    <span class='comment'>//Helper var </span></td></tr>
<tr class="codeline" data-linenumber="1840"><td class="num" id="LN1840">1840</td><td class="line">    Vector attenuation(f_grid.nelem()+1),</td></tr>
<tr class="codeline" data-linenumber="1841"><td class="num" id="LN1841">1841</td><td class="line">    phase(f_grid.nelem()+1),</td></tr>
<tr class="codeline" data-linenumber="1842"><td class="num" id="LN1842">1842</td><td class="line">    aux(f_grid.nelem()+1),</td></tr>
<tr class="codeline" data-linenumber="1843"><td class="num" id="LN1843">1843</td><td class="line">    fac(f_grid.nelem()+1),</td></tr>
<tr class="codeline" data-linenumber="1844"><td class="num" id="LN1844">1844</td><td class="line">    f_local(f_grid.nelem()+1);</td></tr>
<tr class="codeline" data-linenumber="1845"><td class="num" id="LN1845">1845</td><td class="line">    f_local[Range(0,f_grid.nelem())]=f_grid;</td></tr>
<tr class="codeline" data-linenumber="1846"><td class="num" id="LN1846">1846</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="1847"><td class="num" id="LN1847">1847</td><td class="line">    <span class='comment'>// Set this to zero in the case of VoigtKuntz6 or other lines hapes that work in special circumstances</span></td></tr>
<tr class="codeline" data-linenumber="1848"><td class="num" id="LN1848">1848</td><td class="line">    <span class='keyword'>if</span> ((<span class='keyword'>not</span> we_need_phase) <span class='keyword'>and</span> we_need_partials)</td></tr>
<tr class="codeline" data-linenumber="1849"><td class="num" id="LN1849">1849</td><td class="line">        phase = 0.0;</td></tr>
<tr class="codeline" data-linenumber="1850"><td class="num" id="LN1850">1850</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="1851"><td class="num" id="LN1851">1851</td><td class="line"><span class='directive'>#pragma omp parallel for        \</span></td></tr>
<tr class="codeline" data-linenumber="1852"><td class="num" id="LN1852">1852</td><td class="line"><span class='directive'>if (!arts_omp_in_parallel())    \</span></td></tr>
<tr class="codeline" data-linenumber="1853"><td class="num" id="LN1853">1853</td><td class="line"><span class='directive'>firstprivate(attenuation, phase, fac, f_local, aux)</span></td></tr>
<tr class="codeline" data-linenumber="1854"><td class="num" id="LN1854">1854</td><td class="line">    <span class='keyword'>for</span>(Index jj=0; jj&lt;abs_p.nelem();jj++)</td></tr>
<tr class="codeline" data-linenumber="1855"><td class="num" id="LN1855">1855</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="1856"><td class="num" id="LN1856">1856</td><td class="line">        Vector empty_vector;</td></tr>
<tr class="codeline" data-linenumber="1857"><td class="num" id="LN1857">1857</td><td class="line">        <span class='keyword'>const</span> Numeric&amp; t=abs_t[jj];</td></tr>
<tr class="codeline" data-linenumber="1858"><td class="num" id="LN1858">1858</td><td class="line">        <span class='keyword'>const</span> Numeric&amp; p=abs_p[jj];</td></tr>
<tr class="codeline" data-linenumber="1859"><td class="num" id="LN1859">1859</td><td class="line">        ConstVectorView t_nlte = calc_src?abs_t_nlte(joker, jj):empty_vector;</td></tr>
<tr class="codeline" data-linenumber="1860"><td class="num" id="LN1860">1860</td><td class="line">        ConstVectorView vmrs = all_vmrs(joker,jj);</td></tr>
<tr class="codeline" data-linenumber="1861"><td class="num" id="LN1861">1861</td><td class="line">        </td></tr>
<tr class="codeline" data-linenumber="1862"><td class="num" id="LN1862">1862</td><td class="line">        </td></tr>
<tr class="codeline" data-linenumber="1863"><td class="num" id="LN1863">1863</td><td class="line">        <span class='comment'>// Setup for calculating the partial derivatives</span></td></tr>
<tr class="codeline" data-linenumber="1864"><td class="num" id="LN1864">1864</td><td class="line">        Vector dFa_dx, dFb_dx, dFa_dy, dFb_dy;</td></tr>
<tr class="codeline" data-linenumber="1865"><td class="num" id="LN1865">1865</td><td class="line">        <span class='keyword'>if</span>(calc_partials&amp;&amp;!no_ls_partials) <span class='comment'>//Only size them if partials are wanted</span></td></tr>
<tr class="codeline" data-linenumber="1866"><td class="num" id="LN1866">1866</td><td class="line">        {</td></tr>
<tr class="codeline" data-linenumber="1867"><td class="num" id="LN1867">1867</td><td class="line">            dFa_dx.resize(f_grid.nelem()+1);</td></tr>
<tr class="codeline" data-linenumber="1868"><td class="num" id="LN1868">1868</td><td class="line">            dFb_dx.resize(f_grid.nelem()+1);</td></tr>
<tr class="codeline" data-linenumber="1869"><td class="num" id="LN1869">1869</td><td class="line">            dFa_dy.resize(f_grid.nelem()+1); </td></tr>
<tr class="codeline" data-linenumber="1870"><td class="num" id="LN1870">1870</td><td class="line">            dFb_dy.resize(f_grid.nelem()+1);</td></tr>
<tr class="codeline" data-linenumber="1871"><td class="num" id="LN1871">1871</td><td class="line">        }</td></tr>
<tr class="codeline" data-linenumber="1872"><td class="num" id="LN1872">1872</td><td class="line">        </td></tr>
<tr class="codeline" data-linenumber="1873"><td class="num" id="LN1873">1873</td><td class="line">        <span class='comment'>// Simple caching of partition function to avoid recalculating things.</span></td></tr>
<tr class="codeline" data-linenumber="1874"><td class="num" id="LN1874">1874</td><td class="line">        Numeric qt_cache=-1, qref_cache=-1;</td></tr>
<tr class="codeline" data-linenumber="1875"><td class="num" id="LN1875">1875</td><td class="line">        Index iso_cache=-1;</td></tr>
<tr class="codeline" data-linenumber="1876"><td class="num" id="LN1876">1876</td><td class="line">        Numeric line_t_cache=-1,  dqt_dT_cache=-1.;</td></tr>
<tr class="codeline" data-linenumber="1877"><td class="num" id="LN1877">1877</td><td class="line">        </td></tr>
<tr class="codeline" data-linenumber="1878"><td class="num" id="LN1878">1878</td><td class="line">        <span class='keyword'>for</span>(Index ii=0; ii&lt;abs_lines.nelem();ii++)</td></tr>
<tr class="codeline" data-linenumber="1879"><td class="num" id="LN1879">1879</td><td class="line">        {</td></tr>
<tr class="codeline" data-linenumber="1880"><td class="num" id="LN1880">1880</td><td class="line">            </td></tr>
<tr class="codeline" data-linenumber="1881"><td class="num" id="LN1881">1881</td><td class="line">            <span class='comment'>// These lines should be ignored by user request</span></td></tr>
<tr class="codeline" data-linenumber="1882"><td class="num" id="LN1882">1882</td><td class="line">            <span class='keyword'>if</span>( abs_lines[ii].LineMixingByBand() )</td></tr>
<tr class="codeline" data-linenumber="1883"><td class="num" id="LN1883">1883</td><td class="line">              <span class='keyword'>continue</span>;</td></tr>
<tr class="codeline" data-linenumber="1884"><td class="num" id="LN1884">1884</td><td class="line">            </td></tr>
<tr class="codeline" data-linenumber="1885"><td class="num" id="LN1885">1885</td><td class="line">            <span class='keyword'>if</span>(calc_src)</td></tr>
<tr class="codeline" data-linenumber="1886"><td class="num" id="LN1886">1886</td><td class="line">            {</td></tr>
<tr class="codeline" data-linenumber="1887"><td class="num" id="LN1887">1887</td><td class="line">              <span class='keyword'>if</span>(abs_lines[ii].GetLinePopulationType() <span class='keyword'>not_eq</span> LinePopulationType::ByLTE <span class='keyword'>and</span></td></tr>
<tr class="codeline" data-linenumber="1888"><td class="num" id="LN1888">1888</td><td class="line">                 abs_lines[ii].GetLinePopulationType() <span class='keyword'>not_eq</span> LinePopulationType::ByVibrationalTemperatures)</td></tr>
<tr class="codeline" data-linenumber="1889"><td class="num" id="LN1889">1889</td><td class="line">              {</td></tr>
<tr class="codeline" data-linenumber="1890"><td class="num" id="LN1890">1890</td><td class="line">                <span class='keyword'>throw</span> std::runtime_error(<span class='string_literal'>"Bad data seen in xsec_species_line_mixing_wrapper.  Please use more modern function."</span>);</td></tr>
<tr class="codeline" data-linenumber="1891"><td class="num" id="LN1891">1891</td><td class="line">              }</td></tr>
<tr class="codeline" data-linenumber="1892"><td class="num" id="LN1892">1892</td><td class="line">            }</td></tr>
<tr class="codeline" data-linenumber="1893"><td class="num" id="LN1893">1893</td><td class="line">            </td></tr>
<tr class="codeline" data-linenumber="1894"><td class="num" id="LN1894">1894</td><td class="line">            <span class='comment'>// Pressure broadening parameters</span></td></tr>
<tr class="codeline" data-linenumber="1895"><td class="num" id="LN1895">1895</td><td class="line">            <span class='comment'>// Prepare pressure broadening parameters</span></td></tr>
<tr class="codeline" data-linenumber="1896"><td class="num" id="LN1896">1896</td><td class="line">            <span class='keyword'>auto</span> X = abs_lines[ii].GetShapeParams(t, p, this_species, vmrs, abs_species);</td></tr>
<tr class="codeline" data-linenumber="1897"><td class="num" id="LN1897">1897</td><td class="line">            <span class='keyword'>const</span> Numeric&amp; G0 = X.G0;</td></tr>
<tr class="codeline" data-linenumber="1898"><td class="num" id="LN1898">1898</td><td class="line">            <span class='keyword'>const</span> Numeric&amp; D0 = X.D0;</td></tr>
<tr class="codeline" data-linenumber="1899"><td class="num" id="LN1899">1899</td><td class="line">            <span class='keyword'>const</span> Numeric&amp; G2 = X.G2;</td></tr>
<tr class="codeline" data-linenumber="1900"><td class="num" id="LN1900">1900</td><td class="line">            <span class='keyword'>const</span> Numeric&amp; D2 = X.D2;</td></tr>
<tr class="codeline" data-linenumber="1901"><td class="num" id="LN1901">1901</td><td class="line">            <span class='keyword'>const</span> Numeric&amp; FVC = X.FVC;</td></tr>
<tr class="codeline" data-linenumber="1902"><td class="num" id="LN1902">1902</td><td class="line">            <span class='keyword'>const</span> Numeric&amp; ETA = X.ETA;</td></tr>
<tr class="codeline" data-linenumber="1903"><td class="num" id="LN1903">1903</td><td class="line">            <span class='keyword'>const</span> Numeric&amp; Y = X.Y;</td></tr>
<tr class="codeline" data-linenumber="1904"><td class="num" id="LN1904">1904</td><td class="line">            <span class='keyword'>const</span> Numeric&amp; G = X.G;</td></tr>
<tr class="codeline" data-linenumber="1905"><td class="num" id="LN1905">1905</td><td class="line">            <span class='keyword'>const</span> Numeric&amp; DV = X.DV;</td></tr>
<tr class="codeline" data-linenumber="1906"><td class="num" id="LN1906">1906</td><td class="line">            </td></tr>
<tr class="codeline" data-linenumber="1907"><td class="num" id="LN1907">1907</td><td class="line">            <span class='comment'>// Check the cache is the temperature of the line and the isotope is the same to avoid recalculating the partition sum</span></td></tr>
<tr class="codeline" data-linenumber="1908"><td class="num" id="LN1908">1908</td><td class="line">            <span class='keyword'>if</span>(iso_cache!=abs_lines[ii].Isotopologue() || line_t_cache != abs_lines[ii].Ti0())</td></tr>
<tr class="codeline" data-linenumber="1909"><td class="num" id="LN1909">1909</td><td class="line">            {</td></tr>
<tr class="codeline" data-linenumber="1910"><td class="num" id="LN1910">1910</td><td class="line">              iso_cache = abs_lines[ii].Isotopologue();</td></tr>
<tr class="codeline" data-linenumber="1911"><td class="num" id="LN1911">1911</td><td class="line">              line_t_cache = abs_lines[ii].Ti0();</td></tr>
<tr class="codeline" data-linenumber="1912"><td class="num" id="LN1912">1912</td><td class="line">              </td></tr>
<tr class="codeline" data-linenumber="1913"><td class="num" id="LN1913">1913</td><td class="line">              qt_cache  =-1;</td></tr>
<tr class="codeline" data-linenumber="1914"><td class="num" id="LN1914">1914</td><td class="line">              qref_cache=-1;</td></tr>
<tr class="codeline" data-linenumber="1915"><td class="num" id="LN1915">1915</td><td class="line">              dqt_dT_cache=-1.;</td></tr>
<tr class="codeline" data-linenumber="1916"><td class="num" id="LN1916">1916</td><td class="line">            }</td></tr>
<tr class="codeline" data-linenumber="1917"><td class="num" id="LN1917">1917</td><td class="line">            </td></tr>
<tr class="codeline" data-linenumber="1918"><td class="num" id="LN1918">1918</td><td class="line">            <span class='comment'>// Prepare line strength scaling</span></td></tr>
<tr class="codeline" data-linenumber="1919"><td class="num" id="LN1919">1919</td><td class="line">            Numeric partition_ratio, K1, K2, abs_nlte_ratio, src_nlte_ratio;</td></tr>
<tr class="codeline" data-linenumber="1920"><td class="num" id="LN1920">1920</td><td class="line">            GetLineScalingData( qt_cache,</td></tr>
<tr class="codeline" data-linenumber="1921"><td class="num" id="LN1921">1921</td><td class="line">                                qref_cache,</td></tr>
<tr class="codeline" data-linenumber="1922"><td class="num" id="LN1922">1922</td><td class="line">                                partition_ratio, </td></tr>
<tr class="codeline" data-linenumber="1923"><td class="num" id="LN1923">1923</td><td class="line">                                K1, </td></tr>
<tr class="codeline" data-linenumber="1924"><td class="num" id="LN1924">1924</td><td class="line">                                K2,</td></tr>
<tr class="codeline" data-linenumber="1925"><td class="num" id="LN1925">1925</td><td class="line">                                abs_nlte_ratio, </td></tr>
<tr class="codeline" data-linenumber="1926"><td class="num" id="LN1926">1926</td><td class="line">                                src_nlte_ratio, </td></tr>
<tr class="codeline" data-linenumber="1927"><td class="num" id="LN1927">1927</td><td class="line">                                partition_functions.getParamType(abs_lines[ii].Species(), abs_lines[ii].Isotopologue()),</td></tr>
<tr class="codeline" data-linenumber="1928"><td class="num" id="LN1928">1928</td><td class="line">                                partition_functions.getParam(abs_lines[ii].Species(), abs_lines[ii].Isotopologue()),</td></tr>
<tr class="codeline" data-linenumber="1929"><td class="num" id="LN1929">1929</td><td class="line">                                t,</td></tr>
<tr class="codeline" data-linenumber="1930"><td class="num" id="LN1930">1930</td><td class="line">                                abs_lines[ii].Ti0(),</td></tr>
<tr class="codeline" data-linenumber="1931"><td class="num" id="LN1931">1931</td><td class="line">                                abs_lines[ii].F(),</td></tr>
<tr class="codeline" data-linenumber="1932"><td class="num" id="LN1932">1932</td><td class="line">                                abs_lines[ii].Elow(),</td></tr>
<tr class="codeline" data-linenumber="1933"><td class="num" id="LN1933">1933</td><td class="line">                                calc_src,</td></tr>
<tr class="codeline" data-linenumber="1934"><td class="num" id="LN1934">1934</td><td class="line">                                abs_lines[ii].Evlow(),</td></tr>
<tr class="codeline" data-linenumber="1935"><td class="num" id="LN1935">1935</td><td class="line">                                abs_lines[ii].Evupp(),</td></tr>
<tr class="codeline" data-linenumber="1936"><td class="num" id="LN1936">1936</td><td class="line">                                abs_lines[ii].NLTELowerIndex(),</td></tr>
<tr class="codeline" data-linenumber="1937"><td class="num" id="LN1937">1937</td><td class="line">                                abs_lines[ii].NLTEUpperIndex(),</td></tr>
<tr class="codeline" data-linenumber="1938"><td class="num" id="LN1938">1938</td><td class="line">                                t_nlte);</td></tr>
<tr class="codeline" data-linenumber="1939"><td class="num" id="LN1939">1939</td><td class="line">            </td></tr>
<tr class="codeline" data-linenumber="1940"><td class="num" id="LN1940">1940</td><td class="line">            <span class='comment'>// Doppler broadening</span></td></tr>
<tr class="codeline" data-linenumber="1941"><td class="num" id="LN1941">1941</td><td class="line">            <span class='keyword'>const</span> Numeric sigma = abs_lines[ii].F() * doppler_const *sqrt( t / abs_lines[ii].IsotopologueData().Mass());</td></tr>
<tr class="codeline" data-linenumber="1942"><td class="num" id="LN1942">1942</td><td class="line">            </td></tr>
<tr class="codeline" data-linenumber="1943"><td class="num" id="LN1943">1943</td><td class="line">            Range this_f_range(0,0);</td></tr>
<tr class="codeline" data-linenumber="1944"><td class="num" id="LN1944">1944</td><td class="line">            </td></tr>
<tr class="codeline" data-linenumber="1945"><td class="num" id="LN1945">1945</td><td class="line">            <span class='keyword'>for</span>(Index iz=0; iz&lt;abs_lines[ii].ZeemanEffect().nelem(); iz++) </td></tr>
<tr class="codeline" data-linenumber="1946"><td class="num" id="LN1946">1946</td><td class="line">            {</td></tr>
<tr class="codeline" data-linenumber="1947"><td class="num" id="LN1947">1947</td><td class="line">                xsec_single_line(   <span class='comment'>// OUTPUT   </span></td></tr>
<tr class="codeline" data-linenumber="1948"><td class="num" id="LN1948">1948</td><td class="line">                                    xsec_attenuation(joker,jj), calc_src?xsec_source(joker,jj):</td></tr>
<tr class="codeline" data-linenumber="1949"><td class="num" id="LN1949">1949</td><td class="line">                                    empty_vector,xsec_phase(joker,jj), </td></tr>
<tr class="codeline" data-linenumber="1950"><td class="num" id="LN1950">1950</td><td class="line">                                    <span class='comment'>// HELPER</span></td></tr>
<tr class="codeline" data-linenumber="1951"><td class="num" id="LN1951">1951</td><td class="line">                                    attenuation, phase, dFa_dx, dFb_dx, dFa_dy, dFb_dy, this_f_range, fac, aux, </td></tr>
<tr class="codeline" data-linenumber="1952"><td class="num" id="LN1952">1952</td><td class="line">                                    <span class='comment'>// FREQUENCY</span></td></tr>
<tr class="codeline" data-linenumber="1953"><td class="num" id="LN1953">1953</td><td class="line">                                    f_local,  f_grid,  f_grid.nelem(),  cutoff,</td></tr>
<tr class="codeline" data-linenumber="1954"><td class="num" id="LN1954">1954</td><td class="line">                                    abs_lines[ii].F()+abs_lines[ii].ZeemanEffect().SplittingConstant(iz)*H_magntitude_Zeeman,</td></tr>
<tr class="codeline" data-linenumber="1955"><td class="num" id="LN1955">1955</td><td class="line">                                    <span class='comment'>// LINE STRENGTH</span></td></tr>
<tr class="codeline" data-linenumber="1956"><td class="num" id="LN1956">1956</td><td class="line">                                    abs_lines[ii].I0()*abs_lines[ii].ZeemanEffect().StrengthScaling(iz), partition_ratio, K1*K2, abs_nlte_ratio, src_nlte_ratio,</td></tr>
<tr class="codeline" data-linenumber="1957"><td class="num" id="LN1957">1957</td><td class="line">                                    isotopologue_ratios.getParam(abs_lines[ii].Species(),</td></tr>
<tr class="codeline" data-linenumber="1958"><td class="num" id="LN1958">1958</td><td class="line">                                                                abs_lines[ii].Isotopologue())[0].data[0],</td></tr>
<tr class="codeline" data-linenumber="1959"><td class="num" id="LN1959">1959</td><td class="line">                                    <span class='comment'>// ATMOSPHERIC TEMPERATURE</span></td></tr>
<tr class="codeline" data-linenumber="1960"><td class="num" id="LN1960">1960</td><td class="line">                                    t,</td></tr>
<tr class="codeline" data-linenumber="1961"><td class="num" id="LN1961">1961</td><td class="line">                                    <span class='comment'>// LINE SHAPE</span></td></tr>
<tr class="codeline" data-linenumber="1962"><td class="num" id="LN1962">1962</td><td class="line">                                    ind_ls, ind_lsn,</td></tr>
<tr class="codeline" data-linenumber="1963"><td class="num" id="LN1963">1963</td><td class="line">                                    <span class='comment'>// LINE BROADENING</span></td></tr>
<tr class="codeline" data-linenumber="1964"><td class="num" id="LN1964">1964</td><td class="line">                                    G0, G2, ETA, D0, D2, sigma, FVC,</td></tr>
<tr class="codeline" data-linenumber="1965"><td class="num" id="LN1965">1965</td><td class="line">                                    <span class='comment'>// LINE MIXING</span></td></tr>
<tr class="codeline" data-linenumber="1966"><td class="num" id="LN1966">1966</td><td class="line">                                    DV, Y,  G, </td></tr>
<tr class="codeline" data-linenumber="1967"><td class="num" id="LN1967">1967</td><td class="line">                                    <span class='comment'>// FEATURE FLAGS</span></td></tr>
<tr class="codeline" data-linenumber="1968"><td class="num" id="LN1968">1968</td><td class="line">                                    cutoff&gt;0, we_need_phase, calc_partials&amp;&amp;!no_ls_partials, calc_src);</td></tr>
<tr class="codeline" data-linenumber="1969"><td class="num" id="LN1969">1969</td><td class="line">              </td></tr>
<tr class="codeline" data-linenumber="1970"><td class="num" id="LN1970">1970</td><td class="line">              </td></tr>
<tr class="codeline" data-linenumber="1971"><td class="num" id="LN1971">1971</td><td class="line">              <span class='keyword'>if</span>(calc_partials)</td></tr>
<tr class="codeline" data-linenumber="1972"><td class="num" id="LN1972">1972</td><td class="line">              {</td></tr>
<tr class="codeline" data-linenumber="1973"><td class="num" id="LN1973">1973</td><td class="line">                  <span class='comment'>// These needs to be calculated and returned when Temperature is in list</span></td></tr>
<tr class="codeline" data-linenumber="1974"><td class="num" id="LN1974">1974</td><td class="line">                Numeric dG0dT, dD0dT,</td></tr>
<tr class="codeline" data-linenumber="1975"><td class="num" id="LN1975">1975</td><td class="line">                dYdT,dGdT,dDVdT,</td></tr>
<tr class="codeline" data-linenumber="1976"><td class="num" id="LN1976">1976</td><td class="line">                  dQ_dT, dK2_dT, dabs_nlte_ratio_dT=0.0,</td></tr>
<tr class="codeline" data-linenumber="1977"><td class="num" id="LN1977">1977</td><td class="line">                  atm_tv_low, atm_tv_upp;</td></tr>
<tr class="codeline" data-linenumber="1978"><td class="num" id="LN1978">1978</td><td class="line">                  <span class='keyword'>if</span>(do_temperature_jacobian(flag_partials))</td></tr>
<tr class="codeline" data-linenumber="1979"><td class="num" id="LN1979">1979</td><td class="line">                  {</td></tr>
<tr class="codeline" data-linenumber="1980"><td class="num" id="LN1980">1980</td><td class="line">                    <span class='keyword'>auto</span> dX = abs_lines[ii].GetShapeParams_dT(t, temperature_perturbation(flag_partials), p, this_species, vmrs, abs_species);</td></tr>
<tr class="codeline" data-linenumber="1981"><td class="num" id="LN1981">1981</td><td class="line">                    dG0dT = dX.G0;</td></tr>
<tr class="codeline" data-linenumber="1982"><td class="num" id="LN1982">1982</td><td class="line">                    dD0dT = dX.D0;</td></tr>
<tr class="codeline" data-linenumber="1983"><td class="num" id="LN1983">1983</td><td class="line">                    dYdT = dX.Y;</td></tr>
<tr class="codeline" data-linenumber="1984"><td class="num" id="LN1984">1984</td><td class="line">                    dGdT = dX.G;</td></tr>
<tr class="codeline" data-linenumber="1985"><td class="num" id="LN1985">1985</td><td class="line">                    dDVdT = dX.DV;</td></tr>
<tr class="codeline" data-linenumber="1986"><td class="num" id="LN1986">1986</td><td class="line">                    </td></tr>
<tr class="codeline" data-linenumber="1987"><td class="num" id="LN1987">1987</td><td class="line">                    GetLineScalingData_dT(dqt_dT_cache,</td></tr>
<tr class="codeline" data-linenumber="1988"><td class="num" id="LN1988">1988</td><td class="line">                                            dK2_dT,</td></tr>
<tr class="codeline" data-linenumber="1989"><td class="num" id="LN1989">1989</td><td class="line">                                            dQ_dT, </td></tr>
<tr class="codeline" data-linenumber="1990"><td class="num" id="LN1990">1990</td><td class="line">                                            dabs_nlte_ratio_dT,</td></tr>
<tr class="codeline" data-linenumber="1991"><td class="num" id="LN1991">1991</td><td class="line">                                            atm_tv_low, </td></tr>
<tr class="codeline" data-linenumber="1992"><td class="num" id="LN1992">1992</td><td class="line">                                            atm_tv_upp,</td></tr>
<tr class="codeline" data-linenumber="1993"><td class="num" id="LN1993">1993</td><td class="line">                                            qt_cache,</td></tr>
<tr class="codeline" data-linenumber="1994"><td class="num" id="LN1994">1994</td><td class="line">                                            abs_nlte_ratio,  </td></tr>
<tr class="codeline" data-linenumber="1995"><td class="num" id="LN1995">1995</td><td class="line">                                            partition_functions.getParamType(abs_lines[ii].Species(), abs_lines[ii].Isotopologue()),</td></tr>
<tr class="codeline" data-linenumber="1996"><td class="num" id="LN1996">1996</td><td class="line">                                            partition_functions.getParam(abs_lines[ii].Species(), abs_lines[ii].Isotopologue()),</td></tr>
<tr class="codeline" data-linenumber="1997"><td class="num" id="LN1997">1997</td><td class="line">                                            t,</td></tr>
<tr class="codeline" data-linenumber="1998"><td class="num" id="LN1998">1998</td><td class="line">                                            abs_lines[ii].Ti0(),</td></tr>
<tr class="codeline" data-linenumber="1999"><td class="num" id="LN1999">1999</td><td class="line">                                            temperature_perturbation(flag_partials),</td></tr>
<tr class="codeline" data-linenumber="2000"><td class="num" id="LN2000">2000</td><td class="line">                                            abs_lines[ii].F(),</td></tr>
<tr class="codeline" data-linenumber="2001"><td class="num" id="LN2001">2001</td><td class="line">                                            calc_src,</td></tr>
<tr class="codeline" data-linenumber="2002"><td class="num" id="LN2002">2002</td><td class="line">                                            abs_lines[ii].Evlow(),</td></tr>
<tr class="codeline" data-linenumber="2003"><td class="num" id="LN2003">2003</td><td class="line">                                            abs_lines[ii].Evupp(),</td></tr>
<tr class="codeline" data-linenumber="2004"><td class="num" id="LN2004">2004</td><td class="line">                                            abs_lines[ii].NLTELowerIndex(),</td></tr>
<tr class="codeline" data-linenumber="2005"><td class="num" id="LN2005">2005</td><td class="line">                                            abs_lines[ii].NLTEUpperIndex(),</td></tr>
<tr class="codeline" data-linenumber="2006"><td class="num" id="LN2006">2006</td><td class="line">                                            t_nlte);</td></tr>
<tr class="codeline" data-linenumber="2007"><td class="num" id="LN2007">2007</td><td class="line">                  }</td></tr>
<tr class="codeline" data-linenumber="2008"><td class="num" id="LN2008">2008</td><td class="line">                  </td></tr>
<tr class="codeline" data-linenumber="2009"><td class="num" id="LN2009">2009</td><td class="line">                  <span class='comment'>// These needs to be calculated when pressure broadening partial derivatives are needed</span></td></tr>
<tr class="codeline" data-linenumber="2010"><td class="num" id="LN2010">2010</td><td class="line">                  <span class='comment'>// Note that this gives plenty of wasted calculations for all lines that are not specifically</span></td></tr>
<tr class="codeline" data-linenumber="2011"><td class="num" id="LN2011">2011</td><td class="line">                  <span class='comment'>// requesting their individual partial derivatives...</span></td></tr>
<tr class="codeline" data-linenumber="2012"><td class="num" id="LN2012">2012</td><td class="line">                  <span class='keyword'>const</span> Numeric gamma_dSelf=0.0, gamma_dForeign=0.0, gamma_dWater=0.0,</td></tr>
<tr class="codeline" data-linenumber="2013"><td class="num" id="LN2013">2013</td><td class="line">                          psf_dSelf=0.0, psf_dForeign=0.0, psf_dWater=0.0, </td></tr>
<tr class="codeline" data-linenumber="2014"><td class="num" id="LN2014">2014</td><td class="line">                          gamma_dSelfExponent=0.0, gamma_dForeignExponent=0.0, gamma_dWaterExponent=0.0,</td></tr>
<tr class="codeline" data-linenumber="2015"><td class="num" id="LN2015">2015</td><td class="line">                          psf_dSelfExponent=0.0, psf_dForeignExponent=0.0, psf_dWaterExponent=0.0;</td></tr>
<tr class="codeline" data-linenumber="2016"><td class="num" id="LN2016">2016</td><td class="line">                          <span class='keyword'>const</span> Numeric dY0=0., dY1=0., dYexp=0., dG0=0., dG1=0., dGexp=0., dDV0=0., dDV1=0., dDVexp=0.;</td></tr>
<tr class="codeline" data-linenumber="2017"><td class="num" id="LN2017">2017</td><td class="line">                  <span class='keyword'>for</span>(Index iq=0; iq&lt;flag_partials_position.nelem(); iq++) {</td></tr>
<tr class="codeline" data-linenumber="2018"><td class="num" id="LN2018">2018</td><td class="line">                    <span class='keyword'>if</span>(is_line_parameter(flag_partials[flag_partials_position[iq]]))</td></tr>
<tr class="codeline" data-linenumber="2019"><td class="num" id="LN2019">2019</td><td class="line">                      <span class='keyword'>throw</span> std::runtime_error(<span class='string_literal'>"Sorry, there has been a hard deprecation of old xsec line param derivatives\nPlease use a modern xsec method"</span>);</td></tr>
<tr class="codeline" data-linenumber="2020"><td class="num" id="LN2020">2020</td><td class="line">                  }</td></tr>
<tr class="codeline" data-linenumber="2021"><td class="num" id="LN2021">2021</td><td class="line">                      </td></tr>
<tr class="codeline" data-linenumber="2022"><td class="num" id="LN2022">2022</td><td class="line">                  <span class='comment'>// Gather all new partial derivative calculations in this function</span></td></tr>
<tr class="codeline" data-linenumber="2023"><td class="num" id="LN2023">2023</td><td class="line">                  partial_derivatives_lineshape_dependency(partial_xsec_attenuation,</td></tr>
<tr class="codeline" data-linenumber="2024"><td class="num" id="LN2024">2024</td><td class="line">                                                          partial_xsec_phase, </td></tr>
<tr class="codeline" data-linenumber="2025"><td class="num" id="LN2025">2025</td><td class="line">                                                          partial_xsec_source,</td></tr>
<tr class="codeline" data-linenumber="2026"><td class="num" id="LN2026">2026</td><td class="line">                                                          flag_partials, </td></tr>
<tr class="codeline" data-linenumber="2027"><td class="num" id="LN2027">2027</td><td class="line">                                                          flag_partials_position, </td></tr>
<tr class="codeline" data-linenumber="2028"><td class="num" id="LN2028">2028</td><td class="line">                                                          attenuation,</td></tr>
<tr class="codeline" data-linenumber="2029"><td class="num" id="LN2029">2029</td><td class="line">                                                          phase,</td></tr>
<tr class="codeline" data-linenumber="2030"><td class="num" id="LN2030">2030</td><td class="line">                                                          fac,</td></tr>
<tr class="codeline" data-linenumber="2031"><td class="num" id="LN2031">2031</td><td class="line">                                                          dFa_dx, </td></tr>
<tr class="codeline" data-linenumber="2032"><td class="num" id="LN2032">2032</td><td class="line">                                                          dFb_dx, </td></tr>
<tr class="codeline" data-linenumber="2033"><td class="num" id="LN2033">2033</td><td class="line">                                                          dFa_dy, </td></tr>
<tr class="codeline" data-linenumber="2034"><td class="num" id="LN2034">2034</td><td class="line">                                                          dFb_dy,</td></tr>
<tr class="codeline" data-linenumber="2035"><td class="num" id="LN2035">2035</td><td class="line">                                                          f_grid,</td></tr>
<tr class="codeline" data-linenumber="2036"><td class="num" id="LN2036">2036</td><td class="line">                                                          this_f_range,</td></tr>
<tr class="codeline" data-linenumber="2037"><td class="num" id="LN2037">2037</td><td class="line">                                                          <span class='comment'>//Temperature</span></td></tr>
<tr class="codeline" data-linenumber="2038"><td class="num" id="LN2038">2038</td><td class="line">                                                          t,</td></tr>
<tr class="codeline" data-linenumber="2039"><td class="num" id="LN2039">2039</td><td class="line">                                                          sigma,</td></tr>
<tr class="codeline" data-linenumber="2040"><td class="num" id="LN2040">2040</td><td class="line">                                                          K2,</td></tr>
<tr class="codeline" data-linenumber="2041"><td class="num" id="LN2041">2041</td><td class="line">                                                          dK2_dT,</td></tr>
<tr class="codeline" data-linenumber="2042"><td class="num" id="LN2042">2042</td><td class="line">                                                          abs_nlte_ratio,<span class='comment'>//K3</span></td></tr>
<tr class="codeline" data-linenumber="2043"><td class="num" id="LN2043">2043</td><td class="line">                                                          dabs_nlte_ratio_dT,</td></tr>
<tr class="codeline" data-linenumber="2044"><td class="num" id="LN2044">2044</td><td class="line">                                                          src_nlte_ratio,<span class='comment'>//K4</span></td></tr>
<tr class="codeline" data-linenumber="2045"><td class="num" id="LN2045">2045</td><td class="line">                                                          <span class='comment'>// Line parameters</span></td></tr>
<tr class="codeline" data-linenumber="2046"><td class="num" id="LN2046">2046</td><td class="line">                                                          abs_lines[ii].F(),</td></tr>
<tr class="codeline" data-linenumber="2047"><td class="num" id="LN2047">2047</td><td class="line">                                                          abs_lines[ii].I0() * abs_lines[ii].ZeemanEffect().StrengthScaling(iz),</td></tr>
<tr class="codeline" data-linenumber="2048"><td class="num" id="LN2048">2048</td><td class="line">                                                          abs_lines[ii].Ti0(),</td></tr>
<tr class="codeline" data-linenumber="2049"><td class="num" id="LN2049">2049</td><td class="line">                                                          abs_lines[ii].Elow(),</td></tr>
<tr class="codeline" data-linenumber="2050"><td class="num" id="LN2050">2050</td><td class="line">                                                          abs_lines[ii].Evlow(),</td></tr>
<tr class="codeline" data-linenumber="2051"><td class="num" id="LN2051">2051</td><td class="line">                                                          abs_lines[ii].Evupp(),</td></tr>
<tr class="codeline" data-linenumber="2052"><td class="num" id="LN2052">2052</td><td class="line">                                                          (abs_lines[ii].NLTELowerIndex() &gt; -1 <span class='keyword'>and</span> calc_src)?</td></tr>
<tr class="codeline" data-linenumber="2053"><td class="num" id="LN2053">2053</td><td class="line">                                                          t_nlte[abs_lines[ii].NLTELowerIndex()]:-1.0,</td></tr>
<tr class="codeline" data-linenumber="2054"><td class="num" id="LN2054">2054</td><td class="line">                                                          (abs_lines[ii].NLTEUpperIndex() &gt; -1 <span class='keyword'>and</span> calc_src)?</td></tr>
<tr class="codeline" data-linenumber="2055"><td class="num" id="LN2055">2055</td><td class="line">                                                          t_nlte[abs_lines[ii].NLTEUpperIndex()]:-1.0,</td></tr>
<tr class="codeline" data-linenumber="2056"><td class="num" id="LN2056">2056</td><td class="line">                                                          Y,</td></tr>
<tr class="codeline" data-linenumber="2057"><td class="num" id="LN2057">2057</td><td class="line">                                                          dYdT,</td></tr>
<tr class="codeline" data-linenumber="2058"><td class="num" id="LN2058">2058</td><td class="line">                                                          dY0,</td></tr>
<tr class="codeline" data-linenumber="2059"><td class="num" id="LN2059">2059</td><td class="line">                                                          dY1,</td></tr>
<tr class="codeline" data-linenumber="2060"><td class="num" id="LN2060">2060</td><td class="line">                                                          dYexp,</td></tr>
<tr class="codeline" data-linenumber="2061"><td class="num" id="LN2061">2061</td><td class="line">                                                          G,</td></tr>
<tr class="codeline" data-linenumber="2062"><td class="num" id="LN2062">2062</td><td class="line">                                                          dGdT,</td></tr>
<tr class="codeline" data-linenumber="2063"><td class="num" id="LN2063">2063</td><td class="line">                                                          dG0,</td></tr>
<tr class="codeline" data-linenumber="2064"><td class="num" id="LN2064">2064</td><td class="line">                                                          dG1,</td></tr>
<tr class="codeline" data-linenumber="2065"><td class="num" id="LN2065">2065</td><td class="line">                                                          dGexp,</td></tr>
<tr class="codeline" data-linenumber="2066"><td class="num" id="LN2066">2066</td><td class="line">                                                          DV,</td></tr>
<tr class="codeline" data-linenumber="2067"><td class="num" id="LN2067">2067</td><td class="line">                                                          dDVdT,</td></tr>
<tr class="codeline" data-linenumber="2068"><td class="num" id="LN2068">2068</td><td class="line">                                                          dDV0,</td></tr>
<tr class="codeline" data-linenumber="2069"><td class="num" id="LN2069">2069</td><td class="line">                                                          dDV1,</td></tr>
<tr class="codeline" data-linenumber="2070"><td class="num" id="LN2070">2070</td><td class="line">                                                          dDVexp,</td></tr>
<tr class="codeline" data-linenumber="2071"><td class="num" id="LN2071">2071</td><td class="line">                                                          abs_lines[ii].QuantumIdentity(),</td></tr>
<tr class="codeline" data-linenumber="2072"><td class="num" id="LN2072">2072</td><td class="line">                                                          <span class='comment'>// LINE SHAPE</span></td></tr>
<tr class="codeline" data-linenumber="2073"><td class="num" id="LN2073">2073</td><td class="line">                                                          ind_ls,</td></tr>
<tr class="codeline" data-linenumber="2074"><td class="num" id="LN2074">2074</td><td class="line">                                                          ind_lsn,</td></tr>
<tr class="codeline" data-linenumber="2075"><td class="num" id="LN2075">2075</td><td class="line">                                                          D0,<span class='comment'>//FIXME: For H-T, this part is difficult</span></td></tr>
<tr class="codeline" data-linenumber="2076"><td class="num" id="LN2076">2076</td><td class="line">                                                          dD0dT,</td></tr>
<tr class="codeline" data-linenumber="2077"><td class="num" id="LN2077">2077</td><td class="line">                                                          G0,</td></tr>
<tr class="codeline" data-linenumber="2078"><td class="num" id="LN2078">2078</td><td class="line">                                                          dG0dT,</td></tr>
<tr class="codeline" data-linenumber="2079"><td class="num" id="LN2079">2079</td><td class="line">                                                          gamma_dSelf,</td></tr>
<tr class="codeline" data-linenumber="2080"><td class="num" id="LN2080">2080</td><td class="line">                                                          gamma_dForeign,</td></tr>
<tr class="codeline" data-linenumber="2081"><td class="num" id="LN2081">2081</td><td class="line">                                                          gamma_dWater,</td></tr>
<tr class="codeline" data-linenumber="2082"><td class="num" id="LN2082">2082</td><td class="line">                                                          psf_dSelf,</td></tr>
<tr class="codeline" data-linenumber="2083"><td class="num" id="LN2083">2083</td><td class="line">                                                          psf_dForeign,</td></tr>
<tr class="codeline" data-linenumber="2084"><td class="num" id="LN2084">2084</td><td class="line">                                                          psf_dWater,</td></tr>
<tr class="codeline" data-linenumber="2085"><td class="num" id="LN2085">2085</td><td class="line">                                                          gamma_dSelfExponent,</td></tr>
<tr class="codeline" data-linenumber="2086"><td class="num" id="LN2086">2086</td><td class="line">                                                          gamma_dForeignExponent,</td></tr>
<tr class="codeline" data-linenumber="2087"><td class="num" id="LN2087">2087</td><td class="line">                                                          gamma_dWaterExponent,</td></tr>
<tr class="codeline" data-linenumber="2088"><td class="num" id="LN2088">2088</td><td class="line">                                                          psf_dSelfExponent,</td></tr>
<tr class="codeline" data-linenumber="2089"><td class="num" id="LN2089">2089</td><td class="line">                                                          psf_dForeignExponent,</td></tr>
<tr class="codeline" data-linenumber="2090"><td class="num" id="LN2090">2090</td><td class="line">                                                          psf_dWaterExponent,</td></tr>
<tr class="codeline" data-linenumber="2091"><td class="num" id="LN2091">2091</td><td class="line">                                                          <span class='comment'>// Partition data parameters</span></td></tr>
<tr class="codeline" data-linenumber="2092"><td class="num" id="LN2092">2092</td><td class="line">                                                          dQ_dT,</td></tr>
<tr class="codeline" data-linenumber="2093"><td class="num" id="LN2093">2093</td><td class="line">                                                          <span class='comment'>// Magnetic variables</span></td></tr>
<tr class="codeline" data-linenumber="2094"><td class="num" id="LN2094">2094</td><td class="line">                                                          abs_lines[ii].ZeemanEffect().SplittingConstant(iz),</td></tr>
<tr class="codeline" data-linenumber="2095"><td class="num" id="LN2095">2095</td><td class="line">                                                          H_magntitude_Zeeman,</td></tr>
<tr class="codeline" data-linenumber="2096"><td class="num" id="LN2096">2096</td><td class="line">                                                          abs_lines[ii].ZeemanEffect().PolarizationType() <span class='keyword'>not_eq</span> ZeemanPolarizationType::None,</td></tr>
<tr class="codeline" data-linenumber="2097"><td class="num" id="LN2097">2097</td><td class="line">                                                          <span class='comment'>// Programming</span></td></tr>
<tr class="codeline" data-linenumber="2098"><td class="num" id="LN2098">2098</td><td class="line">                                                          jj, </td></tr>
<tr class="codeline" data-linenumber="2099"><td class="num" id="LN2099">2099</td><td class="line">                                                          calc_partials_phase,</td></tr>
<tr class="codeline" data-linenumber="2100"><td class="num" id="LN2100">2100</td><td class="line">                                                          calc_src);</td></tr>
<tr class="codeline" data-linenumber="2101"><td class="num" id="LN2101">2101</td><td class="line">              }</td></tr>
<tr class="codeline" data-linenumber="2102"><td class="num" id="LN2102">2102</td><td class="line">            }</td></tr>
<tr class="codeline" data-linenumber="2103"><td class="num" id="LN2103">2103</td><td class="line">        }</td></tr>
<tr class="codeline" data-linenumber="2104"><td class="num" id="LN2104">2104</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="2105"><td class="num" id="LN2105">2105</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="2106"><td class="num" id="LN2106">2106</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="2107"><td class="num" id="LN2107">2107</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="2108"><td class="num" id="LN2108">2108</td><td class="line"><span class='comment'>/*! cross-section replacement computer</span> </td></tr>
<tr class="codeline" data-linenumber="2109"><td class="num" id="LN2109">2109</td><td class="line"> <span class='comment'>*</span>  </td></tr>
<tr class="codeline" data-linenumber="2110"><td class="num" id="LN2110">2110</td><td class="line"> <span class='comment'>* This will work as the interface for all line-by-line computations</span> </td></tr>
<tr class="codeline" data-linenumber="2111"><td class="num" id="LN2111">2111</td><td class="line"> <span class='comment'>* lacking special demands</span></td></tr>
<tr class="codeline" data-linenumber="2112"><td class="num" id="LN2112">2112</td><td class="line"> <span class='comment'>*</span>  </td></tr>
<tr class="codeline" data-linenumber="2113"><td class="num" id="LN2113">2113</td><td class="line"> <span class='comment'>*  \retval xsec                Cross section of one tag group. This is now the</span></td></tr>
<tr class="codeline" data-linenumber="2114"><td class="num" id="LN2114">2114</td><td class="line"> <span class='comment'>*                              true attenuation cross section in units of m^2.</span></td></tr>
<tr class="codeline" data-linenumber="2115"><td class="num" id="LN2115">2115</td><td class="line"> <span class='comment'>*  \retval source              Cross section of one tag group. This is now the</span></td></tr>
<tr class="codeline" data-linenumber="2116"><td class="num" id="LN2116">2116</td><td class="line"> <span class='comment'>*                              true source cross section in units of m^2.</span></td></tr>
<tr class="codeline" data-linenumber="2117"><td class="num" id="LN2117">2117</td><td class="line"> <span class='comment'>*  \retval phase               Cross section of one tag group. This is now the</span></td></tr>
<tr class="codeline" data-linenumber="2118"><td class="num" id="LN2118">2118</td><td class="line"> <span class='comment'>*                              true phase cross section in units of m^2.</span></td></tr>
<tr class="codeline" data-linenumber="2119"><td class="num" id="LN2119">2119</td><td class="line"> <span class='comment'>*  \retval dxsec               Partial derivatives of xsec.</span></td></tr>
<tr class="codeline" data-linenumber="2120"><td class="num" id="LN2120">2120</td><td class="line"> <span class='comment'>*  \retval dsource             Partial derivatives of source.</span></td></tr>
<tr class="codeline" data-linenumber="2121"><td class="num" id="LN2121">2121</td><td class="line"> <span class='comment'>*  \retval dphase              Partial derivatives of phase.</span></td></tr>
<tr class="codeline" data-linenumber="2122"><td class="num" id="LN2122">2122</td><td class="line"> <span class='comment'>*</span> </td></tr>
<tr class="codeline" data-linenumber="2123"><td class="num" id="LN2123">2123</td><td class="line"> <span class='comment'>*  \param flag_partials        Partial derivatives flags.</span></td></tr>
<tr class="codeline" data-linenumber="2124"><td class="num" id="LN2124">2124</td><td class="line"> <span class='comment'>*  \param f_grid               Frequency grid.</span></td></tr>
<tr class="codeline" data-linenumber="2125"><td class="num" id="LN2125">2125</td><td class="line"> <span class='comment'>*  \param abs_p                Pressure grid.</span></td></tr>
<tr class="codeline" data-linenumber="2126"><td class="num" id="LN2126">2126</td><td class="line"> <span class='comment'>*  \param abs_t                Temperatures associated with abs_p.</span></td></tr>
<tr class="codeline" data-linenumber="2127"><td class="num" id="LN2127">2127</td><td class="line"> <span class='comment'>*  \param abs_t_nlte           Non-lte temperatures for various energy levels.</span></td></tr>
<tr class="codeline" data-linenumber="2128"><td class="num" id="LN2128">2128</td><td class="line"> <span class='comment'>*  \param all_vmrs             Gas volume mixing ratios [nspecies, np].</span></td></tr>
<tr class="codeline" data-linenumber="2129"><td class="num" id="LN2129">2129</td><td class="line"> <span class='comment'>*  \param abs_species          Species tags for all species.</span></td></tr>
<tr class="codeline" data-linenumber="2130"><td class="num" id="LN2130">2130</td><td class="line"> <span class='comment'>*  \param this_species         Index of the current species in abs_species.</span></td></tr>
<tr class="codeline" data-linenumber="2131"><td class="num" id="LN2131">2131</td><td class="line"> <span class='comment'>*  \param abs_lines            The spectroscopic line list.</span></td></tr>
<tr class="codeline" data-linenumber="2132"><td class="num" id="LN2132">2132</td><td class="line"> <span class='comment'>*  \param Z_DF                 The Zeeman line center shift over the magnitude of the magnetic field.</span></td></tr>
<tr class="codeline" data-linenumber="2133"><td class="num" id="LN2133">2133</td><td class="line"> <span class='comment'>*  \param H_magntitude_Zeeman  The magnitude of the magnetic field required by Zeeman effect.</span></td></tr>
<tr class="codeline" data-linenumber="2134"><td class="num" id="LN2134">2134</td><td class="line"> <span class='comment'>*  \param lm_p_lim             Line mixing pressure limit</span></td></tr>
<tr class="codeline" data-linenumber="2135"><td class="num" id="LN2135">2135</td><td class="line"> <span class='comment'>*  \param isotopologue_ratios  Isotopologue ratios.</span></td></tr>
<tr class="codeline" data-linenumber="2136"><td class="num" id="LN2136">2136</td><td class="line"> <span class='comment'>*  \param partition_functions  Partition functions.</span></td></tr>
<tr class="codeline" data-linenumber="2137"><td class="num" id="LN2137">2137</td><td class="line"> <span class='comment'>*  \param verbosity            Verbosity level.</span></td></tr>
<tr class="codeline" data-linenumber="2138"><td class="num" id="LN2138">2138</td><td class="line"> <span class='comment'>*</span> </td></tr>
<tr class="codeline" data-linenumber="2139"><td class="num" id="LN2139">2139</td><td class="line"> <span class='comment'>*  \author Richard Larsson</span></td></tr>
<tr class="codeline" data-linenumber="2140"><td class="num" id="LN2140">2140</td><td class="line"> <span class='comment'>*  \date   2013-04-24</span></td></tr>
<tr class="codeline" data-linenumber="2141"><td class="num" id="LN2141">2141</td><td class="line"> <span class='comment'>*</span> </td></tr>
<tr class="codeline" data-linenumber="2142"><td class="num" id="LN2142">2142</td><td class="line"> <span class='comment'>*/</span></td></tr>
<tr class="codeline" data-linenumber="2143"><td class="num" id="LN2143">2143</td><td class="line"><span class='keyword'>void</span> xsec_species2(Matrix&amp; xsec,</td></tr>
<tr class="codeline" data-linenumber="2144"><td class="num" id="LN2144">2144</td><td class="line">                   Matrix&amp; source,</td></tr>
<tr class="codeline" data-linenumber="2145"><td class="num" id="LN2145">2145</td><td class="line">                   Matrix&amp; phase,</td></tr>
<tr class="codeline" data-linenumber="2146"><td class="num" id="LN2146">2146</td><td class="line">                   ArrayOfMatrix&amp; dxsec_dx,</td></tr>
<tr class="codeline" data-linenumber="2147"><td class="num" id="LN2147">2147</td><td class="line">                   ArrayOfMatrix&amp; dsource_dx,</td></tr>
<tr class="codeline" data-linenumber="2148"><td class="num" id="LN2148">2148</td><td class="line">                   ArrayOfMatrix&amp; dphase_dx,</td></tr>
<tr class="codeline" data-linenumber="2149"><td class="num" id="LN2149">2149</td><td class="line">                   <span class='keyword'>const</span> ArrayOfRetrievalQuantity&amp; jacobian_quantities,</td></tr>
<tr class="codeline" data-linenumber="2150"><td class="num" id="LN2150">2150</td><td class="line">                   <span class='keyword'>const</span> ArrayOfIndex&amp; jacobian_propmat_positions,</td></tr>
<tr class="codeline" data-linenumber="2151"><td class="num" id="LN2151">2151</td><td class="line">                   <span class='keyword'>const</span> Vector&amp; f_grid,</td></tr>
<tr class="codeline" data-linenumber="2152"><td class="num" id="LN2152">2152</td><td class="line">                   <span class='keyword'>const</span> Vector&amp; abs_p,</td></tr>
<tr class="codeline" data-linenumber="2153"><td class="num" id="LN2153">2153</td><td class="line">                   <span class='keyword'>const</span> Vector&amp; abs_t,</td></tr>
<tr class="codeline" data-linenumber="2154"><td class="num" id="LN2154">2154</td><td class="line">                   <span class='keyword'>const</span> Matrix&amp; abs_nlte,</td></tr>
<tr class="codeline" data-linenumber="2155"><td class="num" id="LN2155">2155</td><td class="line">                   <span class='keyword'>const</span> Matrix&amp; all_vmrs,</td></tr>
<tr class="codeline" data-linenumber="2156"><td class="num" id="LN2156">2156</td><td class="line">                   <span class='keyword'>const</span> ArrayOfArrayOfSpeciesTag&amp; abs_species,</td></tr>
<tr class="codeline" data-linenumber="2157"><td class="num" id="LN2157">2157</td><td class="line">                   <span class='keyword'>const</span> Index this_species,</td></tr>
<tr class="codeline" data-linenumber="2158"><td class="num" id="LN2158">2158</td><td class="line">                   <span class='keyword'>const</span> ArrayOfLineRecord&amp; abs_lines,</td></tr>
<tr class="codeline" data-linenumber="2159"><td class="num" id="LN2159">2159</td><td class="line">                   <span class='keyword'>const</span> SpeciesAuxData&amp; isotopologue_ratios,</td></tr>
<tr class="codeline" data-linenumber="2160"><td class="num" id="LN2160">2160</td><td class="line">                   <span class='keyword'>const</span> SpeciesAuxData&amp; partition_functions)</td></tr>
<tr class="codeline" data-linenumber="2161"><td class="num" id="LN2161">2161</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="2162"><td class="num" id="LN2162">2162</td><td class="line">  <span class='comment'>// Size of problem</span></td></tr>
<tr class="codeline" data-linenumber="2163"><td class="num" id="LN2163">2163</td><td class="line">  <span class='keyword'>const</span> Index np = abs_p.nelem();                      <span class='comment'>// number of pressure levels</span></td></tr>
<tr class="codeline" data-linenumber="2164"><td class="num" id="LN2164">2164</td><td class="line">  <span class='keyword'>const</span> Index nf = f_grid.nelem();                     <span class='comment'>// number of Dirac frequencies</span></td></tr>
<tr class="codeline" data-linenumber="2165"><td class="num" id="LN2165">2165</td><td class="line">  <span class='keyword'>const</span> Index nl = abs_lines.nelem();                  <span class='comment'>// number of lines in the catalog</span></td></tr>
<tr class="codeline" data-linenumber="2166"><td class="num" id="LN2166">2166</td><td class="line">  <span class='keyword'>const</span> Index nj = jacobian_propmat_positions.nelem(); <span class='comment'>// number of partial derivatives</span></td></tr>
<tr class="codeline" data-linenumber="2167"><td class="num" id="LN2167">2167</td><td class="line">  <span class='keyword'>const</span> Index nt = source.nrows();                     <span class='comment'>// number of energy levels in NLTE</span></td></tr>
<tr class="codeline" data-linenumber="2168"><td class="num" id="LN2168">2168</td><td class="line">  </td></tr>
<tr class="codeline" data-linenumber="2169"><td class="num" id="LN2169">2169</td><td class="line">  <span class='comment'>// Type of problem</span></td></tr>
<tr class="codeline" data-linenumber="2170"><td class="num" id="LN2170">2170</td><td class="line">  <span class='keyword'>const</span> <span class='keyword'>bool</span> do_nonlte = nt;</td></tr>
<tr class="codeline" data-linenumber="2171"><td class="num" id="LN2171">2171</td><td class="line">  <span class='keyword'>const</span> <span class='keyword'>bool</span> do_jacobi = nj;</td></tr>
<tr class="codeline" data-linenumber="2172"><td class="num" id="LN2172">2172</td><td class="line">  <span class='keyword'>const</span> <span class='keyword'>bool</span> do_temperature = do_temperature_jacobian(jacobian_quantities);</td></tr>
<tr class="codeline" data-linenumber="2173"><td class="num" id="LN2173">2173</td><td class="line">  </td></tr>
<tr class="codeline" data-linenumber="2174"><td class="num" id="LN2174">2174</td><td class="line">  <span class='comment'>// Test if the size of the problem is 0</span></td></tr>
<tr class="codeline" data-linenumber="2175"><td class="num" id="LN2175">2175</td><td class="line">  <span class='keyword'>if</span>(<span class="mrange"><span class='keyword'>not</span> np</span> <span class='keyword'>or</span> <span class="mrange"><span class='keyword'>not</span> nf</span> <span class='keyword'>or</span> <span class="mrange"><span class='keyword'>not</span> nl</span>)</td></tr>
<tr><td class="num"></td><td class="line"><div id="Path1" class="msg msgEvent" style="margin-left:6ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">1</div></td><td>Assuming 'np' is not equal to 0</td><td><div class="PathNav"><a href="#Path2" title="Next event (2)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr><td class="num"></td><td class="line"><div id="Path2" class="msg msgEvent" style="margin-left:16ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">2</div></td><td><div class="PathNav"><a href="#Path1" title="Previous event (1)">&#x2190;</a></div></td></td><td>Assuming 'nf' is not equal to 0</td><td><div class="PathNav"><a href="#Path3" title="Next event (3)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr><td class="num"></td><td class="line"><div id="Path3" class="msg msgEvent" style="margin-left:26ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">3</div></td><td><div class="PathNav"><a href="#Path2" title="Previous event (2)">&#x2190;</a></div></td></td><td>Assuming 'nl' is not equal to 0</td><td><div class="PathNav"><a href="#Path4" title="Next event (4)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr><td class="num"></td><td class="line"><div id="Path4" class="msg msgControl" style="margin-left:3ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexControl">4</div></td><td><div class="PathNav"><a href="#Path3" title="Previous event (3)">&#x2190;</a></div></td></td><td>Taking false branch</td><td><div class="PathNav"><a href="#Path5" title="Next event (5)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr class="codeline" data-linenumber="2176"><td class="num" id="LN2176">2176</td><td class="line">    <span class='keyword'>return</span>;</td></tr>
<tr class="codeline" data-linenumber="2177"><td class="num" id="LN2177">2177</td><td class="line">  </td></tr>
<tr class="codeline" data-linenumber="2178"><td class="num" id="LN2178">2178</td><td class="line">  <span class='comment'>// Move the problem to Eigen-library types</span></td></tr>
<tr class="codeline" data-linenumber="2179"><td class="num" id="LN2179">2179</td><td class="line">  <span class='keyword'>const</span> <span class='keyword'>auto</span> f_grid_eigen = MapToEigen(f_grid);</td></tr>
<tr class="codeline" data-linenumber="2180"><td class="num" id="LN2180">2180</td><td class="line">  </td></tr>
<tr class="codeline" data-linenumber="2181"><td class="num" id="LN2181">2181</td><td class="line">  <span class='comment'>// Parallelization data holder (skip if in parallel or there are too few threads)</span></td></tr>
<tr class="codeline" data-linenumber="2182"><td class="num" id="LN2182">2182</td><td class="line">  <span class='keyword'>const</span> Index nthread = <span class="mrange">arts_omp_in_parallel()</span> ? 1 : <span class="mrange">arts_omp_get_max_threads() &lt; nl</span> ? arts_omp_get_max_threads() : 1;</td></tr>
<tr><td class="num"></td><td class="line"><div id="Path5" class="msg msgEvent" style="margin-left:25ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">5</div></td><td><div class="PathNav"><a href="#Path4" title="Previous event (4)">&#x2190;</a></div></td></td><td>Assuming the condition is false</td><td><div class="PathNav"><a href="#Path6" title="Next event (6)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr><td class="num"></td><td class="line"><div id="Path6" class="msg msgControl" style="margin-left:25ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexControl">6</div></td><td><div class="PathNav"><a href="#Path5" title="Previous event (5)">&#x2190;</a></div></td></td><td>'?' condition is false</td><td><div class="PathNav"><a href="#Path7" title="Next event (7)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr><td class="num"></td><td class="line"><div id="Path7" class="msg msgEvent" style="margin-left:54ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">7</div></td><td><div class="PathNav"><a href="#Path6" title="Previous event (6)">&#x2190;</a></div></td></td><td>Assuming the condition is false</td><td><div class="PathNav"><a href="#Path8" title="Next event (8)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr><td class="num"></td><td class="line"><div id="Path8" class="msg msgControl" style="margin-left:54ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexControl">8</div></td><td><div class="PathNav"><a href="#Path7" title="Previous event (7)">&#x2190;</a></div></td></td><td>'?' condition is false</td><td><div class="PathNav"><a href="#Path9" title="Next event (9)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr class="codeline" data-linenumber="2183"><td class="num" id="LN2183">2183</td><td class="line">  std::vector&lt;Eigen::VectorXcd&gt;  Fsum(nthread, Eigen::VectorXcd(nf));</td></tr>
<tr class="codeline" data-linenumber="2184"><td class="num" id="LN2184">2184</td><td class="line">  std::vector&lt;Eigen::MatrixXcd&gt; dFsum(nthread, Eigen::MatrixXcd(nf, nj));</td></tr>
<tr class="codeline" data-linenumber="2185"><td class="num" id="LN2185">2185</td><td class="line">  std::vector&lt;Eigen::VectorXcd&gt;  Nsum(nthread, Eigen::VectorXcd(nf));</td></tr>
<tr class="codeline" data-linenumber="2186"><td class="num" id="LN2186">2186</td><td class="line">  std::vector&lt;Eigen::MatrixXcd&gt; dNsum(nthread, Eigen::MatrixXcd(nf, nj));</td></tr>
<tr class="codeline" data-linenumber="2187"><td class="num" id="LN2187">2187</td><td class="line">  </td></tr>
<tr class="codeline" data-linenumber="2188"><td class="num" id="LN2188">2188</td><td class="line">  <span class='keyword'>for</span>(Index ip = 0; <span class="mrange">ip &lt; np</span>; ip++) {</td></tr>
<tr><td class="num"></td><td class="line"><div id="Path9" class="msg msgEvent" style="margin-left:21ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">9</div></td><td><div class="PathNav"><a href="#Path8" title="Previous event (8)">&#x2190;</a></div></td></td><td>Assuming 'ip' is &lt; 'np'</td><td><div class="PathNav"><a href="#Path10" title="Next event (10)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr><td class="num"></td><td class="line"><div id="Path10" class="msg msgControl" style="margin-left:3ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexControl">10</div></td><td><div class="PathNav"><a href="#Path9" title="Previous event (9)">&#x2190;</a></div></td></td><td>Loop condition is true.  Entering loop body</td><td><div class="PathNav"><a href="#Path11" title="Next event (11)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr class="codeline" data-linenumber="2189"><td class="num" id="LN2189">2189</td><td class="line">    <span class='comment'>// Constants for this level</span></td></tr>
<tr class="codeline" data-linenumber="2190"><td class="num" id="LN2190">2190</td><td class="line">    <span class='keyword'>const</span> Numeric&amp; temperature = abs_t[ip];</td></tr>
<tr class="codeline" data-linenumber="2191"><td class="num" id="LN2191">2191</td><td class="line">    <span class='keyword'>const</span> Numeric&amp; pressure = abs_p[ip];</td></tr>
<tr class="codeline" data-linenumber="2192"><td class="num" id="LN2192">2192</td><td class="line">    <span class='keyword'>const</span> Numeric partial_pressure = pressure * all_vmrs(this_species, ip);</td></tr>
<tr class="codeline" data-linenumber="2193"><td class="num" id="LN2193">2193</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="2194"><td class="num" id="LN2194">2194</td><td class="line">    <span class='comment'>// Quasi-constants for this level, defined here to speed up later computations</span></td></tr>
<tr class="codeline" data-linenumber="2195"><td class="num" id="LN2195">2195</td><td class="line">    Index this_iso = -1; <span class='comment'>// line isotopologue number</span></td></tr>
<tr class="codeline" data-linenumber="2196"><td class="num" id="LN2196">2196</td><td class="line">    Numeric t0 = -1; <span class='comment'>// line temperature</span></td></tr>
<tr class="codeline" data-linenumber="2197"><td class="num" id="LN2197">2197</td><td class="line">    Numeric dc=0, ddc_dT=0, qt=0, qt0=1, dqt_dT=0; <span class='comment'>// Doppler and partition functions</span></td></tr>
<tr class="codeline" data-linenumber="2198"><td class="num" id="LN2198">2198</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="2199"><td class="num" id="LN2199">2199</td><td class="line">    <span class='comment'>// Reset sum-operators</span></td></tr>
<tr class="codeline" data-linenumber="2200"><td class="num" id="LN2200">2200</td><td class="line">    <span class='keyword'>for</span>(Index ithread=0; ithread&lt;nthread; ithread++) {</td></tr>
<tr><td class="num"></td><td class="line"><div id="Path11" class="msg msgControl" style="margin-left:5ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexControl">11</div></td><td><div class="PathNav"><a href="#Path10" title="Previous event (10)">&#x2190;</a></div></td></td><td>Loop condition is true.  Entering loop body</td><td><div class="PathNav"><a href="#Path12" title="Next event (12)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr><td class="num"></td><td class="line"><div id="Path12" class="msg msgControl" style="margin-left:5ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexControl">12</div></td><td><div class="PathNav"><a href="#Path11" title="Previous event (11)">&#x2190;</a></div></td></td><td>Loop condition is false. Execution continues on line 2210</td><td><div class="PathNav"><a href="#Path13" title="Next event (13)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr class="codeline" data-linenumber="2201"><td class="num" id="LN2201">2201</td><td class="line">      Fsum[ithread].setZero();</td></tr>
<tr class="codeline" data-linenumber="2202"><td class="num" id="LN2202">2202</td><td class="line">      dFsum[ithread].setZero();</td></tr>
<tr class="codeline" data-linenumber="2203"><td class="num" id="LN2203">2203</td><td class="line">      Nsum[ithread].setZero();</td></tr>
<tr class="codeline" data-linenumber="2204"><td class="num" id="LN2204">2204</td><td class="line">      dNsum[ithread].setZero();</td></tr>
<tr class="codeline" data-linenumber="2205"><td class="num" id="LN2205">2205</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="2206"><td class="num" id="LN2206">2206</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="2207"><td class="num" id="LN2207">2207</td><td class="line">    <span class='directive'>#pragma omp parallel for if(nthread &gt; 1) \</span></td></tr>
<tr class="codeline" data-linenumber="2208"><td class="num" id="LN2208">2208</td><td class="line">    <span class='directive'>schedule(guided, 4) \</span></td></tr>
<tr class="codeline" data-linenumber="2209"><td class="num" id="LN2209">2209</td><td class="line">    <span class='directive'>firstprivate(this_iso, t0, dc, ddc_dT, qt, qt0, dqt_dT)</span></td></tr>
<tr class="codeline" data-linenumber="2210"><td class="num" id="LN2210">2210</td><td class="line">    <span class='keyword'>for</span>(Index il=0; <span class="mrange"><span class="mrange">il&lt;abs_lines.nelem()</span></span>; il++) {</td></tr>
<tr><td class="num"></td><td class="line"><div id="Path13" class="msg msgEvent" style="margin-left:21ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">13</div></td><td><div class="PathNav"><a href="#Path12" title="Previous event (12)">&#x2190;</a></div></td></td><td>Assuming the condition is true</td><td><div class="PathNav"><a href="#Path14" title="Next event (14)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr><td class="num"></td><td class="line"><div id="Path14" class="msg msgControl" style="margin-left:5ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexControl">14</div></td><td><div class="PathNav"><a href="#Path13" title="Previous event (13)">&#x2190;</a></div></td></td><td>Loop condition is true.  Entering loop body</td><td><div class="PathNav"><a href="#Path15" title="Next event (15)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr><td class="num"></td><td class="line"><div id="Path58" class="msg msgEvent" style="margin-left:21ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">58</div></td><td><div class="PathNav"><a href="#Path57" title="Previous event (57)">&#x2190;</a></div></td></td><td>Assuming the condition is true</td><td><div class="PathNav"><a href="#Path59" title="Next event (59)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr><td class="num"></td><td class="line"><div id="Path59" class="msg msgControl" style="margin-left:5ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexControl">59</div></td><td><div class="PathNav"><a href="#Path58" title="Previous event (58)">&#x2190;</a></div></td></td><td>Loop condition is true.  Entering loop body</td><td><div class="PathNav"><a href="#Path60" title="Next event (60)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr class="codeline" data-linenumber="2211"><td class="num" id="LN2211">2211</td><td class="line">      <span class='keyword'>const</span> <span class='keyword'>auto</span>&amp; line = abs_lines[il];</td></tr>
<tr class="codeline" data-linenumber="2212"><td class="num" id="LN2212">2212</td><td class="line">      </td></tr>
<tr class="codeline" data-linenumber="2213"><td class="num" id="LN2213">2213</td><td class="line">      <span class='comment'>// Local compute variables</span></td></tr>
<tr class="codeline" data-linenumber="2214"><td class="num" id="LN2214">2214</td><td class="line">      <span class='keyword'>thread_local</span> Eigen::VectorXcd <span class="mrange"><span class="mrange">F(nf)</span></span>;</td></tr>
<tr><td class="num"></td><td class="line"><div id="Path15" class="msg msgEvent" style="margin-left:37ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">15</div></td><td><div class="PathNav"><a href="#Path14" title="Previous event (14)">&#x2190;</a></div></td></td><td>Calling constructor for 'Matrix&lt;std::__1::complex&lt;double&gt;, -1, 1, 0, -1, 1&gt;'</td><td><div class="PathNav"><a href="#Path16" title="Next event (16)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr><td class="num"></td><td class="line"><div id="Path37" class="msg msgEvent" style="margin-left:37ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">37</div></td><td><div class="PathNav"><a href="#Path36" title="Previous event (36)">&#x2190;</a></div></td></td><td>Returning from constructor for 'Matrix&lt;std::__1::complex&lt;double&gt;, -1, 1, 0, -1, 1&gt;'</td><td><div class="PathNav"><a href="#Path38" title="Next event (38)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr class="codeline" data-linenumber="2215"><td class="num" id="LN2215">2215</td><td class="line">      <span class='keyword'>thread_local</span> Eigen::MatrixXcd dF(nf, nj);</td></tr>
<tr class="codeline" data-linenumber="2216"><td class="num" id="LN2216">2216</td><td class="line">      <span class='keyword'>thread_local</span> Eigen::VectorXcd N(nf);</td></tr>
<tr class="codeline" data-linenumber="2217"><td class="num" id="LN2217">2217</td><td class="line">      <span class='keyword'>thread_local</span> Eigen::MatrixXcd dN(nf, nj);</td></tr>
<tr class="codeline" data-linenumber="2218"><td class="num" id="LN2218">2218</td><td class="line">      <span class='keyword'>thread_local</span> Eigen::Matrix&lt;Complex, Eigen::Dynamic, Linefunctions::ExpectedDataSize()&gt; data(nf, Linefunctions::ExpectedDataSize());</td></tr>
<tr class="codeline" data-linenumber="2219"><td class="num" id="LN2219">2219</td><td class="line">      <span class='keyword'>thread_local</span> Index start, nelem;</td></tr>
<tr class="codeline" data-linenumber="2220"><td class="num" id="LN2220">2220</td><td class="line">      </td></tr>
<tr class="codeline" data-linenumber="2221"><td class="num" id="LN2221">2221</td><td class="line">      <span class='comment'>// Partition function depends on isotopologue and line temperatures.</span></td></tr>
<tr class="codeline" data-linenumber="2222"><td class="num" id="LN2222">2222</td><td class="line">      <span class='comment'>// Both are commonly constant in a single catalog.  They are, however,</span></td></tr>
<tr class="codeline" data-linenumber="2223"><td class="num" id="LN2223">2223</td><td class="line">      <span class='comment'>// allowed to change so we must check that they do not</span></td></tr>
<tr class="codeline" data-linenumber="2224"><td class="num" id="LN2224">2224</td><td class="line">      <span class='keyword'>if</span>(<span class="mrange"><span class="mrange">line.Isotopologue() <span class='keyword'>not_eq</span> this_iso</span></span> <span class='keyword'>or</span> line.Ti0() <span class='keyword'>not_eq</span> t0) {</td></tr>
<tr><td class="num"></td><td class="line"><div id="Path38" class="msg msgEvent" style="margin-left:10ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">38</div></td><td><div class="PathNav"><a href="#Path37" title="Previous event (37)">&#x2190;</a></div></td></td><td>Assuming the condition is false</td><td><div class="PathNav"><a href="#Path39" title="Next event (39)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr><td class="num"></td><td class="line"><div id="Path39" class="msg msgControl" style="margin-left:7ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexControl">39</div></td><td><div class="PathNav"><a href="#Path38" title="Previous event (38)">&#x2190;</a></div></td></td><td>Taking false branch</td><td><div class="PathNav"><a href="#Path40" title="Next event (40)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr><td class="num"></td><td class="line"><div id="Path60" class="msg msgEvent" style="margin-left:10ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">60</div></td><td><div class="PathNav"><a href="#Path59" title="Previous event (59)">&#x2190;</a></div></td></td><td>Assuming the condition is false</td><td><div class="PathNav"><a href="#Path61" title="Next event (61)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr><td class="num"></td><td class="line"><div id="Path61" class="msg msgControl" style="margin-left:7ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexControl">61</div></td><td><div class="PathNav"><a href="#Path60" title="Previous event (60)">&#x2190;</a></div></td></td><td>Taking false branch</td><td><div class="PathNav"><a href="#Path62" title="Next event (62)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr class="codeline" data-linenumber="2225"><td class="num" id="LN2225">2225</td><td class="line">        t0 = line.Ti0();</td></tr>
<tr class="codeline" data-linenumber="2226"><td class="num" id="LN2226">2226</td><td class="line">        </td></tr>
<tr class="codeline" data-linenumber="2227"><td class="num" id="LN2227">2227</td><td class="line">        partition_function(qt0, qt,</td></tr>
<tr class="codeline" data-linenumber="2228"><td class="num" id="LN2228">2228</td><td class="line">          t0, temperature,</td></tr>
<tr class="codeline" data-linenumber="2229"><td class="num" id="LN2229">2229</td><td class="line">          partition_functions.getParamType(line.Species(), line.Isotopologue()),</td></tr>
<tr class="codeline" data-linenumber="2230"><td class="num" id="LN2230">2230</td><td class="line">          partition_functions.getParam(line.Species(), line.Isotopologue()));</td></tr>
<tr class="codeline" data-linenumber="2231"><td class="num" id="LN2231">2231</td><td class="line">        </td></tr>
<tr class="codeline" data-linenumber="2232"><td class="num" id="LN2232">2232</td><td class="line">        <span class='keyword'>if</span>(do_temperature)</td></tr>
<tr class="codeline" data-linenumber="2233"><td class="num" id="LN2233">2233</td><td class="line">          dpartition_function_dT(dqt_dT, qt,</td></tr>
<tr class="codeline" data-linenumber="2234"><td class="num" id="LN2234">2234</td><td class="line">            temperature, temperature_perturbation(jacobian_quantities),</td></tr>
<tr class="codeline" data-linenumber="2235"><td class="num" id="LN2235">2235</td><td class="line">            partition_functions.getParamType(line.Species(), line.Isotopologue()),</td></tr>
<tr class="codeline" data-linenumber="2236"><td class="num" id="LN2236">2236</td><td class="line">            partition_functions.getParam(line.Species(), line.Isotopologue()));</td></tr>
<tr class="codeline" data-linenumber="2237"><td class="num" id="LN2237">2237</td><td class="line">        </td></tr>
<tr class="codeline" data-linenumber="2238"><td class="num" id="LN2238">2238</td><td class="line">        <span class='keyword'>if</span>(line.Isotopologue() <span class='keyword'>not_eq</span> this_iso) {</td></tr>
<tr class="codeline" data-linenumber="2239"><td class="num" id="LN2239">2239</td><td class="line">          this_iso = line.Isotopologue();</td></tr>
<tr class="codeline" data-linenumber="2240"><td class="num" id="LN2240">2240</td><td class="line">          dc = Linefunctions::DopplerConstant(temperature, line.IsotopologueData().Mass());</td></tr>
<tr class="codeline" data-linenumber="2241"><td class="num" id="LN2241">2241</td><td class="line">          <span class='keyword'>if</span>(do_temperature)</td></tr>
<tr class="codeline" data-linenumber="2242"><td class="num" id="LN2242">2242</td><td class="line">            ddc_dT = Linefunctions::dDopplerConstant_dT(temperature, dc);</td></tr>
<tr class="codeline" data-linenumber="2243"><td class="num" id="LN2243">2243</td><td class="line">        }</td></tr>
<tr class="codeline" data-linenumber="2244"><td class="num" id="LN2244">2244</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="2245"><td class="num" id="LN2245">2245</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="2246"><td class="num" id="LN2246">2246</td><td class="line">      Linefunctions::set_cross_section_for_single_line(<span class="mrange">F</span>, dF, N, dN, data, start, nelem, f_grid_eigen, line,</td></tr>
<tr><td class="num"></td><td class="line"><div id="Path62" class="msg msgEvent" style="margin-left:56ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">62</div></td><td><div class="PathNav"><a href="#Path61" title="Previous event (61)">&#x2190;</a></div></td></td><td>Calling constructor for 'Ref&lt;Eigen::Matrix&lt;std::__1::complex&lt;double&gt;, -1, 1, 0, -1, 1&gt;, 0, Eigen::InnerStride&lt;1&gt;&gt;'</td><td><div class="PathNav"><a href="#Path63" title="Next event (63)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr class="codeline" data-linenumber="2247"><td class="num" id="LN2247">2247</td><td class="line">        jacobian_quantities, jacobian_propmat_positions, all_vmrs(joker, ip), </td></tr>
<tr class="codeline" data-linenumber="2248"><td class="num" id="LN2248">2248</td><td class="line">        <span class="mrange">nt</span>?abs_nlte(joker, ip):Vector(0), pressure, temperature, dc, partial_pressure, </td></tr>
<tr><td class="num"></td><td class="line"><div id="Path40" class="msg msgEvent" style="margin-left:9ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">40</div></td><td><div class="PathNav"><a href="#Path39" title="Previous event (39)">&#x2190;</a></div></td></td><td>Assuming 'nt' is 0</td><td><div class="PathNav"><a href="#Path41" title="Next event (41)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr><td class="num"></td><td class="line"><div id="Path41" class="msg msgControl" style="margin-left:9ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexControl">41</div></td><td><div class="PathNav"><a href="#Path40" title="Previous event (40)">&#x2190;</a></div></td></td><td>'?' condition is false</td><td><div class="PathNav"><a href="#Path42" title="Next event (42)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr class="codeline" data-linenumber="2249"><td class="num" id="LN2249">2249</td><td class="line">        isotopologue_ratios.getParam(line.Species(), this_iso)[0].data[0],</td></tr>
<tr class="codeline" data-linenumber="2250"><td class="num" id="LN2250">2250</td><td class="line">        0.0, ddc_dT, qt, dqt_dT, qt0, abs_species, this_species, 0);</td></tr>
<tr class="codeline" data-linenumber="2251"><td class="num" id="LN2251">2251</td><td class="line">      </td></tr>
<tr class="codeline" data-linenumber="2252"><td class="num" id="LN2252">2252</td><td class="line">      <span class='keyword'>auto</span> ithread = arts_omp_get_thread_num();</td></tr>
<tr class="codeline" data-linenumber="2253"><td class="num" id="LN2253">2253</td><td class="line">      Fsum[ithread].segment(start, nelem).noalias() += F.segment(start, nelem);</td></tr>
<tr class="codeline" data-linenumber="2254"><td class="num" id="LN2254">2254</td><td class="line">      <span class='keyword'>if</span>(do_jacobi)</td></tr>
<tr><td class="num"></td><td class="line"><div id="Path42" class="msg msgControl" style="margin-left:7ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexControl">42</div></td><td><div class="PathNav"><a href="#Path41" title="Previous event (41)">&#x2190;</a></div></td></td><td>Taking true branch</td><td><div class="PathNav"><a href="#Path43" title="Next event (43)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr class="codeline" data-linenumber="2255"><td class="num" id="LN2255">2255</td><td class="line">        dFsum[ithread].middleRows(start, nelem).noalias() += dF.middleRows(start, nelem);</td></tr>
<tr class="codeline" data-linenumber="2256"><td class="num" id="LN2256">2256</td><td class="line">      <span class='keyword'>if</span>(do_nonlte)</td></tr>
<tr><td class="num"></td><td class="line"><div id="Path43" class="msg msgControl" style="margin-left:7ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexControl">43</div></td><td><div class="PathNav"><a href="#Path42" title="Previous event (42)">&#x2190;</a></div></td></td><td>Taking false branch</td><td><div class="PathNav"><a href="#Path44" title="Next event (44)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr class="codeline" data-linenumber="2257"><td class="num" id="LN2257">2257</td><td class="line">        Nsum[ithread].segment(start, nelem).noalias() += N.segment(start, nelem);</td></tr>
<tr class="codeline" data-linenumber="2258"><td class="num" id="LN2258">2258</td><td class="line">      <span class='keyword'>if</span>(do_nonlte <span class='keyword'>and</span> do_jacobi)</td></tr>
<tr class="codeline" data-linenumber="2259"><td class="num" id="LN2259">2259</td><td class="line">        dNsum[ithread].middleRows(start, nelem).noalias() += dN.middleRows(start, nelem);</td></tr>
<tr class="codeline" data-linenumber="2260"><td class="num" id="LN2260">2260</td><td class="line">    }</td></tr>
<tr><td class="num"></td><td class="line"><div id="Path44" class="msg msgEvent" style="margin-left:5ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">44</div></td><td><div class="PathNav"><a href="#Path43" title="Previous event (43)">&#x2190;</a></div></td></td><td>Calling implicit destructor for 'Matrix&lt;std::__1::complex&lt;double&gt;, -1, 1, 0, -1, 1&gt;'</td><td><div class="PathNav"><a href="#Path45" title="Next event (45)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr><td class="num"></td><td class="line"><div id="Path45" class="msg msgEvent" style="margin-left:5ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">45</div></td><td><div class="PathNav"><a href="#Path44" title="Previous event (44)">&#x2190;</a></div></td></td><td>Calling implicit destructor for 'PlainObjectBase&lt;Eigen::Matrix&lt;std::__1::complex&lt;double&gt;, -1, 1, 0, -1, 1&gt;&gt;'</td><td><div class="PathNav"><a href="#Path46" title="Next event (46)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr><td class="num"></td><td class="line"><div id="Path46" class="msg msgEvent" style="margin-left:5ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">46</div></td><td><div class="PathNav"><a href="#Path45" title="Previous event (45)">&#x2190;</a></div></td></td><td>Calling '~DenseStorage'</td><td><div class="PathNav"><a href="#Path47" title="Next event (47)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr><td class="num"></td><td class="line"><div id="Path55" class="msg msgEvent" style="margin-left:5ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">55</div></td><td><div class="PathNav"><a href="#Path54" title="Previous event (54)">&#x2190;</a></div></td></td><td>Returning from '~DenseStorage'</td><td><div class="PathNav"><a href="#Path56" title="Next event (56)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr><td class="num"></td><td class="line"><div id="Path56" class="msg msgEvent" style="margin-left:5ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">56</div></td><td><div class="PathNav"><a href="#Path55" title="Previous event (55)">&#x2190;</a></div></td></td><td>Returning from destructor for 'PlainObjectBase&lt;Eigen::Matrix&lt;std::__1::complex&lt;double&gt;, -1, 1, 0, -1, 1&gt;&gt;'</td><td><div class="PathNav"><a href="#Path57" title="Next event (57)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr><td class="num"></td><td class="line"><div id="Path57" class="msg msgEvent" style="margin-left:5ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">57</div></td><td><div class="PathNav"><a href="#Path56" title="Previous event (56)">&#x2190;</a></div></td></td><td>Returning from destructor for 'Matrix&lt;std::__1::complex&lt;double&gt;, -1, 1, 0, -1, 1&gt;'</td><td><div class="PathNav"><a href="#Path58" title="Next event (58)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr class="codeline" data-linenumber="2261"><td class="num" id="LN2261">2261</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="2262"><td class="num" id="LN2262">2262</td><td class="line">    <span class='comment'>// Sum all the threaded results</span></td></tr>
<tr class="codeline" data-linenumber="2263"><td class="num" id="LN2263">2263</td><td class="line">    <span class='keyword'>for</span>(Index ithread=0; ithread&lt;nthread; ithread++) {</td></tr>
<tr class="codeline" data-linenumber="2264"><td class="num" id="LN2264">2264</td><td class="line">      <span class='comment'>// absorption cross-section</span></td></tr>
<tr class="codeline" data-linenumber="2265"><td class="num" id="LN2265">2265</td><td class="line">      MapToEigen(xsec).col(ip).noalias() += Fsum[ithread].real();</td></tr>
<tr class="codeline" data-linenumber="2266"><td class="num" id="LN2266">2266</td><td class="line">      <span class='keyword'>for</span>(Index j=0; j&lt;nj; j++)</td></tr>
<tr class="codeline" data-linenumber="2267"><td class="num" id="LN2267">2267</td><td class="line">        MapToEigen(dxsec_dx[j]).col(ip).noalias() += dFsum[ithread].col(j).real();</td></tr>
<tr class="codeline" data-linenumber="2268"><td class="num" id="LN2268">2268</td><td class="line">      </td></tr>
<tr class="codeline" data-linenumber="2269"><td class="num" id="LN2269">2269</td><td class="line">      <span class='comment'>// phase cross-section</span></td></tr>
<tr class="codeline" data-linenumber="2270"><td class="num" id="LN2270">2270</td><td class="line">      <span class='keyword'>if</span>(<span class='keyword'>not</span> phase.empty()) {</td></tr>
<tr class="codeline" data-linenumber="2271"><td class="num" id="LN2271">2271</td><td class="line">        MapToEigen(phase).col(ip).noalias() += Fsum[ithread].imag();</td></tr>
<tr class="codeline" data-linenumber="2272"><td class="num" id="LN2272">2272</td><td class="line">        <span class='keyword'>for</span>(Index j=0; j&lt;nj; j++)</td></tr>
<tr class="codeline" data-linenumber="2273"><td class="num" id="LN2273">2273</td><td class="line">          MapToEigen(dphase_dx[j]).col(ip).noalias() += dFsum[ithread].col(j).imag();</td></tr>
<tr class="codeline" data-linenumber="2274"><td class="num" id="LN2274">2274</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="2275"><td class="num" id="LN2275">2275</td><td class="line">      </td></tr>
<tr class="codeline" data-linenumber="2276"><td class="num" id="LN2276">2276</td><td class="line">      <span class='comment'>// source ratio cross-section</span></td></tr>
<tr class="codeline" data-linenumber="2277"><td class="num" id="LN2277">2277</td><td class="line">      <span class='keyword'>if</span>(do_nonlte) {</td></tr>
<tr class="codeline" data-linenumber="2278"><td class="num" id="LN2278">2278</td><td class="line">        MapToEigen(source).col(ip).noalias() += Nsum[ithread].real();</td></tr>
<tr class="codeline" data-linenumber="2279"><td class="num" id="LN2279">2279</td><td class="line">        <span class='keyword'>for</span>(Index j=0; j&lt;nj; j++)</td></tr>
<tr class="codeline" data-linenumber="2280"><td class="num" id="LN2280">2280</td><td class="line">          MapToEigen(dsource_dx[j]).col(ip).noalias() += dNsum[ithread].col(j).real();</td></tr>
<tr class="codeline" data-linenumber="2281"><td class="num" id="LN2281">2281</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="2282"><td class="num" id="LN2282">2282</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="2283"><td class="num" id="LN2283">2283</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="2284"><td class="num" id="LN2284">2284</td><td class="line">}</td></tr>
</table><hr class=divider>
<div id=File40926>
<div class=FileNav><a href="#File1">&#x2190;</a></div><h4 class=FileName>/Users/u237002/Dropbox/Hacking/sat/arts/3rdparty/Eigen/src/Core/Matrix.h</h4>
<div class=FileNav><a href="#File40633">&#x2192;</a></div></div>
<table class="code" data-fileid="40926">
<tr class="codeline" data-linenumber="1"><td class="num" id="LN1">1</td><td class="line"><span class='comment'>// This file is part of Eigen, a lightweight C++ template library</span></td></tr>
<tr class="codeline" data-linenumber="2"><td class="num" id="LN2">2</td><td class="line"><span class='comment'>// for linear algebra.</span></td></tr>
<tr class="codeline" data-linenumber="3"><td class="num" id="LN3">3</td><td class="line"><span class='comment'>//</span></td></tr>
<tr class="codeline" data-linenumber="4"><td class="num" id="LN4">4</td><td class="line"><span class='comment'>// Copyright (C) 2006-2010 Benoit Jacob &lt;jacob.benoit.1@gmail.com&gt;</span></td></tr>
<tr class="codeline" data-linenumber="5"><td class="num" id="LN5">5</td><td class="line"><span class='comment'>// Copyright (C) 2008-2009 Gael Guennebaud &lt;gael.guennebaud@inria.fr&gt;</span></td></tr>
<tr class="codeline" data-linenumber="6"><td class="num" id="LN6">6</td><td class="line"><span class='comment'>//</span></td></tr>
<tr class="codeline" data-linenumber="7"><td class="num" id="LN7">7</td><td class="line"><span class='comment'>// This Source Code Form is subject to the terms of the Mozilla</span></td></tr>
<tr class="codeline" data-linenumber="8"><td class="num" id="LN8">8</td><td class="line"><span class='comment'>// Public License v. 2.0. If a copy of the MPL was not distributed</span></td></tr>
<tr class="codeline" data-linenumber="9"><td class="num" id="LN9">9</td><td class="line"><span class='comment'>// with this file, You can obtain one at http://mozilla.org/MPL/2.0/.</span></td></tr>
<tr class="codeline" data-linenumber="10"><td class="num" id="LN10">10</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="11"><td class="num" id="LN11">11</td><td class="line"><span class='directive'>#ifndef EIGEN_MATRIX_H</span></td></tr>
<tr class="codeline" data-linenumber="12"><td class="num" id="LN12">12</td><td class="line"><span class='directive'>#define EIGEN_MATRIX_H</span></td></tr>
<tr class="codeline" data-linenumber="13"><td class="num" id="LN13">13</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="14"><td class="num" id="LN14">14</td><td class="line"><span class='keyword'>namespace</span> Eigen {</td></tr>
<tr class="codeline" data-linenumber="15"><td class="num" id="LN15">15</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="16"><td class="num" id="LN16">16</td><td class="line"><span class='keyword'>namespace</span> internal {</td></tr>
<tr class="codeline" data-linenumber="17"><td class="num" id="LN17">17</td><td class="line"><span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> _Scalar, <span class='keyword'>int</span> _Rows, <span class='keyword'>int</span> _Cols, <span class='keyword'>int</span> _Options, <span class='keyword'>int</span> _MaxRows, <span class='keyword'>int</span> _MaxCols&gt;</td></tr>
<tr class="codeline" data-linenumber="18"><td class="num" id="LN18">18</td><td class="line"><span class='keyword'>struct</span> traits&lt;Matrix&lt;_Scalar, _Rows, _Cols, _Options, _MaxRows, _MaxCols&gt; &gt;</td></tr>
<tr class="codeline" data-linenumber="19"><td class="num" id="LN19">19</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="20"><td class="num" id="LN20">20</td><td class="line"><span class='keyword'>private</span>:</td></tr>
<tr class="codeline" data-linenumber="21"><td class="num" id="LN21">21</td><td class="line">  <span class='keyword'>enum</span> { size = internal::size_at_compile_time&lt;_Rows,_Cols&gt;::ret };</td></tr>
<tr class="codeline" data-linenumber="22"><td class="num" id="LN22">22</td><td class="line">  <span class='keyword'>typedef</span> <span class='keyword'>typename</span> find_best_packet&lt;_Scalar,size&gt;::type PacketScalar;</td></tr>
<tr class="codeline" data-linenumber="23"><td class="num" id="LN23">23</td><td class="line">  <span class='keyword'>enum</span> {</td></tr>
<tr class="codeline" data-linenumber="24"><td class="num" id="LN24">24</td><td class="line">      row_major_bit = _Options&amp;RowMajor ? RowMajorBit : 0,</td></tr>
<tr class="codeline" data-linenumber="25"><td class="num" id="LN25">25</td><td class="line">      is_dynamic_size_storage = _MaxRows==Dynamic || _MaxCols==Dynamic,</td></tr>
<tr class="codeline" data-linenumber="26"><td class="num" id="LN26">26</td><td class="line">      max_size = is_dynamic_size_storage ? Dynamic : _MaxRows*_MaxCols,</td></tr>
<tr class="codeline" data-linenumber="27"><td class="num" id="LN27">27</td><td class="line">      default_alignment = compute_default_alignment&lt;_Scalar,max_size&gt;::value,</td></tr>
<tr class="codeline" data-linenumber="28"><td class="num" id="LN28">28</td><td class="line">      actual_alignment = ((_Options&amp;DontAlign)==0) ? default_alignment : 0,</td></tr>
<tr class="codeline" data-linenumber="29"><td class="num" id="LN29">29</td><td class="line">      required_alignment = unpacket_traits&lt;PacketScalar&gt;::alignment,</td></tr>
<tr class="codeline" data-linenumber="30"><td class="num" id="LN30">30</td><td class="line">      packet_access_bit = (packet_traits&lt;_Scalar&gt;::Vectorizable &amp;&amp; (<span class='macro'>EIGEN_UNALIGNED_VECTORIZE<span class='expansion'>1</span></span> || (actual_alignment&gt;=required_alignment))) ? PacketAccessBit : 0</td></tr>
<tr class="codeline" data-linenumber="31"><td class="num" id="LN31">31</td><td class="line">    };</td></tr>
<tr class="codeline" data-linenumber="32"><td class="num" id="LN32">32</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="33"><td class="num" id="LN33">33</td><td class="line"><span class='keyword'>public</span>:</td></tr>
<tr class="codeline" data-linenumber="34"><td class="num" id="LN34">34</td><td class="line">  <span class='keyword'>typedef</span> _Scalar Scalar;</td></tr>
<tr class="codeline" data-linenumber="35"><td class="num" id="LN35">35</td><td class="line">  <span class='keyword'>typedef</span> Dense StorageKind;</td></tr>
<tr class="codeline" data-linenumber="36"><td class="num" id="LN36">36</td><td class="line">  <span class='keyword'>typedef</span> Eigen::Index StorageIndex;</td></tr>
<tr class="codeline" data-linenumber="37"><td class="num" id="LN37">37</td><td class="line">  <span class='keyword'>typedef</span> MatrixXpr XprKind;</td></tr>
<tr class="codeline" data-linenumber="38"><td class="num" id="LN38">38</td><td class="line">  <span class='keyword'>enum</span> {</td></tr>
<tr class="codeline" data-linenumber="39"><td class="num" id="LN39">39</td><td class="line">    RowsAtCompileTime = _Rows,</td></tr>
<tr class="codeline" data-linenumber="40"><td class="num" id="LN40">40</td><td class="line">    ColsAtCompileTime = _Cols,</td></tr>
<tr class="codeline" data-linenumber="41"><td class="num" id="LN41">41</td><td class="line">    MaxRowsAtCompileTime = _MaxRows,</td></tr>
<tr class="codeline" data-linenumber="42"><td class="num" id="LN42">42</td><td class="line">    MaxColsAtCompileTime = _MaxCols,</td></tr>
<tr class="codeline" data-linenumber="43"><td class="num" id="LN43">43</td><td class="line">    Flags = compute_matrix_flags&lt;_Scalar, _Rows, _Cols, _Options, _MaxRows, _MaxCols&gt;::ret,</td></tr>
<tr class="codeline" data-linenumber="44"><td class="num" id="LN44">44</td><td class="line">    Options = _Options,</td></tr>
<tr class="codeline" data-linenumber="45"><td class="num" id="LN45">45</td><td class="line">    InnerStrideAtCompileTime = 1,</td></tr>
<tr class="codeline" data-linenumber="46"><td class="num" id="LN46">46</td><td class="line">    OuterStrideAtCompileTime = (Options&amp;RowMajor) ? ColsAtCompileTime : RowsAtCompileTime,</td></tr>
<tr class="codeline" data-linenumber="47"><td class="num" id="LN47">47</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="48"><td class="num" id="LN48">48</td><td class="line">    <span class='comment'>// FIXME, the following flag in only used to define NeedsToAlign in PlainObjectBase</span></td></tr>
<tr class="codeline" data-linenumber="49"><td class="num" id="LN49">49</td><td class="line">    EvaluatorFlags = LinearAccessBit | DirectAccessBit | packet_access_bit | row_major_bit,</td></tr>
<tr class="codeline" data-linenumber="50"><td class="num" id="LN50">50</td><td class="line">    Alignment = actual_alignment</td></tr>
<tr class="codeline" data-linenumber="51"><td class="num" id="LN51">51</td><td class="line">  };</td></tr>
<tr class="codeline" data-linenumber="52"><td class="num" id="LN52">52</td><td class="line">};</td></tr>
<tr class="codeline" data-linenumber="53"><td class="num" id="LN53">53</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="54"><td class="num" id="LN54">54</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="55"><td class="num" id="LN55">55</td><td class="line"><span class='comment'>/** \class Matrix</span></td></tr>
<tr class="codeline" data-linenumber="56"><td class="num" id="LN56">56</td><td class="line">  <span class='comment'>* \ingroup Core_Module</span></td></tr>
<tr class="codeline" data-linenumber="57"><td class="num" id="LN57">57</td><td class="line">  <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="58"><td class="num" id="LN58">58</td><td class="line">  <span class='comment'>* \brief The matrix class, also used for vectors and row-vectors</span></td></tr>
<tr class="codeline" data-linenumber="59"><td class="num" id="LN59">59</td><td class="line">  <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="60"><td class="num" id="LN60">60</td><td class="line">  <span class='comment'>* The %Matrix class is the work-horse for all \em dense (\ref dense "note") matrices and vectors within Eigen.</span></td></tr>
<tr class="codeline" data-linenumber="61"><td class="num" id="LN61">61</td><td class="line">  <span class='comment'>* Vectors are matrices with one column, and row-vectors are matrices with one row.</span></td></tr>
<tr class="codeline" data-linenumber="62"><td class="num" id="LN62">62</td><td class="line">  <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="63"><td class="num" id="LN63">63</td><td class="line">  <span class='comment'>* The %Matrix class encompasses \em both fixed-size and dynamic-size objects (\ref fixedsize "note").</span></td></tr>
<tr class="codeline" data-linenumber="64"><td class="num" id="LN64">64</td><td class="line">  <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="65"><td class="num" id="LN65">65</td><td class="line">  <span class='comment'>* The first three template parameters are required:</span></td></tr>
<tr class="codeline" data-linenumber="66"><td class="num" id="LN66">66</td><td class="line">  <span class='comment'>* \tparam _Scalar Numeric type, e.g. float, double, int or std::complex&lt;float&gt;.</span></td></tr>
<tr class="codeline" data-linenumber="67"><td class="num" id="LN67">67</td><td class="line">  <span class='comment'>*                 User defined scalar types are supported as well (see \ref user_defined_scalars "here").</span></td></tr>
<tr class="codeline" data-linenumber="68"><td class="num" id="LN68">68</td><td class="line">  <span class='comment'>* \tparam _Rows Number of rows, or \b Dynamic</span></td></tr>
<tr class="codeline" data-linenumber="69"><td class="num" id="LN69">69</td><td class="line">  <span class='comment'>* \tparam _Cols Number of columns, or \b Dynamic</span></td></tr>
<tr class="codeline" data-linenumber="70"><td class="num" id="LN70">70</td><td class="line">  <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="71"><td class="num" id="LN71">71</td><td class="line">  <span class='comment'>* The remaining template parameters are optional -- in most cases you don't have to worry about them.</span></td></tr>
<tr class="codeline" data-linenumber="72"><td class="num" id="LN72">72</td><td class="line">  <span class='comment'>* \tparam _Options A combination of either \b #RowMajor or \b #ColMajor, and of either</span></td></tr>
<tr class="codeline" data-linenumber="73"><td class="num" id="LN73">73</td><td class="line">  <span class='comment'>*                 \b #AutoAlign or \b #DontAlign.</span></td></tr>
<tr class="codeline" data-linenumber="74"><td class="num" id="LN74">74</td><td class="line">  <span class='comment'>*                 The former controls \ref TopicStorageOrders "storage order", and defaults to column-major. The latter controls alignment, which is required</span></td></tr>
<tr class="codeline" data-linenumber="75"><td class="num" id="LN75">75</td><td class="line">  <span class='comment'>*                 for vectorization. It defaults to aligning matrices except for fixed sizes that aren't a multiple of the packet size.</span></td></tr>
<tr class="codeline" data-linenumber="76"><td class="num" id="LN76">76</td><td class="line">  <span class='comment'>* \tparam _MaxRows Maximum number of rows. Defaults to \a _Rows (\ref maxrows "note").</span></td></tr>
<tr class="codeline" data-linenumber="77"><td class="num" id="LN77">77</td><td class="line">  <span class='comment'>* \tparam _MaxCols Maximum number of columns. Defaults to \a _Cols (\ref maxrows "note").</span></td></tr>
<tr class="codeline" data-linenumber="78"><td class="num" id="LN78">78</td><td class="line">  <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="79"><td class="num" id="LN79">79</td><td class="line">  <span class='comment'>* Eigen provides a number of typedefs covering the usual cases. Here are some examples:</span></td></tr>
<tr class="codeline" data-linenumber="80"><td class="num" id="LN80">80</td><td class="line">  <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="81"><td class="num" id="LN81">81</td><td class="line">  <span class='comment'>* \li \c Matrix2d is a 2x2 square matrix of doubles (\c Matrix&lt;double, 2, 2&gt;)</span></td></tr>
<tr class="codeline" data-linenumber="82"><td class="num" id="LN82">82</td><td class="line">  <span class='comment'>* \li \c Vector4f is a vector of 4 floats (\c Matrix&lt;float, 4, 1&gt;)</span></td></tr>
<tr class="codeline" data-linenumber="83"><td class="num" id="LN83">83</td><td class="line">  <span class='comment'>* \li \c RowVector3i is a row-vector of 3 ints (\c Matrix&lt;int, 1, 3&gt;)</span></td></tr>
<tr class="codeline" data-linenumber="84"><td class="num" id="LN84">84</td><td class="line">  <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="85"><td class="num" id="LN85">85</td><td class="line">  <span class='comment'>* \li \c MatrixXf is a dynamic-size matrix of floats (\c Matrix&lt;float, Dynamic, Dynamic&gt;)</span></td></tr>
<tr class="codeline" data-linenumber="86"><td class="num" id="LN86">86</td><td class="line">  <span class='comment'>* \li \c VectorXf is a dynamic-size vector of floats (\c Matrix&lt;float, Dynamic, 1&gt;)</span></td></tr>
<tr class="codeline" data-linenumber="87"><td class="num" id="LN87">87</td><td class="line">  <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="88"><td class="num" id="LN88">88</td><td class="line">  <span class='comment'>* \li \c Matrix2Xf is a partially fixed-size (dynamic-size) matrix of floats (\c Matrix&lt;float, 2, Dynamic&gt;)</span></td></tr>
<tr class="codeline" data-linenumber="89"><td class="num" id="LN89">89</td><td class="line">  <span class='comment'>* \li \c MatrixX3d is a partially dynamic-size (fixed-size) matrix of double (\c Matrix&lt;double, Dynamic, 3&gt;)</span></td></tr>
<tr class="codeline" data-linenumber="90"><td class="num" id="LN90">90</td><td class="line">  <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="91"><td class="num" id="LN91">91</td><td class="line">  <span class='comment'>* See \link matrixtypedefs this page \endlink for a complete list of predefined \em %Matrix and \em Vector typedefs.</span></td></tr>
<tr class="codeline" data-linenumber="92"><td class="num" id="LN92">92</td><td class="line">  <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="93"><td class="num" id="LN93">93</td><td class="line">  <span class='comment'>* You can access elements of vectors and matrices using normal subscripting:</span></td></tr>
<tr class="codeline" data-linenumber="94"><td class="num" id="LN94">94</td><td class="line">  <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="95"><td class="num" id="LN95">95</td><td class="line">  <span class='comment'>* \code</span></td></tr>
<tr class="codeline" data-linenumber="96"><td class="num" id="LN96">96</td><td class="line">  <span class='comment'>* Eigen::VectorXd v(10);</span></td></tr>
<tr class="codeline" data-linenumber="97"><td class="num" id="LN97">97</td><td class="line">  <span class='comment'>* v[0] = 0.1;</span></td></tr>
<tr class="codeline" data-linenumber="98"><td class="num" id="LN98">98</td><td class="line">  <span class='comment'>* v[1] = 0.2;</span></td></tr>
<tr class="codeline" data-linenumber="99"><td class="num" id="LN99">99</td><td class="line">  <span class='comment'>* v(0) = 0.3;</span></td></tr>
<tr class="codeline" data-linenumber="100"><td class="num" id="LN100">100</td><td class="line">  <span class='comment'>* v(1) = 0.4;</span></td></tr>
<tr class="codeline" data-linenumber="101"><td class="num" id="LN101">101</td><td class="line">  <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="102"><td class="num" id="LN102">102</td><td class="line">  <span class='comment'>* Eigen::MatrixXi m(10, 10);</span></td></tr>
<tr class="codeline" data-linenumber="103"><td class="num" id="LN103">103</td><td class="line">  <span class='comment'>* m(0, 1) = 1;</span></td></tr>
<tr class="codeline" data-linenumber="104"><td class="num" id="LN104">104</td><td class="line">  <span class='comment'>* m(0, 2) = 2;</span></td></tr>
<tr class="codeline" data-linenumber="105"><td class="num" id="LN105">105</td><td class="line">  <span class='comment'>* m(0, 3) = 3;</span></td></tr>
<tr class="codeline" data-linenumber="106"><td class="num" id="LN106">106</td><td class="line">  <span class='comment'>* \endcode</span></td></tr>
<tr class="codeline" data-linenumber="107"><td class="num" id="LN107">107</td><td class="line">  <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="108"><td class="num" id="LN108">108</td><td class="line">  <span class='comment'>* This class can be extended with the help of the plugin mechanism described on the page</span></td></tr>
<tr class="codeline" data-linenumber="109"><td class="num" id="LN109">109</td><td class="line">  <span class='comment'>* \ref TopicCustomizing_Plugins by defining the preprocessor symbol \c EIGEN_MATRIX_PLUGIN.</span></td></tr>
<tr class="codeline" data-linenumber="110"><td class="num" id="LN110">110</td><td class="line">  <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="111"><td class="num" id="LN111">111</td><td class="line">  <span class='comment'>* &lt;i&gt;&lt;b&gt;Some notes:&lt;/b&gt;&lt;/i&gt;</span></td></tr>
<tr class="codeline" data-linenumber="112"><td class="num" id="LN112">112</td><td class="line">  <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="113"><td class="num" id="LN113">113</td><td class="line">  <span class='comment'>* &lt;dl&gt;</span></td></tr>
<tr class="codeline" data-linenumber="114"><td class="num" id="LN114">114</td><td class="line">  <span class='comment'>* &lt;dt&gt;&lt;b&gt;\anchor dense Dense versus sparse:&lt;/b&gt;&lt;/dt&gt;</span></td></tr>
<tr class="codeline" data-linenumber="115"><td class="num" id="LN115">115</td><td class="line">  <span class='comment'>* &lt;dd&gt;This %Matrix class handles dense, not sparse matrices and vectors. For sparse matrices and vectors, see the Sparse module.</span></td></tr>
<tr class="codeline" data-linenumber="116"><td class="num" id="LN116">116</td><td class="line">  <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="117"><td class="num" id="LN117">117</td><td class="line">  <span class='comment'>* Dense matrices and vectors are plain usual arrays of coefficients. All the coefficients are stored, in an ordinary contiguous array.</span></td></tr>
<tr class="codeline" data-linenumber="118"><td class="num" id="LN118">118</td><td class="line">  <span class='comment'>* This is unlike Sparse matrices and vectors where the coefficients are stored as a list of nonzero coefficients.&lt;/dd&gt;</span></td></tr>
<tr class="codeline" data-linenumber="119"><td class="num" id="LN119">119</td><td class="line">  <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="120"><td class="num" id="LN120">120</td><td class="line">  <span class='comment'>* &lt;dt&gt;&lt;b&gt;\anchor fixedsize Fixed-size versus dynamic-size:&lt;/b&gt;&lt;/dt&gt;</span></td></tr>
<tr class="codeline" data-linenumber="121"><td class="num" id="LN121">121</td><td class="line">  <span class='comment'>* &lt;dd&gt;Fixed-size means that the numbers of rows and columns are known are compile-time. In this case, Eigen allocates the array</span></td></tr>
<tr class="codeline" data-linenumber="122"><td class="num" id="LN122">122</td><td class="line">  <span class='comment'>* of coefficients as a fixed-size array, as a class member. This makes sense for very small matrices, typically up to 4x4, sometimes up</span></td></tr>
<tr class="codeline" data-linenumber="123"><td class="num" id="LN123">123</td><td class="line">  <span class='comment'>* to 16x16. Larger matrices should be declared as dynamic-size even if one happens to know their size at compile-time.</span></td></tr>
<tr class="codeline" data-linenumber="124"><td class="num" id="LN124">124</td><td class="line">  <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="125"><td class="num" id="LN125">125</td><td class="line">  <span class='comment'>* Dynamic-size means that the numbers of rows or columns are not necessarily known at compile-time. In this case they are runtime</span></td></tr>
<tr class="codeline" data-linenumber="126"><td class="num" id="LN126">126</td><td class="line">  <span class='comment'>* variables, and the array of coefficients is allocated dynamically on the heap.</span></td></tr>
<tr class="codeline" data-linenumber="127"><td class="num" id="LN127">127</td><td class="line">  <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="128"><td class="num" id="LN128">128</td><td class="line">  <span class='comment'>* Note that \em dense matrices, be they Fixed-size or Dynamic-size, &lt;em&gt;do not&lt;/em&gt; expand dynamically in the sense of a std::map.</span></td></tr>
<tr class="codeline" data-linenumber="129"><td class="num" id="LN129">129</td><td class="line">  <span class='comment'>* If you want this behavior, see the Sparse module.&lt;/dd&gt;</span></td></tr>
<tr class="codeline" data-linenumber="130"><td class="num" id="LN130">130</td><td class="line">  <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="131"><td class="num" id="LN131">131</td><td class="line">  <span class='comment'>* &lt;dt&gt;&lt;b&gt;\anchor maxrows _MaxRows and _MaxCols:&lt;/b&gt;&lt;/dt&gt;</span></td></tr>
<tr class="codeline" data-linenumber="132"><td class="num" id="LN132">132</td><td class="line">  <span class='comment'>* &lt;dd&gt;In most cases, one just leaves these parameters to the default values.</span></td></tr>
<tr class="codeline" data-linenumber="133"><td class="num" id="LN133">133</td><td class="line">  <span class='comment'>* These parameters mean the maximum size of rows and columns that the matrix may have. They are useful in cases</span></td></tr>
<tr class="codeline" data-linenumber="134"><td class="num" id="LN134">134</td><td class="line">  <span class='comment'>* when the exact numbers of rows and columns are not known are compile-time, but it is known at compile-time that they cannot</span></td></tr>
<tr class="codeline" data-linenumber="135"><td class="num" id="LN135">135</td><td class="line">  <span class='comment'>* exceed a certain value. This happens when taking dynamic-size blocks inside fixed-size matrices: in this case _MaxRows and _MaxCols</span></td></tr>
<tr class="codeline" data-linenumber="136"><td class="num" id="LN136">136</td><td class="line">  <span class='comment'>* are the dimensions of the original matrix, while _Rows and _Cols are Dynamic.&lt;/dd&gt;</span></td></tr>
<tr class="codeline" data-linenumber="137"><td class="num" id="LN137">137</td><td class="line">  <span class='comment'>* &lt;/dl&gt;</span></td></tr>
<tr class="codeline" data-linenumber="138"><td class="num" id="LN138">138</td><td class="line">  <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="139"><td class="num" id="LN139">139</td><td class="line">  <span class='comment'>* &lt;i&gt;&lt;b&gt;ABI and storage layout&lt;/b&gt;&lt;/i&gt;</span></td></tr>
<tr class="codeline" data-linenumber="140"><td class="num" id="LN140">140</td><td class="line">  <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="141"><td class="num" id="LN141">141</td><td class="line">  <span class='comment'>* The table below summarizes the ABI of some possible Matrix instances which is fixed thorough the lifetime of Eigen 3.</span></td></tr>
<tr class="codeline" data-linenumber="142"><td class="num" id="LN142">142</td><td class="line">  <span class='comment'>* &lt;table  class="manual"&gt;</span></td></tr>
<tr class="codeline" data-linenumber="143"><td class="num" id="LN143">143</td><td class="line">  <span class='comment'>* &lt;tr&gt;&lt;th&gt;Matrix type&lt;/th&gt;&lt;th&gt;Equivalent C structure&lt;/th&gt;&lt;/tr&gt;</span></td></tr>
<tr class="codeline" data-linenumber="144"><td class="num" id="LN144">144</td><td class="line">  <span class='comment'>* &lt;tr&gt;&lt;td&gt;\code Matrix&lt;T,Dynamic,Dynamic&gt; \endcode&lt;/td&gt;&lt;td&gt;\code</span></td></tr>
<tr class="codeline" data-linenumber="145"><td class="num" id="LN145">145</td><td class="line">  <span class='comment'>* struct {</span></td></tr>
<tr class="codeline" data-linenumber="146"><td class="num" id="LN146">146</td><td class="line">  <span class='comment'>*   T *data;                  // with (size_t(data)%EIGEN_MAX_ALIGN_BYTES)==0</span></td></tr>
<tr class="codeline" data-linenumber="147"><td class="num" id="LN147">147</td><td class="line">  <span class='comment'>*   Eigen::Index rows, cols;</span></td></tr>
<tr class="codeline" data-linenumber="148"><td class="num" id="LN148">148</td><td class="line">  <span class='comment'>*  };</span></td></tr>
<tr class="codeline" data-linenumber="149"><td class="num" id="LN149">149</td><td class="line">  <span class='comment'>* \endcode&lt;/td&gt;&lt;/tr&gt;</span></td></tr>
<tr class="codeline" data-linenumber="150"><td class="num" id="LN150">150</td><td class="line">  <span class='comment'>* &lt;tr class="alt"&gt;&lt;td&gt;\code</span></td></tr>
<tr class="codeline" data-linenumber="151"><td class="num" id="LN151">151</td><td class="line">  <span class='comment'>* Matrix&lt;T,Dynamic,1&gt;</span></td></tr>
<tr class="codeline" data-linenumber="152"><td class="num" id="LN152">152</td><td class="line">  <span class='comment'>* Matrix&lt;T,1,Dynamic&gt; \endcode&lt;/td&gt;&lt;td&gt;\code</span></td></tr>
<tr class="codeline" data-linenumber="153"><td class="num" id="LN153">153</td><td class="line">  <span class='comment'>* struct {</span></td></tr>
<tr class="codeline" data-linenumber="154"><td class="num" id="LN154">154</td><td class="line">  <span class='comment'>*   T *data;                  // with (size_t(data)%EIGEN_MAX_ALIGN_BYTES)==0</span></td></tr>
<tr class="codeline" data-linenumber="155"><td class="num" id="LN155">155</td><td class="line">  <span class='comment'>*   Eigen::Index size;</span></td></tr>
<tr class="codeline" data-linenumber="156"><td class="num" id="LN156">156</td><td class="line">  <span class='comment'>*  };</span></td></tr>
<tr class="codeline" data-linenumber="157"><td class="num" id="LN157">157</td><td class="line">  <span class='comment'>* \endcode&lt;/td&gt;&lt;/tr&gt;</span></td></tr>
<tr class="codeline" data-linenumber="158"><td class="num" id="LN158">158</td><td class="line">  <span class='comment'>* &lt;tr&gt;&lt;td&gt;\code Matrix&lt;T,Rows,Cols&gt; \endcode&lt;/td&gt;&lt;td&gt;\code</span></td></tr>
<tr class="codeline" data-linenumber="159"><td class="num" id="LN159">159</td><td class="line">  <span class='comment'>* struct {</span></td></tr>
<tr class="codeline" data-linenumber="160"><td class="num" id="LN160">160</td><td class="line">  <span class='comment'>*   T data[Rows*Cols];        // with (size_t(data)%A(Rows*Cols*sizeof(T)))==0</span></td></tr>
<tr class="codeline" data-linenumber="161"><td class="num" id="LN161">161</td><td class="line">  <span class='comment'>*  };</span></td></tr>
<tr class="codeline" data-linenumber="162"><td class="num" id="LN162">162</td><td class="line">  <span class='comment'>* \endcode&lt;/td&gt;&lt;/tr&gt;</span></td></tr>
<tr class="codeline" data-linenumber="163"><td class="num" id="LN163">163</td><td class="line">  <span class='comment'>* &lt;tr class="alt"&gt;&lt;td&gt;\code Matrix&lt;T,Dynamic,Dynamic,0,MaxRows,MaxCols&gt; \endcode&lt;/td&gt;&lt;td&gt;\code</span></td></tr>
<tr class="codeline" data-linenumber="164"><td class="num" id="LN164">164</td><td class="line">  <span class='comment'>* struct {</span></td></tr>
<tr class="codeline" data-linenumber="165"><td class="num" id="LN165">165</td><td class="line">  <span class='comment'>*   T data[MaxRows*MaxCols];  // with (size_t(data)%A(MaxRows*MaxCols*sizeof(T)))==0</span></td></tr>
<tr class="codeline" data-linenumber="166"><td class="num" id="LN166">166</td><td class="line">  <span class='comment'>*   Eigen::Index rows, cols;</span></td></tr>
<tr class="codeline" data-linenumber="167"><td class="num" id="LN167">167</td><td class="line">  <span class='comment'>*  };</span></td></tr>
<tr class="codeline" data-linenumber="168"><td class="num" id="LN168">168</td><td class="line">  <span class='comment'>* \endcode&lt;/td&gt;&lt;/tr&gt;</span></td></tr>
<tr class="codeline" data-linenumber="169"><td class="num" id="LN169">169</td><td class="line">  <span class='comment'>* &lt;/table&gt;</span></td></tr>
<tr class="codeline" data-linenumber="170"><td class="num" id="LN170">170</td><td class="line">  <span class='comment'>* Note that in this table Rows, Cols, MaxRows and MaxCols are all positive integers. A(S) is defined to the largest possible power-of-two</span></td></tr>
<tr class="codeline" data-linenumber="171"><td class="num" id="LN171">171</td><td class="line">  <span class='comment'>* smaller to EIGEN_MAX_STATIC_ALIGN_BYTES.</span></td></tr>
<tr class="codeline" data-linenumber="172"><td class="num" id="LN172">172</td><td class="line">  <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="173"><td class="num" id="LN173">173</td><td class="line">  <span class='comment'>* \see MatrixBase for the majority of the API methods for matrices, \ref TopicClassHierarchy,</span></td></tr>
<tr class="codeline" data-linenumber="174"><td class="num" id="LN174">174</td><td class="line">  <span class='comment'>* \ref TopicStorageOrders</span></td></tr>
<tr class="codeline" data-linenumber="175"><td class="num" id="LN175">175</td><td class="line">  <span class='comment'>*/</span></td></tr>
<tr class="codeline" data-linenumber="176"><td class="num" id="LN176">176</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="177"><td class="num" id="LN177">177</td><td class="line"><span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> _Scalar, <span class='keyword'>int</span> _Rows, <span class='keyword'>int</span> _Cols, <span class='keyword'>int</span> _Options, <span class='keyword'>int</span> _MaxRows, <span class='keyword'>int</span> _MaxCols&gt;</td></tr>
<tr class="codeline" data-linenumber="178"><td class="num" id="LN178">178</td><td class="line"><span class='keyword'>class</span> Matrix</td></tr>
<tr class="codeline" data-linenumber="179"><td class="num" id="LN179">179</td><td class="line">  : <span class='keyword'>public</span> PlainObjectBase&lt;Matrix&lt;_Scalar, _Rows, _Cols, _Options, _MaxRows, _MaxCols&gt; &gt;</td></tr>
<tr class="codeline" data-linenumber="180"><td class="num" id="LN180">180</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="181"><td class="num" id="LN181">181</td><td class="line">  <span class='keyword'>public</span>:</td></tr>
<tr class="codeline" data-linenumber="182"><td class="num" id="LN182">182</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="183"><td class="num" id="LN183">183</td><td class="line">    <span class='comment'>/** \brief Base class typedef.</span></td></tr>
<tr class="codeline" data-linenumber="184"><td class="num" id="LN184">184</td><td class="line">      <span class='comment'>* \sa PlainObjectBase</span></td></tr>
<tr class="codeline" data-linenumber="185"><td class="num" id="LN185">185</td><td class="line">      <span class='comment'>*/</span></td></tr>
<tr class="codeline" data-linenumber="186"><td class="num" id="LN186">186</td><td class="line">    <span class='keyword'>typedef</span> PlainObjectBase&lt;Matrix&gt; Base;</td></tr>
<tr class="codeline" data-linenumber="187"><td class="num" id="LN187">187</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="188"><td class="num" id="LN188">188</td><td class="line">    <span class='keyword'>enum</span> { Options = _Options };</td></tr>
<tr class="codeline" data-linenumber="189"><td class="num" id="LN189">189</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="190"><td class="num" id="LN190">190</td><td class="line">    <span class='macro'>EIGEN_DENSE_PUBLIC_INTERFACE(Matrix)<span class='expansion'>typedef typename Eigen::internal::traits&lt;Matrix&gt;::Scalar<br> Scalar; typedef typename Eigen::NumTraits&lt;Scalar&gt;::Real<br> RealScalar; typedef typename Base::CoeffReturnType CoeffReturnType<br>; typedef typename Eigen::internal::ref_selector&lt;Matrix&gt;<br>::type Nested; typedef typename Eigen::internal::traits&lt;Matrix<br>&gt;::StorageKind StorageKind; typedef typename Eigen::internal<br>::traits&lt;Matrix&gt;::StorageIndex StorageIndex; enum { RowsAtCompileTime<br> = Eigen::internal::traits&lt;Matrix&gt;::RowsAtCompileTime, ColsAtCompileTime<br> = Eigen::internal::traits&lt;Matrix&gt;::ColsAtCompileTime, Flags<br> = Eigen::internal::traits&lt;Matrix&gt;::Flags, SizeAtCompileTime<br> = Base::SizeAtCompileTime, MaxSizeAtCompileTime = Base::MaxSizeAtCompileTime<br>, IsVectorAtCompileTime = Base::IsVectorAtCompileTime }; using<br> Base::derived; using Base::const_cast_derived; typedef typename<br> Base::PacketScalar PacketScalar;</span></span></td></tr>
<tr class="codeline" data-linenumber="191"><td class="num" id="LN191">191</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="192"><td class="num" id="LN192">192</td><td class="line">    <span class='keyword'>typedef</span> <span class='keyword'>typename</span> Base::PlainObject PlainObject;</td></tr>
<tr class="codeline" data-linenumber="193"><td class="num" id="LN193">193</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="194"><td class="num" id="LN194">194</td><td class="line">    <span class='keyword'>using</span> Base::base;</td></tr>
<tr class="codeline" data-linenumber="195"><td class="num" id="LN195">195</td><td class="line">    <span class='keyword'>using</span> Base::coeffRef;</td></tr>
<tr class="codeline" data-linenumber="196"><td class="num" id="LN196">196</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="197"><td class="num" id="LN197">197</td><td class="line">    <span class='comment'>/**</span></td></tr>
<tr class="codeline" data-linenumber="198"><td class="num" id="LN198">198</td><td class="line">      <span class='comment'>* \brief Assigns matrices to each other.</span></td></tr>
<tr class="codeline" data-linenumber="199"><td class="num" id="LN199">199</td><td class="line">      <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="200"><td class="num" id="LN200">200</td><td class="line">      <span class='comment'>* \note This is a special case of the templated operator=. Its purpose is</span></td></tr>
<tr class="codeline" data-linenumber="201"><td class="num" id="LN201">201</td><td class="line">      <span class='comment'>* to prevent a default operator= from hiding the templated operator=.</span></td></tr>
<tr class="codeline" data-linenumber="202"><td class="num" id="LN202">202</td><td class="line">      <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="203"><td class="num" id="LN203">203</td><td class="line">      <span class='comment'>* \callgraph</span></td></tr>
<tr class="codeline" data-linenumber="204"><td class="num" id="LN204">204</td><td class="line">      <span class='comment'>*/</span></td></tr>
<tr class="codeline" data-linenumber="205"><td class="num" id="LN205">205</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="206"><td class="num" id="LN206">206</td><td class="line">    <span class='macro'>EIGEN_STRONG_INLINE<span class='expansion'>inline</span></span> Matrix&amp; <span class='keyword'>operator</span>=(<span class='keyword'>const</span> Matrix&amp; other)</td></tr>
<tr class="codeline" data-linenumber="207"><td class="num" id="LN207">207</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="208"><td class="num" id="LN208">208</td><td class="line">      <span class='keyword'>return</span> Base::_set(other);</td></tr>
<tr class="codeline" data-linenumber="209"><td class="num" id="LN209">209</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="210"><td class="num" id="LN210">210</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="211"><td class="num" id="LN211">211</td><td class="line">    <span class='comment'>/** \internal</span></td></tr>
<tr class="codeline" data-linenumber="212"><td class="num" id="LN212">212</td><td class="line">      <span class='comment'>* \brief Copies the value of the expression \a other into \c *this with automatic resizing.</span></td></tr>
<tr class="codeline" data-linenumber="213"><td class="num" id="LN213">213</td><td class="line">      <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="214"><td class="num" id="LN214">214</td><td class="line">      <span class='comment'>* *this might be resized to match the dimensions of \a other. If *this was a null matrix (not already initialized),</span></td></tr>
<tr class="codeline" data-linenumber="215"><td class="num" id="LN215">215</td><td class="line">      <span class='comment'>* it will be initialized.</span></td></tr>
<tr class="codeline" data-linenumber="216"><td class="num" id="LN216">216</td><td class="line">      <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="217"><td class="num" id="LN217">217</td><td class="line">      <span class='comment'>* Note that copying a row-vector into a vector (and conversely) is allowed.</span></td></tr>
<tr class="codeline" data-linenumber="218"><td class="num" id="LN218">218</td><td class="line">      <span class='comment'>* The resizing, if any, is then done in the appropriate way so that row-vectors</span></td></tr>
<tr class="codeline" data-linenumber="219"><td class="num" id="LN219">219</td><td class="line">      <span class='comment'>* remain row-vectors and vectors remain vectors.</span></td></tr>
<tr class="codeline" data-linenumber="220"><td class="num" id="LN220">220</td><td class="line">      <span class='comment'>*/</span></td></tr>
<tr class="codeline" data-linenumber="221"><td class="num" id="LN221">221</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> OtherDerived&gt;</td></tr>
<tr class="codeline" data-linenumber="222"><td class="num" id="LN222">222</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="223"><td class="num" id="LN223">223</td><td class="line">    <span class='macro'>EIGEN_STRONG_INLINE<span class='expansion'>inline</span></span> Matrix&amp; <span class='keyword'>operator</span>=(<span class='keyword'>const</span> DenseBase&lt;OtherDerived&gt;&amp; other)</td></tr>
<tr class="codeline" data-linenumber="224"><td class="num" id="LN224">224</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="225"><td class="num" id="LN225">225</td><td class="line">      <span class='keyword'>return</span> Base::_set(other);</td></tr>
<tr class="codeline" data-linenumber="226"><td class="num" id="LN226">226</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="227"><td class="num" id="LN227">227</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="228"><td class="num" id="LN228">228</td><td class="line">    <span class='comment'>/* Here, doxygen failed to copy the brief information when using \copydoc */</span></td></tr>
<tr class="codeline" data-linenumber="229"><td class="num" id="LN229">229</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="230"><td class="num" id="LN230">230</td><td class="line">    <span class='comment'>/**</span></td></tr>
<tr class="codeline" data-linenumber="231"><td class="num" id="LN231">231</td><td class="line">      <span class='comment'>* \brief Copies the generic expression \a other into *this.</span></td></tr>
<tr class="codeline" data-linenumber="232"><td class="num" id="LN232">232</td><td class="line">      <span class='comment'>* \copydetails DenseBase::operator=(const EigenBase&lt;OtherDerived&gt; &amp;other)</span></td></tr>
<tr class="codeline" data-linenumber="233"><td class="num" id="LN233">233</td><td class="line">      <span class='comment'>*/</span></td></tr>
<tr class="codeline" data-linenumber="234"><td class="num" id="LN234">234</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> OtherDerived&gt;</td></tr>
<tr class="codeline" data-linenumber="235"><td class="num" id="LN235">235</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="236"><td class="num" id="LN236">236</td><td class="line">    <span class='macro'>EIGEN_STRONG_INLINE<span class='expansion'>inline</span></span> Matrix&amp; <span class='keyword'>operator</span>=(<span class='keyword'>const</span> EigenBase&lt;OtherDerived&gt; &amp;other)</td></tr>
<tr class="codeline" data-linenumber="237"><td class="num" id="LN237">237</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="238"><td class="num" id="LN238">238</td><td class="line">      <span class='keyword'>return</span> Base::<span class='keyword'>operator</span>=(other);</td></tr>
<tr class="codeline" data-linenumber="239"><td class="num" id="LN239">239</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="240"><td class="num" id="LN240">240</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="241"><td class="num" id="LN241">241</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> OtherDerived&gt;</td></tr>
<tr class="codeline" data-linenumber="242"><td class="num" id="LN242">242</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="243"><td class="num" id="LN243">243</td><td class="line">    <span class='macro'>EIGEN_STRONG_INLINE<span class='expansion'>inline</span></span> Matrix&amp; <span class='keyword'>operator</span>=(<span class='keyword'>const</span> ReturnByValue&lt;OtherDerived&gt;&amp; func)</td></tr>
<tr class="codeline" data-linenumber="244"><td class="num" id="LN244">244</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="245"><td class="num" id="LN245">245</td><td class="line">      <span class='keyword'>return</span> Base::<span class='keyword'>operator</span>=(func);</td></tr>
<tr class="codeline" data-linenumber="246"><td class="num" id="LN246">246</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="247"><td class="num" id="LN247">247</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="248"><td class="num" id="LN248">248</td><td class="line">    <span class='comment'>/** \brief Default constructor.</span></td></tr>
<tr class="codeline" data-linenumber="249"><td class="num" id="LN249">249</td><td class="line">      <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="250"><td class="num" id="LN250">250</td><td class="line">      <span class='comment'>* For fixed-size matrices, does nothing.</span></td></tr>
<tr class="codeline" data-linenumber="251"><td class="num" id="LN251">251</td><td class="line">      <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="252"><td class="num" id="LN252">252</td><td class="line">      <span class='comment'>* For dynamic-size matrices, creates an empty matrix of size 0. Does not allocate any array. Such a matrix</span></td></tr>
<tr class="codeline" data-linenumber="253"><td class="num" id="LN253">253</td><td class="line">      <span class='comment'>* is called a null matrix. This constructor is the unique way to create null matrices: resizing</span></td></tr>
<tr class="codeline" data-linenumber="254"><td class="num" id="LN254">254</td><td class="line">      <span class='comment'>* a matrix to 0 is not supported.</span></td></tr>
<tr class="codeline" data-linenumber="255"><td class="num" id="LN255">255</td><td class="line">      <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="256"><td class="num" id="LN256">256</td><td class="line">      <span class='comment'>* \sa resize(Index,Index)</span></td></tr>
<tr class="codeline" data-linenumber="257"><td class="num" id="LN257">257</td><td class="line">      <span class='comment'>*/</span></td></tr>
<tr class="codeline" data-linenumber="258"><td class="num" id="LN258">258</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="259"><td class="num" id="LN259">259</td><td class="line">    <span class='macro'>EIGEN_STRONG_INLINE<span class='expansion'>inline</span></span> Matrix() : Base()</td></tr>
<tr class="codeline" data-linenumber="260"><td class="num" id="LN260">260</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="261"><td class="num" id="LN261">261</td><td class="line">      Base::_check_template_params();</td></tr>
<tr class="codeline" data-linenumber="262"><td class="num" id="LN262">262</td><td class="line">      EIGEN_INITIALIZE_COEFFS_IF_THAT_OPTION_IS_ENABLED</td></tr>
<tr class="codeline" data-linenumber="263"><td class="num" id="LN263">263</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="264"><td class="num" id="LN264">264</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="265"><td class="num" id="LN265">265</td><td class="line">    <span class='comment'>// FIXME is it still needed</span></td></tr>
<tr class="codeline" data-linenumber="266"><td class="num" id="LN266">266</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="267"><td class="num" id="LN267">267</td><td class="line">    <span class='keyword'>explicit</span> Matrix(internal::constructor_without_unaligned_array_assert)</td></tr>
<tr class="codeline" data-linenumber="268"><td class="num" id="LN268">268</td><td class="line">      : Base(internal::constructor_without_unaligned_array_assert())</td></tr>
<tr class="codeline" data-linenumber="269"><td class="num" id="LN269">269</td><td class="line">    { Base::_check_template_params(); EIGEN_INITIALIZE_COEFFS_IF_THAT_OPTION_IS_ENABLED }</td></tr>
<tr class="codeline" data-linenumber="270"><td class="num" id="LN270">270</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="271"><td class="num" id="LN271">271</td><td class="line"><span class='directive'>#if <span class='macro'>EIGEN_HAS_RVALUE_REFERENCES<span class='expansion'>1</span></span></span></td></tr>
<tr class="codeline" data-linenumber="272"><td class="num" id="LN272">272</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="273"><td class="num" id="LN273">273</td><td class="line">    Matrix(Matrix&amp;&amp; other) <span class='macro'>EIGEN_NOEXCEPT_IF(std::is_nothrow_move_constructible&lt;Scalar&gt;::value)<span class='expansion'>noexcept(std::is_nothrow_move_constructible&lt;Scalar&gt;::value<br>)</span></span></td></tr>
<tr class="codeline" data-linenumber="274"><td class="num" id="LN274">274</td><td class="line">      : Base(std::move(other))</td></tr>
<tr class="codeline" data-linenumber="275"><td class="num" id="LN275">275</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="276"><td class="num" id="LN276">276</td><td class="line">      Base::_check_template_params();</td></tr>
<tr class="codeline" data-linenumber="277"><td class="num" id="LN277">277</td><td class="line">      <span class='keyword'>if</span> (RowsAtCompileTime!=Dynamic &amp;&amp; ColsAtCompileTime!=Dynamic)</td></tr>
<tr class="codeline" data-linenumber="278"><td class="num" id="LN278">278</td><td class="line">        Base::_set_noalias(other);</td></tr>
<tr class="codeline" data-linenumber="279"><td class="num" id="LN279">279</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="280"><td class="num" id="LN280">280</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="281"><td class="num" id="LN281">281</td><td class="line">    Matrix&amp; <span class='keyword'>operator</span>=(Matrix&amp;&amp; other) <span class='macro'>EIGEN_NOEXCEPT_IF(std::is_nothrow_move_assignable&lt;Scalar&gt;::value)<span class='expansion'>noexcept(std::is_nothrow_move_assignable&lt;Scalar&gt;::value<br>)</span></span></td></tr>
<tr class="codeline" data-linenumber="282"><td class="num" id="LN282">282</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="283"><td class="num" id="LN283">283</td><td class="line">      other.swap(*<span class='keyword'>this</span>);</td></tr>
<tr class="codeline" data-linenumber="284"><td class="num" id="LN284">284</td><td class="line">      <span class='keyword'>return</span> *<span class='keyword'>this</span>;</td></tr>
<tr class="codeline" data-linenumber="285"><td class="num" id="LN285">285</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="286"><td class="num" id="LN286">286</td><td class="line"><span class='directive'>#endif</span></td></tr>
<tr class="codeline" data-linenumber="287"><td class="num" id="LN287">287</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="288"><td class="num" id="LN288">288</td><td class="line">    <span class='directive'>#ifndef EIGEN_PARSED_BY_DOXYGEN</span></td></tr>
<tr class="codeline" data-linenumber="289"><td class="num" id="LN289">289</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="290"><td class="num" id="LN290">290</td><td class="line">    <span class='comment'>// This constructor is for both 1x1 matrices and dynamic vectors</span></td></tr>
<tr class="codeline" data-linenumber="291"><td class="num" id="LN291">291</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> T&gt;</td></tr>
<tr class="codeline" data-linenumber="292"><td class="num" id="LN292">292</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="293"><td class="num" id="LN293">293</td><td class="line">    <span class='macro'>EIGEN_STRONG_INLINE<span class='expansion'>inline</span></span> <span class='keyword'>explicit</span> Matrix(<span class='keyword'>const</span> T&amp; x)</td></tr>
<tr class="codeline" data-linenumber="294"><td class="num" id="LN294">294</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="295"><td class="num" id="LN295">295</td><td class="line">      Base::_check_template_params();</td></tr>
<tr class="codeline" data-linenumber="296"><td class="num" id="LN296">296</td><td class="line">      <span class="mrange"><span class="mrange">Base::<span class='keyword'>template</span> _init1&lt;T&gt;(x)</span></span>;</td></tr>
<tr><td class="num"></td><td class="line"><div id="Path16" class="msg msgEvent" style="margin-left:7ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">16</div></td><td><div class="PathNav"><a href="#Path15" title="Previous event (15)">&#x2190;</a></div></td></td><td>Calling 'PlainObjectBase::_init1'</td><td><div class="PathNav"><a href="#Path17" title="Next event (17)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr><td class="num"></td><td class="line"><div id="Path36" class="msg msgEvent" style="margin-left:7ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">36</div></td><td><div class="PathNav"><a href="#Path35" title="Previous event (35)">&#x2190;</a></div></td></td><td>Returned allocated memory</td><td><div class="PathNav"><a href="#Path37" title="Next event (37)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr class="codeline" data-linenumber="297"><td class="num" id="LN297">297</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="298"><td class="num" id="LN298">298</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="299"><td class="num" id="LN299">299</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> T0, <span class='keyword'>typename</span> T1&gt;</td></tr>
<tr class="codeline" data-linenumber="300"><td class="num" id="LN300">300</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="301"><td class="num" id="LN301">301</td><td class="line">    <span class='macro'>EIGEN_STRONG_INLINE<span class='expansion'>inline</span></span> Matrix(<span class='keyword'>const</span> T0&amp; x, <span class='keyword'>const</span> T1&amp; y)</td></tr>
<tr class="codeline" data-linenumber="302"><td class="num" id="LN302">302</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="303"><td class="num" id="LN303">303</td><td class="line">      Base::_check_template_params();</td></tr>
<tr class="codeline" data-linenumber="304"><td class="num" id="LN304">304</td><td class="line">      Base::<span class='keyword'>template</span> _init2&lt;T0,T1&gt;(x, y);</td></tr>
<tr class="codeline" data-linenumber="305"><td class="num" id="LN305">305</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="306"><td class="num" id="LN306">306</td><td class="line">    <span class='directive'>#else</span></td></tr>
<tr class="codeline" data-linenumber="307"><td class="num" id="LN307">307</td><td class="line">    <span class='comment'>/** \brief Constructs a fixed-sized matrix initialized with coefficients starting at \a data */</span></td></tr>
<tr class="codeline" data-linenumber="308"><td class="num" id="LN308">308</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="309"><td class="num" id="LN309">309</td><td class="line">    <span class='keyword'>explicit</span> Matrix(<span class='keyword'>const</span> Scalar *data);</td></tr>
<tr class="codeline" data-linenumber="310"><td class="num" id="LN310">310</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="311"><td class="num" id="LN311">311</td><td class="line">    <span class='comment'>/** \brief Constructs a vector or row-vector with given dimension. \only_for_vectors</span></td></tr>
<tr class="codeline" data-linenumber="312"><td class="num" id="LN312">312</td><td class="line">      <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="313"><td class="num" id="LN313">313</td><td class="line">      <span class='comment'>* This is useful for dynamic-size vectors. For fixed-size vectors,</span></td></tr>
<tr class="codeline" data-linenumber="314"><td class="num" id="LN314">314</td><td class="line">      <span class='comment'>* it is redundant to pass these parameters, so one should use the default constructor</span></td></tr>
<tr class="codeline" data-linenumber="315"><td class="num" id="LN315">315</td><td class="line">      <span class='comment'>* Matrix() instead.</span></td></tr>
<tr class="codeline" data-linenumber="316"><td class="num" id="LN316">316</td><td class="line">      <span class='comment'>*</span> </td></tr>
<tr class="codeline" data-linenumber="317"><td class="num" id="LN317">317</td><td class="line">      <span class='comment'>* \warning This constructor is disabled for fixed-size \c 1x1 matrices. For instance,</span></td></tr>
<tr class="codeline" data-linenumber="318"><td class="num" id="LN318">318</td><td class="line">      <span class='comment'>* calling Matrix&lt;double,1,1&gt;(1) will call the initialization constructor: Matrix(const Scalar&amp;).</span></td></tr>
<tr class="codeline" data-linenumber="319"><td class="num" id="LN319">319</td><td class="line">      <span class='comment'>* For fixed-size \c 1x1 matrices it is therefore recommended to use the default</span></td></tr>
<tr class="codeline" data-linenumber="320"><td class="num" id="LN320">320</td><td class="line">      <span class='comment'>* constructor Matrix() instead, especially when using one of the non standard</span></td></tr>
<tr class="codeline" data-linenumber="321"><td class="num" id="LN321">321</td><td class="line">      <span class='comment'>* \c EIGEN_INITIALIZE_MATRICES_BY_{ZERO,\c NAN} macros (see \ref TopicPreprocessorDirectives).</span></td></tr>
<tr class="codeline" data-linenumber="322"><td class="num" id="LN322">322</td><td class="line">      <span class='comment'>*/</span></td></tr>
<tr class="codeline" data-linenumber="323"><td class="num" id="LN323">323</td><td class="line">    <span class='macro'>EIGEN_STRONG_INLINE<span class='expansion'>inline</span></span> <span class='keyword'>explicit</span> Matrix(Index dim);</td></tr>
<tr class="codeline" data-linenumber="324"><td class="num" id="LN324">324</td><td class="line">    <span class='comment'>/** \brief Constructs an initialized 1x1 matrix with the given coefficient */</span></td></tr>
<tr class="codeline" data-linenumber="325"><td class="num" id="LN325">325</td><td class="line">    Matrix(<span class='keyword'>const</span> Scalar&amp; x);</td></tr>
<tr class="codeline" data-linenumber="326"><td class="num" id="LN326">326</td><td class="line">    <span class='comment'>/** \brief Constructs an uninitialized matrix with \a rows rows and \a cols columns.</span></td></tr>
<tr class="codeline" data-linenumber="327"><td class="num" id="LN327">327</td><td class="line">      <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="328"><td class="num" id="LN328">328</td><td class="line">      <span class='comment'>* This is useful for dynamic-size matrices. For fixed-size matrices,</span></td></tr>
<tr class="codeline" data-linenumber="329"><td class="num" id="LN329">329</td><td class="line">      <span class='comment'>* it is redundant to pass these parameters, so one should use the default constructor</span></td></tr>
<tr class="codeline" data-linenumber="330"><td class="num" id="LN330">330</td><td class="line">      <span class='comment'>* Matrix() instead.</span></td></tr>
<tr class="codeline" data-linenumber="331"><td class="num" id="LN331">331</td><td class="line">      <span class='comment'>*</span> </td></tr>
<tr class="codeline" data-linenumber="332"><td class="num" id="LN332">332</td><td class="line">      <span class='comment'>* \warning This constructor is disabled for fixed-size \c 1x2 and \c 2x1 vectors. For instance,</span></td></tr>
<tr class="codeline" data-linenumber="333"><td class="num" id="LN333">333</td><td class="line">      <span class='comment'>* calling Matrix2f(2,1) will call the initialization constructor: Matrix(const Scalar&amp; x, const Scalar&amp; y).</span></td></tr>
<tr class="codeline" data-linenumber="334"><td class="num" id="LN334">334</td><td class="line">      <span class='comment'>* For fixed-size \c 1x2 or \c 2x1 vectors it is therefore recommended to use the default</span></td></tr>
<tr class="codeline" data-linenumber="335"><td class="num" id="LN335">335</td><td class="line">      <span class='comment'>* constructor Matrix() instead, especially when using one of the non standard</span></td></tr>
<tr class="codeline" data-linenumber="336"><td class="num" id="LN336">336</td><td class="line">      <span class='comment'>* \c EIGEN_INITIALIZE_MATRICES_BY_{ZERO,\c NAN} macros (see \ref TopicPreprocessorDirectives).</span></td></tr>
<tr class="codeline" data-linenumber="337"><td class="num" id="LN337">337</td><td class="line">      <span class='comment'>*/</span></td></tr>
<tr class="codeline" data-linenumber="338"><td class="num" id="LN338">338</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="339"><td class="num" id="LN339">339</td><td class="line">    Matrix(Index rows, Index cols);</td></tr>
<tr class="codeline" data-linenumber="340"><td class="num" id="LN340">340</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="341"><td class="num" id="LN341">341</td><td class="line">    <span class='comment'>/** \brief Constructs an initialized 2D vector with given coefficients */</span></td></tr>
<tr class="codeline" data-linenumber="342"><td class="num" id="LN342">342</td><td class="line">    Matrix(<span class='keyword'>const</span> Scalar&amp; x, <span class='keyword'>const</span> Scalar&amp; y);</td></tr>
<tr class="codeline" data-linenumber="343"><td class="num" id="LN343">343</td><td class="line">    <span class='directive'>#endif</span></td></tr>
<tr class="codeline" data-linenumber="344"><td class="num" id="LN344">344</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="345"><td class="num" id="LN345">345</td><td class="line">    <span class='comment'>/** \brief Constructs an initialized 3D vector with given coefficients */</span></td></tr>
<tr class="codeline" data-linenumber="346"><td class="num" id="LN346">346</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="347"><td class="num" id="LN347">347</td><td class="line">    <span class='macro'>EIGEN_STRONG_INLINE<span class='expansion'>inline</span></span> Matrix(<span class='keyword'>const</span> Scalar&amp; x, <span class='keyword'>const</span> Scalar&amp; y, <span class='keyword'>const</span> Scalar&amp; z)</td></tr>
<tr class="codeline" data-linenumber="348"><td class="num" id="LN348">348</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="349"><td class="num" id="LN349">349</td><td class="line">      Base::_check_template_params();</td></tr>
<tr class="codeline" data-linenumber="350"><td class="num" id="LN350">350</td><td class="line">      <span class='macro'>EIGEN_STATIC_ASSERT_VECTOR_SPECIFIC_SIZE(Matrix, 3)<span class='expansion'>static_assert(Matrix::IsVectorAtCompileTime &amp;&amp; Matrix<br>::SizeAtCompileTime==3,"THIS_METHOD_IS_ONLY_FOR_VECTORS_OF_A_SPECIFIC_SIZE"<br>);</span></span></td></tr>
<tr class="codeline" data-linenumber="351"><td class="num" id="LN351">351</td><td class="line">      m_storage.data()[0] = x;</td></tr>
<tr class="codeline" data-linenumber="352"><td class="num" id="LN352">352</td><td class="line">      m_storage.data()[1] = y;</td></tr>
<tr class="codeline" data-linenumber="353"><td class="num" id="LN353">353</td><td class="line">      m_storage.data()[2] = z;</td></tr>
<tr class="codeline" data-linenumber="354"><td class="num" id="LN354">354</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="355"><td class="num" id="LN355">355</td><td class="line">    <span class='comment'>/** \brief Constructs an initialized 4D vector with given coefficients */</span></td></tr>
<tr class="codeline" data-linenumber="356"><td class="num" id="LN356">356</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="357"><td class="num" id="LN357">357</td><td class="line">    <span class='macro'>EIGEN_STRONG_INLINE<span class='expansion'>inline</span></span> Matrix(<span class='keyword'>const</span> Scalar&amp; x, <span class='keyword'>const</span> Scalar&amp; y, <span class='keyword'>const</span> Scalar&amp; z, <span class='keyword'>const</span> Scalar&amp; w)</td></tr>
<tr class="codeline" data-linenumber="358"><td class="num" id="LN358">358</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="359"><td class="num" id="LN359">359</td><td class="line">      Base::_check_template_params();</td></tr>
<tr class="codeline" data-linenumber="360"><td class="num" id="LN360">360</td><td class="line">      <span class='macro'>EIGEN_STATIC_ASSERT_VECTOR_SPECIFIC_SIZE(Matrix, 4)<span class='expansion'>static_assert(Matrix::IsVectorAtCompileTime &amp;&amp; Matrix<br>::SizeAtCompileTime==4,"THIS_METHOD_IS_ONLY_FOR_VECTORS_OF_A_SPECIFIC_SIZE"<br>);</span></span></td></tr>
<tr class="codeline" data-linenumber="361"><td class="num" id="LN361">361</td><td class="line">      m_storage.data()[0] = x;</td></tr>
<tr class="codeline" data-linenumber="362"><td class="num" id="LN362">362</td><td class="line">      m_storage.data()[1] = y;</td></tr>
<tr class="codeline" data-linenumber="363"><td class="num" id="LN363">363</td><td class="line">      m_storage.data()[2] = z;</td></tr>
<tr class="codeline" data-linenumber="364"><td class="num" id="LN364">364</td><td class="line">      m_storage.data()[3] = w;</td></tr>
<tr class="codeline" data-linenumber="365"><td class="num" id="LN365">365</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="366"><td class="num" id="LN366">366</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="367"><td class="num" id="LN367">367</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="368"><td class="num" id="LN368">368</td><td class="line">    <span class='comment'>/** \brief Copy constructor */</span></td></tr>
<tr class="codeline" data-linenumber="369"><td class="num" id="LN369">369</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="370"><td class="num" id="LN370">370</td><td class="line">    <span class='macro'>EIGEN_STRONG_INLINE<span class='expansion'>inline</span></span> Matrix(<span class='keyword'>const</span> Matrix&amp; other) : Base(other)</td></tr>
<tr class="codeline" data-linenumber="371"><td class="num" id="LN371">371</td><td class="line">    { }</td></tr>
<tr class="codeline" data-linenumber="372"><td class="num" id="LN372">372</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="373"><td class="num" id="LN373">373</td><td class="line">    <span class='comment'>/** \brief Copy constructor for generic expressions.</span></td></tr>
<tr class="codeline" data-linenumber="374"><td class="num" id="LN374">374</td><td class="line">      <span class='comment'>* \sa MatrixBase::operator=(const EigenBase&lt;OtherDerived&gt;&amp;)</span></td></tr>
<tr class="codeline" data-linenumber="375"><td class="num" id="LN375">375</td><td class="line">      <span class='comment'>*/</span></td></tr>
<tr class="codeline" data-linenumber="376"><td class="num" id="LN376">376</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> OtherDerived&gt;</td></tr>
<tr class="codeline" data-linenumber="377"><td class="num" id="LN377">377</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="378"><td class="num" id="LN378">378</td><td class="line">    <span class='macro'>EIGEN_STRONG_INLINE<span class='expansion'>inline</span></span> Matrix(<span class='keyword'>const</span> EigenBase&lt;OtherDerived&gt; &amp;other)</td></tr>
<tr class="codeline" data-linenumber="379"><td class="num" id="LN379">379</td><td class="line">      : Base(other.derived())</td></tr>
<tr class="codeline" data-linenumber="380"><td class="num" id="LN380">380</td><td class="line">    { }</td></tr>
<tr class="codeline" data-linenumber="381"><td class="num" id="LN381">381</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="382"><td class="num" id="LN382">382</td><td class="line">    EIGEN_DEVICE_FUNC <span class='keyword'>inline</span> Index innerStride() <span class='keyword'>const</span> { <span class='keyword'>return</span> 1; }</td></tr>
<tr class="codeline" data-linenumber="383"><td class="num" id="LN383">383</td><td class="line">    EIGEN_DEVICE_FUNC <span class='keyword'>inline</span> Index outerStride() <span class='keyword'>const</span> { <span class='keyword'>return</span> <span class='keyword'>this</span>-&gt;innerSize(); }</td></tr>
<tr class="codeline" data-linenumber="384"><td class="num" id="LN384">384</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="385"><td class="num" id="LN385">385</td><td class="line">    <span class='comment'>/////////// Geometry module ///////////</span></td></tr>
<tr class="codeline" data-linenumber="386"><td class="num" id="LN386">386</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="387"><td class="num" id="LN387">387</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> OtherDerived&gt;</td></tr>
<tr class="codeline" data-linenumber="388"><td class="num" id="LN388">388</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="389"><td class="num" id="LN389">389</td><td class="line">    <span class='keyword'>explicit</span> Matrix(<span class='keyword'>const</span> RotationBase&lt;OtherDerived,ColsAtCompileTime&gt;&amp; r);</td></tr>
<tr class="codeline" data-linenumber="390"><td class="num" id="LN390">390</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> OtherDerived&gt;</td></tr>
<tr class="codeline" data-linenumber="391"><td class="num" id="LN391">391</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="392"><td class="num" id="LN392">392</td><td class="line">    Matrix&amp; <span class='keyword'>operator</span>=(<span class='keyword'>const</span> RotationBase&lt;OtherDerived,ColsAtCompileTime&gt;&amp; r);</td></tr>
<tr class="codeline" data-linenumber="393"><td class="num" id="LN393">393</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="394"><td class="num" id="LN394">394</td><td class="line">    <span class='comment'>// allow to extend Matrix outside Eigen</span></td></tr>
<tr class="codeline" data-linenumber="395"><td class="num" id="LN395">395</td><td class="line">    <span class='directive'>#ifdef EIGEN_MATRIX_PLUGIN</span></td></tr>
<tr class="codeline" data-linenumber="396"><td class="num" id="LN396">396</td><td class="line">    <span class='directive'>#include EIGEN_MATRIX_PLUGIN</span></td></tr>
<tr class="codeline" data-linenumber="397"><td class="num" id="LN397">397</td><td class="line">    <span class='directive'>#endif</span></td></tr>
<tr class="codeline" data-linenumber="398"><td class="num" id="LN398">398</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="399"><td class="num" id="LN399">399</td><td class="line">  <span class='keyword'>protected</span>:</td></tr>
<tr class="codeline" data-linenumber="400"><td class="num" id="LN400">400</td><td class="line">    <span class='keyword'>template</span> &lt;<span class='keyword'>typename</span> Derived, <span class='keyword'>typename</span> OtherDerived, <span class='keyword'>bool</span> IsVector&gt;</td></tr>
<tr class="codeline" data-linenumber="401"><td class="num" id="LN401">401</td><td class="line">    <span class='keyword'>friend</span> <span class='keyword'>struct</span> internal::conservative_resize_like_impl;</td></tr>
<tr class="codeline" data-linenumber="402"><td class="num" id="LN402">402</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="403"><td class="num" id="LN403">403</td><td class="line">    <span class='keyword'>using</span> Base::m_storage;</td></tr>
<tr class="codeline" data-linenumber="404"><td class="num" id="LN404">404</td><td class="line">};</td></tr>
<tr class="codeline" data-linenumber="405"><td class="num" id="LN405">405</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="406"><td class="num" id="LN406">406</td><td class="line"><span class='comment'>/** \defgroup matrixtypedefs Global matrix typedefs</span></td></tr>
<tr class="codeline" data-linenumber="407"><td class="num" id="LN407">407</td><td class="line">  <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="408"><td class="num" id="LN408">408</td><td class="line">  <span class='comment'>* \ingroup Core_Module</span></td></tr>
<tr class="codeline" data-linenumber="409"><td class="num" id="LN409">409</td><td class="line">  <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="410"><td class="num" id="LN410">410</td><td class="line">  <span class='comment'>* Eigen defines several typedef shortcuts for most common matrix and vector types.</span></td></tr>
<tr class="codeline" data-linenumber="411"><td class="num" id="LN411">411</td><td class="line">  <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="412"><td class="num" id="LN412">412</td><td class="line">  <span class='comment'>* The general patterns are the following:</span></td></tr>
<tr class="codeline" data-linenumber="413"><td class="num" id="LN413">413</td><td class="line">  <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="414"><td class="num" id="LN414">414</td><td class="line">  <span class='comment'>* \c MatrixSizeType where \c Size can be \c 2,\c 3,\c 4 for fixed size square matrices or \c X for dynamic size,</span></td></tr>
<tr class="codeline" data-linenumber="415"><td class="num" id="LN415">415</td><td class="line">  <span class='comment'>* and where \c Type can be \c i for integer, \c f for float, \c d for double, \c cf for complex float, \c cd</span></td></tr>
<tr class="codeline" data-linenumber="416"><td class="num" id="LN416">416</td><td class="line">  <span class='comment'>* for complex double.</span></td></tr>
<tr class="codeline" data-linenumber="417"><td class="num" id="LN417">417</td><td class="line">  <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="418"><td class="num" id="LN418">418</td><td class="line">  <span class='comment'>* For example, \c Matrix3d is a fixed-size 3x3 matrix type of doubles, and \c MatrixXf is a dynamic-size matrix of floats.</span></td></tr>
<tr class="codeline" data-linenumber="419"><td class="num" id="LN419">419</td><td class="line">  <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="420"><td class="num" id="LN420">420</td><td class="line">  <span class='comment'>* There are also \c VectorSizeType and \c RowVectorSizeType which are self-explanatory. For example, \c Vector4cf is</span></td></tr>
<tr class="codeline" data-linenumber="421"><td class="num" id="LN421">421</td><td class="line">  <span class='comment'>* a fixed-size vector of 4 complex floats.</span></td></tr>
<tr class="codeline" data-linenumber="422"><td class="num" id="LN422">422</td><td class="line">  <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="423"><td class="num" id="LN423">423</td><td class="line">  <span class='comment'>* \sa class Matrix</span></td></tr>
<tr class="codeline" data-linenumber="424"><td class="num" id="LN424">424</td><td class="line">  <span class='comment'>*/</span></td></tr>
<tr class="codeline" data-linenumber="425"><td class="num" id="LN425">425</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="426"><td class="num" id="LN426">426</td><td class="line"><span class='directive'>#define EIGEN_MAKE_TYPEDEFS(Type, TypeSuffix, Size, SizeSuffix)   \</span></td></tr>
<tr class="codeline" data-linenumber="427"><td class="num" id="LN427">427</td><td class="line"><span class='directive'>/** \ingroup matrixtypedefs */                                    \</span></td></tr>
<tr class="codeline" data-linenumber="428"><td class="num" id="LN428">428</td><td class="line"><span class='directive'>typedef Matrix&lt;Type, Size, Size&gt; Matrix##SizeSuffix##TypeSuffix;  \</span></td></tr>
<tr class="codeline" data-linenumber="429"><td class="num" id="LN429">429</td><td class="line"><span class='directive'>/** \ingroup matrixtypedefs */                                    \</span></td></tr>
<tr class="codeline" data-linenumber="430"><td class="num" id="LN430">430</td><td class="line"><span class='directive'>typedef Matrix&lt;Type, Size, 1&gt;    Vector##SizeSuffix##TypeSuffix;  \</span></td></tr>
<tr class="codeline" data-linenumber="431"><td class="num" id="LN431">431</td><td class="line"><span class='directive'>/** \ingroup matrixtypedefs */                                    \</span></td></tr>
<tr class="codeline" data-linenumber="432"><td class="num" id="LN432">432</td><td class="line"><span class='directive'>typedef Matrix&lt;Type, 1, Size&gt;    RowVector##SizeSuffix##TypeSuffix;</span></td></tr>
<tr class="codeline" data-linenumber="433"><td class="num" id="LN433">433</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="434"><td class="num" id="LN434">434</td><td class="line"><span class='directive'>#define EIGEN_MAKE_FIXED_TYPEDEFS(Type, TypeSuffix, Size)         \</span></td></tr>
<tr class="codeline" data-linenumber="435"><td class="num" id="LN435">435</td><td class="line"><span class='directive'>/** \ingroup matrixtypedefs */                                    \</span></td></tr>
<tr class="codeline" data-linenumber="436"><td class="num" id="LN436">436</td><td class="line"><span class='directive'>typedef Matrix&lt;Type, Size, Dynamic&gt; Matrix##Size##X##TypeSuffix;  \</span></td></tr>
<tr class="codeline" data-linenumber="437"><td class="num" id="LN437">437</td><td class="line"><span class='directive'>/** \ingroup matrixtypedefs */                                    \</span></td></tr>
<tr class="codeline" data-linenumber="438"><td class="num" id="LN438">438</td><td class="line"><span class='directive'>typedef Matrix&lt;Type, Dynamic, Size&gt; Matrix##X##Size##TypeSuffix;</span></td></tr>
<tr class="codeline" data-linenumber="439"><td class="num" id="LN439">439</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="440"><td class="num" id="LN440">440</td><td class="line"><span class='directive'>#define EIGEN_MAKE_TYPEDEFS_ALL_SIZES(Type, TypeSuffix) \</span></td></tr>
<tr class="codeline" data-linenumber="441"><td class="num" id="LN441">441</td><td class="line"><span class='directive'>EIGEN_MAKE_TYPEDEFS(Type, TypeSuffix, 2, 2) \</span></td></tr>
<tr class="codeline" data-linenumber="442"><td class="num" id="LN442">442</td><td class="line"><span class='directive'>EIGEN_MAKE_TYPEDEFS(Type, TypeSuffix, 3, 3) \</span></td></tr>
<tr class="codeline" data-linenumber="443"><td class="num" id="LN443">443</td><td class="line"><span class='directive'>EIGEN_MAKE_TYPEDEFS(Type, TypeSuffix, 4, 4) \</span></td></tr>
<tr class="codeline" data-linenumber="444"><td class="num" id="LN444">444</td><td class="line"><span class='directive'>EIGEN_MAKE_TYPEDEFS(Type, TypeSuffix, Dynamic, X) \</span></td></tr>
<tr class="codeline" data-linenumber="445"><td class="num" id="LN445">445</td><td class="line"><span class='directive'>EIGEN_MAKE_FIXED_TYPEDEFS(Type, TypeSuffix, 2) \</span></td></tr>
<tr class="codeline" data-linenumber="446"><td class="num" id="LN446">446</td><td class="line"><span class='directive'>EIGEN_MAKE_FIXED_TYPEDEFS(Type, TypeSuffix, 3) \</span></td></tr>
<tr class="codeline" data-linenumber="447"><td class="num" id="LN447">447</td><td class="line"><span class='directive'>EIGEN_MAKE_FIXED_TYPEDEFS(Type, TypeSuffix, 4)</span></td></tr>
<tr class="codeline" data-linenumber="448"><td class="num" id="LN448">448</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="449"><td class="num" id="LN449">449</td><td class="line">EIGEN_MAKE_TYPEDEFS_ALL_SIZES(<span class='keyword'>int</span>,                  i)</td></tr>
<tr class="codeline" data-linenumber="450"><td class="num" id="LN450">450</td><td class="line">EIGEN_MAKE_TYPEDEFS_ALL_SIZES(<span class='keyword'>float</span>,                f)</td></tr>
<tr class="codeline" data-linenumber="451"><td class="num" id="LN451">451</td><td class="line">EIGEN_MAKE_TYPEDEFS_ALL_SIZES(<span class='keyword'>double</span>,               d)</td></tr>
<tr class="codeline" data-linenumber="452"><td class="num" id="LN452">452</td><td class="line">EIGEN_MAKE_TYPEDEFS_ALL_SIZES(std::complex&lt;<span class='keyword'>float</span>&gt;,  cf)</td></tr>
<tr class="codeline" data-linenumber="453"><td class="num" id="LN453">453</td><td class="line">EIGEN_MAKE_TYPEDEFS_ALL_SIZES(std::complex&lt;<span class='keyword'>double</span>&gt;, cd)</td></tr>
<tr class="codeline" data-linenumber="454"><td class="num" id="LN454">454</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="455"><td class="num" id="LN455">455</td><td class="line"><span class='directive'>#undef EIGEN_MAKE_TYPEDEFS_ALL_SIZES</span></td></tr>
<tr class="codeline" data-linenumber="456"><td class="num" id="LN456">456</td><td class="line"><span class='directive'>#undef EIGEN_MAKE_TYPEDEFS</span></td></tr>
<tr class="codeline" data-linenumber="457"><td class="num" id="LN457">457</td><td class="line"><span class='directive'>#undef EIGEN_MAKE_FIXED_TYPEDEFS</span></td></tr>
<tr class="codeline" data-linenumber="458"><td class="num" id="LN458">458</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="459"><td class="num" id="LN459">459</td><td class="line">} <span class='comment'>// end namespace Eigen</span></td></tr>
<tr class="codeline" data-linenumber="460"><td class="num" id="LN460">460</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="461"><td class="num" id="LN461">461</td><td class="line"><span class='directive'>#endif // EIGEN_MATRIX_H</span></td></tr>
</table><hr class=divider>
<div id=File40633>
<div class=FileNav><a href="#File40926">&#x2190;</a></div><h4 class=FileName>/Users/u237002/Dropbox/Hacking/sat/arts/3rdparty/Eigen/src/Core/PlainObjectBase.h</h4>
<div class=FileNav><a href="#File40458">&#x2192;</a></div></div>
<table class="code" data-fileid="40633">
<tr class="codeline" data-linenumber="1"><td class="num" id="LN1">1</td><td class="line"><span class='comment'>// This file is part of Eigen, a lightweight C++ template library</span></td></tr>
<tr class="codeline" data-linenumber="2"><td class="num" id="LN2">2</td><td class="line"><span class='comment'>// for linear algebra.</span></td></tr>
<tr class="codeline" data-linenumber="3"><td class="num" id="LN3">3</td><td class="line"><span class='comment'>//</span></td></tr>
<tr class="codeline" data-linenumber="4"><td class="num" id="LN4">4</td><td class="line"><span class='comment'>// Copyright (C) 2008-2009 Gael Guennebaud &lt;gael.guennebaud@inria.fr&gt;</span></td></tr>
<tr class="codeline" data-linenumber="5"><td class="num" id="LN5">5</td><td class="line"><span class='comment'>// Copyright (C) 2006-2008 Benoit Jacob &lt;jacob.benoit.1@gmail.com&gt;</span></td></tr>
<tr class="codeline" data-linenumber="6"><td class="num" id="LN6">6</td><td class="line"><span class='comment'>//</span></td></tr>
<tr class="codeline" data-linenumber="7"><td class="num" id="LN7">7</td><td class="line"><span class='comment'>// This Source Code Form is subject to the terms of the Mozilla</span></td></tr>
<tr class="codeline" data-linenumber="8"><td class="num" id="LN8">8</td><td class="line"><span class='comment'>// Public License v. 2.0. If a copy of the MPL was not distributed</span></td></tr>
<tr class="codeline" data-linenumber="9"><td class="num" id="LN9">9</td><td class="line"><span class='comment'>// with this file, You can obtain one at http://mozilla.org/MPL/2.0/.</span></td></tr>
<tr class="codeline" data-linenumber="10"><td class="num" id="LN10">10</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="11"><td class="num" id="LN11">11</td><td class="line"><span class='directive'>#ifndef EIGEN_DENSESTORAGEBASE_H</span></td></tr>
<tr class="codeline" data-linenumber="12"><td class="num" id="LN12">12</td><td class="line"><span class='directive'>#define EIGEN_DENSESTORAGEBASE_H</span></td></tr>
<tr class="codeline" data-linenumber="13"><td class="num" id="LN13">13</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="14"><td class="num" id="LN14">14</td><td class="line"><span class='directive'>#if defined(EIGEN_INITIALIZE_MATRICES_BY_ZERO)</span></td></tr>
<tr class="codeline" data-linenumber="15"><td class="num" id="LN15">15</td><td class="line"><span class='directive'># define EIGEN_INITIALIZE_COEFFS</span></td></tr>
<tr class="codeline" data-linenumber="16"><td class="num" id="LN16">16</td><td class="line"><span class='directive'># define EIGEN_INITIALIZE_COEFFS_IF_THAT_OPTION_IS_ENABLED for(int i=0;i&lt;base().size();++i) coeffRef(i)=Scalar(0);</span></td></tr>
<tr class="codeline" data-linenumber="17"><td class="num" id="LN17">17</td><td class="line"><span class='directive'>#elif defined(EIGEN_INITIALIZE_MATRICES_BY_NAN)</span></td></tr>
<tr class="codeline" data-linenumber="18"><td class="num" id="LN18">18</td><td class="line"><span class='directive'># define EIGEN_INITIALIZE_COEFFS</span></td></tr>
<tr class="codeline" data-linenumber="19"><td class="num" id="LN19">19</td><td class="line"><span class='directive'># define EIGEN_INITIALIZE_COEFFS_IF_THAT_OPTION_IS_ENABLED for(int i=0;i&lt;base().size();++i) coeffRef(i)=std::numeric_limits&lt;Scalar&gt;::quiet_NaN();</span></td></tr>
<tr class="codeline" data-linenumber="20"><td class="num" id="LN20">20</td><td class="line"><span class='directive'>#else</span></td></tr>
<tr class="codeline" data-linenumber="21"><td class="num" id="LN21">21</td><td class="line"><span class='directive'># undef EIGEN_INITIALIZE_COEFFS</span></td></tr>
<tr class="codeline" data-linenumber="22"><td class="num" id="LN22">22</td><td class="line"><span class='directive'># define EIGEN_INITIALIZE_COEFFS_IF_THAT_OPTION_IS_ENABLED</span></td></tr>
<tr class="codeline" data-linenumber="23"><td class="num" id="LN23">23</td><td class="line"><span class='directive'>#endif</span></td></tr>
<tr class="codeline" data-linenumber="24"><td class="num" id="LN24">24</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="25"><td class="num" id="LN25">25</td><td class="line"><span class='keyword'>namespace</span> Eigen {</td></tr>
<tr class="codeline" data-linenumber="26"><td class="num" id="LN26">26</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="27"><td class="num" id="LN27">27</td><td class="line"><span class='keyword'>namespace</span> internal {</td></tr>
<tr class="codeline" data-linenumber="28"><td class="num" id="LN28">28</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="29"><td class="num" id="LN29">29</td><td class="line"><span class='keyword'>template</span>&lt;<span class='keyword'>int</span> MaxSizeAtCompileTime&gt; <span class='keyword'>struct</span> check_rows_cols_for_overflow {</td></tr>
<tr class="codeline" data-linenumber="30"><td class="num" id="LN30">30</td><td class="line">  <span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> Index&gt;</td></tr>
<tr class="codeline" data-linenumber="31"><td class="num" id="LN31">31</td><td class="line">  EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="32"><td class="num" id="LN32">32</td><td class="line">  <span class='keyword'>static</span> <span class='macro'>EIGEN_ALWAYS_INLINE<span class='expansion'>__attribute__((always_inline)) inline</span></span> <span class='keyword'>void</span> run(Index, Index)</td></tr>
<tr class="codeline" data-linenumber="33"><td class="num" id="LN33">33</td><td class="line">  {</td></tr>
<tr class="codeline" data-linenumber="34"><td class="num" id="LN34">34</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="35"><td class="num" id="LN35">35</td><td class="line">};</td></tr>
<tr class="codeline" data-linenumber="36"><td class="num" id="LN36">36</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="37"><td class="num" id="LN37">37</td><td class="line"><span class='keyword'>template</span>&lt;&gt; <span class='keyword'>struct</span> check_rows_cols_for_overflow&lt;Dynamic&gt; {</td></tr>
<tr class="codeline" data-linenumber="38"><td class="num" id="LN38">38</td><td class="line">  <span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> Index&gt;</td></tr>
<tr class="codeline" data-linenumber="39"><td class="num" id="LN39">39</td><td class="line">  EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="40"><td class="num" id="LN40">40</td><td class="line">  <span class='keyword'>static</span> <span class='macro'>EIGEN_ALWAYS_INLINE<span class='expansion'>__attribute__((always_inline)) inline</span></span> <span class='keyword'>void</span> run(Index rows, Index cols)</td></tr>
<tr class="codeline" data-linenumber="41"><td class="num" id="LN41">41</td><td class="line">  {</td></tr>
<tr class="codeline" data-linenumber="42"><td class="num" id="LN42">42</td><td class="line">    <span class='comment'>// http://hg.mozilla.org/mozilla-central/file/6c8a909977d3/xpcom/ds/CheckedInt.h#l242</span></td></tr>
<tr class="codeline" data-linenumber="43"><td class="num" id="LN43">43</td><td class="line">    <span class='comment'>// we assume Index is signed</span></td></tr>
<tr class="codeline" data-linenumber="44"><td class="num" id="LN44">44</td><td class="line">    Index max_index = (std::size_t(1) &lt;&lt; (8 * <span class='keyword'>sizeof</span>(Index) - 1)) - 1; <span class='comment'>// assume Index is signed</span></td></tr>
<tr class="codeline" data-linenumber="45"><td class="num" id="LN45">45</td><td class="line">    <span class='keyword'>bool</span> error = (rows == 0 || cols == 0) ? <span class='keyword'>false</span></td></tr>
<tr class="codeline" data-linenumber="46"><td class="num" id="LN46">46</td><td class="line">               : (rows &gt; max_index / cols);</td></tr>
<tr class="codeline" data-linenumber="47"><td class="num" id="LN47">47</td><td class="line">    <span class='keyword'>if</span> (error)</td></tr>
<tr class="codeline" data-linenumber="48"><td class="num" id="LN48">48</td><td class="line">      throw_std_bad_alloc();</td></tr>
<tr class="codeline" data-linenumber="49"><td class="num" id="LN49">49</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="50"><td class="num" id="LN50">50</td><td class="line">};</td></tr>
<tr class="codeline" data-linenumber="51"><td class="num" id="LN51">51</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="52"><td class="num" id="LN52">52</td><td class="line"><span class='keyword'>template</span> &lt;<span class='keyword'>typename</span> Derived,</td></tr>
<tr class="codeline" data-linenumber="53"><td class="num" id="LN53">53</td><td class="line">          <span class='keyword'>typename</span> OtherDerived = Derived,</td></tr>
<tr class="codeline" data-linenumber="54"><td class="num" id="LN54">54</td><td class="line">          <span class='keyword'>bool</span> IsVector = <span class='keyword'>bool</span>(Derived::IsVectorAtCompileTime) &amp;&amp; <span class='keyword'>bool</span>(OtherDerived::IsVectorAtCompileTime)&gt;</td></tr>
<tr class="codeline" data-linenumber="55"><td class="num" id="LN55">55</td><td class="line"><span class='keyword'>struct</span> conservative_resize_like_impl;</td></tr>
<tr class="codeline" data-linenumber="56"><td class="num" id="LN56">56</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="57"><td class="num" id="LN57">57</td><td class="line"><span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> MatrixTypeA, <span class='keyword'>typename</span> MatrixTypeB, <span class='keyword'>bool</span> SwapPointers&gt; <span class='keyword'>struct</span> matrix_swap_impl;</td></tr>
<tr class="codeline" data-linenumber="58"><td class="num" id="LN58">58</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="59"><td class="num" id="LN59">59</td><td class="line">} <span class='comment'>// end namespace internal</span></td></tr>
<tr class="codeline" data-linenumber="60"><td class="num" id="LN60">60</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="61"><td class="num" id="LN61">61</td><td class="line"><span class='directive'>#ifdef EIGEN_PARSED_BY_DOXYGEN</span></td></tr>
<tr class="codeline" data-linenumber="62"><td class="num" id="LN62">62</td><td class="line"><span class='keyword'>namespace</span> doxygen {</td></tr>
<tr class="codeline" data-linenumber="63"><td class="num" id="LN63">63</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="64"><td class="num" id="LN64">64</td><td class="line"><span class='comment'>// This is a workaround to doxygen not being able to understand the inheritance logic</span></td></tr>
<tr class="codeline" data-linenumber="65"><td class="num" id="LN65">65</td><td class="line"><span class='comment'>// when it is hidden by the dense_xpr_base helper struct.</span></td></tr>
<tr class="codeline" data-linenumber="66"><td class="num" id="LN66">66</td><td class="line"><span class='comment'>// Moreover, doxygen fails to include members that are not documented in the declaration body of</span></td></tr>
<tr class="codeline" data-linenumber="67"><td class="num" id="LN67">67</td><td class="line"><span class='comment'>// MatrixBase if we inherits MatrixBase&lt;Matrix&lt;_Scalar, _Rows, _Cols, _Options, _MaxRows, _MaxCols&gt; &gt;,</span></td></tr>
<tr class="codeline" data-linenumber="68"><td class="num" id="LN68">68</td><td class="line"><span class='comment'>// this is why we simply inherits MatrixBase, though this does not make sense.</span></td></tr>
<tr class="codeline" data-linenumber="69"><td class="num" id="LN69">69</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="70"><td class="num" id="LN70">70</td><td class="line"><span class='comment'>/** This class is just a workaround for Doxygen and it does not not actually exist. */</span></td></tr>
<tr class="codeline" data-linenumber="71"><td class="num" id="LN71">71</td><td class="line"><span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> Derived&gt; <span class='keyword'>struct</span> dense_xpr_base_dispatcher;</td></tr>
<tr class="codeline" data-linenumber="72"><td class="num" id="LN72">72</td><td class="line"><span class='comment'>/** This class is just a workaround for Doxygen and it does not not actually exist. */</span></td></tr>
<tr class="codeline" data-linenumber="73"><td class="num" id="LN73">73</td><td class="line"><span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> _Scalar, <span class='keyword'>int</span> _Rows, <span class='keyword'>int</span> _Cols, <span class='keyword'>int</span> _Options, <span class='keyword'>int</span> _MaxRows, <span class='keyword'>int</span> _MaxCols&gt;</td></tr>
<tr class="codeline" data-linenumber="74"><td class="num" id="LN74">74</td><td class="line"><span class='keyword'>struct</span> dense_xpr_base_dispatcher&lt;Matrix&lt;_Scalar, _Rows, _Cols, _Options, _MaxRows, _MaxCols&gt; &gt;</td></tr>
<tr class="codeline" data-linenumber="75"><td class="num" id="LN75">75</td><td class="line">    : <span class='keyword'>public</span> MatrixBase {};</td></tr>
<tr class="codeline" data-linenumber="76"><td class="num" id="LN76">76</td><td class="line"><span class='comment'>/** This class is just a workaround for Doxygen and it does not not actually exist. */</span></td></tr>
<tr class="codeline" data-linenumber="77"><td class="num" id="LN77">77</td><td class="line"><span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> _Scalar, <span class='keyword'>int</span> _Rows, <span class='keyword'>int</span> _Cols, <span class='keyword'>int</span> _Options, <span class='keyword'>int</span> _MaxRows, <span class='keyword'>int</span> _MaxCols&gt;</td></tr>
<tr class="codeline" data-linenumber="78"><td class="num" id="LN78">78</td><td class="line"><span class='keyword'>struct</span> dense_xpr_base_dispatcher&lt;Array&lt;_Scalar, _Rows, _Cols, _Options, _MaxRows, _MaxCols&gt; &gt;</td></tr>
<tr class="codeline" data-linenumber="79"><td class="num" id="LN79">79</td><td class="line">    : <span class='keyword'>public</span> ArrayBase {};</td></tr>
<tr class="codeline" data-linenumber="80"><td class="num" id="LN80">80</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="81"><td class="num" id="LN81">81</td><td class="line">} <span class='comment'>// namespace doxygen</span></td></tr>
<tr class="codeline" data-linenumber="82"><td class="num" id="LN82">82</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="83"><td class="num" id="LN83">83</td><td class="line"><span class='comment'>/** \class PlainObjectBase</span></td></tr>
<tr class="codeline" data-linenumber="84"><td class="num" id="LN84">84</td><td class="line">  <span class='comment'>* \ingroup Core_Module</span></td></tr>
<tr class="codeline" data-linenumber="85"><td class="num" id="LN85">85</td><td class="line">  <span class='comment'>* \brief %Dense storage base class for matrices and arrays.</span></td></tr>
<tr class="codeline" data-linenumber="86"><td class="num" id="LN86">86</td><td class="line">  <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="87"><td class="num" id="LN87">87</td><td class="line">  <span class='comment'>* This class can be extended with the help of the plugin mechanism described on the page</span></td></tr>
<tr class="codeline" data-linenumber="88"><td class="num" id="LN88">88</td><td class="line">  <span class='comment'>* \ref TopicCustomizing_Plugins by defining the preprocessor symbol \c EIGEN_PLAINOBJECTBASE_PLUGIN.</span></td></tr>
<tr class="codeline" data-linenumber="89"><td class="num" id="LN89">89</td><td class="line">  <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="90"><td class="num" id="LN90">90</td><td class="line">  <span class='comment'>* \tparam Derived is the derived type, e.g., a Matrix or Array</span></td></tr>
<tr class="codeline" data-linenumber="91"><td class="num" id="LN91">91</td><td class="line">  <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="92"><td class="num" id="LN92">92</td><td class="line">  <span class='comment'>* \sa \ref TopicClassHierarchy</span></td></tr>
<tr class="codeline" data-linenumber="93"><td class="num" id="LN93">93</td><td class="line">  <span class='comment'>*/</span></td></tr>
<tr class="codeline" data-linenumber="94"><td class="num" id="LN94">94</td><td class="line"><span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> Derived&gt;</td></tr>
<tr class="codeline" data-linenumber="95"><td class="num" id="LN95">95</td><td class="line"><span class='keyword'>class</span> PlainObjectBase : <span class='keyword'>public</span> doxygen::dense_xpr_base_dispatcher&lt;Derived&gt;</td></tr>
<tr class="codeline" data-linenumber="96"><td class="num" id="LN96">96</td><td class="line"><span class='directive'>#else</span></td></tr>
<tr class="codeline" data-linenumber="97"><td class="num" id="LN97">97</td><td class="line"><span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> Derived&gt;</td></tr>
<tr class="codeline" data-linenumber="98"><td class="num" id="LN98">98</td><td class="line"><span class='keyword'>class</span> PlainObjectBase : <span class='keyword'>public</span> internal::dense_xpr_base&lt;Derived&gt;::type</td></tr>
<tr class="codeline" data-linenumber="99"><td class="num" id="LN99">99</td><td class="line"><span class='directive'>#endif</span></td></tr>
<tr class="codeline" data-linenumber="100"><td class="num" id="LN100">100</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="101"><td class="num" id="LN101">101</td><td class="line">  <span class='keyword'>public</span>:</td></tr>
<tr class="codeline" data-linenumber="102"><td class="num" id="LN102">102</td><td class="line">    <span class='keyword'>enum</span> { Options = internal::traits&lt;Derived&gt;::Options };</td></tr>
<tr class="codeline" data-linenumber="103"><td class="num" id="LN103">103</td><td class="line">    <span class='keyword'>typedef</span> <span class='keyword'>typename</span> internal::dense_xpr_base&lt;Derived&gt;::type Base;</td></tr>
<tr class="codeline" data-linenumber="104"><td class="num" id="LN104">104</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="105"><td class="num" id="LN105">105</td><td class="line">    <span class='keyword'>typedef</span> <span class='keyword'>typename</span> internal::traits&lt;Derived&gt;::StorageKind StorageKind;</td></tr>
<tr class="codeline" data-linenumber="106"><td class="num" id="LN106">106</td><td class="line">    <span class='keyword'>typedef</span> <span class='keyword'>typename</span> internal::traits&lt;Derived&gt;::Scalar Scalar;</td></tr>
<tr class="codeline" data-linenumber="107"><td class="num" id="LN107">107</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="108"><td class="num" id="LN108">108</td><td class="line">    <span class='keyword'>typedef</span> <span class='keyword'>typename</span> internal::packet_traits&lt;Scalar&gt;::type PacketScalar;</td></tr>
<tr class="codeline" data-linenumber="109"><td class="num" id="LN109">109</td><td class="line">    <span class='keyword'>typedef</span> <span class='keyword'>typename</span> NumTraits&lt;Scalar&gt;::Real RealScalar;</td></tr>
<tr class="codeline" data-linenumber="110"><td class="num" id="LN110">110</td><td class="line">    <span class='keyword'>typedef</span> Derived DenseType;</td></tr>
<tr class="codeline" data-linenumber="111"><td class="num" id="LN111">111</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="112"><td class="num" id="LN112">112</td><td class="line">    <span class='keyword'>using</span> Base::RowsAtCompileTime;</td></tr>
<tr class="codeline" data-linenumber="113"><td class="num" id="LN113">113</td><td class="line">    <span class='keyword'>using</span> Base::ColsAtCompileTime;</td></tr>
<tr class="codeline" data-linenumber="114"><td class="num" id="LN114">114</td><td class="line">    <span class='keyword'>using</span> Base::SizeAtCompileTime;</td></tr>
<tr class="codeline" data-linenumber="115"><td class="num" id="LN115">115</td><td class="line">    <span class='keyword'>using</span> Base::MaxRowsAtCompileTime;</td></tr>
<tr class="codeline" data-linenumber="116"><td class="num" id="LN116">116</td><td class="line">    <span class='keyword'>using</span> Base::MaxColsAtCompileTime;</td></tr>
<tr class="codeline" data-linenumber="117"><td class="num" id="LN117">117</td><td class="line">    <span class='keyword'>using</span> Base::MaxSizeAtCompileTime;</td></tr>
<tr class="codeline" data-linenumber="118"><td class="num" id="LN118">118</td><td class="line">    <span class='keyword'>using</span> Base::IsVectorAtCompileTime;</td></tr>
<tr class="codeline" data-linenumber="119"><td class="num" id="LN119">119</td><td class="line">    <span class='keyword'>using</span> Base::Flags;</td></tr>
<tr class="codeline" data-linenumber="120"><td class="num" id="LN120">120</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="121"><td class="num" id="LN121">121</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> PlainObjectType, <span class='keyword'>int</span> MapOptions, <span class='keyword'>typename</span> StrideType&gt; <span class='keyword'>friend</span> <span class='keyword'>class</span> Eigen::Map;</td></tr>
<tr class="codeline" data-linenumber="122"><td class="num" id="LN122">122</td><td class="line">    <span class='keyword'>friend</span>  <span class='keyword'>class</span> Eigen::Map&lt;Derived, Unaligned&gt;;</td></tr>
<tr class="codeline" data-linenumber="123"><td class="num" id="LN123">123</td><td class="line">    <span class='keyword'>typedef</span> Eigen::Map&lt;Derived, Unaligned&gt;  MapType;</td></tr>
<tr class="codeline" data-linenumber="124"><td class="num" id="LN124">124</td><td class="line">    <span class='keyword'>friend</span>  <span class='keyword'>class</span> Eigen::Map&lt;<span class='keyword'>const</span> Derived, Unaligned&gt;;</td></tr>
<tr class="codeline" data-linenumber="125"><td class="num" id="LN125">125</td><td class="line">    <span class='keyword'>typedef</span> <span class='keyword'>const</span> Eigen::Map&lt;<span class='keyword'>const</span> Derived, Unaligned&gt; ConstMapType;</td></tr>
<tr class="codeline" data-linenumber="126"><td class="num" id="LN126">126</td><td class="line"><span class='directive'>#if <span class='macro'>EIGEN_MAX_ALIGN_BYTES<span class='expansion'>16</span></span>&gt;0</span></td></tr>
<tr class="codeline" data-linenumber="127"><td class="num" id="LN127">127</td><td class="line">    <span class='comment'>// for EIGEN_MAX_ALIGN_BYTES==0, AlignedMax==Unaligned, and many compilers generate warnings for friend-ing a class twice.</span></td></tr>
<tr class="codeline" data-linenumber="128"><td class="num" id="LN128">128</td><td class="line">    <span class='keyword'>friend</span>  <span class='keyword'>class</span> Eigen::Map&lt;Derived, AlignedMax&gt;;</td></tr>
<tr class="codeline" data-linenumber="129"><td class="num" id="LN129">129</td><td class="line">    <span class='keyword'>friend</span>  <span class='keyword'>class</span> Eigen::Map&lt;<span class='keyword'>const</span> Derived, AlignedMax&gt;;</td></tr>
<tr class="codeline" data-linenumber="130"><td class="num" id="LN130">130</td><td class="line"><span class='directive'>#endif</span></td></tr>
<tr class="codeline" data-linenumber="131"><td class="num" id="LN131">131</td><td class="line">    <span class='keyword'>typedef</span> Eigen::Map&lt;Derived, AlignedMax&gt; AlignedMapType;</td></tr>
<tr class="codeline" data-linenumber="132"><td class="num" id="LN132">132</td><td class="line">    <span class='keyword'>typedef</span> <span class='keyword'>const</span> Eigen::Map&lt;<span class='keyword'>const</span> Derived, AlignedMax&gt; ConstAlignedMapType;</td></tr>
<tr class="codeline" data-linenumber="133"><td class="num" id="LN133">133</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> StrideType&gt; <span class='keyword'>struct</span> StridedMapType { <span class='keyword'>typedef</span> Eigen::Map&lt;Derived, Unaligned, StrideType&gt; type; };</td></tr>
<tr class="codeline" data-linenumber="134"><td class="num" id="LN134">134</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> StrideType&gt; <span class='keyword'>struct</span> StridedConstMapType { <span class='keyword'>typedef</span> Eigen::Map&lt;<span class='keyword'>const</span> Derived, Unaligned, StrideType&gt; type; };</td></tr>
<tr class="codeline" data-linenumber="135"><td class="num" id="LN135">135</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> StrideType&gt; <span class='keyword'>struct</span> StridedAlignedMapType { <span class='keyword'>typedef</span> Eigen::Map&lt;Derived, AlignedMax, StrideType&gt; type; };</td></tr>
<tr class="codeline" data-linenumber="136"><td class="num" id="LN136">136</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> StrideType&gt; <span class='keyword'>struct</span> StridedConstAlignedMapType { <span class='keyword'>typedef</span> Eigen::Map&lt;<span class='keyword'>const</span> Derived, AlignedMax, StrideType&gt; type; };</td></tr>
<tr class="codeline" data-linenumber="137"><td class="num" id="LN137">137</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="138"><td class="num" id="LN138">138</td><td class="line">  <span class='keyword'>protected</span>:</td></tr>
<tr class="codeline" data-linenumber="139"><td class="num" id="LN139">139</td><td class="line">    DenseStorage&lt;Scalar, Base::MaxSizeAtCompileTime, Base::RowsAtCompileTime, Base::ColsAtCompileTime, Options&gt; m_storage;</td></tr>
<tr class="codeline" data-linenumber="140"><td class="num" id="LN140">140</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="141"><td class="num" id="LN141">141</td><td class="line">  <span class='keyword'>public</span>:</td></tr>
<tr class="codeline" data-linenumber="142"><td class="num" id="LN142">142</td><td class="line">    <span class='keyword'>enum</span> { NeedsToAlign = (SizeAtCompileTime != Dynamic) &amp;&amp; (internal::traits&lt;Derived&gt;::Alignment&gt;0) };</td></tr>
<tr class="codeline" data-linenumber="143"><td class="num" id="LN143">143</td><td class="line">    <span class='macro'>EIGEN_MAKE_ALIGNED_OPERATOR_NEW_IF(NeedsToAlign)<span class='expansion'>void *operator new(std::size_t size) { return Eigen::internal<br>::conditional_aligned_malloc&lt;NeedsToAlign&gt;(size); } void<br> *operator new[](std::size_t size) { return Eigen::internal::<br>conditional_aligned_malloc&lt;NeedsToAlign&gt;(size); } void operator<br> delete(void * ptr) noexcept(true) { Eigen::internal::conditional_aligned_free<br>&lt;NeedsToAlign&gt;(ptr); } void operator delete[](void * ptr<br>) noexcept(true) { Eigen::internal::conditional_aligned_free&lt;<br>NeedsToAlign&gt;(ptr); } void operator delete(void * ptr, std<br>::size_t ) noexcept(true) { Eigen::internal::conditional_aligned_free<br>&lt;NeedsToAlign&gt;(ptr); } void operator delete[](void * ptr<br>, std::size_t ) noexcept(true) { Eigen::internal::conditional_aligned_free<br>&lt;NeedsToAlign&gt;(ptr); } static void *operator new(std::size_t<br> size, void *ptr) { return ::operator new(size,ptr); } static<br> void *operator new[](std::size_t size, void* ptr) { return ::<br>operator new[](size,ptr); } void operator delete(void * memory<br>, void *ptr) noexcept(true) { return ::operator delete(memory<br>,ptr); } void operator delete[](void * memory, void *ptr) noexcept<br>(true) { return ::operator delete[](memory,ptr); } void* operator<br> new(std::size_t size, const std::nothrow_t&amp;) noexcept(true<br>) { try { return Eigen::internal::conditional_aligned_malloc&lt;<br>NeedsToAlign&gt;(size); } catch (...) { return 0; } } void operator<br> delete(void *ptr, const std::nothrow_t&amp;) noexcept(true) {<br> Eigen::internal::conditional_aligned_free&lt;NeedsToAlign&gt;<br>(ptr); } typedef void eigen_aligned_operator_new_marker_type;</span></span></td></tr>
<tr class="codeline" data-linenumber="144"><td class="num" id="LN144">144</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="145"><td class="num" id="LN145">145</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="146"><td class="num" id="LN146">146</td><td class="line">    Base&amp; base() { <span class='keyword'>return</span> *<span class='keyword'>static_cast</span>&lt;Base*&gt;(<span class='keyword'>this</span>); }</td></tr>
<tr class="codeline" data-linenumber="147"><td class="num" id="LN147">147</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="148"><td class="num" id="LN148">148</td><td class="line">    <span class='keyword'>const</span> Base&amp; base() <span class='keyword'>const</span> { <span class='keyword'>return</span> *<span class='keyword'>static_cast</span>&lt;<span class='keyword'>const</span> Base*&gt;(<span class='keyword'>this</span>); }</td></tr>
<tr class="codeline" data-linenumber="149"><td class="num" id="LN149">149</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="150"><td class="num" id="LN150">150</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="151"><td class="num" id="LN151">151</td><td class="line">    <span class='macro'>EIGEN_STRONG_INLINE<span class='expansion'>inline</span></span> Index rows() <span class='keyword'>const</span> { <span class='keyword'>return</span> m_storage.rows(); }</td></tr>
<tr class="codeline" data-linenumber="152"><td class="num" id="LN152">152</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="153"><td class="num" id="LN153">153</td><td class="line">    <span class='macro'>EIGEN_STRONG_INLINE<span class='expansion'>inline</span></span> Index cols() <span class='keyword'>const</span> { <span class='keyword'>return</span> m_storage.cols(); }</td></tr>
<tr class="codeline" data-linenumber="154"><td class="num" id="LN154">154</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="155"><td class="num" id="LN155">155</td><td class="line">    <span class='comment'>/** This is an overloaded version of DenseCoeffsBase&lt;Derived,ReadOnlyAccessors&gt;::coeff(Index,Index) const</span></td></tr>
<tr class="codeline" data-linenumber="156"><td class="num" id="LN156">156</td><td class="line">      <span class='comment'>* provided to by-pass the creation of an evaluator of the expression, thus saving compilation efforts.</span></td></tr>
<tr class="codeline" data-linenumber="157"><td class="num" id="LN157">157</td><td class="line">      <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="158"><td class="num" id="LN158">158</td><td class="line">      <span class='comment'>* See DenseCoeffsBase&lt;Derived,ReadOnlyAccessors&gt;::coeff(Index) const for details. */</span></td></tr>
<tr class="codeline" data-linenumber="159"><td class="num" id="LN159">159</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="160"><td class="num" id="LN160">160</td><td class="line">    <span class='macro'>EIGEN_STRONG_INLINE<span class='expansion'>inline</span></span> <span class='keyword'>const</span> Scalar&amp; coeff(Index rowId, Index colId) <span class='keyword'>const</span></td></tr>
<tr class="codeline" data-linenumber="161"><td class="num" id="LN161">161</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="162"><td class="num" id="LN162">162</td><td class="line">      <span class='keyword'>if</span>(Flags &amp; RowMajorBit)</td></tr>
<tr class="codeline" data-linenumber="163"><td class="num" id="LN163">163</td><td class="line">        <span class='keyword'>return</span> m_storage.data()[colId + rowId * m_storage.cols()];</td></tr>
<tr class="codeline" data-linenumber="164"><td class="num" id="LN164">164</td><td class="line">      <span class='keyword'>else</span> <span class='comment'>// column-major</span></td></tr>
<tr class="codeline" data-linenumber="165"><td class="num" id="LN165">165</td><td class="line">        <span class='keyword'>return</span> m_storage.data()[rowId + colId * m_storage.rows()];</td></tr>
<tr class="codeline" data-linenumber="166"><td class="num" id="LN166">166</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="167"><td class="num" id="LN167">167</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="168"><td class="num" id="LN168">168</td><td class="line">    <span class='comment'>/** This is an overloaded version of DenseCoeffsBase&lt;Derived,ReadOnlyAccessors&gt;::coeff(Index) const</span></td></tr>
<tr class="codeline" data-linenumber="169"><td class="num" id="LN169">169</td><td class="line">      <span class='comment'>* provided to by-pass the creation of an evaluator of the expression, thus saving compilation efforts.</span></td></tr>
<tr class="codeline" data-linenumber="170"><td class="num" id="LN170">170</td><td class="line">      <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="171"><td class="num" id="LN171">171</td><td class="line">      <span class='comment'>* See DenseCoeffsBase&lt;Derived,ReadOnlyAccessors&gt;::coeff(Index) const for details. */</span></td></tr>
<tr class="codeline" data-linenumber="172"><td class="num" id="LN172">172</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="173"><td class="num" id="LN173">173</td><td class="line">    <span class='macro'>EIGEN_STRONG_INLINE<span class='expansion'>inline</span></span> <span class='keyword'>const</span> Scalar&amp; coeff(Index index) <span class='keyword'>const</span></td></tr>
<tr class="codeline" data-linenumber="174"><td class="num" id="LN174">174</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="175"><td class="num" id="LN175">175</td><td class="line">      <span class='keyword'>return</span> m_storage.data()[index];</td></tr>
<tr class="codeline" data-linenumber="176"><td class="num" id="LN176">176</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="177"><td class="num" id="LN177">177</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="178"><td class="num" id="LN178">178</td><td class="line">    <span class='comment'>/** This is an overloaded version of DenseCoeffsBase&lt;Derived,WriteAccessors&gt;::coeffRef(Index,Index) const</span></td></tr>
<tr class="codeline" data-linenumber="179"><td class="num" id="LN179">179</td><td class="line">      <span class='comment'>* provided to by-pass the creation of an evaluator of the expression, thus saving compilation efforts.</span></td></tr>
<tr class="codeline" data-linenumber="180"><td class="num" id="LN180">180</td><td class="line">      <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="181"><td class="num" id="LN181">181</td><td class="line">      <span class='comment'>* See DenseCoeffsBase&lt;Derived,WriteAccessors&gt;::coeffRef(Index,Index) const for details. */</span></td></tr>
<tr class="codeline" data-linenumber="182"><td class="num" id="LN182">182</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="183"><td class="num" id="LN183">183</td><td class="line">    <span class='macro'>EIGEN_STRONG_INLINE<span class='expansion'>inline</span></span> Scalar&amp; coeffRef(Index rowId, Index colId)</td></tr>
<tr class="codeline" data-linenumber="184"><td class="num" id="LN184">184</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="185"><td class="num" id="LN185">185</td><td class="line">      <span class='keyword'>if</span>(Flags &amp; RowMajorBit)</td></tr>
<tr class="codeline" data-linenumber="186"><td class="num" id="LN186">186</td><td class="line">        <span class='keyword'>return</span> m_storage.data()[colId + rowId * m_storage.cols()];</td></tr>
<tr class="codeline" data-linenumber="187"><td class="num" id="LN187">187</td><td class="line">      <span class='keyword'>else</span> <span class='comment'>// column-major</span></td></tr>
<tr class="codeline" data-linenumber="188"><td class="num" id="LN188">188</td><td class="line">        <span class='keyword'>return</span> m_storage.data()[rowId + colId * m_storage.rows()];</td></tr>
<tr class="codeline" data-linenumber="189"><td class="num" id="LN189">189</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="190"><td class="num" id="LN190">190</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="191"><td class="num" id="LN191">191</td><td class="line">    <span class='comment'>/** This is an overloaded version of DenseCoeffsBase&lt;Derived,WriteAccessors&gt;::coeffRef(Index) const</span></td></tr>
<tr class="codeline" data-linenumber="192"><td class="num" id="LN192">192</td><td class="line">      <span class='comment'>* provided to by-pass the creation of an evaluator of the expression, thus saving compilation efforts.</span></td></tr>
<tr class="codeline" data-linenumber="193"><td class="num" id="LN193">193</td><td class="line">      <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="194"><td class="num" id="LN194">194</td><td class="line">      <span class='comment'>* See DenseCoeffsBase&lt;Derived,WriteAccessors&gt;::coeffRef(Index) const for details. */</span></td></tr>
<tr class="codeline" data-linenumber="195"><td class="num" id="LN195">195</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="196"><td class="num" id="LN196">196</td><td class="line">    <span class='macro'>EIGEN_STRONG_INLINE<span class='expansion'>inline</span></span> Scalar&amp; coeffRef(Index index)</td></tr>
<tr class="codeline" data-linenumber="197"><td class="num" id="LN197">197</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="198"><td class="num" id="LN198">198</td><td class="line">      <span class='keyword'>return</span> m_storage.data()[index];</td></tr>
<tr class="codeline" data-linenumber="199"><td class="num" id="LN199">199</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="200"><td class="num" id="LN200">200</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="201"><td class="num" id="LN201">201</td><td class="line">    <span class='comment'>/** This is the const version of coeffRef(Index,Index) which is thus synonym of coeff(Index,Index).</span></td></tr>
<tr class="codeline" data-linenumber="202"><td class="num" id="LN202">202</td><td class="line">      <span class='comment'>* It is provided for convenience. */</span></td></tr>
<tr class="codeline" data-linenumber="203"><td class="num" id="LN203">203</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="204"><td class="num" id="LN204">204</td><td class="line">    <span class='macro'>EIGEN_STRONG_INLINE<span class='expansion'>inline</span></span> <span class='keyword'>const</span> Scalar&amp; coeffRef(Index rowId, Index colId) <span class='keyword'>const</span></td></tr>
<tr class="codeline" data-linenumber="205"><td class="num" id="LN205">205</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="206"><td class="num" id="LN206">206</td><td class="line">      <span class='keyword'>if</span>(Flags &amp; RowMajorBit)</td></tr>
<tr class="codeline" data-linenumber="207"><td class="num" id="LN207">207</td><td class="line">        <span class='keyword'>return</span> m_storage.data()[colId + rowId * m_storage.cols()];</td></tr>
<tr class="codeline" data-linenumber="208"><td class="num" id="LN208">208</td><td class="line">      <span class='keyword'>else</span> <span class='comment'>// column-major</span></td></tr>
<tr class="codeline" data-linenumber="209"><td class="num" id="LN209">209</td><td class="line">        <span class='keyword'>return</span> m_storage.data()[rowId + colId * m_storage.rows()];</td></tr>
<tr class="codeline" data-linenumber="210"><td class="num" id="LN210">210</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="211"><td class="num" id="LN211">211</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="212"><td class="num" id="LN212">212</td><td class="line">    <span class='comment'>/** This is the const version of coeffRef(Index) which is thus synonym of coeff(Index).</span></td></tr>
<tr class="codeline" data-linenumber="213"><td class="num" id="LN213">213</td><td class="line">      <span class='comment'>* It is provided for convenience. */</span></td></tr>
<tr class="codeline" data-linenumber="214"><td class="num" id="LN214">214</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="215"><td class="num" id="LN215">215</td><td class="line">    <span class='macro'>EIGEN_STRONG_INLINE<span class='expansion'>inline</span></span> <span class='keyword'>const</span> Scalar&amp; coeffRef(Index index) <span class='keyword'>const</span></td></tr>
<tr class="codeline" data-linenumber="216"><td class="num" id="LN216">216</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="217"><td class="num" id="LN217">217</td><td class="line">      <span class='keyword'>return</span> m_storage.data()[index];</td></tr>
<tr class="codeline" data-linenumber="218"><td class="num" id="LN218">218</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="219"><td class="num" id="LN219">219</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="220"><td class="num" id="LN220">220</td><td class="line">    <span class='comment'>/** \internal */</span></td></tr>
<tr class="codeline" data-linenumber="221"><td class="num" id="LN221">221</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>int</span> LoadMode&gt;</td></tr>
<tr class="codeline" data-linenumber="222"><td class="num" id="LN222">222</td><td class="line">    <span class='macro'>EIGEN_STRONG_INLINE<span class='expansion'>inline</span></span> PacketScalar packet(Index rowId, Index colId) <span class='keyword'>const</span></td></tr>
<tr class="codeline" data-linenumber="223"><td class="num" id="LN223">223</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="224"><td class="num" id="LN224">224</td><td class="line">      <span class='keyword'>return</span> internal::ploadt&lt;PacketScalar, LoadMode&gt;</td></tr>
<tr class="codeline" data-linenumber="225"><td class="num" id="LN225">225</td><td class="line">               (m_storage.data() + (Flags &amp; RowMajorBit</td></tr>
<tr class="codeline" data-linenumber="226"><td class="num" id="LN226">226</td><td class="line">                                   ? colId + rowId * m_storage.cols()</td></tr>
<tr class="codeline" data-linenumber="227"><td class="num" id="LN227">227</td><td class="line">                                   : rowId + colId * m_storage.rows()));</td></tr>
<tr class="codeline" data-linenumber="228"><td class="num" id="LN228">228</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="229"><td class="num" id="LN229">229</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="230"><td class="num" id="LN230">230</td><td class="line">    <span class='comment'>/** \internal */</span></td></tr>
<tr class="codeline" data-linenumber="231"><td class="num" id="LN231">231</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>int</span> LoadMode&gt;</td></tr>
<tr class="codeline" data-linenumber="232"><td class="num" id="LN232">232</td><td class="line">    <span class='macro'>EIGEN_STRONG_INLINE<span class='expansion'>inline</span></span> PacketScalar packet(Index index) <span class='keyword'>const</span></td></tr>
<tr class="codeline" data-linenumber="233"><td class="num" id="LN233">233</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="234"><td class="num" id="LN234">234</td><td class="line">      <span class='keyword'>return</span> internal::ploadt&lt;PacketScalar, LoadMode&gt;(m_storage.data() + index);</td></tr>
<tr class="codeline" data-linenumber="235"><td class="num" id="LN235">235</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="236"><td class="num" id="LN236">236</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="237"><td class="num" id="LN237">237</td><td class="line">    <span class='comment'>/** \internal */</span></td></tr>
<tr class="codeline" data-linenumber="238"><td class="num" id="LN238">238</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>int</span> StoreMode&gt;</td></tr>
<tr class="codeline" data-linenumber="239"><td class="num" id="LN239">239</td><td class="line">    <span class='macro'>EIGEN_STRONG_INLINE<span class='expansion'>inline</span></span> <span class='keyword'>void</span> writePacket(Index rowId, Index colId, <span class='keyword'>const</span> PacketScalar&amp; val)</td></tr>
<tr class="codeline" data-linenumber="240"><td class="num" id="LN240">240</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="241"><td class="num" id="LN241">241</td><td class="line">      internal::pstoret&lt;Scalar, PacketScalar, StoreMode&gt;</td></tr>
<tr class="codeline" data-linenumber="242"><td class="num" id="LN242">242</td><td class="line">              (m_storage.data() + (Flags &amp; RowMajorBit</td></tr>
<tr class="codeline" data-linenumber="243"><td class="num" id="LN243">243</td><td class="line">                                   ? colId + rowId * m_storage.cols()</td></tr>
<tr class="codeline" data-linenumber="244"><td class="num" id="LN244">244</td><td class="line">                                   : rowId + colId * m_storage.rows()), val);</td></tr>
<tr class="codeline" data-linenumber="245"><td class="num" id="LN245">245</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="246"><td class="num" id="LN246">246</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="247"><td class="num" id="LN247">247</td><td class="line">    <span class='comment'>/** \internal */</span></td></tr>
<tr class="codeline" data-linenumber="248"><td class="num" id="LN248">248</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>int</span> StoreMode&gt;</td></tr>
<tr class="codeline" data-linenumber="249"><td class="num" id="LN249">249</td><td class="line">    <span class='macro'>EIGEN_STRONG_INLINE<span class='expansion'>inline</span></span> <span class='keyword'>void</span> writePacket(Index index, <span class='keyword'>const</span> PacketScalar&amp; val)</td></tr>
<tr class="codeline" data-linenumber="250"><td class="num" id="LN250">250</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="251"><td class="num" id="LN251">251</td><td class="line">      internal::pstoret&lt;Scalar, PacketScalar, StoreMode&gt;(m_storage.data() + index, val);</td></tr>
<tr class="codeline" data-linenumber="252"><td class="num" id="LN252">252</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="253"><td class="num" id="LN253">253</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="254"><td class="num" id="LN254">254</td><td class="line">    <span class='comment'>/** \returns a const pointer to the data array of this matrix */</span></td></tr>
<tr class="codeline" data-linenumber="255"><td class="num" id="LN255">255</td><td class="line">    EIGEN_DEVICE_FUNC <span class='macro'>EIGEN_STRONG_INLINE<span class='expansion'>inline</span></span> <span class='keyword'>const</span> Scalar *data() <span class='keyword'>const</span></td></tr>
<tr class="codeline" data-linenumber="256"><td class="num" id="LN256">256</td><td class="line">    { <span class='keyword'>return</span> m_storage.data(); }</td></tr>
<tr class="codeline" data-linenumber="257"><td class="num" id="LN257">257</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="258"><td class="num" id="LN258">258</td><td class="line">    <span class='comment'>/** \returns a pointer to the data array of this matrix */</span></td></tr>
<tr class="codeline" data-linenumber="259"><td class="num" id="LN259">259</td><td class="line">    EIGEN_DEVICE_FUNC <span class='macro'>EIGEN_STRONG_INLINE<span class='expansion'>inline</span></span> Scalar *data()</td></tr>
<tr class="codeline" data-linenumber="260"><td class="num" id="LN260">260</td><td class="line">    { <span class='keyword'>return</span> <span class="mrange">m_storage.data()</span>; }</td></tr>
<tr><td class="num"></td><td class="line"><div id="Path68" class="msg msgEvent" style="margin-left:14ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">68</div></td><td><div class="PathNav"><a href="#Path67" title="Previous event (67)">&#x2190;</a></div></td></td><td>Calling 'DenseStorage::data'</td><td><div class="PathNav"><a href="#EndPath" title="Next event (69)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr class="codeline" data-linenumber="261"><td class="num" id="LN261">261</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="262"><td class="num" id="LN262">262</td><td class="line">    <span class='comment'>/** Resizes \c *this to a \a rows x \a cols matrix.</span></td></tr>
<tr class="codeline" data-linenumber="263"><td class="num" id="LN263">263</td><td class="line">      <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="264"><td class="num" id="LN264">264</td><td class="line">      <span class='comment'>* This method is intended for dynamic-size matrices, although it is legal to call it on any</span></td></tr>
<tr class="codeline" data-linenumber="265"><td class="num" id="LN265">265</td><td class="line">      <span class='comment'>* matrix as long as fixed dimensions are left unchanged. If you only want to change the number</span></td></tr>
<tr class="codeline" data-linenumber="266"><td class="num" id="LN266">266</td><td class="line">      <span class='comment'>* of rows and/or of columns, you can use resize(NoChange_t, Index), resize(Index, NoChange_t).</span></td></tr>
<tr class="codeline" data-linenumber="267"><td class="num" id="LN267">267</td><td class="line">      <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="268"><td class="num" id="LN268">268</td><td class="line">      <span class='comment'>* If the current number of coefficients of \c *this exactly matches the</span></td></tr>
<tr class="codeline" data-linenumber="269"><td class="num" id="LN269">269</td><td class="line">      <span class='comment'>* product \a rows * \a cols, then no memory allocation is performed and</span></td></tr>
<tr class="codeline" data-linenumber="270"><td class="num" id="LN270">270</td><td class="line">      <span class='comment'>* the current values are left unchanged. In all other cases, including</span></td></tr>
<tr class="codeline" data-linenumber="271"><td class="num" id="LN271">271</td><td class="line">      <span class='comment'>* shrinking, the data is reallocated and all previous values are lost.</span></td></tr>
<tr class="codeline" data-linenumber="272"><td class="num" id="LN272">272</td><td class="line">      <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="273"><td class="num" id="LN273">273</td><td class="line">      <span class='comment'>* Example: \include Matrix_resize_int_int.cpp</span></td></tr>
<tr class="codeline" data-linenumber="274"><td class="num" id="LN274">274</td><td class="line">      <span class='comment'>* Output: \verbinclude Matrix_resize_int_int.out</span></td></tr>
<tr class="codeline" data-linenumber="275"><td class="num" id="LN275">275</td><td class="line">      <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="276"><td class="num" id="LN276">276</td><td class="line">      <span class='comment'>* \sa resize(Index) for vectors, resize(NoChange_t, Index), resize(Index, NoChange_t)</span></td></tr>
<tr class="codeline" data-linenumber="277"><td class="num" id="LN277">277</td><td class="line">      <span class='comment'>*/</span></td></tr>
<tr class="codeline" data-linenumber="278"><td class="num" id="LN278">278</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="279"><td class="num" id="LN279">279</td><td class="line">    <span class='macro'>EIGEN_STRONG_INLINE<span class='expansion'>inline</span></span> <span class='keyword'>void</span> resize(Index rows, Index cols)</td></tr>
<tr class="codeline" data-linenumber="280"><td class="num" id="LN280">280</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="281"><td class="num" id="LN281">281</td><td class="line">      <span class='macro'>eigen_assert(   EIGEN_IMPLIES(RowsAtCompileTime!=Dynamic,rows==RowsAtCompileTime)<span class='expansion'>(__builtin_expect(!((!(RowsAtCompileTime!=Dynamic) || (rows==<br>RowsAtCompileTime)) &amp;&amp; (!(ColsAtCompileTime!=Dynamic)<br> || (cols==ColsAtCompileTime)) &amp;&amp; (!(RowsAtCompileTime<br>==Dynamic &amp;&amp; MaxRowsAtCompileTime!=Dynamic) || (rows&lt;=<br>MaxRowsAtCompileTime)) &amp;&amp; (!(ColsAtCompileTime==Dynamic<br> &amp;&amp; MaxColsAtCompileTime!=Dynamic) || (cols&lt;=MaxColsAtCompileTime<br>)) &amp;&amp; rows&gt;=0 &amp;&amp; cols&gt;=0 &amp;&amp; "Invalid sizes when resizing a matrix or array."<br>), 0) ? __assert_rtn(__func__, "/Users/u237002/Dropbox/Hacking/sat/arts/3rdparty/Eigen/src/Core/PlainObjectBase.h"<br>, 285, "(!(RowsAtCompileTime!=Dynamic) || (rows==RowsAtCompileTime)) &amp;&amp; (!(ColsAtCompileTime!=Dynamic) || (cols==ColsAtCompileTime)) &amp;&amp; (!(RowsAtCompileTime==Dynamic &amp;&amp; MaxRowsAtCompileTime!=Dynamic) || (rows&lt;=MaxRowsAtCompileTime)) &amp;&amp; (!(ColsAtCompileTime==Dynamic &amp;&amp; MaxColsAtCompileTime!=Dynamic) || (cols&lt;=MaxColsAtCompileTime)) &amp;&amp; rows&gt;=0 &amp;&amp; cols&gt;=0 &amp;&amp; \"Invalid sizes when resizing a matrix or array.\""<br>) : (void)0)</span></span></td></tr>
<tr class="codeline" data-linenumber="282"><td class="num" id="LN282">282</td><td class="line">                   <span class='macro'>&amp;&amp; EIGEN_IMPLIES(ColsAtCompileTime!=Dynamic,cols==ColsAtCompileTime)<span class='expansion'>(__builtin_expect(!((!(RowsAtCompileTime!=Dynamic) || (rows==<br>RowsAtCompileTime)) &amp;&amp; (!(ColsAtCompileTime!=Dynamic)<br> || (cols==ColsAtCompileTime)) &amp;&amp; (!(RowsAtCompileTime<br>==Dynamic &amp;&amp; MaxRowsAtCompileTime!=Dynamic) || (rows&lt;=<br>MaxRowsAtCompileTime)) &amp;&amp; (!(ColsAtCompileTime==Dynamic<br> &amp;&amp; MaxColsAtCompileTime!=Dynamic) || (cols&lt;=MaxColsAtCompileTime<br>)) &amp;&amp; rows&gt;=0 &amp;&amp; cols&gt;=0 &amp;&amp; "Invalid sizes when resizing a matrix or array."<br>), 0) ? __assert_rtn(__func__, "/Users/u237002/Dropbox/Hacking/sat/arts/3rdparty/Eigen/src/Core/PlainObjectBase.h"<br>, 285, "(!(RowsAtCompileTime!=Dynamic) || (rows==RowsAtCompileTime)) &amp;&amp; (!(ColsAtCompileTime!=Dynamic) || (cols==ColsAtCompileTime)) &amp;&amp; (!(RowsAtCompileTime==Dynamic &amp;&amp; MaxRowsAtCompileTime!=Dynamic) || (rows&lt;=MaxRowsAtCompileTime)) &amp;&amp; (!(ColsAtCompileTime==Dynamic &amp;&amp; MaxColsAtCompileTime!=Dynamic) || (cols&lt;=MaxColsAtCompileTime)) &amp;&amp; rows&gt;=0 &amp;&amp; cols&gt;=0 &amp;&amp; \"Invalid sizes when resizing a matrix or array.\""<br>) : (void)0)</span></span></td></tr>
<tr class="codeline" data-linenumber="283"><td class="num" id="LN283">283</td><td class="line">                   <span class='macro'>&amp;&amp; EIGEN_IMPLIES(RowsAtCompileTime==Dynamic &amp;&amp; MaxRowsAtCompileTime!=Dynamic,rows&lt;=MaxRowsAtCompileTime)<span class='expansion'>(__builtin_expect(!((!(RowsAtCompileTime!=Dynamic) || (rows==<br>RowsAtCompileTime)) &amp;&amp; (!(ColsAtCompileTime!=Dynamic)<br> || (cols==ColsAtCompileTime)) &amp;&amp; (!(RowsAtCompileTime<br>==Dynamic &amp;&amp; MaxRowsAtCompileTime!=Dynamic) || (rows&lt;=<br>MaxRowsAtCompileTime)) &amp;&amp; (!(ColsAtCompileTime==Dynamic<br> &amp;&amp; MaxColsAtCompileTime!=Dynamic) || (cols&lt;=MaxColsAtCompileTime<br>)) &amp;&amp; rows&gt;=0 &amp;&amp; cols&gt;=0 &amp;&amp; "Invalid sizes when resizing a matrix or array."<br>), 0) ? __assert_rtn(__func__, "/Users/u237002/Dropbox/Hacking/sat/arts/3rdparty/Eigen/src/Core/PlainObjectBase.h"<br>, 285, "(!(RowsAtCompileTime!=Dynamic) || (rows==RowsAtCompileTime)) &amp;&amp; (!(ColsAtCompileTime!=Dynamic) || (cols==ColsAtCompileTime)) &amp;&amp; (!(RowsAtCompileTime==Dynamic &amp;&amp; MaxRowsAtCompileTime!=Dynamic) || (rows&lt;=MaxRowsAtCompileTime)) &amp;&amp; (!(ColsAtCompileTime==Dynamic &amp;&amp; MaxColsAtCompileTime!=Dynamic) || (cols&lt;=MaxColsAtCompileTime)) &amp;&amp; rows&gt;=0 &amp;&amp; cols&gt;=0 &amp;&amp; \"Invalid sizes when resizing a matrix or array.\""<br>) : (void)0)</span></span></td></tr>
<tr class="codeline" data-linenumber="284"><td class="num" id="LN284">284</td><td class="line">                   <span class='macro'>&amp;&amp; EIGEN_IMPLIES(ColsAtCompileTime==Dynamic &amp;&amp; MaxColsAtCompileTime!=Dynamic,cols&lt;=MaxColsAtCompileTime)<span class='expansion'>(__builtin_expect(!((!(RowsAtCompileTime!=Dynamic) || (rows==<br>RowsAtCompileTime)) &amp;&amp; (!(ColsAtCompileTime!=Dynamic)<br> || (cols==ColsAtCompileTime)) &amp;&amp; (!(RowsAtCompileTime<br>==Dynamic &amp;&amp; MaxRowsAtCompileTime!=Dynamic) || (rows&lt;=<br>MaxRowsAtCompileTime)) &amp;&amp; (!(ColsAtCompileTime==Dynamic<br> &amp;&amp; MaxColsAtCompileTime!=Dynamic) || (cols&lt;=MaxColsAtCompileTime<br>)) &amp;&amp; rows&gt;=0 &amp;&amp; cols&gt;=0 &amp;&amp; "Invalid sizes when resizing a matrix or array."<br>), 0) ? __assert_rtn(__func__, "/Users/u237002/Dropbox/Hacking/sat/arts/3rdparty/Eigen/src/Core/PlainObjectBase.h"<br>, 285, "(!(RowsAtCompileTime!=Dynamic) || (rows==RowsAtCompileTime)) &amp;&amp; (!(ColsAtCompileTime!=Dynamic) || (cols==ColsAtCompileTime)) &amp;&amp; (!(RowsAtCompileTime==Dynamic &amp;&amp; MaxRowsAtCompileTime!=Dynamic) || (rows&lt;=MaxRowsAtCompileTime)) &amp;&amp; (!(ColsAtCompileTime==Dynamic &amp;&amp; MaxColsAtCompileTime!=Dynamic) || (cols&lt;=MaxColsAtCompileTime)) &amp;&amp; rows&gt;=0 &amp;&amp; cols&gt;=0 &amp;&amp; \"Invalid sizes when resizing a matrix or array.\""<br>) : (void)0)</span></span></td></tr>
<tr class="codeline" data-linenumber="285"><td class="num" id="LN285">285</td><td class="line">                   <span class='macro'>&amp;&amp; rows&gt;=0 &amp;&amp; cols&gt;=0 &amp;&amp; <span class='string_literal'>"Invalid sizes when resizing a matrix or array."</span>)<span class='expansion'>(__builtin_expect(!((!(RowsAtCompileTime!=Dynamic) || (rows==<br>RowsAtCompileTime)) &amp;&amp; (!(ColsAtCompileTime!=Dynamic)<br> || (cols==ColsAtCompileTime)) &amp;&amp; (!(RowsAtCompileTime<br>==Dynamic &amp;&amp; MaxRowsAtCompileTime!=Dynamic) || (rows&lt;=<br>MaxRowsAtCompileTime)) &amp;&amp; (!(ColsAtCompileTime==Dynamic<br> &amp;&amp; MaxColsAtCompileTime!=Dynamic) || (cols&lt;=MaxColsAtCompileTime<br>)) &amp;&amp; rows&gt;=0 &amp;&amp; cols&gt;=0 &amp;&amp; "Invalid sizes when resizing a matrix or array."<br>), 0) ? __assert_rtn(__func__, "/Users/u237002/Dropbox/Hacking/sat/arts/3rdparty/Eigen/src/Core/PlainObjectBase.h"<br>, 285, "(!(RowsAtCompileTime!=Dynamic) || (rows==RowsAtCompileTime)) &amp;&amp; (!(ColsAtCompileTime!=Dynamic) || (cols==ColsAtCompileTime)) &amp;&amp; (!(RowsAtCompileTime==Dynamic &amp;&amp; MaxRowsAtCompileTime!=Dynamic) || (rows&lt;=MaxRowsAtCompileTime)) &amp;&amp; (!(ColsAtCompileTime==Dynamic &amp;&amp; MaxColsAtCompileTime!=Dynamic) || (cols&lt;=MaxColsAtCompileTime)) &amp;&amp; rows&gt;=0 &amp;&amp; cols&gt;=0 &amp;&amp; \"Invalid sizes when resizing a matrix or array.\""<br>) : (void)0)</span></span>;</td></tr>
<tr class="codeline" data-linenumber="286"><td class="num" id="LN286">286</td><td class="line">      internal::check_rows_cols_for_overflow&lt;MaxSizeAtCompileTime&gt;::run(rows, cols);</td></tr>
<tr class="codeline" data-linenumber="287"><td class="num" id="LN287">287</td><td class="line">      <span class='directive'>#ifdef EIGEN_INITIALIZE_COEFFS</span></td></tr>
<tr class="codeline" data-linenumber="288"><td class="num" id="LN288">288</td><td class="line">        Index size = rows*cols;</td></tr>
<tr class="codeline" data-linenumber="289"><td class="num" id="LN289">289</td><td class="line">        <span class='keyword'>bool</span> size_changed = size != <span class='keyword'>this</span>-&gt;size();</td></tr>
<tr class="codeline" data-linenumber="290"><td class="num" id="LN290">290</td><td class="line">        m_storage.resize(size, rows, cols);</td></tr>
<tr class="codeline" data-linenumber="291"><td class="num" id="LN291">291</td><td class="line">        <span class='keyword'>if</span>(size_changed) EIGEN_INITIALIZE_COEFFS_IF_THAT_OPTION_IS_ENABLED</td></tr>
<tr class="codeline" data-linenumber="292"><td class="num" id="LN292">292</td><td class="line">      <span class='directive'>#else</span></td></tr>
<tr class="codeline" data-linenumber="293"><td class="num" id="LN293">293</td><td class="line">        m_storage.resize(rows*cols, rows, cols);</td></tr>
<tr class="codeline" data-linenumber="294"><td class="num" id="LN294">294</td><td class="line">      <span class='directive'>#endif</span></td></tr>
<tr class="codeline" data-linenumber="295"><td class="num" id="LN295">295</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="296"><td class="num" id="LN296">296</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="297"><td class="num" id="LN297">297</td><td class="line">    <span class='comment'>/** Resizes \c *this to a vector of length \a size</span></td></tr>
<tr class="codeline" data-linenumber="298"><td class="num" id="LN298">298</td><td class="line">      <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="299"><td class="num" id="LN299">299</td><td class="line">      <span class='comment'>* \only_for_vectors. This method does not work for</span></td></tr>
<tr class="codeline" data-linenumber="300"><td class="num" id="LN300">300</td><td class="line">      <span class='comment'>* partially dynamic matrices when the static dimension is anything other</span></td></tr>
<tr class="codeline" data-linenumber="301"><td class="num" id="LN301">301</td><td class="line">      <span class='comment'>* than 1. For example it will not work with Matrix&lt;double, 2, Dynamic&gt;.</span></td></tr>
<tr class="codeline" data-linenumber="302"><td class="num" id="LN302">302</td><td class="line">      <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="303"><td class="num" id="LN303">303</td><td class="line">      <span class='comment'>* Example: \include Matrix_resize_int.cpp</span></td></tr>
<tr class="codeline" data-linenumber="304"><td class="num" id="LN304">304</td><td class="line">      <span class='comment'>* Output: \verbinclude Matrix_resize_int.out</span></td></tr>
<tr class="codeline" data-linenumber="305"><td class="num" id="LN305">305</td><td class="line">      <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="306"><td class="num" id="LN306">306</td><td class="line">      <span class='comment'>* \sa resize(Index,Index), resize(NoChange_t, Index), resize(Index, NoChange_t)</span></td></tr>
<tr class="codeline" data-linenumber="307"><td class="num" id="LN307">307</td><td class="line">      <span class='comment'>*/</span></td></tr>
<tr class="codeline" data-linenumber="308"><td class="num" id="LN308">308</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="309"><td class="num" id="LN309">309</td><td class="line">    <span class='keyword'>inline</span> <span class='keyword'>void</span> resize(Index size)</td></tr>
<tr class="codeline" data-linenumber="310"><td class="num" id="LN310">310</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="311"><td class="num" id="LN311">311</td><td class="line">      <span class='macro'>EIGEN_STATIC_ASSERT_VECTOR_ONLY(PlainObjectBase)<span class='expansion'>static_assert(PlainObjectBase::IsVectorAtCompileTime,"YOU_TRIED_CALLING_A_VECTOR_METHOD_ON_A_MATRIX"<br>);</span></span></td></tr>
<tr class="codeline" data-linenumber="312"><td class="num" id="LN312">312</td><td class="line">      <span class='macro'>eigen_assert(((SizeAtCompileTime == Dynamic &amp;&amp; (MaxSizeAtCompileTime==Dynamic || size&lt;=MaxSizeAtCompileTime)) || SizeAtCompileTime == size) &amp;&amp; size&gt;=0)<span class='expansion'>(__builtin_expect(!(((SizeAtCompileTime == Dynamic &amp;&amp;<br> (MaxSizeAtCompileTime==Dynamic || size&lt;=MaxSizeAtCompileTime<br>)) || SizeAtCompileTime == size) &amp;&amp; size&gt;=0), 0) ?<br> __assert_rtn(__func__, "/Users/u237002/Dropbox/Hacking/sat/arts/3rdparty/Eigen/src/Core/PlainObjectBase.h"<br>, 312, "((SizeAtCompileTime == Dynamic &amp;&amp; (MaxSizeAtCompileTime==Dynamic || size&lt;=MaxSizeAtCompileTime)) || SizeAtCompileTime == size) &amp;&amp; size&gt;=0"<br>) : (void)0)</span></span>;</td></tr>
<tr><td class="num"></td><td class="line"><div id="Path18" class="msg msgControl" style="margin-left:7ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexControl">18</div></td><td><div class="PathNav"><a href="#Path17" title="Previous event (17)">&#x2190;</a></div></td></td><td>'?' condition is false</td><td><div class="PathNav"><a href="#Path19" title="Next event (19)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr class="codeline" data-linenumber="313"><td class="num" id="LN313">313</td><td class="line">      <span class='directive'>#ifdef EIGEN_INITIALIZE_COEFFS</span></td></tr>
<tr class="codeline" data-linenumber="314"><td class="num" id="LN314">314</td><td class="line">        <span class='keyword'>bool</span> size_changed = size != <span class='keyword'>this</span>-&gt;size();</td></tr>
<tr class="codeline" data-linenumber="315"><td class="num" id="LN315">315</td><td class="line">      <span class='directive'>#endif</span></td></tr>
<tr class="codeline" data-linenumber="316"><td class="num" id="LN316">316</td><td class="line">      <span class='keyword'>if</span>(RowsAtCompileTime == 1)</td></tr>
<tr><td class="num"></td><td class="line"><div id="Path19" class="msg msgControl" style="margin-left:7ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexControl">19</div></td><td><div class="PathNav"><a href="#Path18" title="Previous event (18)">&#x2190;</a></div></td></td><td>Taking false branch</td><td><div class="PathNav"><a href="#Path20" title="Next event (20)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr class="codeline" data-linenumber="317"><td class="num" id="LN317">317</td><td class="line">        m_storage.resize(size, 1, size);</td></tr>
<tr class="codeline" data-linenumber="318"><td class="num" id="LN318">318</td><td class="line">      <span class='keyword'>else</span></td></tr>
<tr class="codeline" data-linenumber="319"><td class="num" id="LN319">319</td><td class="line">        <span class="mrange"><span class="mrange">m_storage.resize(size, size, 1)</span></span>;</td></tr>
<tr><td class="num"></td><td class="line"><div id="Path20" class="msg msgEvent" style="margin-left:9ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">20</div></td><td><div class="PathNav"><a href="#Path19" title="Previous event (19)">&#x2190;</a></div></td></td><td>Calling 'DenseStorage::resize'</td><td><div class="PathNav"><a href="#Path21" title="Next event (21)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr><td class="num"></td><td class="line"><div id="Path34" class="msg msgEvent" style="margin-left:9ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">34</div></td><td><div class="PathNav"><a href="#Path33" title="Previous event (33)">&#x2190;</a></div></td></td><td>Returned allocated memory</td><td><div class="PathNav"><a href="#Path35" title="Next event (35)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr class="codeline" data-linenumber="320"><td class="num" id="LN320">320</td><td class="line">      <span class='directive'>#ifdef EIGEN_INITIALIZE_COEFFS</span></td></tr>
<tr class="codeline" data-linenumber="321"><td class="num" id="LN321">321</td><td class="line">        <span class='keyword'>if</span>(size_changed) EIGEN_INITIALIZE_COEFFS_IF_THAT_OPTION_IS_ENABLED</td></tr>
<tr class="codeline" data-linenumber="322"><td class="num" id="LN322">322</td><td class="line">      <span class='directive'>#endif</span></td></tr>
<tr class="codeline" data-linenumber="323"><td class="num" id="LN323">323</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="324"><td class="num" id="LN324">324</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="325"><td class="num" id="LN325">325</td><td class="line">    <span class='comment'>/** Resizes the matrix, changing only the number of columns. For the parameter of type NoChange_t, just pass the special value \c NoChange</span></td></tr>
<tr class="codeline" data-linenumber="326"><td class="num" id="LN326">326</td><td class="line">      <span class='comment'>* as in the example below.</span></td></tr>
<tr class="codeline" data-linenumber="327"><td class="num" id="LN327">327</td><td class="line">      <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="328"><td class="num" id="LN328">328</td><td class="line">      <span class='comment'>* Example: \include Matrix_resize_NoChange_int.cpp</span></td></tr>
<tr class="codeline" data-linenumber="329"><td class="num" id="LN329">329</td><td class="line">      <span class='comment'>* Output: \verbinclude Matrix_resize_NoChange_int.out</span></td></tr>
<tr class="codeline" data-linenumber="330"><td class="num" id="LN330">330</td><td class="line">      <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="331"><td class="num" id="LN331">331</td><td class="line">      <span class='comment'>* \sa resize(Index,Index)</span></td></tr>
<tr class="codeline" data-linenumber="332"><td class="num" id="LN332">332</td><td class="line">      <span class='comment'>*/</span></td></tr>
<tr class="codeline" data-linenumber="333"><td class="num" id="LN333">333</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="334"><td class="num" id="LN334">334</td><td class="line">    <span class='keyword'>inline</span> <span class='keyword'>void</span> resize(NoChange_t, Index cols)</td></tr>
<tr class="codeline" data-linenumber="335"><td class="num" id="LN335">335</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="336"><td class="num" id="LN336">336</td><td class="line">      resize(rows(), cols);</td></tr>
<tr class="codeline" data-linenumber="337"><td class="num" id="LN337">337</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="338"><td class="num" id="LN338">338</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="339"><td class="num" id="LN339">339</td><td class="line">    <span class='comment'>/** Resizes the matrix, changing only the number of rows. For the parameter of type NoChange_t, just pass the special value \c NoChange</span></td></tr>
<tr class="codeline" data-linenumber="340"><td class="num" id="LN340">340</td><td class="line">      <span class='comment'>* as in the example below.</span></td></tr>
<tr class="codeline" data-linenumber="341"><td class="num" id="LN341">341</td><td class="line">      <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="342"><td class="num" id="LN342">342</td><td class="line">      <span class='comment'>* Example: \include Matrix_resize_int_NoChange.cpp</span></td></tr>
<tr class="codeline" data-linenumber="343"><td class="num" id="LN343">343</td><td class="line">      <span class='comment'>* Output: \verbinclude Matrix_resize_int_NoChange.out</span></td></tr>
<tr class="codeline" data-linenumber="344"><td class="num" id="LN344">344</td><td class="line">      <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="345"><td class="num" id="LN345">345</td><td class="line">      <span class='comment'>* \sa resize(Index,Index)</span></td></tr>
<tr class="codeline" data-linenumber="346"><td class="num" id="LN346">346</td><td class="line">      <span class='comment'>*/</span></td></tr>
<tr class="codeline" data-linenumber="347"><td class="num" id="LN347">347</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="348"><td class="num" id="LN348">348</td><td class="line">    <span class='keyword'>inline</span> <span class='keyword'>void</span> resize(Index rows, NoChange_t)</td></tr>
<tr class="codeline" data-linenumber="349"><td class="num" id="LN349">349</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="350"><td class="num" id="LN350">350</td><td class="line">      resize(rows, cols());</td></tr>
<tr class="codeline" data-linenumber="351"><td class="num" id="LN351">351</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="352"><td class="num" id="LN352">352</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="353"><td class="num" id="LN353">353</td><td class="line">    <span class='comment'>/** Resizes \c *this to have the same dimensions as \a other.</span></td></tr>
<tr class="codeline" data-linenumber="354"><td class="num" id="LN354">354</td><td class="line">      <span class='comment'>* Takes care of doing all the checking that's needed.</span></td></tr>
<tr class="codeline" data-linenumber="355"><td class="num" id="LN355">355</td><td class="line">      <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="356"><td class="num" id="LN356">356</td><td class="line">      <span class='comment'>* Note that copying a row-vector into a vector (and conversely) is allowed.</span></td></tr>
<tr class="codeline" data-linenumber="357"><td class="num" id="LN357">357</td><td class="line">      <span class='comment'>* The resizing, if any, is then done in the appropriate way so that row-vectors</span></td></tr>
<tr class="codeline" data-linenumber="358"><td class="num" id="LN358">358</td><td class="line">      <span class='comment'>* remain row-vectors and vectors remain vectors.</span></td></tr>
<tr class="codeline" data-linenumber="359"><td class="num" id="LN359">359</td><td class="line">      <span class='comment'>*/</span></td></tr>
<tr class="codeline" data-linenumber="360"><td class="num" id="LN360">360</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> OtherDerived&gt;</td></tr>
<tr class="codeline" data-linenumber="361"><td class="num" id="LN361">361</td><td class="line">    EIGEN_DEVICE_FUNC </td></tr>
<tr class="codeline" data-linenumber="362"><td class="num" id="LN362">362</td><td class="line">    <span class='macro'>EIGEN_STRONG_INLINE<span class='expansion'>inline</span></span> <span class='keyword'>void</span> resizeLike(<span class='keyword'>const</span> EigenBase&lt;OtherDerived&gt;&amp; _other)</td></tr>
<tr class="codeline" data-linenumber="363"><td class="num" id="LN363">363</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="364"><td class="num" id="LN364">364</td><td class="line">      <span class='keyword'>const</span> OtherDerived&amp; other = _other.derived();</td></tr>
<tr class="codeline" data-linenumber="365"><td class="num" id="LN365">365</td><td class="line">      internal::check_rows_cols_for_overflow&lt;MaxSizeAtCompileTime&gt;::run(other.rows(), other.cols());</td></tr>
<tr class="codeline" data-linenumber="366"><td class="num" id="LN366">366</td><td class="line">      <span class='keyword'>const</span> Index othersize = other.rows()*other.cols();</td></tr>
<tr class="codeline" data-linenumber="367"><td class="num" id="LN367">367</td><td class="line">      <span class='keyword'>if</span>(RowsAtCompileTime == 1)</td></tr>
<tr class="codeline" data-linenumber="368"><td class="num" id="LN368">368</td><td class="line">      {</td></tr>
<tr class="codeline" data-linenumber="369"><td class="num" id="LN369">369</td><td class="line">        <span class='macro'>eigen_assert(other.rows() == 1 || other.cols() == 1)<span class='expansion'>(__builtin_expect(!(other.rows() == 1 || other.cols() == 1), 0<br>) ? __assert_rtn(__func__, "/Users/u237002/Dropbox/Hacking/sat/arts/3rdparty/Eigen/src/Core/PlainObjectBase.h"<br>, 369, "other.rows() == 1 || other.cols() == 1") : (void)0)</span></span>;</td></tr>
<tr class="codeline" data-linenumber="370"><td class="num" id="LN370">370</td><td class="line">        resize(1, othersize);</td></tr>
<tr class="codeline" data-linenumber="371"><td class="num" id="LN371">371</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="372"><td class="num" id="LN372">372</td><td class="line">      <span class='keyword'>else</span> <span class='keyword'>if</span>(ColsAtCompileTime == 1)</td></tr>
<tr class="codeline" data-linenumber="373"><td class="num" id="LN373">373</td><td class="line">      {</td></tr>
<tr class="codeline" data-linenumber="374"><td class="num" id="LN374">374</td><td class="line">        <span class='macro'>eigen_assert(other.rows() == 1 || other.cols() == 1)<span class='expansion'>(__builtin_expect(!(other.rows() == 1 || other.cols() == 1), 0<br>) ? __assert_rtn(__func__, "/Users/u237002/Dropbox/Hacking/sat/arts/3rdparty/Eigen/src/Core/PlainObjectBase.h"<br>, 374, "other.rows() == 1 || other.cols() == 1") : (void)0)</span></span>;</td></tr>
<tr class="codeline" data-linenumber="375"><td class="num" id="LN375">375</td><td class="line">        resize(othersize, 1);</td></tr>
<tr class="codeline" data-linenumber="376"><td class="num" id="LN376">376</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="377"><td class="num" id="LN377">377</td><td class="line">      <span class='keyword'>else</span> resize(other.rows(), other.cols());</td></tr>
<tr class="codeline" data-linenumber="378"><td class="num" id="LN378">378</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="379"><td class="num" id="LN379">379</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="380"><td class="num" id="LN380">380</td><td class="line">    <span class='comment'>/** Resizes the matrix to \a rows x \a cols while leaving old values untouched.</span></td></tr>
<tr class="codeline" data-linenumber="381"><td class="num" id="LN381">381</td><td class="line">      <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="382"><td class="num" id="LN382">382</td><td class="line">      <span class='comment'>* The method is intended for matrices of dynamic size. If you only want to change the number</span></td></tr>
<tr class="codeline" data-linenumber="383"><td class="num" id="LN383">383</td><td class="line">      <span class='comment'>* of rows and/or of columns, you can use conservativeResize(NoChange_t, Index) or</span></td></tr>
<tr class="codeline" data-linenumber="384"><td class="num" id="LN384">384</td><td class="line">      <span class='comment'>* conservativeResize(Index, NoChange_t).</span></td></tr>
<tr class="codeline" data-linenumber="385"><td class="num" id="LN385">385</td><td class="line">      <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="386"><td class="num" id="LN386">386</td><td class="line">      <span class='comment'>* Matrices are resized relative to the top-left element. In case values need to be</span> </td></tr>
<tr class="codeline" data-linenumber="387"><td class="num" id="LN387">387</td><td class="line">      <span class='comment'>* appended to the matrix they will be uninitialized.</span></td></tr>
<tr class="codeline" data-linenumber="388"><td class="num" id="LN388">388</td><td class="line">      <span class='comment'>*/</span></td></tr>
<tr class="codeline" data-linenumber="389"><td class="num" id="LN389">389</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="390"><td class="num" id="LN390">390</td><td class="line">    <span class='macro'>EIGEN_STRONG_INLINE<span class='expansion'>inline</span></span> <span class='keyword'>void</span> conservativeResize(Index rows, Index cols)</td></tr>
<tr class="codeline" data-linenumber="391"><td class="num" id="LN391">391</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="392"><td class="num" id="LN392">392</td><td class="line">      internal::conservative_resize_like_impl&lt;Derived&gt;::run(*<span class='keyword'>this</span>, rows, cols);</td></tr>
<tr class="codeline" data-linenumber="393"><td class="num" id="LN393">393</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="394"><td class="num" id="LN394">394</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="395"><td class="num" id="LN395">395</td><td class="line">    <span class='comment'>/** Resizes the matrix to \a rows x \a cols while leaving old values untouched.</span></td></tr>
<tr class="codeline" data-linenumber="396"><td class="num" id="LN396">396</td><td class="line">      <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="397"><td class="num" id="LN397">397</td><td class="line">      <span class='comment'>* As opposed to conservativeResize(Index rows, Index cols), this version leaves</span></td></tr>
<tr class="codeline" data-linenumber="398"><td class="num" id="LN398">398</td><td class="line">      <span class='comment'>* the number of columns unchanged.</span></td></tr>
<tr class="codeline" data-linenumber="399"><td class="num" id="LN399">399</td><td class="line">      <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="400"><td class="num" id="LN400">400</td><td class="line">      <span class='comment'>* In case the matrix is growing, new rows will be uninitialized.</span></td></tr>
<tr class="codeline" data-linenumber="401"><td class="num" id="LN401">401</td><td class="line">      <span class='comment'>*/</span></td></tr>
<tr class="codeline" data-linenumber="402"><td class="num" id="LN402">402</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="403"><td class="num" id="LN403">403</td><td class="line">    <span class='macro'>EIGEN_STRONG_INLINE<span class='expansion'>inline</span></span> <span class='keyword'>void</span> conservativeResize(Index rows, NoChange_t)</td></tr>
<tr class="codeline" data-linenumber="404"><td class="num" id="LN404">404</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="405"><td class="num" id="LN405">405</td><td class="line">      <span class='comment'>// Note: see the comment in conservativeResize(Index,Index)</span></td></tr>
<tr class="codeline" data-linenumber="406"><td class="num" id="LN406">406</td><td class="line">      conservativeResize(rows, cols());</td></tr>
<tr class="codeline" data-linenumber="407"><td class="num" id="LN407">407</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="408"><td class="num" id="LN408">408</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="409"><td class="num" id="LN409">409</td><td class="line">    <span class='comment'>/** Resizes the matrix to \a rows x \a cols while leaving old values untouched.</span></td></tr>
<tr class="codeline" data-linenumber="410"><td class="num" id="LN410">410</td><td class="line">      <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="411"><td class="num" id="LN411">411</td><td class="line">      <span class='comment'>* As opposed to conservativeResize(Index rows, Index cols), this version leaves</span></td></tr>
<tr class="codeline" data-linenumber="412"><td class="num" id="LN412">412</td><td class="line">      <span class='comment'>* the number of rows unchanged.</span></td></tr>
<tr class="codeline" data-linenumber="413"><td class="num" id="LN413">413</td><td class="line">      <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="414"><td class="num" id="LN414">414</td><td class="line">      <span class='comment'>* In case the matrix is growing, new columns will be uninitialized.</span></td></tr>
<tr class="codeline" data-linenumber="415"><td class="num" id="LN415">415</td><td class="line">      <span class='comment'>*/</span></td></tr>
<tr class="codeline" data-linenumber="416"><td class="num" id="LN416">416</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="417"><td class="num" id="LN417">417</td><td class="line">    <span class='macro'>EIGEN_STRONG_INLINE<span class='expansion'>inline</span></span> <span class='keyword'>void</span> conservativeResize(NoChange_t, Index cols)</td></tr>
<tr class="codeline" data-linenumber="418"><td class="num" id="LN418">418</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="419"><td class="num" id="LN419">419</td><td class="line">      <span class='comment'>// Note: see the comment in conservativeResize(Index,Index)</span></td></tr>
<tr class="codeline" data-linenumber="420"><td class="num" id="LN420">420</td><td class="line">      conservativeResize(rows(), cols);</td></tr>
<tr class="codeline" data-linenumber="421"><td class="num" id="LN421">421</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="422"><td class="num" id="LN422">422</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="423"><td class="num" id="LN423">423</td><td class="line">    <span class='comment'>/** Resizes the vector to \a size while retaining old values.</span></td></tr>
<tr class="codeline" data-linenumber="424"><td class="num" id="LN424">424</td><td class="line">      <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="425"><td class="num" id="LN425">425</td><td class="line">      <span class='comment'>* \only_for_vectors. This method does not work for</span></td></tr>
<tr class="codeline" data-linenumber="426"><td class="num" id="LN426">426</td><td class="line">      <span class='comment'>* partially dynamic matrices when the static dimension is anything other</span></td></tr>
<tr class="codeline" data-linenumber="427"><td class="num" id="LN427">427</td><td class="line">      <span class='comment'>* than 1. For example it will not work with Matrix&lt;double, 2, Dynamic&gt;.</span></td></tr>
<tr class="codeline" data-linenumber="428"><td class="num" id="LN428">428</td><td class="line">      <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="429"><td class="num" id="LN429">429</td><td class="line">      <span class='comment'>* When values are appended, they will be uninitialized.</span></td></tr>
<tr class="codeline" data-linenumber="430"><td class="num" id="LN430">430</td><td class="line">      <span class='comment'>*/</span></td></tr>
<tr class="codeline" data-linenumber="431"><td class="num" id="LN431">431</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="432"><td class="num" id="LN432">432</td><td class="line">    <span class='macro'>EIGEN_STRONG_INLINE<span class='expansion'>inline</span></span> <span class='keyword'>void</span> conservativeResize(Index size)</td></tr>
<tr class="codeline" data-linenumber="433"><td class="num" id="LN433">433</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="434"><td class="num" id="LN434">434</td><td class="line">      internal::conservative_resize_like_impl&lt;Derived&gt;::run(*<span class='keyword'>this</span>, size);</td></tr>
<tr class="codeline" data-linenumber="435"><td class="num" id="LN435">435</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="436"><td class="num" id="LN436">436</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="437"><td class="num" id="LN437">437</td><td class="line">    <span class='comment'>/** Resizes the matrix to \a rows x \a cols of \c other, while leaving old values untouched.</span></td></tr>
<tr class="codeline" data-linenumber="438"><td class="num" id="LN438">438</td><td class="line">      <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="439"><td class="num" id="LN439">439</td><td class="line">      <span class='comment'>* The method is intended for matrices of dynamic size. If you only want to change the number</span></td></tr>
<tr class="codeline" data-linenumber="440"><td class="num" id="LN440">440</td><td class="line">      <span class='comment'>* of rows and/or of columns, you can use conservativeResize(NoChange_t, Index) or</span></td></tr>
<tr class="codeline" data-linenumber="441"><td class="num" id="LN441">441</td><td class="line">      <span class='comment'>* conservativeResize(Index, NoChange_t).</span></td></tr>
<tr class="codeline" data-linenumber="442"><td class="num" id="LN442">442</td><td class="line">      <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="443"><td class="num" id="LN443">443</td><td class="line">      <span class='comment'>* Matrices are resized relative to the top-left element. In case values need to be</span> </td></tr>
<tr class="codeline" data-linenumber="444"><td class="num" id="LN444">444</td><td class="line">      <span class='comment'>* appended to the matrix they will copied from \c other.</span></td></tr>
<tr class="codeline" data-linenumber="445"><td class="num" id="LN445">445</td><td class="line">      <span class='comment'>*/</span></td></tr>
<tr class="codeline" data-linenumber="446"><td class="num" id="LN446">446</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> OtherDerived&gt;</td></tr>
<tr class="codeline" data-linenumber="447"><td class="num" id="LN447">447</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="448"><td class="num" id="LN448">448</td><td class="line">    <span class='macro'>EIGEN_STRONG_INLINE<span class='expansion'>inline</span></span> <span class='keyword'>void</span> conservativeResizeLike(<span class='keyword'>const</span> DenseBase&lt;OtherDerived&gt;&amp; other)</td></tr>
<tr class="codeline" data-linenumber="449"><td class="num" id="LN449">449</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="450"><td class="num" id="LN450">450</td><td class="line">      internal::conservative_resize_like_impl&lt;Derived,OtherDerived&gt;::run(*<span class='keyword'>this</span>, other);</td></tr>
<tr class="codeline" data-linenumber="451"><td class="num" id="LN451">451</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="452"><td class="num" id="LN452">452</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="453"><td class="num" id="LN453">453</td><td class="line">    <span class='comment'>/** This is a special case of the templated operator=. Its purpose is to</span></td></tr>
<tr class="codeline" data-linenumber="454"><td class="num" id="LN454">454</td><td class="line">      <span class='comment'>* prevent a default operator= from hiding the templated operator=.</span></td></tr>
<tr class="codeline" data-linenumber="455"><td class="num" id="LN455">455</td><td class="line">      <span class='comment'>*/</span></td></tr>
<tr class="codeline" data-linenumber="456"><td class="num" id="LN456">456</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="457"><td class="num" id="LN457">457</td><td class="line">    <span class='macro'>EIGEN_STRONG_INLINE<span class='expansion'>inline</span></span> Derived&amp; <span class='keyword'>operator</span>=(<span class='keyword'>const</span> PlainObjectBase&amp; other)</td></tr>
<tr class="codeline" data-linenumber="458"><td class="num" id="LN458">458</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="459"><td class="num" id="LN459">459</td><td class="line">      <span class='keyword'>return</span> _set(other);</td></tr>
<tr class="codeline" data-linenumber="460"><td class="num" id="LN460">460</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="461"><td class="num" id="LN461">461</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="462"><td class="num" id="LN462">462</td><td class="line">    <span class='comment'>/** \sa MatrixBase::lazyAssign() */</span></td></tr>
<tr class="codeline" data-linenumber="463"><td class="num" id="LN463">463</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> OtherDerived&gt;</td></tr>
<tr class="codeline" data-linenumber="464"><td class="num" id="LN464">464</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="465"><td class="num" id="LN465">465</td><td class="line">    <span class='macro'>EIGEN_STRONG_INLINE<span class='expansion'>inline</span></span> Derived&amp; lazyAssign(<span class='keyword'>const</span> DenseBase&lt;OtherDerived&gt;&amp; other)</td></tr>
<tr class="codeline" data-linenumber="466"><td class="num" id="LN466">466</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="467"><td class="num" id="LN467">467</td><td class="line">      _resize_to_match(other);</td></tr>
<tr class="codeline" data-linenumber="468"><td class="num" id="LN468">468</td><td class="line">      <span class='keyword'>return</span> Base::lazyAssign(other.derived());</td></tr>
<tr class="codeline" data-linenumber="469"><td class="num" id="LN469">469</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="470"><td class="num" id="LN470">470</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="471"><td class="num" id="LN471">471</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> OtherDerived&gt;</td></tr>
<tr class="codeline" data-linenumber="472"><td class="num" id="LN472">472</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="473"><td class="num" id="LN473">473</td><td class="line">    <span class='macro'>EIGEN_STRONG_INLINE<span class='expansion'>inline</span></span> Derived&amp; <span class='keyword'>operator</span>=(<span class='keyword'>const</span> ReturnByValue&lt;OtherDerived&gt;&amp; func)</td></tr>
<tr class="codeline" data-linenumber="474"><td class="num" id="LN474">474</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="475"><td class="num" id="LN475">475</td><td class="line">      resize(func.rows(), func.cols());</td></tr>
<tr class="codeline" data-linenumber="476"><td class="num" id="LN476">476</td><td class="line">      <span class='keyword'>return</span> Base::<span class='keyword'>operator</span>=(func);</td></tr>
<tr class="codeline" data-linenumber="477"><td class="num" id="LN477">477</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="478"><td class="num" id="LN478">478</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="479"><td class="num" id="LN479">479</td><td class="line">    <span class='comment'>// Prevent user from trying to instantiate PlainObjectBase objects</span></td></tr>
<tr class="codeline" data-linenumber="480"><td class="num" id="LN480">480</td><td class="line">    <span class='comment'>// by making all its constructor protected. See bug 1074.</span></td></tr>
<tr class="codeline" data-linenumber="481"><td class="num" id="LN481">481</td><td class="line">  <span class='keyword'>protected</span>:</td></tr>
<tr class="codeline" data-linenumber="482"><td class="num" id="LN482">482</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="483"><td class="num" id="LN483">483</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="484"><td class="num" id="LN484">484</td><td class="line">    <span class='macro'>EIGEN_STRONG_INLINE<span class='expansion'>inline</span></span> PlainObjectBase() : m_storage()</td></tr>
<tr class="codeline" data-linenumber="485"><td class="num" id="LN485">485</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="486"><td class="num" id="LN486">486</td><td class="line"><span class='comment'>//       _check_template_params();</span></td></tr>
<tr class="codeline" data-linenumber="487"><td class="num" id="LN487">487</td><td class="line"><span class='comment'>//       EIGEN_INITIALIZE_COEFFS_IF_THAT_OPTION_IS_ENABLED</span></td></tr>
<tr class="codeline" data-linenumber="488"><td class="num" id="LN488">488</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="489"><td class="num" id="LN489">489</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="490"><td class="num" id="LN490">490</td><td class="line"><span class='directive'>#ifndef EIGEN_PARSED_BY_DOXYGEN</span></td></tr>
<tr class="codeline" data-linenumber="491"><td class="num" id="LN491">491</td><td class="line">    <span class='comment'>// FIXME is it still needed ?</span></td></tr>
<tr class="codeline" data-linenumber="492"><td class="num" id="LN492">492</td><td class="line">    <span class='comment'>/** \internal */</span></td></tr>
<tr class="codeline" data-linenumber="493"><td class="num" id="LN493">493</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="494"><td class="num" id="LN494">494</td><td class="line">    <span class='keyword'>explicit</span> PlainObjectBase(internal::constructor_without_unaligned_array_assert)</td></tr>
<tr class="codeline" data-linenumber="495"><td class="num" id="LN495">495</td><td class="line">      : m_storage(internal::constructor_without_unaligned_array_assert())</td></tr>
<tr class="codeline" data-linenumber="496"><td class="num" id="LN496">496</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="497"><td class="num" id="LN497">497</td><td class="line"><span class='comment'>//       _check_template_params(); EIGEN_INITIALIZE_COEFFS_IF_THAT_OPTION_IS_ENABLED</span></td></tr>
<tr class="codeline" data-linenumber="498"><td class="num" id="LN498">498</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="499"><td class="num" id="LN499">499</td><td class="line"><span class='directive'>#endif</span></td></tr>
<tr class="codeline" data-linenumber="500"><td class="num" id="LN500">500</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="501"><td class="num" id="LN501">501</td><td class="line"><span class='directive'>#if <span class='macro'>EIGEN_HAS_RVALUE_REFERENCES<span class='expansion'>1</span></span></span></td></tr>
<tr class="codeline" data-linenumber="502"><td class="num" id="LN502">502</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="503"><td class="num" id="LN503">503</td><td class="line">    PlainObjectBase(PlainObjectBase&amp;&amp; other) <span class='macro'>EIGEN_NOEXCEPT<span class='expansion'>noexcept</span></span></td></tr>
<tr class="codeline" data-linenumber="504"><td class="num" id="LN504">504</td><td class="line">      : m_storage( std::move(other.m_storage) )</td></tr>
<tr class="codeline" data-linenumber="505"><td class="num" id="LN505">505</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="506"><td class="num" id="LN506">506</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="507"><td class="num" id="LN507">507</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="508"><td class="num" id="LN508">508</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="509"><td class="num" id="LN509">509</td><td class="line">    PlainObjectBase&amp; <span class='keyword'>operator</span>=(PlainObjectBase&amp;&amp; other) <span class='macro'>EIGEN_NOEXCEPT<span class='expansion'>noexcept</span></span></td></tr>
<tr class="codeline" data-linenumber="510"><td class="num" id="LN510">510</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="511"><td class="num" id="LN511">511</td><td class="line">      <span class='keyword'>using</span> std::swap;</td></tr>
<tr class="codeline" data-linenumber="512"><td class="num" id="LN512">512</td><td class="line">      swap(m_storage, other.m_storage);</td></tr>
<tr class="codeline" data-linenumber="513"><td class="num" id="LN513">513</td><td class="line">      <span class='keyword'>return</span> *<span class='keyword'>this</span>;</td></tr>
<tr class="codeline" data-linenumber="514"><td class="num" id="LN514">514</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="515"><td class="num" id="LN515">515</td><td class="line"><span class='directive'>#endif</span></td></tr>
<tr class="codeline" data-linenumber="516"><td class="num" id="LN516">516</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="517"><td class="num" id="LN517">517</td><td class="line">    <span class='comment'>/** Copy constructor */</span></td></tr>
<tr class="codeline" data-linenumber="518"><td class="num" id="LN518">518</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="519"><td class="num" id="LN519">519</td><td class="line">    <span class='macro'>EIGEN_STRONG_INLINE<span class='expansion'>inline</span></span> PlainObjectBase(<span class='keyword'>const</span> PlainObjectBase&amp; other)</td></tr>
<tr class="codeline" data-linenumber="520"><td class="num" id="LN520">520</td><td class="line">      : Base(), m_storage(other.m_storage) { }</td></tr>
<tr class="codeline" data-linenumber="521"><td class="num" id="LN521">521</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="522"><td class="num" id="LN522">522</td><td class="line">    <span class='macro'>EIGEN_STRONG_INLINE<span class='expansion'>inline</span></span> PlainObjectBase(Index size, Index rows, Index cols)</td></tr>
<tr class="codeline" data-linenumber="523"><td class="num" id="LN523">523</td><td class="line">      : m_storage(size, rows, cols)</td></tr>
<tr class="codeline" data-linenumber="524"><td class="num" id="LN524">524</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="525"><td class="num" id="LN525">525</td><td class="line"><span class='comment'>//       _check_template_params();</span></td></tr>
<tr class="codeline" data-linenumber="526"><td class="num" id="LN526">526</td><td class="line"><span class='comment'>//       EIGEN_INITIALIZE_COEFFS_IF_THAT_OPTION_IS_ENABLED</span></td></tr>
<tr class="codeline" data-linenumber="527"><td class="num" id="LN527">527</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="528"><td class="num" id="LN528">528</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="529"><td class="num" id="LN529">529</td><td class="line">    <span class='comment'>/** \sa PlainObjectBase::operator=(const EigenBase&lt;OtherDerived&gt;&amp;) */</span></td></tr>
<tr class="codeline" data-linenumber="530"><td class="num" id="LN530">530</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> OtherDerived&gt;</td></tr>
<tr class="codeline" data-linenumber="531"><td class="num" id="LN531">531</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="532"><td class="num" id="LN532">532</td><td class="line">    <span class='macro'>EIGEN_STRONG_INLINE<span class='expansion'>inline</span></span> PlainObjectBase(<span class='keyword'>const</span> DenseBase&lt;OtherDerived&gt; &amp;other)</td></tr>
<tr class="codeline" data-linenumber="533"><td class="num" id="LN533">533</td><td class="line">      : m_storage()</td></tr>
<tr class="codeline" data-linenumber="534"><td class="num" id="LN534">534</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="535"><td class="num" id="LN535">535</td><td class="line">      _check_template_params();</td></tr>
<tr class="codeline" data-linenumber="536"><td class="num" id="LN536">536</td><td class="line">      resizeLike(other);</td></tr>
<tr class="codeline" data-linenumber="537"><td class="num" id="LN537">537</td><td class="line">      _set_noalias(other);</td></tr>
<tr class="codeline" data-linenumber="538"><td class="num" id="LN538">538</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="539"><td class="num" id="LN539">539</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="540"><td class="num" id="LN540">540</td><td class="line">    <span class='comment'>/** \sa PlainObjectBase::operator=(const EigenBase&lt;OtherDerived&gt;&amp;) */</span></td></tr>
<tr class="codeline" data-linenumber="541"><td class="num" id="LN541">541</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> OtherDerived&gt;</td></tr>
<tr class="codeline" data-linenumber="542"><td class="num" id="LN542">542</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="543"><td class="num" id="LN543">543</td><td class="line">    <span class='macro'>EIGEN_STRONG_INLINE<span class='expansion'>inline</span></span> PlainObjectBase(<span class='keyword'>const</span> EigenBase&lt;OtherDerived&gt; &amp;other)</td></tr>
<tr class="codeline" data-linenumber="544"><td class="num" id="LN544">544</td><td class="line">      : m_storage()</td></tr>
<tr class="codeline" data-linenumber="545"><td class="num" id="LN545">545</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="546"><td class="num" id="LN546">546</td><td class="line">      _check_template_params();</td></tr>
<tr class="codeline" data-linenumber="547"><td class="num" id="LN547">547</td><td class="line">      resizeLike(other);</td></tr>
<tr class="codeline" data-linenumber="548"><td class="num" id="LN548">548</td><td class="line">      *<span class='keyword'>this</span> = other.derived();</td></tr>
<tr class="codeline" data-linenumber="549"><td class="num" id="LN549">549</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="550"><td class="num" id="LN550">550</td><td class="line">    <span class='comment'>/** \brief Copy constructor with in-place evaluation */</span></td></tr>
<tr class="codeline" data-linenumber="551"><td class="num" id="LN551">551</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> OtherDerived&gt;</td></tr>
<tr class="codeline" data-linenumber="552"><td class="num" id="LN552">552</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="553"><td class="num" id="LN553">553</td><td class="line">    <span class='macro'>EIGEN_STRONG_INLINE<span class='expansion'>inline</span></span> PlainObjectBase(<span class='keyword'>const</span> ReturnByValue&lt;OtherDerived&gt;&amp; other)</td></tr>
<tr class="codeline" data-linenumber="554"><td class="num" id="LN554">554</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="555"><td class="num" id="LN555">555</td><td class="line">      _check_template_params();</td></tr>
<tr class="codeline" data-linenumber="556"><td class="num" id="LN556">556</td><td class="line">      <span class='comment'>// FIXME this does not automatically transpose vectors if necessary</span></td></tr>
<tr class="codeline" data-linenumber="557"><td class="num" id="LN557">557</td><td class="line">      resize(other.rows(), other.cols());</td></tr>
<tr class="codeline" data-linenumber="558"><td class="num" id="LN558">558</td><td class="line">      other.evalTo(<span class='keyword'>this</span>-&gt;derived());</td></tr>
<tr class="codeline" data-linenumber="559"><td class="num" id="LN559">559</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="560"><td class="num" id="LN560">560</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="561"><td class="num" id="LN561">561</td><td class="line">  <span class='keyword'>public</span>:</td></tr>
<tr class="codeline" data-linenumber="562"><td class="num" id="LN562">562</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="563"><td class="num" id="LN563">563</td><td class="line">    <span class='comment'>/** \brief Copies the generic expression \a other into *this.</span></td></tr>
<tr class="codeline" data-linenumber="564"><td class="num" id="LN564">564</td><td class="line">      <span class='comment'>* \copydetails DenseBase::operator=(const EigenBase&lt;OtherDerived&gt; &amp;other)</span></td></tr>
<tr class="codeline" data-linenumber="565"><td class="num" id="LN565">565</td><td class="line">      <span class='comment'>*/</span></td></tr>
<tr class="codeline" data-linenumber="566"><td class="num" id="LN566">566</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> OtherDerived&gt;</td></tr>
<tr class="codeline" data-linenumber="567"><td class="num" id="LN567">567</td><td class="line">    EIGEN_DEVICE_FUNC </td></tr>
<tr class="codeline" data-linenumber="568"><td class="num" id="LN568">568</td><td class="line">    <span class='macro'>EIGEN_STRONG_INLINE<span class='expansion'>inline</span></span> Derived&amp; <span class='keyword'>operator</span>=(<span class='keyword'>const</span> EigenBase&lt;OtherDerived&gt; &amp;other)</td></tr>
<tr class="codeline" data-linenumber="569"><td class="num" id="LN569">569</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="570"><td class="num" id="LN570">570</td><td class="line">      _resize_to_match(other);</td></tr>
<tr class="codeline" data-linenumber="571"><td class="num" id="LN571">571</td><td class="line">      Base::<span class='keyword'>operator</span>=(other.derived());</td></tr>
<tr class="codeline" data-linenumber="572"><td class="num" id="LN572">572</td><td class="line">      <span class='keyword'>return</span> <span class='keyword'>this</span>-&gt;derived();</td></tr>
<tr class="codeline" data-linenumber="573"><td class="num" id="LN573">573</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="574"><td class="num" id="LN574">574</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="575"><td class="num" id="LN575">575</td><td class="line">    <span class='comment'>/** \name Map</span></td></tr>
<tr class="codeline" data-linenumber="576"><td class="num" id="LN576">576</td><td class="line">      <span class='comment'>* These are convenience functions returning Map objects. The Map() static functions return unaligned Map objects,</span></td></tr>
<tr class="codeline" data-linenumber="577"><td class="num" id="LN577">577</td><td class="line">      <span class='comment'>* while the AlignedMap() functions return aligned Map objects and thus should be called only with 16-byte-aligned</span></td></tr>
<tr class="codeline" data-linenumber="578"><td class="num" id="LN578">578</td><td class="line">      <span class='comment'>* \a data pointers.</span></td></tr>
<tr class="codeline" data-linenumber="579"><td class="num" id="LN579">579</td><td class="line">      <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="580"><td class="num" id="LN580">580</td><td class="line">      <span class='comment'>* Here is an example using strides:</span></td></tr>
<tr class="codeline" data-linenumber="581"><td class="num" id="LN581">581</td><td class="line">      <span class='comment'>* \include Matrix_Map_stride.cpp</span></td></tr>
<tr class="codeline" data-linenumber="582"><td class="num" id="LN582">582</td><td class="line">      <span class='comment'>* Output: \verbinclude Matrix_Map_stride.out</span></td></tr>
<tr class="codeline" data-linenumber="583"><td class="num" id="LN583">583</td><td class="line">      <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="584"><td class="num" id="LN584">584</td><td class="line">      <span class='comment'>* \see class Map</span></td></tr>
<tr class="codeline" data-linenumber="585"><td class="num" id="LN585">585</td><td class="line">      <span class='comment'>*/</span></td></tr>
<tr class="codeline" data-linenumber="586"><td class="num" id="LN586">586</td><td class="line">    <span class='comment'>//@{</span></td></tr>
<tr class="codeline" data-linenumber="587"><td class="num" id="LN587">587</td><td class="line">    <span class='keyword'>static</span> <span class='keyword'>inline</span> ConstMapType Map(<span class='keyword'>const</span> Scalar* data)</td></tr>
<tr class="codeline" data-linenumber="588"><td class="num" id="LN588">588</td><td class="line">    { <span class='keyword'>return</span> ConstMapType(data); }</td></tr>
<tr class="codeline" data-linenumber="589"><td class="num" id="LN589">589</td><td class="line">    <span class='keyword'>static</span> <span class='keyword'>inline</span> MapType Map(Scalar* data)</td></tr>
<tr class="codeline" data-linenumber="590"><td class="num" id="LN590">590</td><td class="line">    { <span class='keyword'>return</span> MapType(data); }</td></tr>
<tr class="codeline" data-linenumber="591"><td class="num" id="LN591">591</td><td class="line">    <span class='keyword'>static</span> <span class='keyword'>inline</span> ConstMapType Map(<span class='keyword'>const</span> Scalar* data, Index size)</td></tr>
<tr class="codeline" data-linenumber="592"><td class="num" id="LN592">592</td><td class="line">    { <span class='keyword'>return</span> ConstMapType(data, size); }</td></tr>
<tr class="codeline" data-linenumber="593"><td class="num" id="LN593">593</td><td class="line">    <span class='keyword'>static</span> <span class='keyword'>inline</span> MapType Map(Scalar* data, Index size)</td></tr>
<tr class="codeline" data-linenumber="594"><td class="num" id="LN594">594</td><td class="line">    { <span class='keyword'>return</span> MapType(data, size); }</td></tr>
<tr class="codeline" data-linenumber="595"><td class="num" id="LN595">595</td><td class="line">    <span class='keyword'>static</span> <span class='keyword'>inline</span> ConstMapType Map(<span class='keyword'>const</span> Scalar* data, Index rows, Index cols)</td></tr>
<tr class="codeline" data-linenumber="596"><td class="num" id="LN596">596</td><td class="line">    { <span class='keyword'>return</span> ConstMapType(data, rows, cols); }</td></tr>
<tr class="codeline" data-linenumber="597"><td class="num" id="LN597">597</td><td class="line">    <span class='keyword'>static</span> <span class='keyword'>inline</span> MapType Map(Scalar* data, Index rows, Index cols)</td></tr>
<tr class="codeline" data-linenumber="598"><td class="num" id="LN598">598</td><td class="line">    { <span class='keyword'>return</span> MapType(data, rows, cols); }</td></tr>
<tr class="codeline" data-linenumber="599"><td class="num" id="LN599">599</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="600"><td class="num" id="LN600">600</td><td class="line">    <span class='keyword'>static</span> <span class='keyword'>inline</span> ConstAlignedMapType MapAligned(<span class='keyword'>const</span> Scalar* data)</td></tr>
<tr class="codeline" data-linenumber="601"><td class="num" id="LN601">601</td><td class="line">    { <span class='keyword'>return</span> ConstAlignedMapType(data); }</td></tr>
<tr class="codeline" data-linenumber="602"><td class="num" id="LN602">602</td><td class="line">    <span class='keyword'>static</span> <span class='keyword'>inline</span> AlignedMapType MapAligned(Scalar* data)</td></tr>
<tr class="codeline" data-linenumber="603"><td class="num" id="LN603">603</td><td class="line">    { <span class='keyword'>return</span> AlignedMapType(data); }</td></tr>
<tr class="codeline" data-linenumber="604"><td class="num" id="LN604">604</td><td class="line">    <span class='keyword'>static</span> <span class='keyword'>inline</span> ConstAlignedMapType MapAligned(<span class='keyword'>const</span> Scalar* data, Index size)</td></tr>
<tr class="codeline" data-linenumber="605"><td class="num" id="LN605">605</td><td class="line">    { <span class='keyword'>return</span> ConstAlignedMapType(data, size); }</td></tr>
<tr class="codeline" data-linenumber="606"><td class="num" id="LN606">606</td><td class="line">    <span class='keyword'>static</span> <span class='keyword'>inline</span> AlignedMapType MapAligned(Scalar* data, Index size)</td></tr>
<tr class="codeline" data-linenumber="607"><td class="num" id="LN607">607</td><td class="line">    { <span class='keyword'>return</span> AlignedMapType(data, size); }</td></tr>
<tr class="codeline" data-linenumber="608"><td class="num" id="LN608">608</td><td class="line">    <span class='keyword'>static</span> <span class='keyword'>inline</span> ConstAlignedMapType MapAligned(<span class='keyword'>const</span> Scalar* data, Index rows, Index cols)</td></tr>
<tr class="codeline" data-linenumber="609"><td class="num" id="LN609">609</td><td class="line">    { <span class='keyword'>return</span> ConstAlignedMapType(data, rows, cols); }</td></tr>
<tr class="codeline" data-linenumber="610"><td class="num" id="LN610">610</td><td class="line">    <span class='keyword'>static</span> <span class='keyword'>inline</span> AlignedMapType MapAligned(Scalar* data, Index rows, Index cols)</td></tr>
<tr class="codeline" data-linenumber="611"><td class="num" id="LN611">611</td><td class="line">    { <span class='keyword'>return</span> AlignedMapType(data, rows, cols); }</td></tr>
<tr class="codeline" data-linenumber="612"><td class="num" id="LN612">612</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="613"><td class="num" id="LN613">613</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>int</span> Outer, <span class='keyword'>int</span> Inner&gt;</td></tr>
<tr class="codeline" data-linenumber="614"><td class="num" id="LN614">614</td><td class="line">    <span class='keyword'>static</span> <span class='keyword'>inline</span> <span class='keyword'>typename</span> StridedConstMapType&lt;Stride&lt;Outer, Inner&gt; &gt;::type Map(<span class='keyword'>const</span> Scalar* data, <span class='keyword'>const</span> Stride&lt;Outer, Inner&gt;&amp; stride)</td></tr>
<tr class="codeline" data-linenumber="615"><td class="num" id="LN615">615</td><td class="line">    { <span class='keyword'>return</span> <span class='keyword'>typename</span> StridedConstMapType&lt;Stride&lt;Outer, Inner&gt; &gt;::type(data, stride); }</td></tr>
<tr class="codeline" data-linenumber="616"><td class="num" id="LN616">616</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>int</span> Outer, <span class='keyword'>int</span> Inner&gt;</td></tr>
<tr class="codeline" data-linenumber="617"><td class="num" id="LN617">617</td><td class="line">    <span class='keyword'>static</span> <span class='keyword'>inline</span> <span class='keyword'>typename</span> StridedMapType&lt;Stride&lt;Outer, Inner&gt; &gt;::type Map(Scalar* data, <span class='keyword'>const</span> Stride&lt;Outer, Inner&gt;&amp; stride)</td></tr>
<tr class="codeline" data-linenumber="618"><td class="num" id="LN618">618</td><td class="line">    { <span class='keyword'>return</span> <span class='keyword'>typename</span> StridedMapType&lt;Stride&lt;Outer, Inner&gt; &gt;::type(data, stride); }</td></tr>
<tr class="codeline" data-linenumber="619"><td class="num" id="LN619">619</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>int</span> Outer, <span class='keyword'>int</span> Inner&gt;</td></tr>
<tr class="codeline" data-linenumber="620"><td class="num" id="LN620">620</td><td class="line">    <span class='keyword'>static</span> <span class='keyword'>inline</span> <span class='keyword'>typename</span> StridedConstMapType&lt;Stride&lt;Outer, Inner&gt; &gt;::type Map(<span class='keyword'>const</span> Scalar* data, Index size, <span class='keyword'>const</span> Stride&lt;Outer, Inner&gt;&amp; stride)</td></tr>
<tr class="codeline" data-linenumber="621"><td class="num" id="LN621">621</td><td class="line">    { <span class='keyword'>return</span> <span class='keyword'>typename</span> StridedConstMapType&lt;Stride&lt;Outer, Inner&gt; &gt;::type(data, size, stride); }</td></tr>
<tr class="codeline" data-linenumber="622"><td class="num" id="LN622">622</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>int</span> Outer, <span class='keyword'>int</span> Inner&gt;</td></tr>
<tr class="codeline" data-linenumber="623"><td class="num" id="LN623">623</td><td class="line">    <span class='keyword'>static</span> <span class='keyword'>inline</span> <span class='keyword'>typename</span> StridedMapType&lt;Stride&lt;Outer, Inner&gt; &gt;::type Map(Scalar* data, Index size, <span class='keyword'>const</span> Stride&lt;Outer, Inner&gt;&amp; stride)</td></tr>
<tr class="codeline" data-linenumber="624"><td class="num" id="LN624">624</td><td class="line">    { <span class='keyword'>return</span> <span class='keyword'>typename</span> StridedMapType&lt;Stride&lt;Outer, Inner&gt; &gt;::type(data, size, stride); }</td></tr>
<tr class="codeline" data-linenumber="625"><td class="num" id="LN625">625</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>int</span> Outer, <span class='keyword'>int</span> Inner&gt;</td></tr>
<tr class="codeline" data-linenumber="626"><td class="num" id="LN626">626</td><td class="line">    <span class='keyword'>static</span> <span class='keyword'>inline</span> <span class='keyword'>typename</span> StridedConstMapType&lt;Stride&lt;Outer, Inner&gt; &gt;::type Map(<span class='keyword'>const</span> Scalar* data, Index rows, Index cols, <span class='keyword'>const</span> Stride&lt;Outer, Inner&gt;&amp; stride)</td></tr>
<tr class="codeline" data-linenumber="627"><td class="num" id="LN627">627</td><td class="line">    { <span class='keyword'>return</span> <span class='keyword'>typename</span> StridedConstMapType&lt;Stride&lt;Outer, Inner&gt; &gt;::type(data, rows, cols, stride); }</td></tr>
<tr class="codeline" data-linenumber="628"><td class="num" id="LN628">628</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>int</span> Outer, <span class='keyword'>int</span> Inner&gt;</td></tr>
<tr class="codeline" data-linenumber="629"><td class="num" id="LN629">629</td><td class="line">    <span class='keyword'>static</span> <span class='keyword'>inline</span> <span class='keyword'>typename</span> StridedMapType&lt;Stride&lt;Outer, Inner&gt; &gt;::type Map(Scalar* data, Index rows, Index cols, <span class='keyword'>const</span> Stride&lt;Outer, Inner&gt;&amp; stride)</td></tr>
<tr class="codeline" data-linenumber="630"><td class="num" id="LN630">630</td><td class="line">    { <span class='keyword'>return</span> <span class='keyword'>typename</span> StridedMapType&lt;Stride&lt;Outer, Inner&gt; &gt;::type(data, rows, cols, stride); }</td></tr>
<tr class="codeline" data-linenumber="631"><td class="num" id="LN631">631</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="632"><td class="num" id="LN632">632</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>int</span> Outer, <span class='keyword'>int</span> Inner&gt;</td></tr>
<tr class="codeline" data-linenumber="633"><td class="num" id="LN633">633</td><td class="line">    <span class='keyword'>static</span> <span class='keyword'>inline</span> <span class='keyword'>typename</span> StridedConstAlignedMapType&lt;Stride&lt;Outer, Inner&gt; &gt;::type MapAligned(<span class='keyword'>const</span> Scalar* data, <span class='keyword'>const</span> Stride&lt;Outer, Inner&gt;&amp; stride)</td></tr>
<tr class="codeline" data-linenumber="634"><td class="num" id="LN634">634</td><td class="line">    { <span class='keyword'>return</span> <span class='keyword'>typename</span> StridedConstAlignedMapType&lt;Stride&lt;Outer, Inner&gt; &gt;::type(data, stride); }</td></tr>
<tr class="codeline" data-linenumber="635"><td class="num" id="LN635">635</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>int</span> Outer, <span class='keyword'>int</span> Inner&gt;</td></tr>
<tr class="codeline" data-linenumber="636"><td class="num" id="LN636">636</td><td class="line">    <span class='keyword'>static</span> <span class='keyword'>inline</span> <span class='keyword'>typename</span> StridedAlignedMapType&lt;Stride&lt;Outer, Inner&gt; &gt;::type MapAligned(Scalar* data, <span class='keyword'>const</span> Stride&lt;Outer, Inner&gt;&amp; stride)</td></tr>
<tr class="codeline" data-linenumber="637"><td class="num" id="LN637">637</td><td class="line">    { <span class='keyword'>return</span> <span class='keyword'>typename</span> StridedAlignedMapType&lt;Stride&lt;Outer, Inner&gt; &gt;::type(data, stride); }</td></tr>
<tr class="codeline" data-linenumber="638"><td class="num" id="LN638">638</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>int</span> Outer, <span class='keyword'>int</span> Inner&gt;</td></tr>
<tr class="codeline" data-linenumber="639"><td class="num" id="LN639">639</td><td class="line">    <span class='keyword'>static</span> <span class='keyword'>inline</span> <span class='keyword'>typename</span> StridedConstAlignedMapType&lt;Stride&lt;Outer, Inner&gt; &gt;::type MapAligned(<span class='keyword'>const</span> Scalar* data, Index size, <span class='keyword'>const</span> Stride&lt;Outer, Inner&gt;&amp; stride)</td></tr>
<tr class="codeline" data-linenumber="640"><td class="num" id="LN640">640</td><td class="line">    { <span class='keyword'>return</span> <span class='keyword'>typename</span> StridedConstAlignedMapType&lt;Stride&lt;Outer, Inner&gt; &gt;::type(data, size, stride); }</td></tr>
<tr class="codeline" data-linenumber="641"><td class="num" id="LN641">641</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>int</span> Outer, <span class='keyword'>int</span> Inner&gt;</td></tr>
<tr class="codeline" data-linenumber="642"><td class="num" id="LN642">642</td><td class="line">    <span class='keyword'>static</span> <span class='keyword'>inline</span> <span class='keyword'>typename</span> StridedAlignedMapType&lt;Stride&lt;Outer, Inner&gt; &gt;::type MapAligned(Scalar* data, Index size, <span class='keyword'>const</span> Stride&lt;Outer, Inner&gt;&amp; stride)</td></tr>
<tr class="codeline" data-linenumber="643"><td class="num" id="LN643">643</td><td class="line">    { <span class='keyword'>return</span> <span class='keyword'>typename</span> StridedAlignedMapType&lt;Stride&lt;Outer, Inner&gt; &gt;::type(data, size, stride); }</td></tr>
<tr class="codeline" data-linenumber="644"><td class="num" id="LN644">644</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>int</span> Outer, <span class='keyword'>int</span> Inner&gt;</td></tr>
<tr class="codeline" data-linenumber="645"><td class="num" id="LN645">645</td><td class="line">    <span class='keyword'>static</span> <span class='keyword'>inline</span> <span class='keyword'>typename</span> StridedConstAlignedMapType&lt;Stride&lt;Outer, Inner&gt; &gt;::type MapAligned(<span class='keyword'>const</span> Scalar* data, Index rows, Index cols, <span class='keyword'>const</span> Stride&lt;Outer, Inner&gt;&amp; stride)</td></tr>
<tr class="codeline" data-linenumber="646"><td class="num" id="LN646">646</td><td class="line">    { <span class='keyword'>return</span> <span class='keyword'>typename</span> StridedConstAlignedMapType&lt;Stride&lt;Outer, Inner&gt; &gt;::type(data, rows, cols, stride); }</td></tr>
<tr class="codeline" data-linenumber="647"><td class="num" id="LN647">647</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>int</span> Outer, <span class='keyword'>int</span> Inner&gt;</td></tr>
<tr class="codeline" data-linenumber="648"><td class="num" id="LN648">648</td><td class="line">    <span class='keyword'>static</span> <span class='keyword'>inline</span> <span class='keyword'>typename</span> StridedAlignedMapType&lt;Stride&lt;Outer, Inner&gt; &gt;::type MapAligned(Scalar* data, Index rows, Index cols, <span class='keyword'>const</span> Stride&lt;Outer, Inner&gt;&amp; stride)</td></tr>
<tr class="codeline" data-linenumber="649"><td class="num" id="LN649">649</td><td class="line">    { <span class='keyword'>return</span> <span class='keyword'>typename</span> StridedAlignedMapType&lt;Stride&lt;Outer, Inner&gt; &gt;::type(data, rows, cols, stride); }</td></tr>
<tr class="codeline" data-linenumber="650"><td class="num" id="LN650">650</td><td class="line">    <span class='comment'>//@}</span></td></tr>
<tr class="codeline" data-linenumber="651"><td class="num" id="LN651">651</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="652"><td class="num" id="LN652">652</td><td class="line">    <span class='keyword'>using</span> Base::setConstant;</td></tr>
<tr class="codeline" data-linenumber="653"><td class="num" id="LN653">653</td><td class="line">    EIGEN_DEVICE_FUNC Derived&amp; setConstant(Index size, <span class='keyword'>const</span> Scalar&amp; val);</td></tr>
<tr class="codeline" data-linenumber="654"><td class="num" id="LN654">654</td><td class="line">    EIGEN_DEVICE_FUNC Derived&amp; setConstant(Index rows, Index cols, <span class='keyword'>const</span> Scalar&amp; val);</td></tr>
<tr class="codeline" data-linenumber="655"><td class="num" id="LN655">655</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="656"><td class="num" id="LN656">656</td><td class="line">    <span class='keyword'>using</span> Base::setZero;</td></tr>
<tr class="codeline" data-linenumber="657"><td class="num" id="LN657">657</td><td class="line">    EIGEN_DEVICE_FUNC Derived&amp; setZero(Index size);</td></tr>
<tr class="codeline" data-linenumber="658"><td class="num" id="LN658">658</td><td class="line">    EIGEN_DEVICE_FUNC Derived&amp; setZero(Index rows, Index cols);</td></tr>
<tr class="codeline" data-linenumber="659"><td class="num" id="LN659">659</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="660"><td class="num" id="LN660">660</td><td class="line">    <span class='keyword'>using</span> Base::setOnes;</td></tr>
<tr class="codeline" data-linenumber="661"><td class="num" id="LN661">661</td><td class="line">    EIGEN_DEVICE_FUNC Derived&amp; setOnes(Index size);</td></tr>
<tr class="codeline" data-linenumber="662"><td class="num" id="LN662">662</td><td class="line">    EIGEN_DEVICE_FUNC Derived&amp; setOnes(Index rows, Index cols);</td></tr>
<tr class="codeline" data-linenumber="663"><td class="num" id="LN663">663</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="664"><td class="num" id="LN664">664</td><td class="line">    <span class='keyword'>using</span> Base::setRandom;</td></tr>
<tr class="codeline" data-linenumber="665"><td class="num" id="LN665">665</td><td class="line">    Derived&amp; setRandom(Index size);</td></tr>
<tr class="codeline" data-linenumber="666"><td class="num" id="LN666">666</td><td class="line">    Derived&amp; setRandom(Index rows, Index cols);</td></tr>
<tr class="codeline" data-linenumber="667"><td class="num" id="LN667">667</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="668"><td class="num" id="LN668">668</td><td class="line">    <span class='directive'>#ifdef EIGEN_PLAINOBJECTBASE_PLUGIN</span></td></tr>
<tr class="codeline" data-linenumber="669"><td class="num" id="LN669">669</td><td class="line">    <span class='directive'>#include EIGEN_PLAINOBJECTBASE_PLUGIN</span></td></tr>
<tr class="codeline" data-linenumber="670"><td class="num" id="LN670">670</td><td class="line">    <span class='directive'>#endif</span></td></tr>
<tr class="codeline" data-linenumber="671"><td class="num" id="LN671">671</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="672"><td class="num" id="LN672">672</td><td class="line">  <span class='keyword'>protected</span>:</td></tr>
<tr class="codeline" data-linenumber="673"><td class="num" id="LN673">673</td><td class="line">    <span class='comment'>/** \internal Resizes *this in preparation for assigning \a other to it.</span></td></tr>
<tr class="codeline" data-linenumber="674"><td class="num" id="LN674">674</td><td class="line">      <span class='comment'>* Takes care of doing all the checking that's needed.</span></td></tr>
<tr class="codeline" data-linenumber="675"><td class="num" id="LN675">675</td><td class="line">      <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="676"><td class="num" id="LN676">676</td><td class="line">      <span class='comment'>* Note that copying a row-vector into a vector (and conversely) is allowed.</span></td></tr>
<tr class="codeline" data-linenumber="677"><td class="num" id="LN677">677</td><td class="line">      <span class='comment'>* The resizing, if any, is then done in the appropriate way so that row-vectors</span></td></tr>
<tr class="codeline" data-linenumber="678"><td class="num" id="LN678">678</td><td class="line">      <span class='comment'>* remain row-vectors and vectors remain vectors.</span></td></tr>
<tr class="codeline" data-linenumber="679"><td class="num" id="LN679">679</td><td class="line">      <span class='comment'>*/</span></td></tr>
<tr class="codeline" data-linenumber="680"><td class="num" id="LN680">680</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> OtherDerived&gt;</td></tr>
<tr class="codeline" data-linenumber="681"><td class="num" id="LN681">681</td><td class="line">    EIGEN_DEVICE_FUNC </td></tr>
<tr class="codeline" data-linenumber="682"><td class="num" id="LN682">682</td><td class="line">    <span class='macro'>EIGEN_STRONG_INLINE<span class='expansion'>inline</span></span> <span class='keyword'>void</span> _resize_to_match(<span class='keyword'>const</span> EigenBase&lt;OtherDerived&gt;&amp; other)</td></tr>
<tr class="codeline" data-linenumber="683"><td class="num" id="LN683">683</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="684"><td class="num" id="LN684">684</td><td class="line">      <span class='directive'>#ifdef EIGEN_NO_AUTOMATIC_RESIZING</span></td></tr>
<tr class="codeline" data-linenumber="685"><td class="num" id="LN685">685</td><td class="line">      <span class='macro'>eigen_assert((<span class='keyword'>this</span>-&gt;size()==0 || (IsVectorAtCompileTime ? (<span class='keyword'>this</span>-&gt;size() == other.size())<span class='expansion'>(__builtin_expect(!((this-&gt;size()==0 || (IsVectorAtCompileTime<br> ? (this-&gt;size() == other.size()) : (rows() == other.rows(<br>) &amp;&amp; cols() == other.cols()))) &amp;&amp; "Size mismatch. Automatic resizing is disabled because EIGEN_NO_AUTOMATIC_RESIZING is defined"<br>), 0) ? __assert_rtn(__func__, "/Users/u237002/Dropbox/Hacking/sat/arts/3rdparty/Eigen/src/Core/PlainObjectBase.h"<br>, 687, "(this-&gt;size()==0 || (IsVectorAtCompileTime ? (this-&gt;size() == other.size()) : (rows() == other.rows() &amp;&amp; cols() == other.cols()))) &amp;&amp; \"Size mismatch. Automatic resizing is disabled because EIGEN_NO_AUTOMATIC_RESIZING is defined\""<br>) : (void)0)</span></span></td></tr>
<tr class="codeline" data-linenumber="686"><td class="num" id="LN686">686</td><td class="line">                 <span class='macro'>: (rows() == other.rows() &amp;&amp; cols() == other.cols())))<span class='expansion'>(__builtin_expect(!((this-&gt;size()==0 || (IsVectorAtCompileTime<br> ? (this-&gt;size() == other.size()) : (rows() == other.rows(<br>) &amp;&amp; cols() == other.cols()))) &amp;&amp; "Size mismatch. Automatic resizing is disabled because EIGEN_NO_AUTOMATIC_RESIZING is defined"<br>), 0) ? __assert_rtn(__func__, "/Users/u237002/Dropbox/Hacking/sat/arts/3rdparty/Eigen/src/Core/PlainObjectBase.h"<br>, 687, "(this-&gt;size()==0 || (IsVectorAtCompileTime ? (this-&gt;size() == other.size()) : (rows() == other.rows() &amp;&amp; cols() == other.cols()))) &amp;&amp; \"Size mismatch. Automatic resizing is disabled because EIGEN_NO_AUTOMATIC_RESIZING is defined\""<br>) : (void)0)</span></span></td></tr>
<tr class="codeline" data-linenumber="687"><td class="num" id="LN687">687</td><td class="line">        <span class='macro'>&amp;&amp; <span class='string_literal'>"Size mismatch. Automatic resizing is disabled because EIGEN_NO_AUTOMATIC_RESIZING is defined"</span>)<span class='expansion'>(__builtin_expect(!((this-&gt;size()==0 || (IsVectorAtCompileTime<br> ? (this-&gt;size() == other.size()) : (rows() == other.rows(<br>) &amp;&amp; cols() == other.cols()))) &amp;&amp; "Size mismatch. Automatic resizing is disabled because EIGEN_NO_AUTOMATIC_RESIZING is defined"<br>), 0) ? __assert_rtn(__func__, "/Users/u237002/Dropbox/Hacking/sat/arts/3rdparty/Eigen/src/Core/PlainObjectBase.h"<br>, 687, "(this-&gt;size()==0 || (IsVectorAtCompileTime ? (this-&gt;size() == other.size()) : (rows() == other.rows() &amp;&amp; cols() == other.cols()))) &amp;&amp; \"Size mismatch. Automatic resizing is disabled because EIGEN_NO_AUTOMATIC_RESIZING is defined\""<br>) : (void)0)</span></span>;</td></tr>
<tr class="codeline" data-linenumber="688"><td class="num" id="LN688">688</td><td class="line">      EIGEN_ONLY_USED_FOR_DEBUG(other);</td></tr>
<tr class="codeline" data-linenumber="689"><td class="num" id="LN689">689</td><td class="line">      <span class='directive'>#else</span></td></tr>
<tr class="codeline" data-linenumber="690"><td class="num" id="LN690">690</td><td class="line">      resizeLike(other);</td></tr>
<tr class="codeline" data-linenumber="691"><td class="num" id="LN691">691</td><td class="line">      <span class='directive'>#endif</span></td></tr>
<tr class="codeline" data-linenumber="692"><td class="num" id="LN692">692</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="693"><td class="num" id="LN693">693</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="694"><td class="num" id="LN694">694</td><td class="line">    <span class='comment'>/**</span></td></tr>
<tr class="codeline" data-linenumber="695"><td class="num" id="LN695">695</td><td class="line">      <span class='comment'>* \brief Copies the value of the expression \a other into \c *this with automatic resizing.</span></td></tr>
<tr class="codeline" data-linenumber="696"><td class="num" id="LN696">696</td><td class="line">      <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="697"><td class="num" id="LN697">697</td><td class="line">      <span class='comment'>* *this might be resized to match the dimensions of \a other. If *this was a null matrix (not already initialized),</span></td></tr>
<tr class="codeline" data-linenumber="698"><td class="num" id="LN698">698</td><td class="line">      <span class='comment'>* it will be initialized.</span></td></tr>
<tr class="codeline" data-linenumber="699"><td class="num" id="LN699">699</td><td class="line">      <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="700"><td class="num" id="LN700">700</td><td class="line">      <span class='comment'>* Note that copying a row-vector into a vector (and conversely) is allowed.</span></td></tr>
<tr class="codeline" data-linenumber="701"><td class="num" id="LN701">701</td><td class="line">      <span class='comment'>* The resizing, if any, is then done in the appropriate way so that row-vectors</span></td></tr>
<tr class="codeline" data-linenumber="702"><td class="num" id="LN702">702</td><td class="line">      <span class='comment'>* remain row-vectors and vectors remain vectors.</span></td></tr>
<tr class="codeline" data-linenumber="703"><td class="num" id="LN703">703</td><td class="line">      <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="704"><td class="num" id="LN704">704</td><td class="line">      <span class='comment'>* \sa operator=(const MatrixBase&lt;OtherDerived&gt;&amp;), _set_noalias()</span></td></tr>
<tr class="codeline" data-linenumber="705"><td class="num" id="LN705">705</td><td class="line">      <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="706"><td class="num" id="LN706">706</td><td class="line">      <span class='comment'>* \internal</span></td></tr>
<tr class="codeline" data-linenumber="707"><td class="num" id="LN707">707</td><td class="line">      <span class='comment'>*/</span></td></tr>
<tr class="codeline" data-linenumber="708"><td class="num" id="LN708">708</td><td class="line">    <span class='comment'>// aliasing is dealt once in internall::call_assignment</span></td></tr>
<tr class="codeline" data-linenumber="709"><td class="num" id="LN709">709</td><td class="line">    <span class='comment'>// so at this stage we have to assume aliasing... and resising has to be done later.</span></td></tr>
<tr class="codeline" data-linenumber="710"><td class="num" id="LN710">710</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> OtherDerived&gt;</td></tr>
<tr class="codeline" data-linenumber="711"><td class="num" id="LN711">711</td><td class="line">    EIGEN_DEVICE_FUNC </td></tr>
<tr class="codeline" data-linenumber="712"><td class="num" id="LN712">712</td><td class="line">    <span class='macro'>EIGEN_STRONG_INLINE<span class='expansion'>inline</span></span> Derived&amp; _set(<span class='keyword'>const</span> DenseBase&lt;OtherDerived&gt;&amp; other)</td></tr>
<tr class="codeline" data-linenumber="713"><td class="num" id="LN713">713</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="714"><td class="num" id="LN714">714</td><td class="line">      internal::call_assignment(<span class='keyword'>this</span>-&gt;derived(), other.derived());</td></tr>
<tr class="codeline" data-linenumber="715"><td class="num" id="LN715">715</td><td class="line">      <span class='keyword'>return</span> <span class='keyword'>this</span>-&gt;derived();</td></tr>
<tr class="codeline" data-linenumber="716"><td class="num" id="LN716">716</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="717"><td class="num" id="LN717">717</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="718"><td class="num" id="LN718">718</td><td class="line">    <span class='comment'>/** \internal Like _set() but additionally makes the assumption that no aliasing effect can happen (which</span></td></tr>
<tr class="codeline" data-linenumber="719"><td class="num" id="LN719">719</td><td class="line">      <span class='comment'>* is the case when creating a new matrix) so one can enforce lazy evaluation.</span></td></tr>
<tr class="codeline" data-linenumber="720"><td class="num" id="LN720">720</td><td class="line">      <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="721"><td class="num" id="LN721">721</td><td class="line">      <span class='comment'>* \sa operator=(const MatrixBase&lt;OtherDerived&gt;&amp;), _set()</span></td></tr>
<tr class="codeline" data-linenumber="722"><td class="num" id="LN722">722</td><td class="line">      <span class='comment'>*/</span></td></tr>
<tr class="codeline" data-linenumber="723"><td class="num" id="LN723">723</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> OtherDerived&gt;</td></tr>
<tr class="codeline" data-linenumber="724"><td class="num" id="LN724">724</td><td class="line">    EIGEN_DEVICE_FUNC </td></tr>
<tr class="codeline" data-linenumber="725"><td class="num" id="LN725">725</td><td class="line">    <span class='macro'>EIGEN_STRONG_INLINE<span class='expansion'>inline</span></span> Derived&amp; _set_noalias(<span class='keyword'>const</span> DenseBase&lt;OtherDerived&gt;&amp; other)</td></tr>
<tr class="codeline" data-linenumber="726"><td class="num" id="LN726">726</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="727"><td class="num" id="LN727">727</td><td class="line">      <span class='comment'>// I don't think we need this resize call since the lazyAssign will anyways resize</span></td></tr>
<tr class="codeline" data-linenumber="728"><td class="num" id="LN728">728</td><td class="line">      <span class='comment'>// and lazyAssign will be called by the assign selector.</span></td></tr>
<tr class="codeline" data-linenumber="729"><td class="num" id="LN729">729</td><td class="line">      <span class='comment'>//_resize_to_match(other);</span></td></tr>
<tr class="codeline" data-linenumber="730"><td class="num" id="LN730">730</td><td class="line">      <span class='comment'>// the 'false' below means to enforce lazy evaluation. We don't use lazyAssign() because</span></td></tr>
<tr class="codeline" data-linenumber="731"><td class="num" id="LN731">731</td><td class="line">      <span class='comment'>// it wouldn't allow to copy a row-vector into a column-vector.</span></td></tr>
<tr class="codeline" data-linenumber="732"><td class="num" id="LN732">732</td><td class="line">      internal::call_assignment_no_alias(<span class='keyword'>this</span>-&gt;derived(), other.derived(), internal::assign_op&lt;Scalar,<span class='keyword'>typename</span> OtherDerived::Scalar&gt;());</td></tr>
<tr class="codeline" data-linenumber="733"><td class="num" id="LN733">733</td><td class="line">      <span class='keyword'>return</span> <span class='keyword'>this</span>-&gt;derived();</td></tr>
<tr class="codeline" data-linenumber="734"><td class="num" id="LN734">734</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="735"><td class="num" id="LN735">735</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="736"><td class="num" id="LN736">736</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> T0, <span class='keyword'>typename</span> T1&gt;</td></tr>
<tr class="codeline" data-linenumber="737"><td class="num" id="LN737">737</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="738"><td class="num" id="LN738">738</td><td class="line">    <span class='macro'>EIGEN_STRONG_INLINE<span class='expansion'>inline</span></span> <span class='keyword'>void</span> _init2(Index rows, Index cols, <span class='keyword'>typename</span> internal::enable_if&lt;Base::SizeAtCompileTime!=2,T0&gt;::type* = 0)</td></tr>
<tr class="codeline" data-linenumber="739"><td class="num" id="LN739">739</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="740"><td class="num" id="LN740">740</td><td class="line">      <span class='macro'>EIGEN_STATIC_ASSERT(<span class='keyword'>bool</span>(NumTraits&lt;T0&gt;::IsInteger) &amp;&amp;<span class='expansion'>static_assert(bool(NumTraits&lt;T0&gt;::IsInteger) &amp;&amp;<br> bool(NumTraits&lt;T1&gt;::IsInteger),"FLOATING_POINT_ARGUMENT_PASSED__INTEGER_WAS_EXPECTED"<br>);</span></span></td></tr>
<tr class="codeline" data-linenumber="741"><td class="num" id="LN741">741</td><td class="line">                          <span class='keyword'><span class='macro'>bool</span>(NumTraits&lt;T1&gt;::IsInteger),<span class='expansion'>static_assert(bool(NumTraits&lt;T0&gt;::IsInteger) &amp;&amp;<br> bool(NumTraits&lt;T1&gt;::IsInteger),"FLOATING_POINT_ARGUMENT_PASSED__INTEGER_WAS_EXPECTED"<br>);</span></span></td></tr>
<tr class="codeline" data-linenumber="742"><td class="num" id="LN742">742</td><td class="line">                          <span class='macro'>FLOATING_POINT_ARGUMENT_PASSED__INTEGER_WAS_EXPECTED)<span class='expansion'>static_assert(bool(NumTraits&lt;T0&gt;::IsInteger) &amp;&amp;<br> bool(NumTraits&lt;T1&gt;::IsInteger),"FLOATING_POINT_ARGUMENT_PASSED__INTEGER_WAS_EXPECTED"<br>);</span></span></td></tr>
<tr class="codeline" data-linenumber="743"><td class="num" id="LN743">743</td><td class="line">      resize(rows,cols);</td></tr>
<tr class="codeline" data-linenumber="744"><td class="num" id="LN744">744</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="745"><td class="num" id="LN745">745</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="746"><td class="num" id="LN746">746</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> T0, <span class='keyword'>typename</span> T1&gt;</td></tr>
<tr class="codeline" data-linenumber="747"><td class="num" id="LN747">747</td><td class="line">    EIGEN_DEVICE_FUNC </td></tr>
<tr class="codeline" data-linenumber="748"><td class="num" id="LN748">748</td><td class="line">    <span class='macro'>EIGEN_STRONG_INLINE<span class='expansion'>inline</span></span> <span class='keyword'>void</span> _init2(<span class='keyword'>const</span> T0&amp; val0, <span class='keyword'>const</span> T1&amp; val1, <span class='keyword'>typename</span> internal::enable_if&lt;Base::SizeAtCompileTime==2,T0&gt;::type* = 0)</td></tr>
<tr class="codeline" data-linenumber="749"><td class="num" id="LN749">749</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="750"><td class="num" id="LN750">750</td><td class="line">      <span class='macro'>EIGEN_STATIC_ASSERT_VECTOR_SPECIFIC_SIZE(PlainObjectBase, 2)<span class='expansion'>static_assert(PlainObjectBase::IsVectorAtCompileTime &amp;&amp;<br> PlainObjectBase::SizeAtCompileTime==2,"THIS_METHOD_IS_ONLY_FOR_VECTORS_OF_A_SPECIFIC_SIZE"<br>);</span></span></td></tr>
<tr class="codeline" data-linenumber="751"><td class="num" id="LN751">751</td><td class="line">      m_storage.data()[0] = Scalar(val0);</td></tr>
<tr class="codeline" data-linenumber="752"><td class="num" id="LN752">752</td><td class="line">      m_storage.data()[1] = Scalar(val1);</td></tr>
<tr class="codeline" data-linenumber="753"><td class="num" id="LN753">753</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="754"><td class="num" id="LN754">754</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="755"><td class="num" id="LN755">755</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> T0, <span class='keyword'>typename</span> T1&gt;</td></tr>
<tr class="codeline" data-linenumber="756"><td class="num" id="LN756">756</td><td class="line">    EIGEN_DEVICE_FUNC </td></tr>
<tr class="codeline" data-linenumber="757"><td class="num" id="LN757">757</td><td class="line">    <span class='macro'>EIGEN_STRONG_INLINE<span class='expansion'>inline</span></span> <span class='keyword'>void</span> _init2(<span class='keyword'>const</span> Index&amp; val0, <span class='keyword'>const</span> Index&amp; val1,</td></tr>
<tr class="codeline" data-linenumber="758"><td class="num" id="LN758">758</td><td class="line">                                    <span class='keyword'>typename</span> internal::enable_if&lt;    (!internal::is_same&lt;Index,Scalar&gt;::value)</td></tr>
<tr class="codeline" data-linenumber="759"><td class="num" id="LN759">759</td><td class="line">                                                                  &amp;&amp; (internal::is_same&lt;T0,Index&gt;::value)</td></tr>
<tr class="codeline" data-linenumber="760"><td class="num" id="LN760">760</td><td class="line">                                                                  &amp;&amp; (internal::is_same&lt;T1,Index&gt;::value)</td></tr>
<tr class="codeline" data-linenumber="761"><td class="num" id="LN761">761</td><td class="line">                                                                  &amp;&amp; Base::SizeAtCompileTime==2,T1&gt;::type* = 0)</td></tr>
<tr class="codeline" data-linenumber="762"><td class="num" id="LN762">762</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="763"><td class="num" id="LN763">763</td><td class="line">      <span class='macro'>EIGEN_STATIC_ASSERT_VECTOR_SPECIFIC_SIZE(PlainObjectBase, 2)<span class='expansion'>static_assert(PlainObjectBase::IsVectorAtCompileTime &amp;&amp;<br> PlainObjectBase::SizeAtCompileTime==2,"THIS_METHOD_IS_ONLY_FOR_VECTORS_OF_A_SPECIFIC_SIZE"<br>);</span></span></td></tr>
<tr class="codeline" data-linenumber="764"><td class="num" id="LN764">764</td><td class="line">      m_storage.data()[0] = Scalar(val0);</td></tr>
<tr class="codeline" data-linenumber="765"><td class="num" id="LN765">765</td><td class="line">      m_storage.data()[1] = Scalar(val1);</td></tr>
<tr class="codeline" data-linenumber="766"><td class="num" id="LN766">766</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="767"><td class="num" id="LN767">767</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="768"><td class="num" id="LN768">768</td><td class="line">    <span class='comment'>// The argument is convertible to the Index type and we either have a non 1x1 Matrix, or a dynamic-sized Array,</span></td></tr>
<tr class="codeline" data-linenumber="769"><td class="num" id="LN769">769</td><td class="line">    <span class='comment'>// then the argument is meant to be the size of the object.</span></td></tr>
<tr class="codeline" data-linenumber="770"><td class="num" id="LN770">770</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> T&gt;</td></tr>
<tr class="codeline" data-linenumber="771"><td class="num" id="LN771">771</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="772"><td class="num" id="LN772">772</td><td class="line">    <span class='macro'>EIGEN_STRONG_INLINE<span class='expansion'>inline</span></span> <span class='keyword'>void</span> _init1(Index size, <span class='keyword'>typename</span> internal::enable_if&lt;    (Base::SizeAtCompileTime!=1 || !internal::is_convertible&lt;T, Scalar&gt;::value)</td></tr>
<tr class="codeline" data-linenumber="773"><td class="num" id="LN773">773</td><td class="line">                                                                              &amp;&amp; ((!internal::is_same&lt;<span class='keyword'>typename</span> internal::traits&lt;Derived&gt;::XprKind,ArrayXpr&gt;::value || Base::SizeAtCompileTime==Dynamic)),T&gt;::type* = 0)</td></tr>
<tr class="codeline" data-linenumber="774"><td class="num" id="LN774">774</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="775"><td class="num" id="LN775">775</td><td class="line">      <span class='comment'>// NOTE MSVC 2008 complains if we directly put bool(NumTraits&lt;T&gt;::IsInteger) as the EIGEN_STATIC_ASSERT argument.</span></td></tr>
<tr class="codeline" data-linenumber="776"><td class="num" id="LN776">776</td><td class="line">      <span class='keyword'>const</span> <span class='keyword'>bool</span> is_integer = NumTraits&lt;T&gt;::IsInteger;</td></tr>
<tr class="codeline" data-linenumber="777"><td class="num" id="LN777">777</td><td class="line">      <span class='macro'>EIGEN_UNUSED_VARIABLE(is_integer)<span class='expansion'>Eigen::internal::ignore_unused_variable(is_integer);</span></span>;</td></tr>
<tr class="codeline" data-linenumber="778"><td class="num" id="LN778">778</td><td class="line">      <span class='macro'>EIGEN_STATIC_ASSERT(is_integer,<span class='expansion'>static_assert(is_integer,"FLOATING_POINT_ARGUMENT_PASSED__INTEGER_WAS_EXPECTED"<br>);</span></span></td></tr>
<tr class="codeline" data-linenumber="779"><td class="num" id="LN779">779</td><td class="line">                          <span class='macro'>FLOATING_POINT_ARGUMENT_PASSED__INTEGER_WAS_EXPECTED)<span class='expansion'>static_assert(is_integer,"FLOATING_POINT_ARGUMENT_PASSED__INTEGER_WAS_EXPECTED"<br>);</span></span></td></tr>
<tr class="codeline" data-linenumber="780"><td class="num" id="LN780">780</td><td class="line">      <span class="mrange"><span class="mrange">resize(size)</span></span>;</td></tr>
<tr><td class="num"></td><td class="line"><div id="Path17" class="msg msgEvent" style="margin-left:7ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">17</div></td><td><div class="PathNav"><a href="#Path16" title="Previous event (16)">&#x2190;</a></div></td></td><td>Calling 'PlainObjectBase::resize'</td><td><div class="PathNav"><a href="#Path18" title="Next event (18)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr><td class="num"></td><td class="line"><div id="Path35" class="msg msgEvent" style="margin-left:7ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">35</div></td><td><div class="PathNav"><a href="#Path34" title="Previous event (34)">&#x2190;</a></div></td></td><td>Returned allocated memory</td><td><div class="PathNav"><a href="#Path36" title="Next event (36)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr class="codeline" data-linenumber="781"><td class="num" id="LN781">781</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="782"><td class="num" id="LN782">782</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="783"><td class="num" id="LN783">783</td><td class="line">    <span class='comment'>// We have a 1x1 matrix/array =&gt; the argument is interpreted as the value of the unique coefficient (case where scalar type can be implicitely converted)</span></td></tr>
<tr class="codeline" data-linenumber="784"><td class="num" id="LN784">784</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> T&gt;</td></tr>
<tr class="codeline" data-linenumber="785"><td class="num" id="LN785">785</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="786"><td class="num" id="LN786">786</td><td class="line">    <span class='macro'>EIGEN_STRONG_INLINE<span class='expansion'>inline</span></span> <span class='keyword'>void</span> _init1(<span class='keyword'>const</span> Scalar&amp; val0, <span class='keyword'>typename</span> internal::enable_if&lt;Base::SizeAtCompileTime==1 &amp;&amp; internal::is_convertible&lt;T, Scalar&gt;::value,T&gt;::type* = 0)</td></tr>
<tr class="codeline" data-linenumber="787"><td class="num" id="LN787">787</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="788"><td class="num" id="LN788">788</td><td class="line">      <span class='macro'>EIGEN_STATIC_ASSERT_VECTOR_SPECIFIC_SIZE(PlainObjectBase, 1)<span class='expansion'>static_assert(PlainObjectBase::IsVectorAtCompileTime &amp;&amp;<br> PlainObjectBase::SizeAtCompileTime==1,"THIS_METHOD_IS_ONLY_FOR_VECTORS_OF_A_SPECIFIC_SIZE"<br>);</span></span></td></tr>
<tr class="codeline" data-linenumber="789"><td class="num" id="LN789">789</td><td class="line">      m_storage.data()[0] = val0;</td></tr>
<tr class="codeline" data-linenumber="790"><td class="num" id="LN790">790</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="791"><td class="num" id="LN791">791</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="792"><td class="num" id="LN792">792</td><td class="line">    <span class='comment'>// We have a 1x1 matrix/array =&gt; the argument is interpreted as the value of the unique coefficient (case where scalar type match the index type)</span></td></tr>
<tr class="codeline" data-linenumber="793"><td class="num" id="LN793">793</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> T&gt;</td></tr>
<tr class="codeline" data-linenumber="794"><td class="num" id="LN794">794</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="795"><td class="num" id="LN795">795</td><td class="line">    <span class='macro'>EIGEN_STRONG_INLINE<span class='expansion'>inline</span></span> <span class='keyword'>void</span> _init1(<span class='keyword'>const</span> Index&amp; val0,</td></tr>
<tr class="codeline" data-linenumber="796"><td class="num" id="LN796">796</td><td class="line">                                    <span class='keyword'>typename</span> internal::enable_if&lt;    (!internal::is_same&lt;Index,Scalar&gt;::value)</td></tr>
<tr class="codeline" data-linenumber="797"><td class="num" id="LN797">797</td><td class="line">                                                                  &amp;&amp; (internal::is_same&lt;Index,T&gt;::value)</td></tr>
<tr class="codeline" data-linenumber="798"><td class="num" id="LN798">798</td><td class="line">                                                                  &amp;&amp; Base::SizeAtCompileTime==1</td></tr>
<tr class="codeline" data-linenumber="799"><td class="num" id="LN799">799</td><td class="line">                                                                  &amp;&amp; internal::is_convertible&lt;T, Scalar&gt;::value,T*&gt;::type* = 0)</td></tr>
<tr class="codeline" data-linenumber="800"><td class="num" id="LN800">800</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="801"><td class="num" id="LN801">801</td><td class="line">      <span class='macro'>EIGEN_STATIC_ASSERT_VECTOR_SPECIFIC_SIZE(PlainObjectBase, 1)<span class='expansion'>static_assert(PlainObjectBase::IsVectorAtCompileTime &amp;&amp;<br> PlainObjectBase::SizeAtCompileTime==1,"THIS_METHOD_IS_ONLY_FOR_VECTORS_OF_A_SPECIFIC_SIZE"<br>);</span></span></td></tr>
<tr class="codeline" data-linenumber="802"><td class="num" id="LN802">802</td><td class="line">      m_storage.data()[0] = Scalar(val0);</td></tr>
<tr class="codeline" data-linenumber="803"><td class="num" id="LN803">803</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="804"><td class="num" id="LN804">804</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="805"><td class="num" id="LN805">805</td><td class="line">    <span class='comment'>// Initialize a fixed size matrix from a pointer to raw data</span></td></tr>
<tr class="codeline" data-linenumber="806"><td class="num" id="LN806">806</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> T&gt;</td></tr>
<tr class="codeline" data-linenumber="807"><td class="num" id="LN807">807</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="808"><td class="num" id="LN808">808</td><td class="line">    <span class='macro'>EIGEN_STRONG_INLINE<span class='expansion'>inline</span></span> <span class='keyword'>void</span> _init1(<span class='keyword'>const</span> Scalar* data){</td></tr>
<tr class="codeline" data-linenumber="809"><td class="num" id="LN809">809</td><td class="line">      <span class='keyword'>this</span>-&gt;_set_noalias(ConstMapType(data));</td></tr>
<tr class="codeline" data-linenumber="810"><td class="num" id="LN810">810</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="811"><td class="num" id="LN811">811</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="812"><td class="num" id="LN812">812</td><td class="line">    <span class='comment'>// Initialize an arbitrary matrix from a dense expression</span></td></tr>
<tr class="codeline" data-linenumber="813"><td class="num" id="LN813">813</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> T, <span class='keyword'>typename</span> OtherDerived&gt;</td></tr>
<tr class="codeline" data-linenumber="814"><td class="num" id="LN814">814</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="815"><td class="num" id="LN815">815</td><td class="line">    <span class='macro'>EIGEN_STRONG_INLINE<span class='expansion'>inline</span></span> <span class='keyword'>void</span> _init1(<span class='keyword'>const</span> DenseBase&lt;OtherDerived&gt;&amp; other){</td></tr>
<tr class="codeline" data-linenumber="816"><td class="num" id="LN816">816</td><td class="line">      <span class='keyword'>this</span>-&gt;_set_noalias(other);</td></tr>
<tr class="codeline" data-linenumber="817"><td class="num" id="LN817">817</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="818"><td class="num" id="LN818">818</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="819"><td class="num" id="LN819">819</td><td class="line">    <span class='comment'>// Initialize an arbitrary matrix from an object convertible to the Derived type.</span></td></tr>
<tr class="codeline" data-linenumber="820"><td class="num" id="LN820">820</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> T&gt;</td></tr>
<tr class="codeline" data-linenumber="821"><td class="num" id="LN821">821</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="822"><td class="num" id="LN822">822</td><td class="line">    <span class='macro'>EIGEN_STRONG_INLINE<span class='expansion'>inline</span></span> <span class='keyword'>void</span> _init1(<span class='keyword'>const</span> Derived&amp; other){</td></tr>
<tr class="codeline" data-linenumber="823"><td class="num" id="LN823">823</td><td class="line">      <span class='keyword'>this</span>-&gt;_set_noalias(other);</td></tr>
<tr class="codeline" data-linenumber="824"><td class="num" id="LN824">824</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="825"><td class="num" id="LN825">825</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="826"><td class="num" id="LN826">826</td><td class="line">    <span class='comment'>// Initialize an arbitrary matrix from a generic Eigen expression</span></td></tr>
<tr class="codeline" data-linenumber="827"><td class="num" id="LN827">827</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> T, <span class='keyword'>typename</span> OtherDerived&gt;</td></tr>
<tr class="codeline" data-linenumber="828"><td class="num" id="LN828">828</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="829"><td class="num" id="LN829">829</td><td class="line">    <span class='macro'>EIGEN_STRONG_INLINE<span class='expansion'>inline</span></span> <span class='keyword'>void</span> _init1(<span class='keyword'>const</span> EigenBase&lt;OtherDerived&gt;&amp; other){</td></tr>
<tr class="codeline" data-linenumber="830"><td class="num" id="LN830">830</td><td class="line">      <span class='keyword'>this</span>-&gt;derived() = other;</td></tr>
<tr class="codeline" data-linenumber="831"><td class="num" id="LN831">831</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="832"><td class="num" id="LN832">832</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="833"><td class="num" id="LN833">833</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> T, <span class='keyword'>typename</span> OtherDerived&gt;</td></tr>
<tr class="codeline" data-linenumber="834"><td class="num" id="LN834">834</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="835"><td class="num" id="LN835">835</td><td class="line">    <span class='macro'>EIGEN_STRONG_INLINE<span class='expansion'>inline</span></span> <span class='keyword'>void</span> _init1(<span class='keyword'>const</span> ReturnByValue&lt;OtherDerived&gt;&amp; other)</td></tr>
<tr class="codeline" data-linenumber="836"><td class="num" id="LN836">836</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="837"><td class="num" id="LN837">837</td><td class="line">      resize(other.rows(), other.cols());</td></tr>
<tr class="codeline" data-linenumber="838"><td class="num" id="LN838">838</td><td class="line">      other.evalTo(<span class='keyword'>this</span>-&gt;derived());</td></tr>
<tr class="codeline" data-linenumber="839"><td class="num" id="LN839">839</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="840"><td class="num" id="LN840">840</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="841"><td class="num" id="LN841">841</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> T, <span class='keyword'>typename</span> OtherDerived, <span class='keyword'>int</span> ColsAtCompileTime&gt;</td></tr>
<tr class="codeline" data-linenumber="842"><td class="num" id="LN842">842</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="843"><td class="num" id="LN843">843</td><td class="line">    <span class='macro'>EIGEN_STRONG_INLINE<span class='expansion'>inline</span></span> <span class='keyword'>void</span> _init1(<span class='keyword'>const</span> RotationBase&lt;OtherDerived,ColsAtCompileTime&gt;&amp; r)</td></tr>
<tr class="codeline" data-linenumber="844"><td class="num" id="LN844">844</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="845"><td class="num" id="LN845">845</td><td class="line">      <span class='keyword'>this</span>-&gt;derived() = r;</td></tr>
<tr class="codeline" data-linenumber="846"><td class="num" id="LN846">846</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="847"><td class="num" id="LN847">847</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="848"><td class="num" id="LN848">848</td><td class="line">    <span class='comment'>// For fixed-size Array&lt;Scalar,...&gt;</span></td></tr>
<tr class="codeline" data-linenumber="849"><td class="num" id="LN849">849</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> T&gt;</td></tr>
<tr class="codeline" data-linenumber="850"><td class="num" id="LN850">850</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="851"><td class="num" id="LN851">851</td><td class="line">    <span class='macro'>EIGEN_STRONG_INLINE<span class='expansion'>inline</span></span> <span class='keyword'>void</span> _init1(<span class='keyword'>const</span> Scalar&amp; val0,</td></tr>
<tr class="codeline" data-linenumber="852"><td class="num" id="LN852">852</td><td class="line">                                    <span class='keyword'>typename</span> internal::enable_if&lt;    Base::SizeAtCompileTime!=Dynamic</td></tr>
<tr class="codeline" data-linenumber="853"><td class="num" id="LN853">853</td><td class="line">                                                                  &amp;&amp; Base::SizeAtCompileTime!=1</td></tr>
<tr class="codeline" data-linenumber="854"><td class="num" id="LN854">854</td><td class="line">                                                                  &amp;&amp; internal::is_convertible&lt;T, Scalar&gt;::value</td></tr>
<tr class="codeline" data-linenumber="855"><td class="num" id="LN855">855</td><td class="line">                                                                  &amp;&amp; internal::is_same&lt;<span class='keyword'>typename</span> internal::traits&lt;Derived&gt;::XprKind,ArrayXpr&gt;::value,T&gt;::type* = 0)</td></tr>
<tr class="codeline" data-linenumber="856"><td class="num" id="LN856">856</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="857"><td class="num" id="LN857">857</td><td class="line">      Base::setConstant(val0);</td></tr>
<tr class="codeline" data-linenumber="858"><td class="num" id="LN858">858</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="859"><td class="num" id="LN859">859</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="860"><td class="num" id="LN860">860</td><td class="line">    <span class='comment'>// For fixed-size Array&lt;Index,...&gt;</span></td></tr>
<tr class="codeline" data-linenumber="861"><td class="num" id="LN861">861</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> T&gt;</td></tr>
<tr class="codeline" data-linenumber="862"><td class="num" id="LN862">862</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="863"><td class="num" id="LN863">863</td><td class="line">    <span class='macro'>EIGEN_STRONG_INLINE<span class='expansion'>inline</span></span> <span class='keyword'>void</span> _init1(<span class='keyword'>const</span> Index&amp; val0,</td></tr>
<tr class="codeline" data-linenumber="864"><td class="num" id="LN864">864</td><td class="line">                                    <span class='keyword'>typename</span> internal::enable_if&lt;    (!internal::is_same&lt;Index,Scalar&gt;::value)</td></tr>
<tr class="codeline" data-linenumber="865"><td class="num" id="LN865">865</td><td class="line">                                                                  &amp;&amp; (internal::is_same&lt;Index,T&gt;::value)</td></tr>
<tr class="codeline" data-linenumber="866"><td class="num" id="LN866">866</td><td class="line">                                                                  &amp;&amp; Base::SizeAtCompileTime!=Dynamic</td></tr>
<tr class="codeline" data-linenumber="867"><td class="num" id="LN867">867</td><td class="line">                                                                  &amp;&amp; Base::SizeAtCompileTime!=1</td></tr>
<tr class="codeline" data-linenumber="868"><td class="num" id="LN868">868</td><td class="line">                                                                  &amp;&amp; internal::is_convertible&lt;T, Scalar&gt;::value</td></tr>
<tr class="codeline" data-linenumber="869"><td class="num" id="LN869">869</td><td class="line">                                                                  &amp;&amp; internal::is_same&lt;<span class='keyword'>typename</span> internal::traits&lt;Derived&gt;::XprKind,ArrayXpr&gt;::value,T*&gt;::type* = 0)</td></tr>
<tr class="codeline" data-linenumber="870"><td class="num" id="LN870">870</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="871"><td class="num" id="LN871">871</td><td class="line">      Base::setConstant(val0);</td></tr>
<tr class="codeline" data-linenumber="872"><td class="num" id="LN872">872</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="873"><td class="num" id="LN873">873</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="874"><td class="num" id="LN874">874</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> MatrixTypeA, <span class='keyword'>typename</span> MatrixTypeB, <span class='keyword'>bool</span> SwapPointers&gt;</td></tr>
<tr class="codeline" data-linenumber="875"><td class="num" id="LN875">875</td><td class="line">    <span class='keyword'>friend</span> <span class='keyword'>struct</span> internal::matrix_swap_impl;</td></tr>
<tr class="codeline" data-linenumber="876"><td class="num" id="LN876">876</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="877"><td class="num" id="LN877">877</td><td class="line">  <span class='keyword'>public</span>:</td></tr>
<tr class="codeline" data-linenumber="878"><td class="num" id="LN878">878</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="879"><td class="num" id="LN879">879</td><td class="line"><span class='directive'>#ifndef EIGEN_PARSED_BY_DOXYGEN</span></td></tr>
<tr class="codeline" data-linenumber="880"><td class="num" id="LN880">880</td><td class="line">    <span class='comment'>/** \internal</span></td></tr>
<tr class="codeline" data-linenumber="881"><td class="num" id="LN881">881</td><td class="line">      <span class='comment'>* \brief Override DenseBase::swap() since for dynamic-sized matrices</span></td></tr>
<tr class="codeline" data-linenumber="882"><td class="num" id="LN882">882</td><td class="line">      <span class='comment'>* of same type it is enough to swap the data pointers.</span></td></tr>
<tr class="codeline" data-linenumber="883"><td class="num" id="LN883">883</td><td class="line">      <span class='comment'>*/</span></td></tr>
<tr class="codeline" data-linenumber="884"><td class="num" id="LN884">884</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> OtherDerived&gt;</td></tr>
<tr class="codeline" data-linenumber="885"><td class="num" id="LN885">885</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="886"><td class="num" id="LN886">886</td><td class="line">    <span class='keyword'>void</span> swap(DenseBase&lt;OtherDerived&gt; &amp; other)</td></tr>
<tr class="codeline" data-linenumber="887"><td class="num" id="LN887">887</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="888"><td class="num" id="LN888">888</td><td class="line">      <span class='keyword'>enum</span> { SwapPointers = internal::is_same&lt;Derived, OtherDerived&gt;::value &amp;&amp; Base::SizeAtCompileTime==Dynamic };</td></tr>
<tr class="codeline" data-linenumber="889"><td class="num" id="LN889">889</td><td class="line">      internal::matrix_swap_impl&lt;Derived, OtherDerived, <span class='keyword'>bool</span>(SwapPointers)&gt;::run(<span class='keyword'>this</span>-&gt;derived(), other.derived());</td></tr>
<tr class="codeline" data-linenumber="890"><td class="num" id="LN890">890</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="891"><td class="num" id="LN891">891</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="892"><td class="num" id="LN892">892</td><td class="line">    <span class='comment'>/** \internal</span></td></tr>
<tr class="codeline" data-linenumber="893"><td class="num" id="LN893">893</td><td class="line">      <span class='comment'>* \brief const version forwarded to DenseBase::swap</span></td></tr>
<tr class="codeline" data-linenumber="894"><td class="num" id="LN894">894</td><td class="line">      <span class='comment'>*/</span></td></tr>
<tr class="codeline" data-linenumber="895"><td class="num" id="LN895">895</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> OtherDerived&gt;</td></tr>
<tr class="codeline" data-linenumber="896"><td class="num" id="LN896">896</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="897"><td class="num" id="LN897">897</td><td class="line">    <span class='keyword'>void</span> swap(DenseBase&lt;OtherDerived&gt; <span class='keyword'>const</span> &amp; other)</td></tr>
<tr class="codeline" data-linenumber="898"><td class="num" id="LN898">898</td><td class="line">    { Base::swap(other.derived()); }</td></tr>
<tr class="codeline" data-linenumber="899"><td class="num" id="LN899">899</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="900"><td class="num" id="LN900">900</td><td class="line">    EIGEN_DEVICE_FUNC </td></tr>
<tr class="codeline" data-linenumber="901"><td class="num" id="LN901">901</td><td class="line">    <span class='keyword'>static</span> <span class='macro'>EIGEN_STRONG_INLINE<span class='expansion'>inline</span></span> <span class='keyword'>void</span> _check_template_params()</td></tr>
<tr class="codeline" data-linenumber="902"><td class="num" id="LN902">902</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="903"><td class="num" id="LN903">903</td><td class="line">      <span class='macro'>EIGEN_STATIC_ASSERT((EIGEN_IMPLIES(MaxRowsAtCompileTime==1 &amp;&amp; MaxColsAtCompileTime!=1, (Options&amp;RowMajor)==RowMajor)<span class='expansion'>static_assert(((!(MaxRowsAtCompileTime==1 &amp;&amp; MaxColsAtCompileTime<br>!=1) || ((Options&amp;RowMajor)==RowMajor)) &amp;&amp; (!(MaxColsAtCompileTime<br>==1 &amp;&amp; MaxRowsAtCompileTime!=1) || ((Options&amp;RowMajor<br>)==0)) &amp;&amp; ((RowsAtCompileTime == Dynamic) || (RowsAtCompileTime<br> &gt;= 0)) &amp;&amp; ((ColsAtCompileTime == Dynamic) || (ColsAtCompileTime<br> &gt;= 0)) &amp;&amp; ((MaxRowsAtCompileTime == Dynamic) || (<br>MaxRowsAtCompileTime &gt;= 0)) &amp;&amp; ((MaxColsAtCompileTime<br> == Dynamic) || (MaxColsAtCompileTime &gt;= 0)) &amp;&amp; (MaxRowsAtCompileTime<br> == RowsAtCompileTime || RowsAtCompileTime==Dynamic) &amp;&amp;<br> (MaxColsAtCompileTime == ColsAtCompileTime || ColsAtCompileTime<br>==Dynamic) &amp;&amp; (Options &amp; (DontAlign|RowMajor)) ==<br> Options),"INVALID_MATRIX_TEMPLATE_PARAMETERS");</span></span></td></tr>
<tr class="codeline" data-linenumber="904"><td class="num" id="LN904">904</td><td class="line">                        <span class='macro'>&amp;&amp; EIGEN_IMPLIES(MaxColsAtCompileTime==1 &amp;&amp; MaxRowsAtCompileTime!=1, (Options&amp;RowMajor)==0)<span class='expansion'>static_assert(((!(MaxRowsAtCompileTime==1 &amp;&amp; MaxColsAtCompileTime<br>!=1) || ((Options&amp;RowMajor)==RowMajor)) &amp;&amp; (!(MaxColsAtCompileTime<br>==1 &amp;&amp; MaxRowsAtCompileTime!=1) || ((Options&amp;RowMajor<br>)==0)) &amp;&amp; ((RowsAtCompileTime == Dynamic) || (RowsAtCompileTime<br> &gt;= 0)) &amp;&amp; ((ColsAtCompileTime == Dynamic) || (ColsAtCompileTime<br> &gt;= 0)) &amp;&amp; ((MaxRowsAtCompileTime == Dynamic) || (<br>MaxRowsAtCompileTime &gt;= 0)) &amp;&amp; ((MaxColsAtCompileTime<br> == Dynamic) || (MaxColsAtCompileTime &gt;= 0)) &amp;&amp; (MaxRowsAtCompileTime<br> == RowsAtCompileTime || RowsAtCompileTime==Dynamic) &amp;&amp;<br> (MaxColsAtCompileTime == ColsAtCompileTime || ColsAtCompileTime<br>==Dynamic) &amp;&amp; (Options &amp; (DontAlign|RowMajor)) ==<br> Options),"INVALID_MATRIX_TEMPLATE_PARAMETERS");</span></span></td></tr>
<tr class="codeline" data-linenumber="905"><td class="num" id="LN905">905</td><td class="line">                        <span class='macro'>&amp;&amp; ((RowsAtCompileTime == Dynamic) || (RowsAtCompileTime &gt;= 0))<span class='expansion'>static_assert(((!(MaxRowsAtCompileTime==1 &amp;&amp; MaxColsAtCompileTime<br>!=1) || ((Options&amp;RowMajor)==RowMajor)) &amp;&amp; (!(MaxColsAtCompileTime<br>==1 &amp;&amp; MaxRowsAtCompileTime!=1) || ((Options&amp;RowMajor<br>)==0)) &amp;&amp; ((RowsAtCompileTime == Dynamic) || (RowsAtCompileTime<br> &gt;= 0)) &amp;&amp; ((ColsAtCompileTime == Dynamic) || (ColsAtCompileTime<br> &gt;= 0)) &amp;&amp; ((MaxRowsAtCompileTime == Dynamic) || (<br>MaxRowsAtCompileTime &gt;= 0)) &amp;&amp; ((MaxColsAtCompileTime<br> == Dynamic) || (MaxColsAtCompileTime &gt;= 0)) &amp;&amp; (MaxRowsAtCompileTime<br> == RowsAtCompileTime || RowsAtCompileTime==Dynamic) &amp;&amp;<br> (MaxColsAtCompileTime == ColsAtCompileTime || ColsAtCompileTime<br>==Dynamic) &amp;&amp; (Options &amp; (DontAlign|RowMajor)) ==<br> Options),"INVALID_MATRIX_TEMPLATE_PARAMETERS");</span></span></td></tr>
<tr class="codeline" data-linenumber="906"><td class="num" id="LN906">906</td><td class="line">                        <span class='macro'>&amp;&amp; ((ColsAtCompileTime == Dynamic) || (ColsAtCompileTime &gt;= 0))<span class='expansion'>static_assert(((!(MaxRowsAtCompileTime==1 &amp;&amp; MaxColsAtCompileTime<br>!=1) || ((Options&amp;RowMajor)==RowMajor)) &amp;&amp; (!(MaxColsAtCompileTime<br>==1 &amp;&amp; MaxRowsAtCompileTime!=1) || ((Options&amp;RowMajor<br>)==0)) &amp;&amp; ((RowsAtCompileTime == Dynamic) || (RowsAtCompileTime<br> &gt;= 0)) &amp;&amp; ((ColsAtCompileTime == Dynamic) || (ColsAtCompileTime<br> &gt;= 0)) &amp;&amp; ((MaxRowsAtCompileTime == Dynamic) || (<br>MaxRowsAtCompileTime &gt;= 0)) &amp;&amp; ((MaxColsAtCompileTime<br> == Dynamic) || (MaxColsAtCompileTime &gt;= 0)) &amp;&amp; (MaxRowsAtCompileTime<br> == RowsAtCompileTime || RowsAtCompileTime==Dynamic) &amp;&amp;<br> (MaxColsAtCompileTime == ColsAtCompileTime || ColsAtCompileTime<br>==Dynamic) &amp;&amp; (Options &amp; (DontAlign|RowMajor)) ==<br> Options),"INVALID_MATRIX_TEMPLATE_PARAMETERS");</span></span></td></tr>
<tr class="codeline" data-linenumber="907"><td class="num" id="LN907">907</td><td class="line">                        <span class='macro'>&amp;&amp; ((MaxRowsAtCompileTime == Dynamic) || (MaxRowsAtCompileTime &gt;= 0))<span class='expansion'>static_assert(((!(MaxRowsAtCompileTime==1 &amp;&amp; MaxColsAtCompileTime<br>!=1) || ((Options&amp;RowMajor)==RowMajor)) &amp;&amp; (!(MaxColsAtCompileTime<br>==1 &amp;&amp; MaxRowsAtCompileTime!=1) || ((Options&amp;RowMajor<br>)==0)) &amp;&amp; ((RowsAtCompileTime == Dynamic) || (RowsAtCompileTime<br> &gt;= 0)) &amp;&amp; ((ColsAtCompileTime == Dynamic) || (ColsAtCompileTime<br> &gt;= 0)) &amp;&amp; ((MaxRowsAtCompileTime == Dynamic) || (<br>MaxRowsAtCompileTime &gt;= 0)) &amp;&amp; ((MaxColsAtCompileTime<br> == Dynamic) || (MaxColsAtCompileTime &gt;= 0)) &amp;&amp; (MaxRowsAtCompileTime<br> == RowsAtCompileTime || RowsAtCompileTime==Dynamic) &amp;&amp;<br> (MaxColsAtCompileTime == ColsAtCompileTime || ColsAtCompileTime<br>==Dynamic) &amp;&amp; (Options &amp; (DontAlign|RowMajor)) ==<br> Options),"INVALID_MATRIX_TEMPLATE_PARAMETERS");</span></span></td></tr>
<tr class="codeline" data-linenumber="908"><td class="num" id="LN908">908</td><td class="line">                        <span class='macro'>&amp;&amp; ((MaxColsAtCompileTime == Dynamic) || (MaxColsAtCompileTime &gt;= 0))<span class='expansion'>static_assert(((!(MaxRowsAtCompileTime==1 &amp;&amp; MaxColsAtCompileTime<br>!=1) || ((Options&amp;RowMajor)==RowMajor)) &amp;&amp; (!(MaxColsAtCompileTime<br>==1 &amp;&amp; MaxRowsAtCompileTime!=1) || ((Options&amp;RowMajor<br>)==0)) &amp;&amp; ((RowsAtCompileTime == Dynamic) || (RowsAtCompileTime<br> &gt;= 0)) &amp;&amp; ((ColsAtCompileTime == Dynamic) || (ColsAtCompileTime<br> &gt;= 0)) &amp;&amp; ((MaxRowsAtCompileTime == Dynamic) || (<br>MaxRowsAtCompileTime &gt;= 0)) &amp;&amp; ((MaxColsAtCompileTime<br> == Dynamic) || (MaxColsAtCompileTime &gt;= 0)) &amp;&amp; (MaxRowsAtCompileTime<br> == RowsAtCompileTime || RowsAtCompileTime==Dynamic) &amp;&amp;<br> (MaxColsAtCompileTime == ColsAtCompileTime || ColsAtCompileTime<br>==Dynamic) &amp;&amp; (Options &amp; (DontAlign|RowMajor)) ==<br> Options),"INVALID_MATRIX_TEMPLATE_PARAMETERS");</span></span></td></tr>
<tr class="codeline" data-linenumber="909"><td class="num" id="LN909">909</td><td class="line">                        <span class='macro'>&amp;&amp; (MaxRowsAtCompileTime == RowsAtCompileTime || RowsAtCompileTime==Dynamic)<span class='expansion'>static_assert(((!(MaxRowsAtCompileTime==1 &amp;&amp; MaxColsAtCompileTime<br>!=1) || ((Options&amp;RowMajor)==RowMajor)) &amp;&amp; (!(MaxColsAtCompileTime<br>==1 &amp;&amp; MaxRowsAtCompileTime!=1) || ((Options&amp;RowMajor<br>)==0)) &amp;&amp; ((RowsAtCompileTime == Dynamic) || (RowsAtCompileTime<br> &gt;= 0)) &amp;&amp; ((ColsAtCompileTime == Dynamic) || (ColsAtCompileTime<br> &gt;= 0)) &amp;&amp; ((MaxRowsAtCompileTime == Dynamic) || (<br>MaxRowsAtCompileTime &gt;= 0)) &amp;&amp; ((MaxColsAtCompileTime<br> == Dynamic) || (MaxColsAtCompileTime &gt;= 0)) &amp;&amp; (MaxRowsAtCompileTime<br> == RowsAtCompileTime || RowsAtCompileTime==Dynamic) &amp;&amp;<br> (MaxColsAtCompileTime == ColsAtCompileTime || ColsAtCompileTime<br>==Dynamic) &amp;&amp; (Options &amp; (DontAlign|RowMajor)) ==<br> Options),"INVALID_MATRIX_TEMPLATE_PARAMETERS");</span></span></td></tr>
<tr class="codeline" data-linenumber="910"><td class="num" id="LN910">910</td><td class="line">                        <span class='macro'>&amp;&amp; (MaxColsAtCompileTime == ColsAtCompileTime || ColsAtCompileTime==Dynamic)<span class='expansion'>static_assert(((!(MaxRowsAtCompileTime==1 &amp;&amp; MaxColsAtCompileTime<br>!=1) || ((Options&amp;RowMajor)==RowMajor)) &amp;&amp; (!(MaxColsAtCompileTime<br>==1 &amp;&amp; MaxRowsAtCompileTime!=1) || ((Options&amp;RowMajor<br>)==0)) &amp;&amp; ((RowsAtCompileTime == Dynamic) || (RowsAtCompileTime<br> &gt;= 0)) &amp;&amp; ((ColsAtCompileTime == Dynamic) || (ColsAtCompileTime<br> &gt;= 0)) &amp;&amp; ((MaxRowsAtCompileTime == Dynamic) || (<br>MaxRowsAtCompileTime &gt;= 0)) &amp;&amp; ((MaxColsAtCompileTime<br> == Dynamic) || (MaxColsAtCompileTime &gt;= 0)) &amp;&amp; (MaxRowsAtCompileTime<br> == RowsAtCompileTime || RowsAtCompileTime==Dynamic) &amp;&amp;<br> (MaxColsAtCompileTime == ColsAtCompileTime || ColsAtCompileTime<br>==Dynamic) &amp;&amp; (Options &amp; (DontAlign|RowMajor)) ==<br> Options),"INVALID_MATRIX_TEMPLATE_PARAMETERS");</span></span></td></tr>
<tr class="codeline" data-linenumber="911"><td class="num" id="LN911">911</td><td class="line">                        <span class='macro'>&amp;&amp; (Options &amp; (DontAlign|RowMajor)) == Options),<span class='expansion'>static_assert(((!(MaxRowsAtCompileTime==1 &amp;&amp; MaxColsAtCompileTime<br>!=1) || ((Options&amp;RowMajor)==RowMajor)) &amp;&amp; (!(MaxColsAtCompileTime<br>==1 &amp;&amp; MaxRowsAtCompileTime!=1) || ((Options&amp;RowMajor<br>)==0)) &amp;&amp; ((RowsAtCompileTime == Dynamic) || (RowsAtCompileTime<br> &gt;= 0)) &amp;&amp; ((ColsAtCompileTime == Dynamic) || (ColsAtCompileTime<br> &gt;= 0)) &amp;&amp; ((MaxRowsAtCompileTime == Dynamic) || (<br>MaxRowsAtCompileTime &gt;= 0)) &amp;&amp; ((MaxColsAtCompileTime<br> == Dynamic) || (MaxColsAtCompileTime &gt;= 0)) &amp;&amp; (MaxRowsAtCompileTime<br> == RowsAtCompileTime || RowsAtCompileTime==Dynamic) &amp;&amp;<br> (MaxColsAtCompileTime == ColsAtCompileTime || ColsAtCompileTime<br>==Dynamic) &amp;&amp; (Options &amp; (DontAlign|RowMajor)) ==<br> Options),"INVALID_MATRIX_TEMPLATE_PARAMETERS");</span></span></td></tr>
<tr class="codeline" data-linenumber="912"><td class="num" id="LN912">912</td><td class="line">        <span class='macro'>INVALID_MATRIX_TEMPLATE_PARAMETERS)<span class='expansion'>static_assert(((!(MaxRowsAtCompileTime==1 &amp;&amp; MaxColsAtCompileTime<br>!=1) || ((Options&amp;RowMajor)==RowMajor)) &amp;&amp; (!(MaxColsAtCompileTime<br>==1 &amp;&amp; MaxRowsAtCompileTime!=1) || ((Options&amp;RowMajor<br>)==0)) &amp;&amp; ((RowsAtCompileTime == Dynamic) || (RowsAtCompileTime<br> &gt;= 0)) &amp;&amp; ((ColsAtCompileTime == Dynamic) || (ColsAtCompileTime<br> &gt;= 0)) &amp;&amp; ((MaxRowsAtCompileTime == Dynamic) || (<br>MaxRowsAtCompileTime &gt;= 0)) &amp;&amp; ((MaxColsAtCompileTime<br> == Dynamic) || (MaxColsAtCompileTime &gt;= 0)) &amp;&amp; (MaxRowsAtCompileTime<br> == RowsAtCompileTime || RowsAtCompileTime==Dynamic) &amp;&amp;<br> (MaxColsAtCompileTime == ColsAtCompileTime || ColsAtCompileTime<br>==Dynamic) &amp;&amp; (Options &amp; (DontAlign|RowMajor)) ==<br> Options),"INVALID_MATRIX_TEMPLATE_PARAMETERS");</span></span></td></tr>
<tr class="codeline" data-linenumber="913"><td class="num" id="LN913">913</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="914"><td class="num" id="LN914">914</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="915"><td class="num" id="LN915">915</td><td class="line">    <span class='keyword'>enum</span> { IsPlainObjectBase = 1 };</td></tr>
<tr class="codeline" data-linenumber="916"><td class="num" id="LN916">916</td><td class="line"><span class='directive'>#endif</span></td></tr>
<tr class="codeline" data-linenumber="917"><td class="num" id="LN917">917</td><td class="line">};</td></tr>
<tr class="codeline" data-linenumber="918"><td class="num" id="LN918">918</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="919"><td class="num" id="LN919">919</td><td class="line"><span class='keyword'>namespace</span> internal {</td></tr>
<tr class="codeline" data-linenumber="920"><td class="num" id="LN920">920</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="921"><td class="num" id="LN921">921</td><td class="line"><span class='keyword'>template</span> &lt;<span class='keyword'>typename</span> Derived, <span class='keyword'>typename</span> OtherDerived, <span class='keyword'>bool</span> IsVector&gt;</td></tr>
<tr class="codeline" data-linenumber="922"><td class="num" id="LN922">922</td><td class="line"><span class='keyword'>struct</span> conservative_resize_like_impl</td></tr>
<tr class="codeline" data-linenumber="923"><td class="num" id="LN923">923</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="924"><td class="num" id="LN924">924</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>void</span> run(DenseBase&lt;Derived&gt;&amp; _this, Index rows, Index cols)</td></tr>
<tr class="codeline" data-linenumber="925"><td class="num" id="LN925">925</td><td class="line">  {</td></tr>
<tr class="codeline" data-linenumber="926"><td class="num" id="LN926">926</td><td class="line">    <span class='keyword'>if</span> (_this.rows() == rows &amp;&amp; _this.cols() == cols) <span class='keyword'>return</span>;</td></tr>
<tr class="codeline" data-linenumber="927"><td class="num" id="LN927">927</td><td class="line">    <span class='macro'>EIGEN_STATIC_ASSERT_DYNAMIC_SIZE(Derived)<span class='expansion'>static_assert(Derived::SizeAtCompileTime==Eigen::Dynamic,"YOU_CALLED_A_DYNAMIC_SIZE_METHOD_ON_A_FIXED_SIZE_MATRIX_OR_VECTOR"<br>);</span></span></td></tr>
<tr class="codeline" data-linenumber="928"><td class="num" id="LN928">928</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="929"><td class="num" id="LN929">929</td><td class="line">    <span class='keyword'>if</span> ( ( Derived::IsRowMajor &amp;&amp; _this.cols() == cols) || <span class='comment'>// row-major and we change only the number of rows</span></td></tr>
<tr class="codeline" data-linenumber="930"><td class="num" id="LN930">930</td><td class="line">         (!Derived::IsRowMajor &amp;&amp; _this.rows() == rows) )  <span class='comment'>// column-major and we change only the number of columns</span></td></tr>
<tr class="codeline" data-linenumber="931"><td class="num" id="LN931">931</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="932"><td class="num" id="LN932">932</td><td class="line">      internal::check_rows_cols_for_overflow&lt;Derived::MaxSizeAtCompileTime&gt;::run(rows, cols);</td></tr>
<tr class="codeline" data-linenumber="933"><td class="num" id="LN933">933</td><td class="line">      _this.derived().m_storage.conservativeResize(rows*cols,rows,cols);</td></tr>
<tr class="codeline" data-linenumber="934"><td class="num" id="LN934">934</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="935"><td class="num" id="LN935">935</td><td class="line">    <span class='keyword'>else</span></td></tr>
<tr class="codeline" data-linenumber="936"><td class="num" id="LN936">936</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="937"><td class="num" id="LN937">937</td><td class="line">      <span class='comment'>// The storage order does not allow us to use reallocation.</span></td></tr>
<tr class="codeline" data-linenumber="938"><td class="num" id="LN938">938</td><td class="line">      <span class='keyword'>typename</span> Derived::PlainObject tmp(rows,cols);</td></tr>
<tr class="codeline" data-linenumber="939"><td class="num" id="LN939">939</td><td class="line">      <span class='keyword'>const</span> Index common_rows = numext::mini(rows, _this.rows());</td></tr>
<tr class="codeline" data-linenumber="940"><td class="num" id="LN940">940</td><td class="line">      <span class='keyword'>const</span> Index common_cols = numext::mini(cols, _this.cols());</td></tr>
<tr class="codeline" data-linenumber="941"><td class="num" id="LN941">941</td><td class="line">      tmp.block(0,0,common_rows,common_cols) = _this.block(0,0,common_rows,common_cols);</td></tr>
<tr class="codeline" data-linenumber="942"><td class="num" id="LN942">942</td><td class="line">      _this.derived().swap(tmp);</td></tr>
<tr class="codeline" data-linenumber="943"><td class="num" id="LN943">943</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="944"><td class="num" id="LN944">944</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="945"><td class="num" id="LN945">945</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="946"><td class="num" id="LN946">946</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>void</span> run(DenseBase&lt;Derived&gt;&amp; _this, <span class='keyword'>const</span> DenseBase&lt;OtherDerived&gt;&amp; other)</td></tr>
<tr class="codeline" data-linenumber="947"><td class="num" id="LN947">947</td><td class="line">  {</td></tr>
<tr class="codeline" data-linenumber="948"><td class="num" id="LN948">948</td><td class="line">    <span class='keyword'>if</span> (_this.rows() == other.rows() &amp;&amp; _this.cols() == other.cols()) <span class='keyword'>return</span>;</td></tr>
<tr class="codeline" data-linenumber="949"><td class="num" id="LN949">949</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="950"><td class="num" id="LN950">950</td><td class="line">    <span class='comment'>// Note: Here is space for improvement. Basically, for conservativeResize(Index,Index),</span></td></tr>
<tr class="codeline" data-linenumber="951"><td class="num" id="LN951">951</td><td class="line">    <span class='comment'>// neither RowsAtCompileTime or ColsAtCompileTime must be Dynamic. If only one of the</span></td></tr>
<tr class="codeline" data-linenumber="952"><td class="num" id="LN952">952</td><td class="line">    <span class='comment'>// dimensions is dynamic, one could use either conservativeResize(Index rows, NoChange_t) or</span></td></tr>
<tr class="codeline" data-linenumber="953"><td class="num" id="LN953">953</td><td class="line">    <span class='comment'>// conservativeResize(NoChange_t, Index cols). For these methods new static asserts like</span></td></tr>
<tr class="codeline" data-linenumber="954"><td class="num" id="LN954">954</td><td class="line">    <span class='comment'>// EIGEN_STATIC_ASSERT_DYNAMIC_ROWS and EIGEN_STATIC_ASSERT_DYNAMIC_COLS would be good.</span></td></tr>
<tr class="codeline" data-linenumber="955"><td class="num" id="LN955">955</td><td class="line">    <span class='macro'>EIGEN_STATIC_ASSERT_DYNAMIC_SIZE(Derived)<span class='expansion'>static_assert(Derived::SizeAtCompileTime==Eigen::Dynamic,"YOU_CALLED_A_DYNAMIC_SIZE_METHOD_ON_A_FIXED_SIZE_MATRIX_OR_VECTOR"<br>);</span></span></td></tr>
<tr class="codeline" data-linenumber="956"><td class="num" id="LN956">956</td><td class="line">    <span class='macro'>EIGEN_STATIC_ASSERT_DYNAMIC_SIZE(OtherDerived)<span class='expansion'>static_assert(OtherDerived::SizeAtCompileTime==Eigen::Dynamic<br>,"YOU_CALLED_A_DYNAMIC_SIZE_METHOD_ON_A_FIXED_SIZE_MATRIX_OR_VECTOR"<br>);</span></span></td></tr>
<tr class="codeline" data-linenumber="957"><td class="num" id="LN957">957</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="958"><td class="num" id="LN958">958</td><td class="line">    <span class='keyword'>if</span> ( ( Derived::IsRowMajor &amp;&amp; _this.cols() == other.cols()) || <span class='comment'>// row-major and we change only the number of rows</span></td></tr>
<tr class="codeline" data-linenumber="959"><td class="num" id="LN959">959</td><td class="line">         (!Derived::IsRowMajor &amp;&amp; _this.rows() == other.rows()) )  <span class='comment'>// column-major and we change only the number of columns</span></td></tr>
<tr class="codeline" data-linenumber="960"><td class="num" id="LN960">960</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="961"><td class="num" id="LN961">961</td><td class="line">      <span class='keyword'>const</span> Index new_rows = other.rows() - _this.rows();</td></tr>
<tr class="codeline" data-linenumber="962"><td class="num" id="LN962">962</td><td class="line">      <span class='keyword'>const</span> Index new_cols = other.cols() - _this.cols();</td></tr>
<tr class="codeline" data-linenumber="963"><td class="num" id="LN963">963</td><td class="line">      _this.derived().m_storage.conservativeResize(other.size(),other.rows(),other.cols());</td></tr>
<tr class="codeline" data-linenumber="964"><td class="num" id="LN964">964</td><td class="line">      <span class='keyword'>if</span> (new_rows&gt;0)</td></tr>
<tr class="codeline" data-linenumber="965"><td class="num" id="LN965">965</td><td class="line">        _this.bottomRightCorner(new_rows, other.cols()) = other.bottomRows(new_rows);</td></tr>
<tr class="codeline" data-linenumber="966"><td class="num" id="LN966">966</td><td class="line">      <span class='keyword'>else</span> <span class='keyword'>if</span> (new_cols&gt;0)</td></tr>
<tr class="codeline" data-linenumber="967"><td class="num" id="LN967">967</td><td class="line">        _this.bottomRightCorner(other.rows(), new_cols) = other.rightCols(new_cols);</td></tr>
<tr class="codeline" data-linenumber="968"><td class="num" id="LN968">968</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="969"><td class="num" id="LN969">969</td><td class="line">    <span class='keyword'>else</span></td></tr>
<tr class="codeline" data-linenumber="970"><td class="num" id="LN970">970</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="971"><td class="num" id="LN971">971</td><td class="line">      <span class='comment'>// The storage order does not allow us to use reallocation.</span></td></tr>
<tr class="codeline" data-linenumber="972"><td class="num" id="LN972">972</td><td class="line">      <span class='keyword'>typename</span> Derived::PlainObject tmp(other);</td></tr>
<tr class="codeline" data-linenumber="973"><td class="num" id="LN973">973</td><td class="line">      <span class='keyword'>const</span> Index common_rows = numext::mini(tmp.rows(), _this.rows());</td></tr>
<tr class="codeline" data-linenumber="974"><td class="num" id="LN974">974</td><td class="line">      <span class='keyword'>const</span> Index common_cols = numext::mini(tmp.cols(), _this.cols());</td></tr>
<tr class="codeline" data-linenumber="975"><td class="num" id="LN975">975</td><td class="line">      tmp.block(0,0,common_rows,common_cols) = _this.block(0,0,common_rows,common_cols);</td></tr>
<tr class="codeline" data-linenumber="976"><td class="num" id="LN976">976</td><td class="line">      _this.derived().swap(tmp);</td></tr>
<tr class="codeline" data-linenumber="977"><td class="num" id="LN977">977</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="978"><td class="num" id="LN978">978</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="979"><td class="num" id="LN979">979</td><td class="line">};</td></tr>
<tr class="codeline" data-linenumber="980"><td class="num" id="LN980">980</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="981"><td class="num" id="LN981">981</td><td class="line"><span class='comment'>// Here, the specialization for vectors inherits from the general matrix case</span></td></tr>
<tr class="codeline" data-linenumber="982"><td class="num" id="LN982">982</td><td class="line"><span class='comment'>// to allow calling .conservativeResize(rows,cols) on vectors.</span></td></tr>
<tr class="codeline" data-linenumber="983"><td class="num" id="LN983">983</td><td class="line"><span class='keyword'>template</span> &lt;<span class='keyword'>typename</span> Derived, <span class='keyword'>typename</span> OtherDerived&gt;</td></tr>
<tr class="codeline" data-linenumber="984"><td class="num" id="LN984">984</td><td class="line"><span class='keyword'>struct</span> conservative_resize_like_impl&lt;Derived,OtherDerived,<span class='keyword'>true</span>&gt;</td></tr>
<tr class="codeline" data-linenumber="985"><td class="num" id="LN985">985</td><td class="line">  : conservative_resize_like_impl&lt;Derived,OtherDerived,<span class='keyword'>false</span>&gt;</td></tr>
<tr class="codeline" data-linenumber="986"><td class="num" id="LN986">986</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="987"><td class="num" id="LN987">987</td><td class="line">  <span class='keyword'>using</span> conservative_resize_like_impl&lt;Derived,OtherDerived,<span class='keyword'>false</span>&gt;::run;</td></tr>
<tr class="codeline" data-linenumber="988"><td class="num" id="LN988">988</td><td class="line">  </td></tr>
<tr class="codeline" data-linenumber="989"><td class="num" id="LN989">989</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>void</span> run(DenseBase&lt;Derived&gt;&amp; _this, Index size)</td></tr>
<tr class="codeline" data-linenumber="990"><td class="num" id="LN990">990</td><td class="line">  {</td></tr>
<tr class="codeline" data-linenumber="991"><td class="num" id="LN991">991</td><td class="line">    <span class='keyword'>const</span> Index new_rows = Derived::RowsAtCompileTime==1 ? 1 : size;</td></tr>
<tr class="codeline" data-linenumber="992"><td class="num" id="LN992">992</td><td class="line">    <span class='keyword'>const</span> Index new_cols = Derived::RowsAtCompileTime==1 ? size : 1;</td></tr>
<tr class="codeline" data-linenumber="993"><td class="num" id="LN993">993</td><td class="line">    _this.derived().m_storage.conservativeResize(size,new_rows,new_cols);</td></tr>
<tr class="codeline" data-linenumber="994"><td class="num" id="LN994">994</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="995"><td class="num" id="LN995">995</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="996"><td class="num" id="LN996">996</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>void</span> run(DenseBase&lt;Derived&gt;&amp; _this, <span class='keyword'>const</span> DenseBase&lt;OtherDerived&gt;&amp; other)</td></tr>
<tr class="codeline" data-linenumber="997"><td class="num" id="LN997">997</td><td class="line">  {</td></tr>
<tr class="codeline" data-linenumber="998"><td class="num" id="LN998">998</td><td class="line">    <span class='keyword'>if</span> (_this.rows() == other.rows() &amp;&amp; _this.cols() == other.cols()) <span class='keyword'>return</span>;</td></tr>
<tr class="codeline" data-linenumber="999"><td class="num" id="LN999">999</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1000"><td class="num" id="LN1000">1000</td><td class="line">    <span class='keyword'>const</span> Index num_new_elements = other.size() - _this.size();</td></tr>
<tr class="codeline" data-linenumber="1001"><td class="num" id="LN1001">1001</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1002"><td class="num" id="LN1002">1002</td><td class="line">    <span class='keyword'>const</span> Index new_rows = Derived::RowsAtCompileTime==1 ? 1 : other.rows();</td></tr>
<tr class="codeline" data-linenumber="1003"><td class="num" id="LN1003">1003</td><td class="line">    <span class='keyword'>const</span> Index new_cols = Derived::RowsAtCompileTime==1 ? other.cols() : 1;</td></tr>
<tr class="codeline" data-linenumber="1004"><td class="num" id="LN1004">1004</td><td class="line">    _this.derived().m_storage.conservativeResize(other.size(),new_rows,new_cols);</td></tr>
<tr class="codeline" data-linenumber="1005"><td class="num" id="LN1005">1005</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1006"><td class="num" id="LN1006">1006</td><td class="line">    <span class='keyword'>if</span> (num_new_elements &gt; 0)</td></tr>
<tr class="codeline" data-linenumber="1007"><td class="num" id="LN1007">1007</td><td class="line">      _this.tail(num_new_elements) = other.tail(num_new_elements);</td></tr>
<tr class="codeline" data-linenumber="1008"><td class="num" id="LN1008">1008</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="1009"><td class="num" id="LN1009">1009</td><td class="line">};</td></tr>
<tr class="codeline" data-linenumber="1010"><td class="num" id="LN1010">1010</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1011"><td class="num" id="LN1011">1011</td><td class="line"><span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> MatrixTypeA, <span class='keyword'>typename</span> MatrixTypeB, <span class='keyword'>bool</span> SwapPointers&gt;</td></tr>
<tr class="codeline" data-linenumber="1012"><td class="num" id="LN1012">1012</td><td class="line"><span class='keyword'>struct</span> matrix_swap_impl</td></tr>
<tr class="codeline" data-linenumber="1013"><td class="num" id="LN1013">1013</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="1014"><td class="num" id="LN1014">1014</td><td class="line">  EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="1015"><td class="num" id="LN1015">1015</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>inline</span> <span class='keyword'>void</span> run(MatrixTypeA&amp; a, MatrixTypeB&amp; b)</td></tr>
<tr class="codeline" data-linenumber="1016"><td class="num" id="LN1016">1016</td><td class="line">  {</td></tr>
<tr class="codeline" data-linenumber="1017"><td class="num" id="LN1017">1017</td><td class="line">    a.base().swap(b);</td></tr>
<tr class="codeline" data-linenumber="1018"><td class="num" id="LN1018">1018</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="1019"><td class="num" id="LN1019">1019</td><td class="line">};</td></tr>
<tr class="codeline" data-linenumber="1020"><td class="num" id="LN1020">1020</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1021"><td class="num" id="LN1021">1021</td><td class="line"><span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> MatrixTypeA, <span class='keyword'>typename</span> MatrixTypeB&gt;</td></tr>
<tr class="codeline" data-linenumber="1022"><td class="num" id="LN1022">1022</td><td class="line"><span class='keyword'>struct</span> matrix_swap_impl&lt;MatrixTypeA, MatrixTypeB, <span class='keyword'>true</span>&gt;</td></tr>
<tr class="codeline" data-linenumber="1023"><td class="num" id="LN1023">1023</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="1024"><td class="num" id="LN1024">1024</td><td class="line">  EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="1025"><td class="num" id="LN1025">1025</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>inline</span> <span class='keyword'>void</span> run(MatrixTypeA&amp; a, MatrixTypeB&amp; b)</td></tr>
<tr class="codeline" data-linenumber="1026"><td class="num" id="LN1026">1026</td><td class="line">  {</td></tr>
<tr class="codeline" data-linenumber="1027"><td class="num" id="LN1027">1027</td><td class="line">    <span class='keyword'>static_cast</span>&lt;<span class='keyword'>typename</span> MatrixTypeA::Base&amp;&gt;(a).m_storage.swap(<span class='keyword'>static_cast</span>&lt;<span class='keyword'>typename</span> MatrixTypeB::Base&amp;&gt;(b).m_storage);</td></tr>
<tr class="codeline" data-linenumber="1028"><td class="num" id="LN1028">1028</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="1029"><td class="num" id="LN1029">1029</td><td class="line">};</td></tr>
<tr class="codeline" data-linenumber="1030"><td class="num" id="LN1030">1030</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1031"><td class="num" id="LN1031">1031</td><td class="line">} <span class='comment'>// end namespace internal</span></td></tr>
<tr class="codeline" data-linenumber="1032"><td class="num" id="LN1032">1032</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1033"><td class="num" id="LN1033">1033</td><td class="line">} <span class='comment'>// end namespace Eigen</span></td></tr>
<tr class="codeline" data-linenumber="1034"><td class="num" id="LN1034">1034</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1035"><td class="num" id="LN1035">1035</td><td class="line"><span class='directive'>#endif // EIGEN_DENSESTORAGEBASE_H</span></td></tr>
</table><hr class=divider>
<div id=File40458>
<div class=FileNav><a href="#File40633">&#x2190;</a></div><h4 class=FileName>/Users/u237002/Dropbox/Hacking/sat/arts/3rdparty/Eigen/src/Core/DenseStorage.h</h4>
<div class=FileNav><a href="#File34297">&#x2192;</a></div></div>
<table class="code" data-fileid="40458">
<tr class="codeline" data-linenumber="1"><td class="num" id="LN1">1</td><td class="line"><span class='comment'>// This file is part of Eigen, a lightweight C++ template library</span></td></tr>
<tr class="codeline" data-linenumber="2"><td class="num" id="LN2">2</td><td class="line"><span class='comment'>// for linear algebra.</span></td></tr>
<tr class="codeline" data-linenumber="3"><td class="num" id="LN3">3</td><td class="line"><span class='comment'>//</span></td></tr>
<tr class="codeline" data-linenumber="4"><td class="num" id="LN4">4</td><td class="line"><span class='comment'>// Copyright (C) 2008 Gael Guennebaud &lt;gael.guennebaud@inria.fr&gt;</span></td></tr>
<tr class="codeline" data-linenumber="5"><td class="num" id="LN5">5</td><td class="line"><span class='comment'>// Copyright (C) 2006-2009 Benoit Jacob &lt;jacob.benoit.1@gmail.com&gt;</span></td></tr>
<tr class="codeline" data-linenumber="6"><td class="num" id="LN6">6</td><td class="line"><span class='comment'>// Copyright (C) 2010-2013 Hauke Heibel &lt;hauke.heibel@gmail.com&gt;</span></td></tr>
<tr class="codeline" data-linenumber="7"><td class="num" id="LN7">7</td><td class="line"><span class='comment'>//</span></td></tr>
<tr class="codeline" data-linenumber="8"><td class="num" id="LN8">8</td><td class="line"><span class='comment'>// This Source Code Form is subject to the terms of the Mozilla</span></td></tr>
<tr class="codeline" data-linenumber="9"><td class="num" id="LN9">9</td><td class="line"><span class='comment'>// Public License v. 2.0. If a copy of the MPL was not distributed</span></td></tr>
<tr class="codeline" data-linenumber="10"><td class="num" id="LN10">10</td><td class="line"><span class='comment'>// with this file, You can obtain one at http://mozilla.org/MPL/2.0/.</span></td></tr>
<tr class="codeline" data-linenumber="11"><td class="num" id="LN11">11</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="12"><td class="num" id="LN12">12</td><td class="line"><span class='directive'>#ifndef EIGEN_MATRIXSTORAGE_H</span></td></tr>
<tr class="codeline" data-linenumber="13"><td class="num" id="LN13">13</td><td class="line"><span class='directive'>#define EIGEN_MATRIXSTORAGE_H</span></td></tr>
<tr class="codeline" data-linenumber="14"><td class="num" id="LN14">14</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="15"><td class="num" id="LN15">15</td><td class="line"><span class='directive'>#ifdef EIGEN_DENSE_STORAGE_CTOR_PLUGIN</span></td></tr>
<tr class="codeline" data-linenumber="16"><td class="num" id="LN16">16</td><td class="line">  <span class='directive'>#define EIGEN_INTERNAL_DENSE_STORAGE_CTOR_PLUGIN(X) X; EIGEN_DENSE_STORAGE_CTOR_PLUGIN;</span></td></tr>
<tr class="codeline" data-linenumber="17"><td class="num" id="LN17">17</td><td class="line"><span class='directive'>#else</span></td></tr>
<tr class="codeline" data-linenumber="18"><td class="num" id="LN18">18</td><td class="line">  <span class='directive'>#define EIGEN_INTERNAL_DENSE_STORAGE_CTOR_PLUGIN(X)</span></td></tr>
<tr class="codeline" data-linenumber="19"><td class="num" id="LN19">19</td><td class="line"><span class='directive'>#endif</span></td></tr>
<tr class="codeline" data-linenumber="20"><td class="num" id="LN20">20</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="21"><td class="num" id="LN21">21</td><td class="line"><span class='keyword'>namespace</span> Eigen {</td></tr>
<tr class="codeline" data-linenumber="22"><td class="num" id="LN22">22</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="23"><td class="num" id="LN23">23</td><td class="line"><span class='keyword'>namespace</span> internal {</td></tr>
<tr class="codeline" data-linenumber="24"><td class="num" id="LN24">24</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="25"><td class="num" id="LN25">25</td><td class="line"><span class='keyword'>struct</span> constructor_without_unaligned_array_assert {};</td></tr>
<tr class="codeline" data-linenumber="26"><td class="num" id="LN26">26</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="27"><td class="num" id="LN27">27</td><td class="line"><span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> T, <span class='keyword'>int</span> Size&gt;</td></tr>
<tr class="codeline" data-linenumber="28"><td class="num" id="LN28">28</td><td class="line">EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="29"><td class="num" id="LN29">29</td><td class="line"><span class='keyword'>void</span> check_static_allocation_size()</td></tr>
<tr class="codeline" data-linenumber="30"><td class="num" id="LN30">30</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="31"><td class="num" id="LN31">31</td><td class="line">  <span class='comment'>// if EIGEN_STACK_ALLOCATION_LIMIT is defined to 0, then no limit</span></td></tr>
<tr class="codeline" data-linenumber="32"><td class="num" id="LN32">32</td><td class="line">  <span class='directive'>#if <span class='macro'>EIGEN_STACK_ALLOCATION_LIMIT<span class='expansion'>131072</span></span></span></td></tr>
<tr class="codeline" data-linenumber="33"><td class="num" id="LN33">33</td><td class="line">  <span class='macro'>EIGEN_STATIC_ASSERT(Size * <span class='keyword'>sizeof</span>(T) &lt;= EIGEN_STACK_ALLOCATION_LIMIT, OBJECT_ALLOCATED_ON_STACK_IS_TOO_BIG)<span class='expansion'>static_assert(Size * sizeof(T) &lt;= 131072,"OBJECT_ALLOCATED_ON_STACK_IS_TOO_BIG"<br>);</span></span>;</td></tr>
<tr class="codeline" data-linenumber="34"><td class="num" id="LN34">34</td><td class="line">  <span class='directive'>#endif</span></td></tr>
<tr class="codeline" data-linenumber="35"><td class="num" id="LN35">35</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="36"><td class="num" id="LN36">36</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="37"><td class="num" id="LN37">37</td><td class="line"><span class='comment'>/** \internal</span></td></tr>
<tr class="codeline" data-linenumber="38"><td class="num" id="LN38">38</td><td class="line">  <span class='comment'>* Static array. If the MatrixOrArrayOptions require auto-alignment, the array will be automatically aligned:</span></td></tr>
<tr class="codeline" data-linenumber="39"><td class="num" id="LN39">39</td><td class="line">  <span class='comment'>* to 16 bytes boundary if the total size is a multiple of 16 bytes.</span></td></tr>
<tr class="codeline" data-linenumber="40"><td class="num" id="LN40">40</td><td class="line">  <span class='comment'>*/</span></td></tr>
<tr class="codeline" data-linenumber="41"><td class="num" id="LN41">41</td><td class="line"><span class='keyword'>template</span> &lt;<span class='keyword'>typename</span> T, <span class='keyword'>int</span> Size, <span class='keyword'>int</span> MatrixOrArrayOptions,</td></tr>
<tr class="codeline" data-linenumber="42"><td class="num" id="LN42">42</td><td class="line">          <span class='keyword'>int</span> Alignment = (MatrixOrArrayOptions&amp;DontAlign) ? 0</td></tr>
<tr class="codeline" data-linenumber="43"><td class="num" id="LN43">43</td><td class="line">                        : compute_default_alignment&lt;T,Size&gt;::value &gt;</td></tr>
<tr class="codeline" data-linenumber="44"><td class="num" id="LN44">44</td><td class="line"><span class='keyword'>struct</span> plain_array</td></tr>
<tr class="codeline" data-linenumber="45"><td class="num" id="LN45">45</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="46"><td class="num" id="LN46">46</td><td class="line">  T array[Size];</td></tr>
<tr class="codeline" data-linenumber="47"><td class="num" id="LN47">47</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="48"><td class="num" id="LN48">48</td><td class="line">  EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="49"><td class="num" id="LN49">49</td><td class="line">  plain_array()</td></tr>
<tr class="codeline" data-linenumber="50"><td class="num" id="LN50">50</td><td class="line">  { </td></tr>
<tr class="codeline" data-linenumber="51"><td class="num" id="LN51">51</td><td class="line">    check_static_allocation_size&lt;T,Size&gt;();</td></tr>
<tr class="codeline" data-linenumber="52"><td class="num" id="LN52">52</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="53"><td class="num" id="LN53">53</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="54"><td class="num" id="LN54">54</td><td class="line">  EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="55"><td class="num" id="LN55">55</td><td class="line">  plain_array(constructor_without_unaligned_array_assert)</td></tr>
<tr class="codeline" data-linenumber="56"><td class="num" id="LN56">56</td><td class="line">  { </td></tr>
<tr class="codeline" data-linenumber="57"><td class="num" id="LN57">57</td><td class="line">    check_static_allocation_size&lt;T,Size&gt;();</td></tr>
<tr class="codeline" data-linenumber="58"><td class="num" id="LN58">58</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="59"><td class="num" id="LN59">59</td><td class="line">};</td></tr>
<tr class="codeline" data-linenumber="60"><td class="num" id="LN60">60</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="61"><td class="num" id="LN61">61</td><td class="line"><span class='directive'>#if defined(EIGEN_DISABLE_UNALIGNED_ARRAY_ASSERT)</span></td></tr>
<tr class="codeline" data-linenumber="62"><td class="num" id="LN62">62</td><td class="line">  <span class='directive'>#define <span class='macro'>EIGEN_MAKE_UNALIGNED_ARRAY_ASSERT(sizemask)<span class='expansion'>(__builtin_expect(!((internal::UIntPtr(array) &amp; (sizemask<br>)) == 0 &amp;&amp; "this assertion is explained here: " "http://eigen.tuxfamily.org/dox-devel/group__TopicUnalignedArrayAssert.html"<br> " **** READ THIS WEB PAGE !!! ****"), 0) ? __assert_rtn(__func__<br>, "/Users/u237002/Dropbox/Hacking/sat/arts/3rdparty/Eigen/src/Core/DenseStorage.h"<br>, 62, "(internal::UIntPtr(array) &amp; (sizemask)) == 0 &amp;&amp; \"this assertion is explained here: \" \"http://eigen.tuxfamily.org/dox-devel/group__TopicUnalignedArrayAssert.html\" \" **** READ THIS WEB PAGE !!! ****\""<br>) : (void)0);</span></span></span></td></tr>
<tr class="codeline" data-linenumber="63"><td class="num" id="LN63">63</td><td class="line"><span class='directive'>#elif <span class='macro'>EIGEN_GNUC_AT_LEAST(4,7)<span class='expansion'>((4==4 &amp;&amp; 2&gt;=7) || 4&gt;4)</span></span></span> </td></tr>
<tr class="codeline" data-linenumber="64"><td class="num" id="LN64">64</td><td class="line">  <span class='comment'>// GCC 4.7 is too aggressive in its optimizations and remove the alignement test based on the fact the array is declared to be aligned.</span></td></tr>
<tr class="codeline" data-linenumber="65"><td class="num" id="LN65">65</td><td class="line">  <span class='comment'>// See this bug report: http://gcc.gnu.org/bugzilla/show_bug.cgi?id=53900</span></td></tr>
<tr class="codeline" data-linenumber="66"><td class="num" id="LN66">66</td><td class="line">  <span class='comment'>// Hiding the origin of the array pointer behind a function argument seems to do the trick even if the function is inlined:</span></td></tr>
<tr class="codeline" data-linenumber="67"><td class="num" id="LN67">67</td><td class="line">  <span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> PtrType&gt;</td></tr>
<tr class="codeline" data-linenumber="68"><td class="num" id="LN68">68</td><td class="line">  <span class='macro'>EIGEN_ALWAYS_INLINE<span class='expansion'>__attribute__((always_inline)) inline</span></span> PtrType eigen_unaligned_array_assert_workaround_gcc47(PtrType array) { <span class='keyword'>return</span> array; }</td></tr>
<tr class="codeline" data-linenumber="69"><td class="num" id="LN69">69</td><td class="line">  <span class='directive'>#define <span class='macro'>EIGEN_MAKE_UNALIGNED_ARRAY_ASSERT(sizemask)<span class='expansion'>(__builtin_expect(!((internal::UIntPtr(array) &amp; (sizemask<br>)) == 0 &amp;&amp; "this assertion is explained here: " "http://eigen.tuxfamily.org/dox-devel/group__TopicUnalignedArrayAssert.html"<br> " **** READ THIS WEB PAGE !!! ****"), 0) ? __assert_rtn(__func__<br>, "/Users/u237002/Dropbox/Hacking/sat/arts/3rdparty/Eigen/src/Core/DenseStorage.h"<br>, 69, "(internal::UIntPtr(array) &amp; (sizemask)) == 0 &amp;&amp; \"this assertion is explained here: \" \"http://eigen.tuxfamily.org/dox-devel/group__TopicUnalignedArrayAssert.html\" \" **** READ THIS WEB PAGE !!! ****\""<br>) : (void)0);</span></span> \</span></td></tr>
<tr class="codeline" data-linenumber="70"><td class="num" id="LN70">70</td><td class="line">    <span class='directive'><span class='macro'>eigen_assert((internal::UIntPtr(eigen_unaligned_array_assert_workaround_gcc47(array)) &amp; (sizemask)) == 0 \<span class='expansion'>(__builtin_expect(!((internal::UIntPtr(eigen_unaligned_array_assert_workaround_gcc47<br>(array)) &amp; (sizemask)) == 0 &amp;&amp; "this assertion is explained here: "<br> "http://eigen.tuxfamily.org/dox-devel/group__TopicUnalignedArrayAssert.html"<br> " **** READ THIS WEB PAGE !!! ****"), 0) ? __assert_rtn(__func__<br>, "/Users/u237002/Dropbox/Hacking/sat/arts/3rdparty/Eigen/src/Core/DenseStorage.h"<br>, 73, "(internal::UIntPtr(eigen_unaligned_array_assert_workaround_gcc47(array)) &amp; (sizemask)) == 0 &amp;&amp; \"this assertion is explained here: \" \"http://eigen.tuxfamily.org/dox-devel/group__TopicUnalignedArrayAssert.html\" \" **** READ THIS WEB PAGE !!! ****\""<br>) : (void)0)</span></span></span></td></tr>
<tr class="codeline" data-linenumber="71"><td class="num" id="LN71">71</td><td class="line">              <span class='directive'><span class='macro'>&amp;&amp; "this assertion is explained here: " \<span class='expansion'>(__builtin_expect(!((internal::UIntPtr(eigen_unaligned_array_assert_workaround_gcc47<br>(array)) &amp; (sizemask)) == 0 &amp;&amp; "this assertion is explained here: "<br> "http://eigen.tuxfamily.org/dox-devel/group__TopicUnalignedArrayAssert.html"<br> " **** READ THIS WEB PAGE !!! ****"), 0) ? __assert_rtn(__func__<br>, "/Users/u237002/Dropbox/Hacking/sat/arts/3rdparty/Eigen/src/Core/DenseStorage.h"<br>, 73, "(internal::UIntPtr(eigen_unaligned_array_assert_workaround_gcc47(array)) &amp; (sizemask)) == 0 &amp;&amp; \"this assertion is explained here: \" \"http://eigen.tuxfamily.org/dox-devel/group__TopicUnalignedArrayAssert.html\" \" **** READ THIS WEB PAGE !!! ****\""<br>) : (void)0)</span></span></span></td></tr>
<tr class="codeline" data-linenumber="72"><td class="num" id="LN72">72</td><td class="line">              <span class='directive'><span class='macro'>"http://eigen.tuxfamily.org/dox-devel/group__TopicUnalignedArrayAssert.html" \<span class='expansion'>(__builtin_expect(!((internal::UIntPtr(eigen_unaligned_array_assert_workaround_gcc47<br>(array)) &amp; (sizemask)) == 0 &amp;&amp; "this assertion is explained here: "<br> "http://eigen.tuxfamily.org/dox-devel/group__TopicUnalignedArrayAssert.html"<br> " **** READ THIS WEB PAGE !!! ****"), 0) ? __assert_rtn(__func__<br>, "/Users/u237002/Dropbox/Hacking/sat/arts/3rdparty/Eigen/src/Core/DenseStorage.h"<br>, 73, "(internal::UIntPtr(eigen_unaligned_array_assert_workaround_gcc47(array)) &amp; (sizemask)) == 0 &amp;&amp; \"this assertion is explained here: \" \"http://eigen.tuxfamily.org/dox-devel/group__TopicUnalignedArrayAssert.html\" \" **** READ THIS WEB PAGE !!! ****\""<br>) : (void)0)</span></span></span></td></tr>
<tr class="codeline" data-linenumber="73"><td class="num" id="LN73">73</td><td class="line">              <span class='directive'><span class='macro'>" **** READ THIS WEB PAGE !!! ****")<span class='expansion'>(__builtin_expect(!((internal::UIntPtr(eigen_unaligned_array_assert_workaround_gcc47<br>(array)) &amp; (sizemask)) == 0 &amp;&amp; "this assertion is explained here: "<br> "http://eigen.tuxfamily.org/dox-devel/group__TopicUnalignedArrayAssert.html"<br> " **** READ THIS WEB PAGE !!! ****"), 0) ? __assert_rtn(__func__<br>, "/Users/u237002/Dropbox/Hacking/sat/arts/3rdparty/Eigen/src/Core/DenseStorage.h"<br>, 73, "(internal::UIntPtr(eigen_unaligned_array_assert_workaround_gcc47(array)) &amp; (sizemask)) == 0 &amp;&amp; \"this assertion is explained here: \" \"http://eigen.tuxfamily.org/dox-devel/group__TopicUnalignedArrayAssert.html\" \" **** READ THIS WEB PAGE !!! ****\""<br>) : (void)0)</span></span>;</span></td></tr>
<tr class="codeline" data-linenumber="74"><td class="num" id="LN74">74</td><td class="line"><span class='directive'>#else</span></td></tr>
<tr class="codeline" data-linenumber="75"><td class="num" id="LN75">75</td><td class="line">  <span class='directive'>#define <span class='macro'>EIGEN_MAKE_UNALIGNED_ARRAY_ASSERT(sizemask)<span class='expansion'>(__builtin_expect(!((internal::UIntPtr(array) &amp; (sizemask<br>)) == 0 &amp;&amp; "this assertion is explained here: " "http://eigen.tuxfamily.org/dox-devel/group__TopicUnalignedArrayAssert.html"<br> " **** READ THIS WEB PAGE !!! ****"), 0) ? __assert_rtn(__func__<br>, "/Users/u237002/Dropbox/Hacking/sat/arts/3rdparty/Eigen/src/Core/DenseStorage.h"<br>, 75, "(internal::UIntPtr(array) &amp; (sizemask)) == 0 &amp;&amp; \"this assertion is explained here: \" \"http://eigen.tuxfamily.org/dox-devel/group__TopicUnalignedArrayAssert.html\" \" **** READ THIS WEB PAGE !!! ****\""<br>) : (void)0);</span></span> \</span></td></tr>
<tr class="codeline" data-linenumber="76"><td class="num" id="LN76">76</td><td class="line">    <span class='directive'><span class='macro'>eigen_assert((internal::UIntPtr(array) &amp; (sizemask)) == 0 \<span class='expansion'>(__builtin_expect(!((internal::UIntPtr(array) &amp; (sizemask<br>)) == 0 &amp;&amp; "this assertion is explained here: " "http://eigen.tuxfamily.org/dox-devel/group__TopicUnalignedArrayAssert.html"<br> " **** READ THIS WEB PAGE !!! ****"), 0) ? __assert_rtn(__func__<br>, "/Users/u237002/Dropbox/Hacking/sat/arts/3rdparty/Eigen/src/Core/DenseStorage.h"<br>, 79, "(internal::UIntPtr(array) &amp; (sizemask)) == 0 &amp;&amp; \"this assertion is explained here: \" \"http://eigen.tuxfamily.org/dox-devel/group__TopicUnalignedArrayAssert.html\" \" **** READ THIS WEB PAGE !!! ****\""<br>) : (void)0)</span></span></span></td></tr>
<tr class="codeline" data-linenumber="77"><td class="num" id="LN77">77</td><td class="line">              <span class='directive'><span class='macro'>&amp;&amp; "this assertion is explained here: " \<span class='expansion'>(__builtin_expect(!((internal::UIntPtr(array) &amp; (sizemask<br>)) == 0 &amp;&amp; "this assertion is explained here: " "http://eigen.tuxfamily.org/dox-devel/group__TopicUnalignedArrayAssert.html"<br> " **** READ THIS WEB PAGE !!! ****"), 0) ? __assert_rtn(__func__<br>, "/Users/u237002/Dropbox/Hacking/sat/arts/3rdparty/Eigen/src/Core/DenseStorage.h"<br>, 79, "(internal::UIntPtr(array) &amp; (sizemask)) == 0 &amp;&amp; \"this assertion is explained here: \" \"http://eigen.tuxfamily.org/dox-devel/group__TopicUnalignedArrayAssert.html\" \" **** READ THIS WEB PAGE !!! ****\""<br>) : (void)0)</span></span></span></td></tr>
<tr class="codeline" data-linenumber="78"><td class="num" id="LN78">78</td><td class="line">              <span class='directive'><span class='macro'>"http://eigen.tuxfamily.org/dox-devel/group__TopicUnalignedArrayAssert.html" \<span class='expansion'>(__builtin_expect(!((internal::UIntPtr(array) &amp; (sizemask<br>)) == 0 &amp;&amp; "this assertion is explained here: " "http://eigen.tuxfamily.org/dox-devel/group__TopicUnalignedArrayAssert.html"<br> " **** READ THIS WEB PAGE !!! ****"), 0) ? __assert_rtn(__func__<br>, "/Users/u237002/Dropbox/Hacking/sat/arts/3rdparty/Eigen/src/Core/DenseStorage.h"<br>, 79, "(internal::UIntPtr(array) &amp; (sizemask)) == 0 &amp;&amp; \"this assertion is explained here: \" \"http://eigen.tuxfamily.org/dox-devel/group__TopicUnalignedArrayAssert.html\" \" **** READ THIS WEB PAGE !!! ****\""<br>) : (void)0)</span></span></span></td></tr>
<tr class="codeline" data-linenumber="79"><td class="num" id="LN79">79</td><td class="line">              <span class='directive'><span class='macro'>" **** READ THIS WEB PAGE !!! ****")<span class='expansion'>(__builtin_expect(!((internal::UIntPtr(array) &amp; (sizemask<br>)) == 0 &amp;&amp; "this assertion is explained here: " "http://eigen.tuxfamily.org/dox-devel/group__TopicUnalignedArrayAssert.html"<br> " **** READ THIS WEB PAGE !!! ****"), 0) ? __assert_rtn(__func__<br>, "/Users/u237002/Dropbox/Hacking/sat/arts/3rdparty/Eigen/src/Core/DenseStorage.h"<br>, 79, "(internal::UIntPtr(array) &amp; (sizemask)) == 0 &amp;&amp; \"this assertion is explained here: \" \"http://eigen.tuxfamily.org/dox-devel/group__TopicUnalignedArrayAssert.html\" \" **** READ THIS WEB PAGE !!! ****\""<br>) : (void)0)</span></span>;</span></td></tr>
<tr class="codeline" data-linenumber="80"><td class="num" id="LN80">80</td><td class="line"><span class='directive'>#endif</span></td></tr>
<tr class="codeline" data-linenumber="81"><td class="num" id="LN81">81</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="82"><td class="num" id="LN82">82</td><td class="line"><span class='keyword'>template</span> &lt;<span class='keyword'>typename</span> T, <span class='keyword'>int</span> Size, <span class='keyword'>int</span> MatrixOrArrayOptions&gt;</td></tr>
<tr class="codeline" data-linenumber="83"><td class="num" id="LN83">83</td><td class="line"><span class='keyword'>struct</span> plain_array&lt;T, Size, MatrixOrArrayOptions, 8&gt;</td></tr>
<tr class="codeline" data-linenumber="84"><td class="num" id="LN84">84</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="85"><td class="num" id="LN85">85</td><td class="line">  <span class='macro'>EIGEN_ALIGN_TO_BOUNDARY(8)<span class='expansion'>__attribute__((aligned(8)))</span></span> T array[Size];</td></tr>
<tr class="codeline" data-linenumber="86"><td class="num" id="LN86">86</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="87"><td class="num" id="LN87">87</td><td class="line">  EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="88"><td class="num" id="LN88">88</td><td class="line">  plain_array() </td></tr>
<tr class="codeline" data-linenumber="89"><td class="num" id="LN89">89</td><td class="line">  {</td></tr>
<tr class="codeline" data-linenumber="90"><td class="num" id="LN90">90</td><td class="line">    <span class='macro'>EIGEN_MAKE_UNALIGNED_ARRAY_ASSERT(7)<span class='expansion'>(__builtin_expect(!((internal::UIntPtr(array) &amp; (7)) == 0<br> &amp;&amp; "this assertion is explained here: " "http://eigen.tuxfamily.org/dox-devel/group__TopicUnalignedArrayAssert.html"<br> " **** READ THIS WEB PAGE !!! ****"), 0) ? __assert_rtn(__func__<br>, "/Users/u237002/Dropbox/Hacking/sat/arts/3rdparty/Eigen/src/Core/DenseStorage.h"<br>, 90, "(internal::UIntPtr(array) &amp; (7)) == 0 &amp;&amp; \"this assertion is explained here: \" \"http://eigen.tuxfamily.org/dox-devel/group__TopicUnalignedArrayAssert.html\" \" **** READ THIS WEB PAGE !!! ****\""<br>) : (void)0);</span></span>;</td></tr>
<tr class="codeline" data-linenumber="91"><td class="num" id="LN91">91</td><td class="line">    check_static_allocation_size&lt;T,Size&gt;();</td></tr>
<tr class="codeline" data-linenumber="92"><td class="num" id="LN92">92</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="93"><td class="num" id="LN93">93</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="94"><td class="num" id="LN94">94</td><td class="line">  EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="95"><td class="num" id="LN95">95</td><td class="line">  plain_array(constructor_without_unaligned_array_assert) </td></tr>
<tr class="codeline" data-linenumber="96"><td class="num" id="LN96">96</td><td class="line">  { </td></tr>
<tr class="codeline" data-linenumber="97"><td class="num" id="LN97">97</td><td class="line">    check_static_allocation_size&lt;T,Size&gt;();</td></tr>
<tr class="codeline" data-linenumber="98"><td class="num" id="LN98">98</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="99"><td class="num" id="LN99">99</td><td class="line">};</td></tr>
<tr class="codeline" data-linenumber="100"><td class="num" id="LN100">100</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="101"><td class="num" id="LN101">101</td><td class="line"><span class='keyword'>template</span> &lt;<span class='keyword'>typename</span> T, <span class='keyword'>int</span> Size, <span class='keyword'>int</span> MatrixOrArrayOptions&gt;</td></tr>
<tr class="codeline" data-linenumber="102"><td class="num" id="LN102">102</td><td class="line"><span class='keyword'>struct</span> plain_array&lt;T, Size, MatrixOrArrayOptions, 16&gt;</td></tr>
<tr class="codeline" data-linenumber="103"><td class="num" id="LN103">103</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="104"><td class="num" id="LN104">104</td><td class="line">  <span class='macro'>EIGEN_ALIGN_TO_BOUNDARY(16)<span class='expansion'>__attribute__((aligned(16)))</span></span> T array[Size];</td></tr>
<tr class="codeline" data-linenumber="105"><td class="num" id="LN105">105</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="106"><td class="num" id="LN106">106</td><td class="line">  EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="107"><td class="num" id="LN107">107</td><td class="line">  plain_array() </td></tr>
<tr class="codeline" data-linenumber="108"><td class="num" id="LN108">108</td><td class="line">  { </td></tr>
<tr class="codeline" data-linenumber="109"><td class="num" id="LN109">109</td><td class="line">    <span class='macro'>EIGEN_MAKE_UNALIGNED_ARRAY_ASSERT(15)<span class='expansion'>(__builtin_expect(!((internal::UIntPtr(array) &amp; (15)) == 0<br> &amp;&amp; "this assertion is explained here: " "http://eigen.tuxfamily.org/dox-devel/group__TopicUnalignedArrayAssert.html"<br> " **** READ THIS WEB PAGE !!! ****"), 0) ? __assert_rtn(__func__<br>, "/Users/u237002/Dropbox/Hacking/sat/arts/3rdparty/Eigen/src/Core/DenseStorage.h"<br>, 109, "(internal::UIntPtr(array) &amp; (15)) == 0 &amp;&amp; \"this assertion is explained here: \" \"http://eigen.tuxfamily.org/dox-devel/group__TopicUnalignedArrayAssert.html\" \" **** READ THIS WEB PAGE !!! ****\""<br>) : (void)0);</span></span>;</td></tr>
<tr class="codeline" data-linenumber="110"><td class="num" id="LN110">110</td><td class="line">    check_static_allocation_size&lt;T,Size&gt;();</td></tr>
<tr class="codeline" data-linenumber="111"><td class="num" id="LN111">111</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="112"><td class="num" id="LN112">112</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="113"><td class="num" id="LN113">113</td><td class="line">  EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="114"><td class="num" id="LN114">114</td><td class="line">  plain_array(constructor_without_unaligned_array_assert) </td></tr>
<tr class="codeline" data-linenumber="115"><td class="num" id="LN115">115</td><td class="line">  { </td></tr>
<tr class="codeline" data-linenumber="116"><td class="num" id="LN116">116</td><td class="line">    check_static_allocation_size&lt;T,Size&gt;();</td></tr>
<tr class="codeline" data-linenumber="117"><td class="num" id="LN117">117</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="118"><td class="num" id="LN118">118</td><td class="line">};</td></tr>
<tr class="codeline" data-linenumber="119"><td class="num" id="LN119">119</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="120"><td class="num" id="LN120">120</td><td class="line"><span class='keyword'>template</span> &lt;<span class='keyword'>typename</span> T, <span class='keyword'>int</span> Size, <span class='keyword'>int</span> MatrixOrArrayOptions&gt;</td></tr>
<tr class="codeline" data-linenumber="121"><td class="num" id="LN121">121</td><td class="line"><span class='keyword'>struct</span> plain_array&lt;T, Size, MatrixOrArrayOptions, 32&gt;</td></tr>
<tr class="codeline" data-linenumber="122"><td class="num" id="LN122">122</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="123"><td class="num" id="LN123">123</td><td class="line">  <span class='macro'>EIGEN_ALIGN_TO_BOUNDARY(32)<span class='expansion'>__attribute__((aligned(32)))</span></span> T array[Size];</td></tr>
<tr class="codeline" data-linenumber="124"><td class="num" id="LN124">124</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="125"><td class="num" id="LN125">125</td><td class="line">  EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="126"><td class="num" id="LN126">126</td><td class="line">  plain_array() </td></tr>
<tr class="codeline" data-linenumber="127"><td class="num" id="LN127">127</td><td class="line">  {</td></tr>
<tr class="codeline" data-linenumber="128"><td class="num" id="LN128">128</td><td class="line">    <span class='macro'>EIGEN_MAKE_UNALIGNED_ARRAY_ASSERT(31)<span class='expansion'>(__builtin_expect(!((internal::UIntPtr(array) &amp; (31)) == 0<br> &amp;&amp; "this assertion is explained here: " "http://eigen.tuxfamily.org/dox-devel/group__TopicUnalignedArrayAssert.html"<br> " **** READ THIS WEB PAGE !!! ****"), 0) ? __assert_rtn(__func__<br>, "/Users/u237002/Dropbox/Hacking/sat/arts/3rdparty/Eigen/src/Core/DenseStorage.h"<br>, 128, "(internal::UIntPtr(array) &amp; (31)) == 0 &amp;&amp; \"this assertion is explained here: \" \"http://eigen.tuxfamily.org/dox-devel/group__TopicUnalignedArrayAssert.html\" \" **** READ THIS WEB PAGE !!! ****\""<br>) : (void)0);</span></span>;</td></tr>
<tr class="codeline" data-linenumber="129"><td class="num" id="LN129">129</td><td class="line">    check_static_allocation_size&lt;T,Size&gt;();</td></tr>
<tr class="codeline" data-linenumber="130"><td class="num" id="LN130">130</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="131"><td class="num" id="LN131">131</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="132"><td class="num" id="LN132">132</td><td class="line">  EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="133"><td class="num" id="LN133">133</td><td class="line">  plain_array(constructor_without_unaligned_array_assert) </td></tr>
<tr class="codeline" data-linenumber="134"><td class="num" id="LN134">134</td><td class="line">  { </td></tr>
<tr class="codeline" data-linenumber="135"><td class="num" id="LN135">135</td><td class="line">    check_static_allocation_size&lt;T,Size&gt;();</td></tr>
<tr class="codeline" data-linenumber="136"><td class="num" id="LN136">136</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="137"><td class="num" id="LN137">137</td><td class="line">};</td></tr>
<tr class="codeline" data-linenumber="138"><td class="num" id="LN138">138</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="139"><td class="num" id="LN139">139</td><td class="line"><span class='keyword'>template</span> &lt;<span class='keyword'>typename</span> T, <span class='keyword'>int</span> Size, <span class='keyword'>int</span> MatrixOrArrayOptions&gt;</td></tr>
<tr class="codeline" data-linenumber="140"><td class="num" id="LN140">140</td><td class="line"><span class='keyword'>struct</span> plain_array&lt;T, Size, MatrixOrArrayOptions, 64&gt;</td></tr>
<tr class="codeline" data-linenumber="141"><td class="num" id="LN141">141</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="142"><td class="num" id="LN142">142</td><td class="line">  <span class='macro'>EIGEN_ALIGN_TO_BOUNDARY(64)<span class='expansion'>__attribute__((aligned(64)))</span></span> T array[Size];</td></tr>
<tr class="codeline" data-linenumber="143"><td class="num" id="LN143">143</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="144"><td class="num" id="LN144">144</td><td class="line">  EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="145"><td class="num" id="LN145">145</td><td class="line">  plain_array() </td></tr>
<tr class="codeline" data-linenumber="146"><td class="num" id="LN146">146</td><td class="line">  { </td></tr>
<tr class="codeline" data-linenumber="147"><td class="num" id="LN147">147</td><td class="line">    <span class='macro'>EIGEN_MAKE_UNALIGNED_ARRAY_ASSERT(63)<span class='expansion'>(__builtin_expect(!((internal::UIntPtr(array) &amp; (63)) == 0<br> &amp;&amp; "this assertion is explained here: " "http://eigen.tuxfamily.org/dox-devel/group__TopicUnalignedArrayAssert.html"<br> " **** READ THIS WEB PAGE !!! ****"), 0) ? __assert_rtn(__func__<br>, "/Users/u237002/Dropbox/Hacking/sat/arts/3rdparty/Eigen/src/Core/DenseStorage.h"<br>, 147, "(internal::UIntPtr(array) &amp; (63)) == 0 &amp;&amp; \"this assertion is explained here: \" \"http://eigen.tuxfamily.org/dox-devel/group__TopicUnalignedArrayAssert.html\" \" **** READ THIS WEB PAGE !!! ****\""<br>) : (void)0);</span></span>;</td></tr>
<tr class="codeline" data-linenumber="148"><td class="num" id="LN148">148</td><td class="line">    check_static_allocation_size&lt;T,Size&gt;();</td></tr>
<tr class="codeline" data-linenumber="149"><td class="num" id="LN149">149</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="150"><td class="num" id="LN150">150</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="151"><td class="num" id="LN151">151</td><td class="line">  EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="152"><td class="num" id="LN152">152</td><td class="line">  plain_array(constructor_without_unaligned_array_assert) </td></tr>
<tr class="codeline" data-linenumber="153"><td class="num" id="LN153">153</td><td class="line">  { </td></tr>
<tr class="codeline" data-linenumber="154"><td class="num" id="LN154">154</td><td class="line">    check_static_allocation_size&lt;T,Size&gt;();</td></tr>
<tr class="codeline" data-linenumber="155"><td class="num" id="LN155">155</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="156"><td class="num" id="LN156">156</td><td class="line">};</td></tr>
<tr class="codeline" data-linenumber="157"><td class="num" id="LN157">157</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="158"><td class="num" id="LN158">158</td><td class="line"><span class='keyword'>template</span> &lt;<span class='keyword'>typename</span> T, <span class='keyword'>int</span> MatrixOrArrayOptions, <span class='keyword'>int</span> Alignment&gt;</td></tr>
<tr class="codeline" data-linenumber="159"><td class="num" id="LN159">159</td><td class="line"><span class='keyword'>struct</span> plain_array&lt;T, 0, MatrixOrArrayOptions, Alignment&gt;</td></tr>
<tr class="codeline" data-linenumber="160"><td class="num" id="LN160">160</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="161"><td class="num" id="LN161">161</td><td class="line">  T array[1];</td></tr>
<tr class="codeline" data-linenumber="162"><td class="num" id="LN162">162</td><td class="line">  EIGEN_DEVICE_FUNC plain_array() {}</td></tr>
<tr class="codeline" data-linenumber="163"><td class="num" id="LN163">163</td><td class="line">  EIGEN_DEVICE_FUNC plain_array(constructor_without_unaligned_array_assert) {}</td></tr>
<tr class="codeline" data-linenumber="164"><td class="num" id="LN164">164</td><td class="line">};</td></tr>
<tr class="codeline" data-linenumber="165"><td class="num" id="LN165">165</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="166"><td class="num" id="LN166">166</td><td class="line">} <span class='comment'>// end namespace internal</span></td></tr>
<tr class="codeline" data-linenumber="167"><td class="num" id="LN167">167</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="168"><td class="num" id="LN168">168</td><td class="line"><span class='comment'>/** \internal</span></td></tr>
<tr class="codeline" data-linenumber="169"><td class="num" id="LN169">169</td><td class="line">  <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="170"><td class="num" id="LN170">170</td><td class="line">  <span class='comment'>* \class DenseStorage</span></td></tr>
<tr class="codeline" data-linenumber="171"><td class="num" id="LN171">171</td><td class="line">  <span class='comment'>* \ingroup Core_Module</span></td></tr>
<tr class="codeline" data-linenumber="172"><td class="num" id="LN172">172</td><td class="line">  <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="173"><td class="num" id="LN173">173</td><td class="line">  <span class='comment'>* \brief Stores the data of a matrix</span></td></tr>
<tr class="codeline" data-linenumber="174"><td class="num" id="LN174">174</td><td class="line">  <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="175"><td class="num" id="LN175">175</td><td class="line">  <span class='comment'>* This class stores the data of fixed-size, dynamic-size or mixed matrices</span></td></tr>
<tr class="codeline" data-linenumber="176"><td class="num" id="LN176">176</td><td class="line">  <span class='comment'>* in a way as compact as possible.</span></td></tr>
<tr class="codeline" data-linenumber="177"><td class="num" id="LN177">177</td><td class="line">  <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="178"><td class="num" id="LN178">178</td><td class="line">  <span class='comment'>* \sa Matrix</span></td></tr>
<tr class="codeline" data-linenumber="179"><td class="num" id="LN179">179</td><td class="line">  <span class='comment'>*/</span></td></tr>
<tr class="codeline" data-linenumber="180"><td class="num" id="LN180">180</td><td class="line"><span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> T, <span class='keyword'>int</span> Size, <span class='keyword'>int</span> _Rows, <span class='keyword'>int</span> _Cols, <span class='keyword'>int</span> _Options&gt; <span class='keyword'>class</span> DenseStorage;</td></tr>
<tr class="codeline" data-linenumber="181"><td class="num" id="LN181">181</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="182"><td class="num" id="LN182">182</td><td class="line"><span class='comment'>// purely fixed-size matrix</span></td></tr>
<tr class="codeline" data-linenumber="183"><td class="num" id="LN183">183</td><td class="line"><span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> T, <span class='keyword'>int</span> Size, <span class='keyword'>int</span> _Rows, <span class='keyword'>int</span> _Cols, <span class='keyword'>int</span> _Options&gt; <span class='keyword'>class</span> DenseStorage</td></tr>
<tr class="codeline" data-linenumber="184"><td class="num" id="LN184">184</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="185"><td class="num" id="LN185">185</td><td class="line">    internal::plain_array&lt;T,Size,_Options&gt; m_data;</td></tr>
<tr class="codeline" data-linenumber="186"><td class="num" id="LN186">186</td><td class="line">  <span class='keyword'>public</span>:</td></tr>
<tr class="codeline" data-linenumber="187"><td class="num" id="LN187">187</td><td class="line">    EIGEN_DEVICE_FUNC DenseStorage() {</td></tr>
<tr class="codeline" data-linenumber="188"><td class="num" id="LN188">188</td><td class="line">      EIGEN_INTERNAL_DENSE_STORAGE_CTOR_PLUGIN(Index size = Size)</td></tr>
<tr class="codeline" data-linenumber="189"><td class="num" id="LN189">189</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="190"><td class="num" id="LN190">190</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="191"><td class="num" id="LN191">191</td><td class="line">    <span class='keyword'>explicit</span> DenseStorage(internal::constructor_without_unaligned_array_assert)</td></tr>
<tr class="codeline" data-linenumber="192"><td class="num" id="LN192">192</td><td class="line">      : m_data(internal::constructor_without_unaligned_array_assert()) {}</td></tr>
<tr class="codeline" data-linenumber="193"><td class="num" id="LN193">193</td><td class="line">    EIGEN_DEVICE_FUNC </td></tr>
<tr class="codeline" data-linenumber="194"><td class="num" id="LN194">194</td><td class="line">    DenseStorage(<span class='keyword'>const</span> DenseStorage&amp; other) : m_data(other.m_data) {</td></tr>
<tr class="codeline" data-linenumber="195"><td class="num" id="LN195">195</td><td class="line">      EIGEN_INTERNAL_DENSE_STORAGE_CTOR_PLUGIN(Index size = Size)</td></tr>
<tr class="codeline" data-linenumber="196"><td class="num" id="LN196">196</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="197"><td class="num" id="LN197">197</td><td class="line">    EIGEN_DEVICE_FUNC </td></tr>
<tr class="codeline" data-linenumber="198"><td class="num" id="LN198">198</td><td class="line">    DenseStorage&amp; <span class='keyword'>operator</span>=(<span class='keyword'>const</span> DenseStorage&amp; other)</td></tr>
<tr class="codeline" data-linenumber="199"><td class="num" id="LN199">199</td><td class="line">    { </td></tr>
<tr class="codeline" data-linenumber="200"><td class="num" id="LN200">200</td><td class="line">      <span class='keyword'>if</span> (<span class='keyword'>this</span> != &amp;other) m_data = other.m_data;</td></tr>
<tr class="codeline" data-linenumber="201"><td class="num" id="LN201">201</td><td class="line">      <span class='keyword'>return</span> *<span class='keyword'>this</span>; </td></tr>
<tr class="codeline" data-linenumber="202"><td class="num" id="LN202">202</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="203"><td class="num" id="LN203">203</td><td class="line">    EIGEN_DEVICE_FUNC DenseStorage(Index size, Index rows, Index cols) {</td></tr>
<tr class="codeline" data-linenumber="204"><td class="num" id="LN204">204</td><td class="line">      EIGEN_INTERNAL_DENSE_STORAGE_CTOR_PLUGIN({})</td></tr>
<tr class="codeline" data-linenumber="205"><td class="num" id="LN205">205</td><td class="line">      eigen_internal_assert(size==rows*cols &amp;&amp; rows==_Rows &amp;&amp; cols==_Cols);</td></tr>
<tr class="codeline" data-linenumber="206"><td class="num" id="LN206">206</td><td class="line">      <span class='macro'>EIGEN_UNUSED_VARIABLE(size)<span class='expansion'>Eigen::internal::ignore_unused_variable(size);</span></span>;</td></tr>
<tr class="codeline" data-linenumber="207"><td class="num" id="LN207">207</td><td class="line">      <span class='macro'>EIGEN_UNUSED_VARIABLE(rows)<span class='expansion'>Eigen::internal::ignore_unused_variable(rows);</span></span>;</td></tr>
<tr class="codeline" data-linenumber="208"><td class="num" id="LN208">208</td><td class="line">      <span class='macro'>EIGEN_UNUSED_VARIABLE(cols)<span class='expansion'>Eigen::internal::ignore_unused_variable(cols);</span></span>;</td></tr>
<tr class="codeline" data-linenumber="209"><td class="num" id="LN209">209</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="210"><td class="num" id="LN210">210</td><td class="line">    EIGEN_DEVICE_FUNC <span class='keyword'>void</span> swap(DenseStorage&amp; other) { std::swap(m_data,other.m_data); }</td></tr>
<tr class="codeline" data-linenumber="211"><td class="num" id="LN211">211</td><td class="line">    EIGEN_DEVICE_FUNC <span class='keyword'>static</span> Index rows(<span class='keyword'>void</span>) {<span class='keyword'>return</span> _Rows;}</td></tr>
<tr class="codeline" data-linenumber="212"><td class="num" id="LN212">212</td><td class="line">    EIGEN_DEVICE_FUNC <span class='keyword'>static</span> Index cols(<span class='keyword'>void</span>) {<span class='keyword'>return</span> _Cols;}</td></tr>
<tr class="codeline" data-linenumber="213"><td class="num" id="LN213">213</td><td class="line">    EIGEN_DEVICE_FUNC <span class='keyword'>void</span> conservativeResize(Index,Index,Index) {}</td></tr>
<tr class="codeline" data-linenumber="214"><td class="num" id="LN214">214</td><td class="line">    EIGEN_DEVICE_FUNC <span class='keyword'>void</span> resize(Index,Index,Index) {}</td></tr>
<tr class="codeline" data-linenumber="215"><td class="num" id="LN215">215</td><td class="line">    EIGEN_DEVICE_FUNC <span class='keyword'>const</span> T *data() <span class='keyword'>const</span> { <span class='keyword'>return</span> m_data.array; }</td></tr>
<tr class="codeline" data-linenumber="216"><td class="num" id="LN216">216</td><td class="line">    EIGEN_DEVICE_FUNC T *data() { <span class='keyword'>return</span> m_data.array; }</td></tr>
<tr class="codeline" data-linenumber="217"><td class="num" id="LN217">217</td><td class="line">};</td></tr>
<tr class="codeline" data-linenumber="218"><td class="num" id="LN218">218</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="219"><td class="num" id="LN219">219</td><td class="line"><span class='comment'>// null matrix</span></td></tr>
<tr class="codeline" data-linenumber="220"><td class="num" id="LN220">220</td><td class="line"><span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> T, <span class='keyword'>int</span> _Rows, <span class='keyword'>int</span> _Cols, <span class='keyword'>int</span> _Options&gt; <span class='keyword'>class</span> DenseStorage&lt;T, 0, _Rows, _Cols, _Options&gt;</td></tr>
<tr class="codeline" data-linenumber="221"><td class="num" id="LN221">221</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="222"><td class="num" id="LN222">222</td><td class="line">  <span class='keyword'>public</span>:</td></tr>
<tr class="codeline" data-linenumber="223"><td class="num" id="LN223">223</td><td class="line">    EIGEN_DEVICE_FUNC DenseStorage() {}</td></tr>
<tr class="codeline" data-linenumber="224"><td class="num" id="LN224">224</td><td class="line">    EIGEN_DEVICE_FUNC <span class='keyword'>explicit</span> DenseStorage(internal::constructor_without_unaligned_array_assert) {}</td></tr>
<tr class="codeline" data-linenumber="225"><td class="num" id="LN225">225</td><td class="line">    EIGEN_DEVICE_FUNC DenseStorage(<span class='keyword'>const</span> DenseStorage&amp;) {}</td></tr>
<tr class="codeline" data-linenumber="226"><td class="num" id="LN226">226</td><td class="line">    EIGEN_DEVICE_FUNC DenseStorage&amp; <span class='keyword'>operator</span>=(<span class='keyword'>const</span> DenseStorage&amp;) { <span class='keyword'>return</span> *<span class='keyword'>this</span>; }</td></tr>
<tr class="codeline" data-linenumber="227"><td class="num" id="LN227">227</td><td class="line">    EIGEN_DEVICE_FUNC DenseStorage(Index,Index,Index) {}</td></tr>
<tr class="codeline" data-linenumber="228"><td class="num" id="LN228">228</td><td class="line">    EIGEN_DEVICE_FUNC <span class='keyword'>void</span> swap(DenseStorage&amp; ) {}</td></tr>
<tr class="codeline" data-linenumber="229"><td class="num" id="LN229">229</td><td class="line">    EIGEN_DEVICE_FUNC <span class='keyword'>static</span> Index rows(<span class='keyword'>void</span>) {<span class='keyword'>return</span> _Rows;}</td></tr>
<tr class="codeline" data-linenumber="230"><td class="num" id="LN230">230</td><td class="line">    EIGEN_DEVICE_FUNC <span class='keyword'>static</span> Index cols(<span class='keyword'>void</span>) {<span class='keyword'>return</span> _Cols;}</td></tr>
<tr class="codeline" data-linenumber="231"><td class="num" id="LN231">231</td><td class="line">    EIGEN_DEVICE_FUNC <span class='keyword'>void</span> conservativeResize(Index,Index,Index) {}</td></tr>
<tr class="codeline" data-linenumber="232"><td class="num" id="LN232">232</td><td class="line">    EIGEN_DEVICE_FUNC <span class='keyword'>void</span> resize(Index,Index,Index) {}</td></tr>
<tr class="codeline" data-linenumber="233"><td class="num" id="LN233">233</td><td class="line">    EIGEN_DEVICE_FUNC <span class='keyword'>const</span> T *data() <span class='keyword'>const</span> { <span class='keyword'>return</span> 0; }</td></tr>
<tr class="codeline" data-linenumber="234"><td class="num" id="LN234">234</td><td class="line">    EIGEN_DEVICE_FUNC T *data() { <span class='keyword'>return</span> 0; }</td></tr>
<tr class="codeline" data-linenumber="235"><td class="num" id="LN235">235</td><td class="line">};</td></tr>
<tr class="codeline" data-linenumber="236"><td class="num" id="LN236">236</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="237"><td class="num" id="LN237">237</td><td class="line"><span class='comment'>// more specializations for null matrices; these are necessary to resolve ambiguities</span></td></tr>
<tr class="codeline" data-linenumber="238"><td class="num" id="LN238">238</td><td class="line"><span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> T, <span class='keyword'>int</span> _Options&gt; <span class='keyword'>class</span> DenseStorage&lt;T, 0, Dynamic, Dynamic, _Options&gt;</td></tr>
<tr class="codeline" data-linenumber="239"><td class="num" id="LN239">239</td><td class="line">: <span class='keyword'>public</span> DenseStorage&lt;T, 0, 0, 0, _Options&gt; { };</td></tr>
<tr class="codeline" data-linenumber="240"><td class="num" id="LN240">240</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="241"><td class="num" id="LN241">241</td><td class="line"><span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> T, <span class='keyword'>int</span> _Rows, <span class='keyword'>int</span> _Options&gt; <span class='keyword'>class</span> DenseStorage&lt;T, 0, _Rows, Dynamic, _Options&gt;</td></tr>
<tr class="codeline" data-linenumber="242"><td class="num" id="LN242">242</td><td class="line">: <span class='keyword'>public</span> DenseStorage&lt;T, 0, 0, 0, _Options&gt; { };</td></tr>
<tr class="codeline" data-linenumber="243"><td class="num" id="LN243">243</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="244"><td class="num" id="LN244">244</td><td class="line"><span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> T, <span class='keyword'>int</span> _Cols, <span class='keyword'>int</span> _Options&gt; <span class='keyword'>class</span> DenseStorage&lt;T, 0, Dynamic, _Cols, _Options&gt;</td></tr>
<tr class="codeline" data-linenumber="245"><td class="num" id="LN245">245</td><td class="line">: <span class='keyword'>public</span> DenseStorage&lt;T, 0, 0, 0, _Options&gt; { };</td></tr>
<tr class="codeline" data-linenumber="246"><td class="num" id="LN246">246</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="247"><td class="num" id="LN247">247</td><td class="line"><span class='comment'>// dynamic-size matrix with fixed-size storage</span></td></tr>
<tr class="codeline" data-linenumber="248"><td class="num" id="LN248">248</td><td class="line"><span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> T, <span class='keyword'>int</span> Size, <span class='keyword'>int</span> _Options&gt; <span class='keyword'>class</span> DenseStorage&lt;T, Size, Dynamic, Dynamic, _Options&gt;</td></tr>
<tr class="codeline" data-linenumber="249"><td class="num" id="LN249">249</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="250"><td class="num" id="LN250">250</td><td class="line">    internal::plain_array&lt;T,Size,_Options&gt; m_data;</td></tr>
<tr class="codeline" data-linenumber="251"><td class="num" id="LN251">251</td><td class="line">    Index m_rows;</td></tr>
<tr class="codeline" data-linenumber="252"><td class="num" id="LN252">252</td><td class="line">    Index m_cols;</td></tr>
<tr class="codeline" data-linenumber="253"><td class="num" id="LN253">253</td><td class="line">  <span class='keyword'>public</span>:</td></tr>
<tr class="codeline" data-linenumber="254"><td class="num" id="LN254">254</td><td class="line">    EIGEN_DEVICE_FUNC DenseStorage() : m_rows(0), m_cols(0) {}</td></tr>
<tr class="codeline" data-linenumber="255"><td class="num" id="LN255">255</td><td class="line">    EIGEN_DEVICE_FUNC <span class='keyword'>explicit</span> DenseStorage(internal::constructor_without_unaligned_array_assert)</td></tr>
<tr class="codeline" data-linenumber="256"><td class="num" id="LN256">256</td><td class="line">      : m_data(internal::constructor_without_unaligned_array_assert()), m_rows(0), m_cols(0) {}</td></tr>
<tr class="codeline" data-linenumber="257"><td class="num" id="LN257">257</td><td class="line">    EIGEN_DEVICE_FUNC DenseStorage(<span class='keyword'>const</span> DenseStorage&amp; other) : m_data(other.m_data), m_rows(other.m_rows), m_cols(other.m_cols) {}</td></tr>
<tr class="codeline" data-linenumber="258"><td class="num" id="LN258">258</td><td class="line">    EIGEN_DEVICE_FUNC DenseStorage&amp; <span class='keyword'>operator</span>=(<span class='keyword'>const</span> DenseStorage&amp; other) </td></tr>
<tr class="codeline" data-linenumber="259"><td class="num" id="LN259">259</td><td class="line">    { </td></tr>
<tr class="codeline" data-linenumber="260"><td class="num" id="LN260">260</td><td class="line">      <span class='keyword'>if</span> (<span class='keyword'>this</span> != &amp;other)</td></tr>
<tr class="codeline" data-linenumber="261"><td class="num" id="LN261">261</td><td class="line">      {</td></tr>
<tr class="codeline" data-linenumber="262"><td class="num" id="LN262">262</td><td class="line">        m_data = other.m_data;</td></tr>
<tr class="codeline" data-linenumber="263"><td class="num" id="LN263">263</td><td class="line">        m_rows = other.m_rows;</td></tr>
<tr class="codeline" data-linenumber="264"><td class="num" id="LN264">264</td><td class="line">        m_cols = other.m_cols;</td></tr>
<tr class="codeline" data-linenumber="265"><td class="num" id="LN265">265</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="266"><td class="num" id="LN266">266</td><td class="line">      <span class='keyword'>return</span> *<span class='keyword'>this</span>; </td></tr>
<tr class="codeline" data-linenumber="267"><td class="num" id="LN267">267</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="268"><td class="num" id="LN268">268</td><td class="line">    EIGEN_DEVICE_FUNC DenseStorage(Index, Index rows, Index cols) : m_rows(rows), m_cols(cols) {}</td></tr>
<tr class="codeline" data-linenumber="269"><td class="num" id="LN269">269</td><td class="line">    EIGEN_DEVICE_FUNC <span class='keyword'>void</span> swap(DenseStorage&amp; other)</td></tr>
<tr class="codeline" data-linenumber="270"><td class="num" id="LN270">270</td><td class="line">    { std::swap(m_data,other.m_data); std::swap(m_rows,other.m_rows); std::swap(m_cols,other.m_cols); }</td></tr>
<tr class="codeline" data-linenumber="271"><td class="num" id="LN271">271</td><td class="line">    EIGEN_DEVICE_FUNC Index rows() <span class='keyword'>const</span> {<span class='keyword'>return</span> m_rows;}</td></tr>
<tr class="codeline" data-linenumber="272"><td class="num" id="LN272">272</td><td class="line">    EIGEN_DEVICE_FUNC Index cols() <span class='keyword'>const</span> {<span class='keyword'>return</span> m_cols;}</td></tr>
<tr class="codeline" data-linenumber="273"><td class="num" id="LN273">273</td><td class="line">    EIGEN_DEVICE_FUNC <span class='keyword'>void</span> conservativeResize(Index, Index rows, Index cols) { m_rows = rows; m_cols = cols; }</td></tr>
<tr class="codeline" data-linenumber="274"><td class="num" id="LN274">274</td><td class="line">    EIGEN_DEVICE_FUNC <span class='keyword'>void</span> resize(Index, Index rows, Index cols) { m_rows = rows; m_cols = cols; }</td></tr>
<tr class="codeline" data-linenumber="275"><td class="num" id="LN275">275</td><td class="line">    EIGEN_DEVICE_FUNC <span class='keyword'>const</span> T *data() <span class='keyword'>const</span> { <span class='keyword'>return</span> m_data.array; }</td></tr>
<tr class="codeline" data-linenumber="276"><td class="num" id="LN276">276</td><td class="line">    EIGEN_DEVICE_FUNC T *data() { <span class='keyword'>return</span> m_data.array; }</td></tr>
<tr class="codeline" data-linenumber="277"><td class="num" id="LN277">277</td><td class="line">};</td></tr>
<tr class="codeline" data-linenumber="278"><td class="num" id="LN278">278</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="279"><td class="num" id="LN279">279</td><td class="line"><span class='comment'>// dynamic-size matrix with fixed-size storage and fixed width</span></td></tr>
<tr class="codeline" data-linenumber="280"><td class="num" id="LN280">280</td><td class="line"><span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> T, <span class='keyword'>int</span> Size, <span class='keyword'>int</span> _Cols, <span class='keyword'>int</span> _Options&gt; <span class='keyword'>class</span> DenseStorage&lt;T, Size, Dynamic, _Cols, _Options&gt;</td></tr>
<tr class="codeline" data-linenumber="281"><td class="num" id="LN281">281</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="282"><td class="num" id="LN282">282</td><td class="line">    internal::plain_array&lt;T,Size,_Options&gt; m_data;</td></tr>
<tr class="codeline" data-linenumber="283"><td class="num" id="LN283">283</td><td class="line">    Index m_rows;</td></tr>
<tr class="codeline" data-linenumber="284"><td class="num" id="LN284">284</td><td class="line">  <span class='keyword'>public</span>:</td></tr>
<tr class="codeline" data-linenumber="285"><td class="num" id="LN285">285</td><td class="line">    EIGEN_DEVICE_FUNC DenseStorage() : m_rows(0) {}</td></tr>
<tr class="codeline" data-linenumber="286"><td class="num" id="LN286">286</td><td class="line">    EIGEN_DEVICE_FUNC <span class='keyword'>explicit</span> DenseStorage(internal::constructor_without_unaligned_array_assert)</td></tr>
<tr class="codeline" data-linenumber="287"><td class="num" id="LN287">287</td><td class="line">      : m_data(internal::constructor_without_unaligned_array_assert()), m_rows(0) {}</td></tr>
<tr class="codeline" data-linenumber="288"><td class="num" id="LN288">288</td><td class="line">    EIGEN_DEVICE_FUNC DenseStorage(<span class='keyword'>const</span> DenseStorage&amp; other) : m_data(other.m_data), m_rows(other.m_rows) {}</td></tr>
<tr class="codeline" data-linenumber="289"><td class="num" id="LN289">289</td><td class="line">    EIGEN_DEVICE_FUNC DenseStorage&amp; <span class='keyword'>operator</span>=(<span class='keyword'>const</span> DenseStorage&amp; other) </td></tr>
<tr class="codeline" data-linenumber="290"><td class="num" id="LN290">290</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="291"><td class="num" id="LN291">291</td><td class="line">      <span class='keyword'>if</span> (<span class='keyword'>this</span> != &amp;other)</td></tr>
<tr class="codeline" data-linenumber="292"><td class="num" id="LN292">292</td><td class="line">      {</td></tr>
<tr class="codeline" data-linenumber="293"><td class="num" id="LN293">293</td><td class="line">        m_data = other.m_data;</td></tr>
<tr class="codeline" data-linenumber="294"><td class="num" id="LN294">294</td><td class="line">        m_rows = other.m_rows;</td></tr>
<tr class="codeline" data-linenumber="295"><td class="num" id="LN295">295</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="296"><td class="num" id="LN296">296</td><td class="line">      <span class='keyword'>return</span> *<span class='keyword'>this</span>; </td></tr>
<tr class="codeline" data-linenumber="297"><td class="num" id="LN297">297</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="298"><td class="num" id="LN298">298</td><td class="line">    EIGEN_DEVICE_FUNC DenseStorage(Index, Index rows, Index) : m_rows(rows) {}</td></tr>
<tr class="codeline" data-linenumber="299"><td class="num" id="LN299">299</td><td class="line">    EIGEN_DEVICE_FUNC <span class='keyword'>void</span> swap(DenseStorage&amp; other) { std::swap(m_data,other.m_data); std::swap(m_rows,other.m_rows); }</td></tr>
<tr class="codeline" data-linenumber="300"><td class="num" id="LN300">300</td><td class="line">    EIGEN_DEVICE_FUNC Index rows(<span class='keyword'>void</span>) <span class='keyword'>const</span> {<span class='keyword'>return</span> m_rows;}</td></tr>
<tr class="codeline" data-linenumber="301"><td class="num" id="LN301">301</td><td class="line">    EIGEN_DEVICE_FUNC Index cols(<span class='keyword'>void</span>) <span class='keyword'>const</span> {<span class='keyword'>return</span> _Cols;}</td></tr>
<tr class="codeline" data-linenumber="302"><td class="num" id="LN302">302</td><td class="line">    EIGEN_DEVICE_FUNC <span class='keyword'>void</span> conservativeResize(Index, Index rows, Index) { m_rows = rows; }</td></tr>
<tr class="codeline" data-linenumber="303"><td class="num" id="LN303">303</td><td class="line">    EIGEN_DEVICE_FUNC <span class='keyword'>void</span> resize(Index, Index rows, Index) { m_rows = rows; }</td></tr>
<tr class="codeline" data-linenumber="304"><td class="num" id="LN304">304</td><td class="line">    EIGEN_DEVICE_FUNC <span class='keyword'>const</span> T *data() <span class='keyword'>const</span> { <span class='keyword'>return</span> m_data.array; }</td></tr>
<tr class="codeline" data-linenumber="305"><td class="num" id="LN305">305</td><td class="line">    EIGEN_DEVICE_FUNC T *data() { <span class='keyword'>return</span> m_data.array; }</td></tr>
<tr class="codeline" data-linenumber="306"><td class="num" id="LN306">306</td><td class="line">};</td></tr>
<tr class="codeline" data-linenumber="307"><td class="num" id="LN307">307</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="308"><td class="num" id="LN308">308</td><td class="line"><span class='comment'>// dynamic-size matrix with fixed-size storage and fixed height</span></td></tr>
<tr class="codeline" data-linenumber="309"><td class="num" id="LN309">309</td><td class="line"><span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> T, <span class='keyword'>int</span> Size, <span class='keyword'>int</span> _Rows, <span class='keyword'>int</span> _Options&gt; <span class='keyword'>class</span> DenseStorage&lt;T, Size, _Rows, Dynamic, _Options&gt;</td></tr>
<tr class="codeline" data-linenumber="310"><td class="num" id="LN310">310</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="311"><td class="num" id="LN311">311</td><td class="line">    internal::plain_array&lt;T,Size,_Options&gt; m_data;</td></tr>
<tr class="codeline" data-linenumber="312"><td class="num" id="LN312">312</td><td class="line">    Index m_cols;</td></tr>
<tr class="codeline" data-linenumber="313"><td class="num" id="LN313">313</td><td class="line">  <span class='keyword'>public</span>:</td></tr>
<tr class="codeline" data-linenumber="314"><td class="num" id="LN314">314</td><td class="line">    EIGEN_DEVICE_FUNC DenseStorage() : m_cols(0) {}</td></tr>
<tr class="codeline" data-linenumber="315"><td class="num" id="LN315">315</td><td class="line">    EIGEN_DEVICE_FUNC <span class='keyword'>explicit</span> DenseStorage(internal::constructor_without_unaligned_array_assert)</td></tr>
<tr class="codeline" data-linenumber="316"><td class="num" id="LN316">316</td><td class="line">      : m_data(internal::constructor_without_unaligned_array_assert()), m_cols(0) {}</td></tr>
<tr class="codeline" data-linenumber="317"><td class="num" id="LN317">317</td><td class="line">    EIGEN_DEVICE_FUNC DenseStorage(<span class='keyword'>const</span> DenseStorage&amp; other) : m_data(other.m_data), m_cols(other.m_cols) {}</td></tr>
<tr class="codeline" data-linenumber="318"><td class="num" id="LN318">318</td><td class="line">    EIGEN_DEVICE_FUNC DenseStorage&amp; <span class='keyword'>operator</span>=(<span class='keyword'>const</span> DenseStorage&amp; other)</td></tr>
<tr class="codeline" data-linenumber="319"><td class="num" id="LN319">319</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="320"><td class="num" id="LN320">320</td><td class="line">      <span class='keyword'>if</span> (<span class='keyword'>this</span> != &amp;other)</td></tr>
<tr class="codeline" data-linenumber="321"><td class="num" id="LN321">321</td><td class="line">      {</td></tr>
<tr class="codeline" data-linenumber="322"><td class="num" id="LN322">322</td><td class="line">        m_data = other.m_data;</td></tr>
<tr class="codeline" data-linenumber="323"><td class="num" id="LN323">323</td><td class="line">        m_cols = other.m_cols;</td></tr>
<tr class="codeline" data-linenumber="324"><td class="num" id="LN324">324</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="325"><td class="num" id="LN325">325</td><td class="line">      <span class='keyword'>return</span> *<span class='keyword'>this</span>;</td></tr>
<tr class="codeline" data-linenumber="326"><td class="num" id="LN326">326</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="327"><td class="num" id="LN327">327</td><td class="line">    EIGEN_DEVICE_FUNC DenseStorage(Index, Index, Index cols) : m_cols(cols) {}</td></tr>
<tr class="codeline" data-linenumber="328"><td class="num" id="LN328">328</td><td class="line">    EIGEN_DEVICE_FUNC <span class='keyword'>void</span> swap(DenseStorage&amp; other) { std::swap(m_data,other.m_data); std::swap(m_cols,other.m_cols); }</td></tr>
<tr class="codeline" data-linenumber="329"><td class="num" id="LN329">329</td><td class="line">    EIGEN_DEVICE_FUNC Index rows(<span class='keyword'>void</span>) <span class='keyword'>const</span> {<span class='keyword'>return</span> _Rows;}</td></tr>
<tr class="codeline" data-linenumber="330"><td class="num" id="LN330">330</td><td class="line">    EIGEN_DEVICE_FUNC Index cols(<span class='keyword'>void</span>) <span class='keyword'>const</span> {<span class='keyword'>return</span> m_cols;}</td></tr>
<tr class="codeline" data-linenumber="331"><td class="num" id="LN331">331</td><td class="line">    <span class='keyword'>void</span> conservativeResize(Index, Index, Index cols) { m_cols = cols; }</td></tr>
<tr class="codeline" data-linenumber="332"><td class="num" id="LN332">332</td><td class="line">    <span class='keyword'>void</span> resize(Index, Index, Index cols) { m_cols = cols; }</td></tr>
<tr class="codeline" data-linenumber="333"><td class="num" id="LN333">333</td><td class="line">    EIGEN_DEVICE_FUNC <span class='keyword'>const</span> T *data() <span class='keyword'>const</span> { <span class='keyword'>return</span> m_data.array; }</td></tr>
<tr class="codeline" data-linenumber="334"><td class="num" id="LN334">334</td><td class="line">    EIGEN_DEVICE_FUNC T *data() { <span class='keyword'>return</span> m_data.array; }</td></tr>
<tr class="codeline" data-linenumber="335"><td class="num" id="LN335">335</td><td class="line">};</td></tr>
<tr class="codeline" data-linenumber="336"><td class="num" id="LN336">336</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="337"><td class="num" id="LN337">337</td><td class="line"><span class='comment'>// purely dynamic matrix.</span></td></tr>
<tr class="codeline" data-linenumber="338"><td class="num" id="LN338">338</td><td class="line"><span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> T, <span class='keyword'>int</span> _Options&gt; <span class='keyword'>class</span> DenseStorage&lt;T, Dynamic, Dynamic, Dynamic, _Options&gt;</td></tr>
<tr class="codeline" data-linenumber="339"><td class="num" id="LN339">339</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="340"><td class="num" id="LN340">340</td><td class="line">    T *m_data;</td></tr>
<tr class="codeline" data-linenumber="341"><td class="num" id="LN341">341</td><td class="line">    Index m_rows;</td></tr>
<tr class="codeline" data-linenumber="342"><td class="num" id="LN342">342</td><td class="line">    Index m_cols;</td></tr>
<tr class="codeline" data-linenumber="343"><td class="num" id="LN343">343</td><td class="line">  <span class='keyword'>public</span>:</td></tr>
<tr class="codeline" data-linenumber="344"><td class="num" id="LN344">344</td><td class="line">    EIGEN_DEVICE_FUNC DenseStorage() : m_data(0), m_rows(0), m_cols(0) {}</td></tr>
<tr class="codeline" data-linenumber="345"><td class="num" id="LN345">345</td><td class="line">    EIGEN_DEVICE_FUNC <span class='keyword'>explicit</span> DenseStorage(internal::constructor_without_unaligned_array_assert)</td></tr>
<tr class="codeline" data-linenumber="346"><td class="num" id="LN346">346</td><td class="line">       : m_data(0), m_rows(0), m_cols(0) {}</td></tr>
<tr class="codeline" data-linenumber="347"><td class="num" id="LN347">347</td><td class="line">    EIGEN_DEVICE_FUNC DenseStorage(Index size, Index rows, Index cols)</td></tr>
<tr class="codeline" data-linenumber="348"><td class="num" id="LN348">348</td><td class="line">      : m_data(internal::conditional_aligned_new_auto&lt;T,(_Options&amp;DontAlign)==0&gt;(size)), m_rows(rows), m_cols(cols)</td></tr>
<tr class="codeline" data-linenumber="349"><td class="num" id="LN349">349</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="350"><td class="num" id="LN350">350</td><td class="line">      EIGEN_INTERNAL_DENSE_STORAGE_CTOR_PLUGIN({})</td></tr>
<tr class="codeline" data-linenumber="351"><td class="num" id="LN351">351</td><td class="line">      eigen_internal_assert(size==rows*cols &amp;&amp; rows&gt;=0 &amp;&amp; cols &gt;=0);</td></tr>
<tr class="codeline" data-linenumber="352"><td class="num" id="LN352">352</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="353"><td class="num" id="LN353">353</td><td class="line">    EIGEN_DEVICE_FUNC DenseStorage(<span class='keyword'>const</span> DenseStorage&amp; other)</td></tr>
<tr class="codeline" data-linenumber="354"><td class="num" id="LN354">354</td><td class="line">      : m_data(internal::conditional_aligned_new_auto&lt;T,(_Options&amp;DontAlign)==0&gt;(other.m_rows*other.m_cols))</td></tr>
<tr class="codeline" data-linenumber="355"><td class="num" id="LN355">355</td><td class="line">      , m_rows(other.m_rows)</td></tr>
<tr class="codeline" data-linenumber="356"><td class="num" id="LN356">356</td><td class="line">      , m_cols(other.m_cols)</td></tr>
<tr class="codeline" data-linenumber="357"><td class="num" id="LN357">357</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="358"><td class="num" id="LN358">358</td><td class="line">      EIGEN_INTERNAL_DENSE_STORAGE_CTOR_PLUGIN(Index size = m_rows*m_cols)</td></tr>
<tr class="codeline" data-linenumber="359"><td class="num" id="LN359">359</td><td class="line">      internal::smart_copy(other.m_data, other.m_data+other.m_rows*other.m_cols, m_data);</td></tr>
<tr class="codeline" data-linenumber="360"><td class="num" id="LN360">360</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="361"><td class="num" id="LN361">361</td><td class="line">    EIGEN_DEVICE_FUNC DenseStorage&amp; <span class='keyword'>operator</span>=(<span class='keyword'>const</span> DenseStorage&amp; other)</td></tr>
<tr class="codeline" data-linenumber="362"><td class="num" id="LN362">362</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="363"><td class="num" id="LN363">363</td><td class="line">      <span class='keyword'>if</span> (<span class='keyword'>this</span> != &amp;other)</td></tr>
<tr class="codeline" data-linenumber="364"><td class="num" id="LN364">364</td><td class="line">      {</td></tr>
<tr class="codeline" data-linenumber="365"><td class="num" id="LN365">365</td><td class="line">        DenseStorage tmp(other);</td></tr>
<tr class="codeline" data-linenumber="366"><td class="num" id="LN366">366</td><td class="line">        <span class='keyword'>this</span>-&gt;swap(tmp);</td></tr>
<tr class="codeline" data-linenumber="367"><td class="num" id="LN367">367</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="368"><td class="num" id="LN368">368</td><td class="line">      <span class='keyword'>return</span> *<span class='keyword'>this</span>;</td></tr>
<tr class="codeline" data-linenumber="369"><td class="num" id="LN369">369</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="370"><td class="num" id="LN370">370</td><td class="line"><span class='directive'>#if <span class='macro'>EIGEN_HAS_RVALUE_REFERENCES<span class='expansion'>1</span></span></span></td></tr>
<tr class="codeline" data-linenumber="371"><td class="num" id="LN371">371</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="372"><td class="num" id="LN372">372</td><td class="line">    DenseStorage(DenseStorage&amp;&amp; other) <span class='macro'>EIGEN_NOEXCEPT<span class='expansion'>noexcept</span></span></td></tr>
<tr class="codeline" data-linenumber="373"><td class="num" id="LN373">373</td><td class="line">      : m_data(std::move(other.m_data))</td></tr>
<tr class="codeline" data-linenumber="374"><td class="num" id="LN374">374</td><td class="line">      , m_rows(std::move(other.m_rows))</td></tr>
<tr class="codeline" data-linenumber="375"><td class="num" id="LN375">375</td><td class="line">      , m_cols(std::move(other.m_cols))</td></tr>
<tr class="codeline" data-linenumber="376"><td class="num" id="LN376">376</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="377"><td class="num" id="LN377">377</td><td class="line">      other.m_data = <span class='keyword'>nullptr</span>;</td></tr>
<tr class="codeline" data-linenumber="378"><td class="num" id="LN378">378</td><td class="line">      other.m_rows = 0;</td></tr>
<tr class="codeline" data-linenumber="379"><td class="num" id="LN379">379</td><td class="line">      other.m_cols = 0;</td></tr>
<tr class="codeline" data-linenumber="380"><td class="num" id="LN380">380</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="381"><td class="num" id="LN381">381</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="382"><td class="num" id="LN382">382</td><td class="line">    DenseStorage&amp; <span class='keyword'>operator</span>=(DenseStorage&amp;&amp; other) <span class='macro'>EIGEN_NOEXCEPT<span class='expansion'>noexcept</span></span></td></tr>
<tr class="codeline" data-linenumber="383"><td class="num" id="LN383">383</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="384"><td class="num" id="LN384">384</td><td class="line">      <span class='keyword'>using</span> std::swap;</td></tr>
<tr class="codeline" data-linenumber="385"><td class="num" id="LN385">385</td><td class="line">      swap(m_data, other.m_data);</td></tr>
<tr class="codeline" data-linenumber="386"><td class="num" id="LN386">386</td><td class="line">      swap(m_rows, other.m_rows);</td></tr>
<tr class="codeline" data-linenumber="387"><td class="num" id="LN387">387</td><td class="line">      swap(m_cols, other.m_cols);</td></tr>
<tr class="codeline" data-linenumber="388"><td class="num" id="LN388">388</td><td class="line">      <span class='keyword'>return</span> *<span class='keyword'>this</span>;</td></tr>
<tr class="codeline" data-linenumber="389"><td class="num" id="LN389">389</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="390"><td class="num" id="LN390">390</td><td class="line"><span class='directive'>#endif</span></td></tr>
<tr class="codeline" data-linenumber="391"><td class="num" id="LN391">391</td><td class="line">    EIGEN_DEVICE_FUNC ~DenseStorage() { internal::conditional_aligned_delete_auto&lt;T,(_Options&amp;DontAlign)==0&gt;(m_data, m_rows*m_cols); }</td></tr>
<tr class="codeline" data-linenumber="392"><td class="num" id="LN392">392</td><td class="line">    EIGEN_DEVICE_FUNC <span class='keyword'>void</span> swap(DenseStorage&amp; other)</td></tr>
<tr class="codeline" data-linenumber="393"><td class="num" id="LN393">393</td><td class="line">    { std::swap(m_data,other.m_data); std::swap(m_rows,other.m_rows); std::swap(m_cols,other.m_cols); }</td></tr>
<tr class="codeline" data-linenumber="394"><td class="num" id="LN394">394</td><td class="line">    EIGEN_DEVICE_FUNC Index rows(<span class='keyword'>void</span>) <span class='keyword'>const</span> {<span class='keyword'>return</span> m_rows;}</td></tr>
<tr class="codeline" data-linenumber="395"><td class="num" id="LN395">395</td><td class="line">    EIGEN_DEVICE_FUNC Index cols(<span class='keyword'>void</span>) <span class='keyword'>const</span> {<span class='keyword'>return</span> m_cols;}</td></tr>
<tr class="codeline" data-linenumber="396"><td class="num" id="LN396">396</td><td class="line">    <span class='keyword'>void</span> conservativeResize(Index size, Index rows, Index cols)</td></tr>
<tr class="codeline" data-linenumber="397"><td class="num" id="LN397">397</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="398"><td class="num" id="LN398">398</td><td class="line">      m_data = internal::conditional_aligned_realloc_new_auto&lt;T,(_Options&amp;DontAlign)==0&gt;(m_data, size, m_rows*m_cols);</td></tr>
<tr class="codeline" data-linenumber="399"><td class="num" id="LN399">399</td><td class="line">      m_rows = rows;</td></tr>
<tr class="codeline" data-linenumber="400"><td class="num" id="LN400">400</td><td class="line">      m_cols = cols;</td></tr>
<tr class="codeline" data-linenumber="401"><td class="num" id="LN401">401</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="402"><td class="num" id="LN402">402</td><td class="line">    EIGEN_DEVICE_FUNC <span class='keyword'>void</span> resize(Index size, Index rows, Index cols)</td></tr>
<tr class="codeline" data-linenumber="403"><td class="num" id="LN403">403</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="404"><td class="num" id="LN404">404</td><td class="line">      <span class='keyword'>if</span>(size != m_rows*m_cols)</td></tr>
<tr class="codeline" data-linenumber="405"><td class="num" id="LN405">405</td><td class="line">      {</td></tr>
<tr class="codeline" data-linenumber="406"><td class="num" id="LN406">406</td><td class="line">        internal::conditional_aligned_delete_auto&lt;T,(_Options&amp;DontAlign)==0&gt;(m_data, m_rows*m_cols);</td></tr>
<tr class="codeline" data-linenumber="407"><td class="num" id="LN407">407</td><td class="line">        <span class='keyword'>if</span> (size)</td></tr>
<tr class="codeline" data-linenumber="408"><td class="num" id="LN408">408</td><td class="line">          m_data = internal::conditional_aligned_new_auto&lt;T,(_Options&amp;DontAlign)==0&gt;(size);</td></tr>
<tr class="codeline" data-linenumber="409"><td class="num" id="LN409">409</td><td class="line">        <span class='keyword'>else</span></td></tr>
<tr class="codeline" data-linenumber="410"><td class="num" id="LN410">410</td><td class="line">          m_data = 0;</td></tr>
<tr class="codeline" data-linenumber="411"><td class="num" id="LN411">411</td><td class="line">        EIGEN_INTERNAL_DENSE_STORAGE_CTOR_PLUGIN({})</td></tr>
<tr class="codeline" data-linenumber="412"><td class="num" id="LN412">412</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="413"><td class="num" id="LN413">413</td><td class="line">      m_rows = rows;</td></tr>
<tr class="codeline" data-linenumber="414"><td class="num" id="LN414">414</td><td class="line">      m_cols = cols;</td></tr>
<tr class="codeline" data-linenumber="415"><td class="num" id="LN415">415</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="416"><td class="num" id="LN416">416</td><td class="line">    EIGEN_DEVICE_FUNC <span class='keyword'>const</span> T *data() <span class='keyword'>const</span> { <span class='keyword'>return</span> m_data; }</td></tr>
<tr class="codeline" data-linenumber="417"><td class="num" id="LN417">417</td><td class="line">    EIGEN_DEVICE_FUNC T *data() { <span class='keyword'>return</span> m_data; }</td></tr>
<tr class="codeline" data-linenumber="418"><td class="num" id="LN418">418</td><td class="line">};</td></tr>
<tr class="codeline" data-linenumber="419"><td class="num" id="LN419">419</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="420"><td class="num" id="LN420">420</td><td class="line"><span class='comment'>// matrix with dynamic width and fixed height (so that matrix has dynamic size).</span></td></tr>
<tr class="codeline" data-linenumber="421"><td class="num" id="LN421">421</td><td class="line"><span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> T, <span class='keyword'>int</span> _Rows, <span class='keyword'>int</span> _Options&gt; <span class='keyword'>class</span> DenseStorage&lt;T, Dynamic, _Rows, Dynamic, _Options&gt;</td></tr>
<tr class="codeline" data-linenumber="422"><td class="num" id="LN422">422</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="423"><td class="num" id="LN423">423</td><td class="line">    T *m_data;</td></tr>
<tr class="codeline" data-linenumber="424"><td class="num" id="LN424">424</td><td class="line">    Index m_cols;</td></tr>
<tr class="codeline" data-linenumber="425"><td class="num" id="LN425">425</td><td class="line">  <span class='keyword'>public</span>:</td></tr>
<tr class="codeline" data-linenumber="426"><td class="num" id="LN426">426</td><td class="line">    EIGEN_DEVICE_FUNC DenseStorage() : m_data(0), m_cols(0) {}</td></tr>
<tr class="codeline" data-linenumber="427"><td class="num" id="LN427">427</td><td class="line">    <span class='keyword'>explicit</span> DenseStorage(internal::constructor_without_unaligned_array_assert) : m_data(0), m_cols(0) {}</td></tr>
<tr class="codeline" data-linenumber="428"><td class="num" id="LN428">428</td><td class="line">    EIGEN_DEVICE_FUNC DenseStorage(Index size, Index rows, Index cols) : m_data(internal::conditional_aligned_new_auto&lt;T,(_Options&amp;DontAlign)==0&gt;(size)), m_cols(cols)</td></tr>
<tr class="codeline" data-linenumber="429"><td class="num" id="LN429">429</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="430"><td class="num" id="LN430">430</td><td class="line">      EIGEN_INTERNAL_DENSE_STORAGE_CTOR_PLUGIN({})</td></tr>
<tr class="codeline" data-linenumber="431"><td class="num" id="LN431">431</td><td class="line">      eigen_internal_assert(size==rows*cols &amp;&amp; rows==_Rows &amp;&amp; cols &gt;=0);</td></tr>
<tr class="codeline" data-linenumber="432"><td class="num" id="LN432">432</td><td class="line">      <span class='macro'>EIGEN_UNUSED_VARIABLE(rows)<span class='expansion'>Eigen::internal::ignore_unused_variable(rows);</span></span>;</td></tr>
<tr class="codeline" data-linenumber="433"><td class="num" id="LN433">433</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="434"><td class="num" id="LN434">434</td><td class="line">    EIGEN_DEVICE_FUNC DenseStorage(<span class='keyword'>const</span> DenseStorage&amp; other)</td></tr>
<tr class="codeline" data-linenumber="435"><td class="num" id="LN435">435</td><td class="line">      : m_data(internal::conditional_aligned_new_auto&lt;T,(_Options&amp;DontAlign)==0&gt;(_Rows*other.m_cols))</td></tr>
<tr class="codeline" data-linenumber="436"><td class="num" id="LN436">436</td><td class="line">      , m_cols(other.m_cols)</td></tr>
<tr class="codeline" data-linenumber="437"><td class="num" id="LN437">437</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="438"><td class="num" id="LN438">438</td><td class="line">      EIGEN_INTERNAL_DENSE_STORAGE_CTOR_PLUGIN(Index size = m_cols*_Rows)</td></tr>
<tr class="codeline" data-linenumber="439"><td class="num" id="LN439">439</td><td class="line">      internal::smart_copy(other.m_data, other.m_data+_Rows*m_cols, m_data);</td></tr>
<tr class="codeline" data-linenumber="440"><td class="num" id="LN440">440</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="441"><td class="num" id="LN441">441</td><td class="line">    EIGEN_DEVICE_FUNC DenseStorage&amp; <span class='keyword'>operator</span>=(<span class='keyword'>const</span> DenseStorage&amp; other)</td></tr>
<tr class="codeline" data-linenumber="442"><td class="num" id="LN442">442</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="443"><td class="num" id="LN443">443</td><td class="line">      <span class='keyword'>if</span> (<span class='keyword'>this</span> != &amp;other)</td></tr>
<tr class="codeline" data-linenumber="444"><td class="num" id="LN444">444</td><td class="line">      {</td></tr>
<tr class="codeline" data-linenumber="445"><td class="num" id="LN445">445</td><td class="line">        DenseStorage tmp(other);</td></tr>
<tr class="codeline" data-linenumber="446"><td class="num" id="LN446">446</td><td class="line">        <span class='keyword'>this</span>-&gt;swap(tmp);</td></tr>
<tr class="codeline" data-linenumber="447"><td class="num" id="LN447">447</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="448"><td class="num" id="LN448">448</td><td class="line">      <span class='keyword'>return</span> *<span class='keyword'>this</span>;</td></tr>
<tr class="codeline" data-linenumber="449"><td class="num" id="LN449">449</td><td class="line">    }    </td></tr>
<tr class="codeline" data-linenumber="450"><td class="num" id="LN450">450</td><td class="line"><span class='directive'>#if <span class='macro'>EIGEN_HAS_RVALUE_REFERENCES<span class='expansion'>1</span></span></span></td></tr>
<tr class="codeline" data-linenumber="451"><td class="num" id="LN451">451</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="452"><td class="num" id="LN452">452</td><td class="line">    DenseStorage(DenseStorage&amp;&amp; other) <span class='macro'>EIGEN_NOEXCEPT<span class='expansion'>noexcept</span></span></td></tr>
<tr class="codeline" data-linenumber="453"><td class="num" id="LN453">453</td><td class="line">      : m_data(std::move(other.m_data))</td></tr>
<tr class="codeline" data-linenumber="454"><td class="num" id="LN454">454</td><td class="line">      , m_cols(std::move(other.m_cols))</td></tr>
<tr class="codeline" data-linenumber="455"><td class="num" id="LN455">455</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="456"><td class="num" id="LN456">456</td><td class="line">      other.m_data = <span class='keyword'>nullptr</span>;</td></tr>
<tr class="codeline" data-linenumber="457"><td class="num" id="LN457">457</td><td class="line">      other.m_cols = 0;</td></tr>
<tr class="codeline" data-linenumber="458"><td class="num" id="LN458">458</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="459"><td class="num" id="LN459">459</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="460"><td class="num" id="LN460">460</td><td class="line">    DenseStorage&amp; <span class='keyword'>operator</span>=(DenseStorage&amp;&amp; other) <span class='macro'>EIGEN_NOEXCEPT<span class='expansion'>noexcept</span></span></td></tr>
<tr class="codeline" data-linenumber="461"><td class="num" id="LN461">461</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="462"><td class="num" id="LN462">462</td><td class="line">      <span class='keyword'>using</span> std::swap;</td></tr>
<tr class="codeline" data-linenumber="463"><td class="num" id="LN463">463</td><td class="line">      swap(m_data, other.m_data);</td></tr>
<tr class="codeline" data-linenumber="464"><td class="num" id="LN464">464</td><td class="line">      swap(m_cols, other.m_cols);</td></tr>
<tr class="codeline" data-linenumber="465"><td class="num" id="LN465">465</td><td class="line">      <span class='keyword'>return</span> *<span class='keyword'>this</span>;</td></tr>
<tr class="codeline" data-linenumber="466"><td class="num" id="LN466">466</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="467"><td class="num" id="LN467">467</td><td class="line"><span class='directive'>#endif</span></td></tr>
<tr class="codeline" data-linenumber="468"><td class="num" id="LN468">468</td><td class="line">    EIGEN_DEVICE_FUNC ~DenseStorage() { internal::conditional_aligned_delete_auto&lt;T,(_Options&amp;DontAlign)==0&gt;(m_data, _Rows*m_cols); }</td></tr>
<tr class="codeline" data-linenumber="469"><td class="num" id="LN469">469</td><td class="line">    EIGEN_DEVICE_FUNC <span class='keyword'>void</span> swap(DenseStorage&amp; other) { std::swap(m_data,other.m_data); std::swap(m_cols,other.m_cols); }</td></tr>
<tr class="codeline" data-linenumber="470"><td class="num" id="LN470">470</td><td class="line">    EIGEN_DEVICE_FUNC <span class='keyword'>static</span> Index rows(<span class='keyword'>void</span>) {<span class='keyword'>return</span> _Rows;}</td></tr>
<tr class="codeline" data-linenumber="471"><td class="num" id="LN471">471</td><td class="line">    EIGEN_DEVICE_FUNC Index cols(<span class='keyword'>void</span>) <span class='keyword'>const</span> {<span class='keyword'>return</span> m_cols;}</td></tr>
<tr class="codeline" data-linenumber="472"><td class="num" id="LN472">472</td><td class="line">    EIGEN_DEVICE_FUNC <span class='keyword'>void</span> conservativeResize(Index size, Index, Index cols)</td></tr>
<tr class="codeline" data-linenumber="473"><td class="num" id="LN473">473</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="474"><td class="num" id="LN474">474</td><td class="line">      m_data = internal::conditional_aligned_realloc_new_auto&lt;T,(_Options&amp;DontAlign)==0&gt;(m_data, size, _Rows*m_cols);</td></tr>
<tr class="codeline" data-linenumber="475"><td class="num" id="LN475">475</td><td class="line">      m_cols = cols;</td></tr>
<tr class="codeline" data-linenumber="476"><td class="num" id="LN476">476</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="477"><td class="num" id="LN477">477</td><td class="line">    EIGEN_DEVICE_FUNC <span class='macro'>EIGEN_STRONG_INLINE<span class='expansion'>inline</span></span> <span class='keyword'>void</span> resize(Index size, Index, Index cols)</td></tr>
<tr class="codeline" data-linenumber="478"><td class="num" id="LN478">478</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="479"><td class="num" id="LN479">479</td><td class="line">      <span class='keyword'>if</span>(size != _Rows*m_cols)</td></tr>
<tr class="codeline" data-linenumber="480"><td class="num" id="LN480">480</td><td class="line">      {</td></tr>
<tr class="codeline" data-linenumber="481"><td class="num" id="LN481">481</td><td class="line">        internal::conditional_aligned_delete_auto&lt;T,(_Options&amp;DontAlign)==0&gt;(m_data, _Rows*m_cols);</td></tr>
<tr class="codeline" data-linenumber="482"><td class="num" id="LN482">482</td><td class="line">        <span class='keyword'>if</span> (size)</td></tr>
<tr class="codeline" data-linenumber="483"><td class="num" id="LN483">483</td><td class="line">          m_data = internal::conditional_aligned_new_auto&lt;T,(_Options&amp;DontAlign)==0&gt;(size);</td></tr>
<tr class="codeline" data-linenumber="484"><td class="num" id="LN484">484</td><td class="line">        <span class='keyword'>else</span></td></tr>
<tr class="codeline" data-linenumber="485"><td class="num" id="LN485">485</td><td class="line">          m_data = 0;</td></tr>
<tr class="codeline" data-linenumber="486"><td class="num" id="LN486">486</td><td class="line">        EIGEN_INTERNAL_DENSE_STORAGE_CTOR_PLUGIN({})</td></tr>
<tr class="codeline" data-linenumber="487"><td class="num" id="LN487">487</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="488"><td class="num" id="LN488">488</td><td class="line">      m_cols = cols;</td></tr>
<tr class="codeline" data-linenumber="489"><td class="num" id="LN489">489</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="490"><td class="num" id="LN490">490</td><td class="line">    EIGEN_DEVICE_FUNC <span class='keyword'>const</span> T *data() <span class='keyword'>const</span> { <span class='keyword'>return</span> m_data; }</td></tr>
<tr class="codeline" data-linenumber="491"><td class="num" id="LN491">491</td><td class="line">    EIGEN_DEVICE_FUNC T *data() { <span class='keyword'>return</span> m_data; }</td></tr>
<tr class="codeline" data-linenumber="492"><td class="num" id="LN492">492</td><td class="line">};</td></tr>
<tr class="codeline" data-linenumber="493"><td class="num" id="LN493">493</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="494"><td class="num" id="LN494">494</td><td class="line"><span class='comment'>// matrix with dynamic height and fixed width (so that matrix has dynamic size).</span></td></tr>
<tr class="codeline" data-linenumber="495"><td class="num" id="LN495">495</td><td class="line"><span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> T, <span class='keyword'>int</span> _Cols, <span class='keyword'>int</span> _Options&gt; <span class='keyword'>class</span> DenseStorage&lt;T, Dynamic, Dynamic, _Cols, _Options&gt;</td></tr>
<tr class="codeline" data-linenumber="496"><td class="num" id="LN496">496</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="497"><td class="num" id="LN497">497</td><td class="line">    T *m_data;</td></tr>
<tr class="codeline" data-linenumber="498"><td class="num" id="LN498">498</td><td class="line">    Index m_rows;</td></tr>
<tr class="codeline" data-linenumber="499"><td class="num" id="LN499">499</td><td class="line">  <span class='keyword'>public</span>:</td></tr>
<tr class="codeline" data-linenumber="500"><td class="num" id="LN500">500</td><td class="line">    EIGEN_DEVICE_FUNC DenseStorage() : m_data(0), m_rows(0) {}</td></tr>
<tr class="codeline" data-linenumber="501"><td class="num" id="LN501">501</td><td class="line">    <span class='keyword'>explicit</span> DenseStorage(internal::constructor_without_unaligned_array_assert) : m_data(0), m_rows(0) {}</td></tr>
<tr class="codeline" data-linenumber="502"><td class="num" id="LN502">502</td><td class="line">    EIGEN_DEVICE_FUNC DenseStorage(Index size, Index rows, Index cols) : m_data(internal::conditional_aligned_new_auto&lt;T,(_Options&amp;DontAlign)==0&gt;(size)), m_rows(rows)</td></tr>
<tr class="codeline" data-linenumber="503"><td class="num" id="LN503">503</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="504"><td class="num" id="LN504">504</td><td class="line">      EIGEN_INTERNAL_DENSE_STORAGE_CTOR_PLUGIN({})</td></tr>
<tr class="codeline" data-linenumber="505"><td class="num" id="LN505">505</td><td class="line">      eigen_internal_assert(size==rows*cols &amp;&amp; rows&gt;=0 &amp;&amp; cols == _Cols);</td></tr>
<tr class="codeline" data-linenumber="506"><td class="num" id="LN506">506</td><td class="line">      <span class='macro'>EIGEN_UNUSED_VARIABLE(cols)<span class='expansion'>Eigen::internal::ignore_unused_variable(cols);</span></span>;</td></tr>
<tr class="codeline" data-linenumber="507"><td class="num" id="LN507">507</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="508"><td class="num" id="LN508">508</td><td class="line">    EIGEN_DEVICE_FUNC DenseStorage(<span class='keyword'>const</span> DenseStorage&amp; other)</td></tr>
<tr class="codeline" data-linenumber="509"><td class="num" id="LN509">509</td><td class="line">      : m_data(internal::conditional_aligned_new_auto&lt;T,(_Options&amp;DontAlign)==0&gt;(other.m_rows*_Cols))</td></tr>
<tr class="codeline" data-linenumber="510"><td class="num" id="LN510">510</td><td class="line">      , m_rows(other.m_rows)</td></tr>
<tr class="codeline" data-linenumber="511"><td class="num" id="LN511">511</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="512"><td class="num" id="LN512">512</td><td class="line">      EIGEN_INTERNAL_DENSE_STORAGE_CTOR_PLUGIN(Index size = m_rows*_Cols)</td></tr>
<tr class="codeline" data-linenumber="513"><td class="num" id="LN513">513</td><td class="line">      internal::smart_copy(other.m_data, other.m_data+other.m_rows*_Cols, m_data);</td></tr>
<tr class="codeline" data-linenumber="514"><td class="num" id="LN514">514</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="515"><td class="num" id="LN515">515</td><td class="line">    EIGEN_DEVICE_FUNC DenseStorage&amp; <span class='keyword'>operator</span>=(<span class='keyword'>const</span> DenseStorage&amp; other)</td></tr>
<tr class="codeline" data-linenumber="516"><td class="num" id="LN516">516</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="517"><td class="num" id="LN517">517</td><td class="line">      <span class='keyword'>if</span> (<span class='keyword'>this</span> != &amp;other)</td></tr>
<tr class="codeline" data-linenumber="518"><td class="num" id="LN518">518</td><td class="line">      {</td></tr>
<tr class="codeline" data-linenumber="519"><td class="num" id="LN519">519</td><td class="line">        DenseStorage tmp(other);</td></tr>
<tr class="codeline" data-linenumber="520"><td class="num" id="LN520">520</td><td class="line">        <span class='keyword'>this</span>-&gt;swap(tmp);</td></tr>
<tr class="codeline" data-linenumber="521"><td class="num" id="LN521">521</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="522"><td class="num" id="LN522">522</td><td class="line">      <span class='keyword'>return</span> *<span class='keyword'>this</span>;</td></tr>
<tr class="codeline" data-linenumber="523"><td class="num" id="LN523">523</td><td class="line">    }    </td></tr>
<tr class="codeline" data-linenumber="524"><td class="num" id="LN524">524</td><td class="line"><span class='directive'>#if <span class='macro'>EIGEN_HAS_RVALUE_REFERENCES<span class='expansion'>1</span></span></span></td></tr>
<tr class="codeline" data-linenumber="525"><td class="num" id="LN525">525</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="526"><td class="num" id="LN526">526</td><td class="line">    DenseStorage(DenseStorage&amp;&amp; other) <span class='macro'>EIGEN_NOEXCEPT<span class='expansion'>noexcept</span></span></td></tr>
<tr class="codeline" data-linenumber="527"><td class="num" id="LN527">527</td><td class="line">      : m_data(std::move(other.m_data))</td></tr>
<tr class="codeline" data-linenumber="528"><td class="num" id="LN528">528</td><td class="line">      , m_rows(std::move(other.m_rows))</td></tr>
<tr class="codeline" data-linenumber="529"><td class="num" id="LN529">529</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="530"><td class="num" id="LN530">530</td><td class="line">      other.m_data = <span class='keyword'>nullptr</span>;</td></tr>
<tr class="codeline" data-linenumber="531"><td class="num" id="LN531">531</td><td class="line">      other.m_rows = 0;</td></tr>
<tr class="codeline" data-linenumber="532"><td class="num" id="LN532">532</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="533"><td class="num" id="LN533">533</td><td class="line">    EIGEN_DEVICE_FUNC</td></tr>
<tr class="codeline" data-linenumber="534"><td class="num" id="LN534">534</td><td class="line">    DenseStorage&amp; <span class='keyword'>operator</span>=(DenseStorage&amp;&amp; other) <span class='macro'>EIGEN_NOEXCEPT<span class='expansion'>noexcept</span></span></td></tr>
<tr class="codeline" data-linenumber="535"><td class="num" id="LN535">535</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="536"><td class="num" id="LN536">536</td><td class="line">      <span class='keyword'>using</span> std::swap;</td></tr>
<tr class="codeline" data-linenumber="537"><td class="num" id="LN537">537</td><td class="line">      swap(m_data, other.m_data);</td></tr>
<tr class="codeline" data-linenumber="538"><td class="num" id="LN538">538</td><td class="line">      swap(m_rows, other.m_rows);</td></tr>
<tr class="codeline" data-linenumber="539"><td class="num" id="LN539">539</td><td class="line">      <span class='keyword'>return</span> *<span class='keyword'>this</span>;</td></tr>
<tr class="codeline" data-linenumber="540"><td class="num" id="LN540">540</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="541"><td class="num" id="LN541">541</td><td class="line"><span class='directive'>#endif</span></td></tr>
<tr class="codeline" data-linenumber="542"><td class="num" id="LN542">542</td><td class="line">    EIGEN_DEVICE_FUNC ~DenseStorage() { <span class="mrange"><span class="mrange">internal::conditional_aligned_delete_auto&lt;T,(_Options&amp;DontAlign)==0&gt;(m_data, _Cols*m_rows)</span></span>; }</td></tr>
<tr><td class="num"></td><td class="line"><div id="Path47" class="msg msgEvent" style="margin-left:41ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">47</div></td><td><div class="PathNav"><a href="#Path46" title="Previous event (46)">&#x2190;</a></div></td></td><td>Calling 'conditional_aligned_delete_auto&lt;std::__1::complex&lt;double&gt;, true&gt;'</td><td><div class="PathNav"><a href="#Path48" title="Next event (48)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr><td class="num"></td><td class="line"><div id="Path54" class="msg msgEvent" style="margin-left:41ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">54</div></td><td><div class="PathNav"><a href="#Path53" title="Previous event (53)">&#x2190;</a></div></td></td><td>Returning; memory was released via 1st parameter</td><td><div class="PathNav"><a href="#Path55" title="Next event (55)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr class="codeline" data-linenumber="543"><td class="num" id="LN543">543</td><td class="line">    EIGEN_DEVICE_FUNC <span class='keyword'>void</span> swap(DenseStorage&amp; other) { std::swap(m_data,other.m_data); std::swap(m_rows,other.m_rows); }</td></tr>
<tr class="codeline" data-linenumber="544"><td class="num" id="LN544">544</td><td class="line">    EIGEN_DEVICE_FUNC Index rows(<span class='keyword'>void</span>) <span class='keyword'>const</span> {<span class='keyword'>return</span> m_rows;}</td></tr>
<tr class="codeline" data-linenumber="545"><td class="num" id="LN545">545</td><td class="line">    EIGEN_DEVICE_FUNC <span class='keyword'>static</span> Index cols(<span class='keyword'>void</span>) {<span class='keyword'>return</span> _Cols;}</td></tr>
<tr class="codeline" data-linenumber="546"><td class="num" id="LN546">546</td><td class="line">    <span class='keyword'>void</span> conservativeResize(Index size, Index rows, Index)</td></tr>
<tr class="codeline" data-linenumber="547"><td class="num" id="LN547">547</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="548"><td class="num" id="LN548">548</td><td class="line">      m_data = internal::conditional_aligned_realloc_new_auto&lt;T,(_Options&amp;DontAlign)==0&gt;(m_data, size, m_rows*_Cols);</td></tr>
<tr class="codeline" data-linenumber="549"><td class="num" id="LN549">549</td><td class="line">      m_rows = rows;</td></tr>
<tr class="codeline" data-linenumber="550"><td class="num" id="LN550">550</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="551"><td class="num" id="LN551">551</td><td class="line">    EIGEN_DEVICE_FUNC <span class='macro'>EIGEN_STRONG_INLINE<span class='expansion'>inline</span></span> <span class='keyword'>void</span> resize(Index size, Index rows, Index)</td></tr>
<tr class="codeline" data-linenumber="552"><td class="num" id="LN552">552</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="553"><td class="num" id="LN553">553</td><td class="line">      <span class='keyword'>if</span>(size != m_rows*_Cols)</td></tr>
<tr><td class="num"></td><td class="line"><div id="Path21" class="msg msgControl" style="margin-left:7ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexControl">21</div></td><td><div class="PathNav"><a href="#Path20" title="Previous event (20)">&#x2190;</a></div></td></td><td>Taking true branch</td><td><div class="PathNav"><a href="#Path22" title="Next event (22)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr class="codeline" data-linenumber="554"><td class="num" id="LN554">554</td><td class="line">      {</td></tr>
<tr class="codeline" data-linenumber="555"><td class="num" id="LN555">555</td><td class="line">        internal::conditional_aligned_delete_auto&lt;T,(_Options&amp;DontAlign)==0&gt;(m_data, _Cols*m_rows);</td></tr>
<tr class="codeline" data-linenumber="556"><td class="num" id="LN556">556</td><td class="line">        <span class='keyword'>if</span> (size)</td></tr>
<tr><td class="num"></td><td class="line"><div id="Path22" class="msg msgControl" style="margin-left:9ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexControl">22</div></td><td><div class="PathNav"><a href="#Path21" title="Previous event (21)">&#x2190;</a></div></td></td><td>Taking true branch</td><td><div class="PathNav"><a href="#Path23" title="Next event (23)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr class="codeline" data-linenumber="557"><td class="num" id="LN557">557</td><td class="line">          m_data = <span class="mrange"><span class="mrange">internal::conditional_aligned_new_auto&lt;T,(_Options&amp;DontAlign)==0&gt;(size)</span></span>;</td></tr>
<tr><td class="num"></td><td class="line"><div id="Path23" class="msg msgEvent" style="margin-left:20ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">23</div></td><td><div class="PathNav"><a href="#Path22" title="Previous event (22)">&#x2190;</a></div></td></td><td>Calling 'conditional_aligned_new_auto&lt;std::__1::complex&lt;double&gt;, true&gt;'</td><td><div class="PathNav"><a href="#Path24" title="Next event (24)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr><td class="num"></td><td class="line"><div id="Path33" class="msg msgEvent" style="margin-left:20ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">33</div></td><td><div class="PathNav"><a href="#Path32" title="Previous event (32)">&#x2190;</a></div></td></td><td>Returned allocated memory</td><td><div class="PathNav"><a href="#Path34" title="Next event (34)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr class="codeline" data-linenumber="558"><td class="num" id="LN558">558</td><td class="line">        <span class='keyword'>else</span></td></tr>
<tr class="codeline" data-linenumber="559"><td class="num" id="LN559">559</td><td class="line">          m_data = 0;</td></tr>
<tr class="codeline" data-linenumber="560"><td class="num" id="LN560">560</td><td class="line">        EIGEN_INTERNAL_DENSE_STORAGE_CTOR_PLUGIN({})</td></tr>
<tr class="codeline" data-linenumber="561"><td class="num" id="LN561">561</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="562"><td class="num" id="LN562">562</td><td class="line">      m_rows = rows;</td></tr>
<tr class="codeline" data-linenumber="563"><td class="num" id="LN563">563</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="564"><td class="num" id="LN564">564</td><td class="line">    EIGEN_DEVICE_FUNC <span class='keyword'>const</span> T *data() <span class='keyword'>const</span> { <span class='keyword'>return</span> m_data; }</td></tr>
<tr class="codeline" data-linenumber="565"><td class="num" id="LN565">565</td><td class="line">    EIGEN_DEVICE_FUNC T *data() { <span class='keyword'>return</span> <span class="mrange">m_data</span>; }</td></tr>
<tr><td class="num"></td><td class="line"><div id="EndPath" class="msg msgEvent" style="margin-left:35ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">69</div></td><td><div class="PathNav"><a href="#Path68" title="Previous event (68)">&#x2190;</a></div></td></td><td>Use of memory after it is freed</td></tr></table></div></td></tr>
<tr class="codeline" data-linenumber="566"><td class="num" id="LN566">566</td><td class="line">};</td></tr>
<tr class="codeline" data-linenumber="567"><td class="num" id="LN567">567</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="568"><td class="num" id="LN568">568</td><td class="line">} <span class='comment'>// end namespace Eigen</span></td></tr>
<tr class="codeline" data-linenumber="569"><td class="num" id="LN569">569</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="570"><td class="num" id="LN570">570</td><td class="line"><span class='directive'>#endif // EIGEN_MATRIX_H</span></td></tr>
</table><hr class=divider>
<div id=File34297>
<div class=FileNav><a href="#File40458">&#x2190;</a></div><h4 class=FileName>/Users/u237002/Dropbox/Hacking/sat/arts/3rdparty/Eigen/src/Core/util/Memory.h</h4>
<div class=FileNav><a href="#File42683">&#x2192;</a></div></div>
<table class="code" data-fileid="34297">
<tr class="codeline" data-linenumber="1"><td class="num" id="LN1">1</td><td class="line"><span class='comment'>// This file is part of Eigen, a lightweight C++ template library</span></td></tr>
<tr class="codeline" data-linenumber="2"><td class="num" id="LN2">2</td><td class="line"><span class='comment'>// for linear algebra.</span></td></tr>
<tr class="codeline" data-linenumber="3"><td class="num" id="LN3">3</td><td class="line"><span class='comment'>//</span></td></tr>
<tr class="codeline" data-linenumber="4"><td class="num" id="LN4">4</td><td class="line"><span class='comment'>// Copyright (C) 2008-2015 Gael Guennebaud &lt;gael.guennebaud@inria.fr&gt;</span></td></tr>
<tr class="codeline" data-linenumber="5"><td class="num" id="LN5">5</td><td class="line"><span class='comment'>// Copyright (C) 2008-2009 Benoit Jacob &lt;jacob.benoit.1@gmail.com&gt;</span></td></tr>
<tr class="codeline" data-linenumber="6"><td class="num" id="LN6">6</td><td class="line"><span class='comment'>// Copyright (C) 2009 Kenneth Riddile &lt;kfriddile@yahoo.com&gt;</span></td></tr>
<tr class="codeline" data-linenumber="7"><td class="num" id="LN7">7</td><td class="line"><span class='comment'>// Copyright (C) 2010 Hauke Heibel &lt;hauke.heibel@gmail.com&gt;</span></td></tr>
<tr class="codeline" data-linenumber="8"><td class="num" id="LN8">8</td><td class="line"><span class='comment'>// Copyright (C) 2010 Thomas Capricelli &lt;orzel@freehackers.org&gt;</span></td></tr>
<tr class="codeline" data-linenumber="9"><td class="num" id="LN9">9</td><td class="line"><span class='comment'>// Copyright (C) 2013 Pavel Holoborodko &lt;pavel@holoborodko.com&gt;</span></td></tr>
<tr class="codeline" data-linenumber="10"><td class="num" id="LN10">10</td><td class="line"><span class='comment'>//</span></td></tr>
<tr class="codeline" data-linenumber="11"><td class="num" id="LN11">11</td><td class="line"><span class='comment'>// This Source Code Form is subject to the terms of the Mozilla</span></td></tr>
<tr class="codeline" data-linenumber="12"><td class="num" id="LN12">12</td><td class="line"><span class='comment'>// Public License v. 2.0. If a copy of the MPL was not distributed</span></td></tr>
<tr class="codeline" data-linenumber="13"><td class="num" id="LN13">13</td><td class="line"><span class='comment'>// with this file, You can obtain one at http://mozilla.org/MPL/2.0/.</span></td></tr>
<tr class="codeline" data-linenumber="14"><td class="num" id="LN14">14</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="15"><td class="num" id="LN15">15</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="16"><td class="num" id="LN16">16</td><td class="line"><span class='comment'>/*****************************************************************************</span></td></tr>
<tr class="codeline" data-linenumber="17"><td class="num" id="LN17">17</td><td class="line"><span class='comment'>*** Platform checks for aligned malloc functions                           ***</span></td></tr>
<tr class="codeline" data-linenumber="18"><td class="num" id="LN18">18</td><td class="line"><span class='comment'>*****************************************************************************/</span></td></tr>
<tr class="codeline" data-linenumber="19"><td class="num" id="LN19">19</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="20"><td class="num" id="LN20">20</td><td class="line"><span class='directive'>#ifndef EIGEN_MEMORY_H</span></td></tr>
<tr class="codeline" data-linenumber="21"><td class="num" id="LN21">21</td><td class="line"><span class='directive'>#define EIGEN_MEMORY_H</span></td></tr>
<tr class="codeline" data-linenumber="22"><td class="num" id="LN22">22</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="23"><td class="num" id="LN23">23</td><td class="line"><span class='directive'>#ifndef <span class='macro'>EIGEN_MALLOC_ALREADY_ALIGNED<span class='expansion'>1</span></span></span></td></tr>
<tr class="codeline" data-linenumber="24"><td class="num" id="LN24">24</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="25"><td class="num" id="LN25">25</td><td class="line"><span class='comment'>// Try to determine automatically if malloc is already aligned.</span></td></tr>
<tr class="codeline" data-linenumber="26"><td class="num" id="LN26">26</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="27"><td class="num" id="LN27">27</td><td class="line"><span class='comment'>// On 64-bit systems, glibc's malloc returns 16-byte-aligned pointers, see:</span></td></tr>
<tr class="codeline" data-linenumber="28"><td class="num" id="LN28">28</td><td class="line"><span class='comment'>//   http://www.gnu.org/s/libc/manual/html_node/Aligned-Memory-Blocks.html</span></td></tr>
<tr class="codeline" data-linenumber="29"><td class="num" id="LN29">29</td><td class="line"><span class='comment'>// This is true at least since glibc 2.8.</span></td></tr>
<tr class="codeline" data-linenumber="30"><td class="num" id="LN30">30</td><td class="line"><span class='comment'>// This leaves the question how to detect 64-bit. According to this document,</span></td></tr>
<tr class="codeline" data-linenumber="31"><td class="num" id="LN31">31</td><td class="line"><span class='comment'>//   http://gcc.fyxm.net/summit/2003/Porting%20to%2064%20bit.pdf</span></td></tr>
<tr class="codeline" data-linenumber="32"><td class="num" id="LN32">32</td><td class="line"><span class='comment'>// page 114, "[The] LP64 model [...] is used by all 64-bit UNIX ports" so it's indeed</span></td></tr>
<tr class="codeline" data-linenumber="33"><td class="num" id="LN33">33</td><td class="line"><span class='comment'>// quite safe, at least within the context of glibc, to equate 64-bit with LP64.</span></td></tr>
<tr class="codeline" data-linenumber="34"><td class="num" id="LN34">34</td><td class="line"><span class='directive'>#if defined(__GLIBC__) &amp;&amp; ((__GLIBC__&gt;=2 &amp;&amp; __GLIBC_MINOR__ &gt;= 8) || __GLIBC__&gt;2) \</span></td></tr>
<tr class="codeline" data-linenumber="35"><td class="num" id="LN35">35</td><td class="line"> <span class='directive'>&amp;&amp; defined(<span class='macro'>__LP64__<span class='expansion'>1</span></span>) &amp;&amp; ! defined( __SANITIZE_ADDRESS__ ) &amp;&amp; (<span class='macro'>EIGEN_DEFAULT_ALIGN_BYTES<span class='expansion'>16</span></span> == 16)</span></td></tr>
<tr class="codeline" data-linenumber="36"><td class="num" id="LN36">36</td><td class="line">  <span class='directive'>#define <span class='macro'>EIGEN_GLIBC_MALLOC_ALREADY_ALIGNED<span class='expansion'>0</span></span> 1</span></td></tr>
<tr class="codeline" data-linenumber="37"><td class="num" id="LN37">37</td><td class="line"><span class='directive'>#else</span></td></tr>
<tr class="codeline" data-linenumber="38"><td class="num" id="LN38">38</td><td class="line">  <span class='directive'>#define <span class='macro'>EIGEN_GLIBC_MALLOC_ALREADY_ALIGNED<span class='expansion'>0</span></span> 0</span></td></tr>
<tr class="codeline" data-linenumber="39"><td class="num" id="LN39">39</td><td class="line"><span class='directive'>#endif</span></td></tr>
<tr class="codeline" data-linenumber="40"><td class="num" id="LN40">40</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="41"><td class="num" id="LN41">41</td><td class="line"><span class='comment'>// FreeBSD 6 seems to have 16-byte aligned malloc</span></td></tr>
<tr class="codeline" data-linenumber="42"><td class="num" id="LN42">42</td><td class="line"><span class='comment'>//   See http://svn.freebsd.org/viewvc/base/stable/6/lib/libc/stdlib/malloc.c?view=markup</span></td></tr>
<tr class="codeline" data-linenumber="43"><td class="num" id="LN43">43</td><td class="line"><span class='comment'>// FreeBSD 7 seems to have 16-byte aligned malloc except on ARM and MIPS architectures</span></td></tr>
<tr class="codeline" data-linenumber="44"><td class="num" id="LN44">44</td><td class="line"><span class='comment'>//   See http://svn.freebsd.org/viewvc/base/stable/7/lib/libc/stdlib/malloc.c?view=markup</span></td></tr>
<tr class="codeline" data-linenumber="45"><td class="num" id="LN45">45</td><td class="line"><span class='directive'>#if defined(__FreeBSD__) &amp;&amp; !(<span class='macro'>EIGEN_ARCH_ARM<span class='expansion'>0</span></span> || <span class='macro'>EIGEN_ARCH_MIPS<span class='expansion'>0</span></span>) &amp;&amp; (<span class='macro'>EIGEN_DEFAULT_ALIGN_BYTES<span class='expansion'>16</span></span> == 16)</span></td></tr>
<tr class="codeline" data-linenumber="46"><td class="num" id="LN46">46</td><td class="line">  <span class='directive'>#define <span class='macro'>EIGEN_FREEBSD_MALLOC_ALREADY_ALIGNED<span class='expansion'>0</span></span> 1</span></td></tr>
<tr class="codeline" data-linenumber="47"><td class="num" id="LN47">47</td><td class="line"><span class='directive'>#else</span></td></tr>
<tr class="codeline" data-linenumber="48"><td class="num" id="LN48">48</td><td class="line">  <span class='directive'>#define <span class='macro'>EIGEN_FREEBSD_MALLOC_ALREADY_ALIGNED<span class='expansion'>0</span></span> 0</span></td></tr>
<tr class="codeline" data-linenumber="49"><td class="num" id="LN49">49</td><td class="line"><span class='directive'>#endif</span></td></tr>
<tr class="codeline" data-linenumber="50"><td class="num" id="LN50">50</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="51"><td class="num" id="LN51">51</td><td class="line"><span class='directive'>#if (<span class='macro'>EIGEN_OS_MAC<span class='expansion'>1</span></span> &amp;&amp; (<span class='macro'>EIGEN_DEFAULT_ALIGN_BYTES<span class='expansion'>16</span></span> == 16))     \</span></td></tr>
<tr class="codeline" data-linenumber="52"><td class="num" id="LN52">52</td><td class="line"> <span class='directive'>|| (<span class='macro'>EIGEN_OS_WIN64<span class='expansion'>0</span></span> &amp;&amp; (<span class='macro'>EIGEN_DEFAULT_ALIGN_BYTES<span class='expansion'>16</span></span> == 16))   \</span></td></tr>
<tr class="codeline" data-linenumber="53"><td class="num" id="LN53">53</td><td class="line"> <span class='directive'>|| <span class='macro'>EIGEN_GLIBC_MALLOC_ALREADY_ALIGNED<span class='expansion'>0</span></span>              \</span></td></tr>
<tr class="codeline" data-linenumber="54"><td class="num" id="LN54">54</td><td class="line"> <span class='directive'>|| <span class='macro'>EIGEN_FREEBSD_MALLOC_ALREADY_ALIGNED<span class='expansion'>0</span></span></span></td></tr>
<tr class="codeline" data-linenumber="55"><td class="num" id="LN55">55</td><td class="line">  <span class='directive'>#define <span class='macro'>EIGEN_MALLOC_ALREADY_ALIGNED<span class='expansion'>1</span></span> 1</span></td></tr>
<tr class="codeline" data-linenumber="56"><td class="num" id="LN56">56</td><td class="line"><span class='directive'>#else</span></td></tr>
<tr class="codeline" data-linenumber="57"><td class="num" id="LN57">57</td><td class="line">  <span class='directive'>#define <span class='macro'>EIGEN_MALLOC_ALREADY_ALIGNED<span class='expansion'>1</span></span> 0</span></td></tr>
<tr class="codeline" data-linenumber="58"><td class="num" id="LN58">58</td><td class="line"><span class='directive'>#endif</span></td></tr>
<tr class="codeline" data-linenumber="59"><td class="num" id="LN59">59</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="60"><td class="num" id="LN60">60</td><td class="line"><span class='directive'>#endif</span></td></tr>
<tr class="codeline" data-linenumber="61"><td class="num" id="LN61">61</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="62"><td class="num" id="LN62">62</td><td class="line"><span class='keyword'>namespace</span> Eigen {</td></tr>
<tr class="codeline" data-linenumber="63"><td class="num" id="LN63">63</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="64"><td class="num" id="LN64">64</td><td class="line"><span class='keyword'>namespace</span> internal {</td></tr>
<tr class="codeline" data-linenumber="65"><td class="num" id="LN65">65</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="66"><td class="num" id="LN66">66</td><td class="line">EIGEN_DEVICE_FUNC </td></tr>
<tr class="codeline" data-linenumber="67"><td class="num" id="LN67">67</td><td class="line"><span class='keyword'>inline</span> <span class='keyword'>void</span> throw_std_bad_alloc()</td></tr>
<tr class="codeline" data-linenumber="68"><td class="num" id="LN68">68</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="69"><td class="num" id="LN69">69</td><td class="line">  <span class='directive'>#ifdef EIGEN_EXCEPTIONS</span></td></tr>
<tr class="codeline" data-linenumber="70"><td class="num" id="LN70">70</td><td class="line">    <span class='keyword'>throw</span> std::bad_alloc();</td></tr>
<tr class="codeline" data-linenumber="71"><td class="num" id="LN71">71</td><td class="line">  <span class='directive'>#else</span></td></tr>
<tr class="codeline" data-linenumber="72"><td class="num" id="LN72">72</td><td class="line">    std::size_t huge = <span class='keyword'>static_cast</span>&lt;std::size_t&gt;(-1);</td></tr>
<tr class="codeline" data-linenumber="73"><td class="num" id="LN73">73</td><td class="line">    ::<span class='keyword'>operator</span> <span class='keyword'>new</span>(huge);</td></tr>
<tr class="codeline" data-linenumber="74"><td class="num" id="LN74">74</td><td class="line">  <span class='directive'>#endif</span></td></tr>
<tr class="codeline" data-linenumber="75"><td class="num" id="LN75">75</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="76"><td class="num" id="LN76">76</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="77"><td class="num" id="LN77">77</td><td class="line"><span class='comment'>/*****************************************************************************</span></td></tr>
<tr class="codeline" data-linenumber="78"><td class="num" id="LN78">78</td><td class="line"><span class='comment'>*** Implementation of handmade aligned functions                           ***</span></td></tr>
<tr class="codeline" data-linenumber="79"><td class="num" id="LN79">79</td><td class="line"><span class='comment'>*****************************************************************************/</span></td></tr>
<tr class="codeline" data-linenumber="80"><td class="num" id="LN80">80</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="81"><td class="num" id="LN81">81</td><td class="line"><span class='comment'>/* ----- Hand made implementations of aligned malloc/free and realloc ----- */</span></td></tr>
<tr class="codeline" data-linenumber="82"><td class="num" id="LN82">82</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="83"><td class="num" id="LN83">83</td><td class="line"><span class='comment'>/** \internal Like malloc, but the returned pointer is guaranteed to be 16-byte aligned.</span></td></tr>
<tr class="codeline" data-linenumber="84"><td class="num" id="LN84">84</td><td class="line">  <span class='comment'>* Fast, but wastes 16 additional bytes of memory. Does not throw any exception.</span></td></tr>
<tr class="codeline" data-linenumber="85"><td class="num" id="LN85">85</td><td class="line">  <span class='comment'>*/</span></td></tr>
<tr class="codeline" data-linenumber="86"><td class="num" id="LN86">86</td><td class="line"><span class='keyword'>inline</span> <span class='keyword'>void</span>* handmade_aligned_malloc(std::size_t size)</td></tr>
<tr class="codeline" data-linenumber="87"><td class="num" id="LN87">87</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="88"><td class="num" id="LN88">88</td><td class="line">  <span class='keyword'>void</span> *original = std::malloc(size+<span class='macro'>EIGEN_DEFAULT_ALIGN_BYTES<span class='expansion'>16</span></span>);</td></tr>
<tr class="codeline" data-linenumber="89"><td class="num" id="LN89">89</td><td class="line">  <span class='keyword'>if</span> (original == 0) <span class='keyword'>return</span> 0;</td></tr>
<tr class="codeline" data-linenumber="90"><td class="num" id="LN90">90</td><td class="line">  <span class='keyword'>void</span> *aligned = <span class='keyword'>reinterpret_cast</span>&lt;<span class='keyword'>void</span>*&gt;((<span class='keyword'>reinterpret_cast</span>&lt;std::size_t&gt;(original) &amp; ~(std::size_t(<span class='macro'>EIGEN_DEFAULT_ALIGN_BYTES<span class='expansion'>16</span></span>-1))) + <span class='macro'>EIGEN_DEFAULT_ALIGN_BYTES<span class='expansion'>16</span></span>);</td></tr>
<tr class="codeline" data-linenumber="91"><td class="num" id="LN91">91</td><td class="line">  *(<span class='keyword'>reinterpret_cast</span>&lt;<span class='keyword'>void</span>**&gt;(aligned) - 1) = original;</td></tr>
<tr class="codeline" data-linenumber="92"><td class="num" id="LN92">92</td><td class="line">  <span class='keyword'>return</span> aligned;</td></tr>
<tr class="codeline" data-linenumber="93"><td class="num" id="LN93">93</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="94"><td class="num" id="LN94">94</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="95"><td class="num" id="LN95">95</td><td class="line"><span class='comment'>/** \internal Frees memory allocated with handmade_aligned_malloc */</span></td></tr>
<tr class="codeline" data-linenumber="96"><td class="num" id="LN96">96</td><td class="line"><span class='keyword'>inline</span> <span class='keyword'>void</span> handmade_aligned_free(<span class='keyword'>void</span> *ptr)</td></tr>
<tr class="codeline" data-linenumber="97"><td class="num" id="LN97">97</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="98"><td class="num" id="LN98">98</td><td class="line">  <span class='keyword'>if</span> (ptr) std::free(*(<span class='keyword'>reinterpret_cast</span>&lt;<span class='keyword'>void</span>**&gt;(ptr) - 1));</td></tr>
<tr class="codeline" data-linenumber="99"><td class="num" id="LN99">99</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="100"><td class="num" id="LN100">100</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="101"><td class="num" id="LN101">101</td><td class="line"><span class='comment'>/** \internal</span></td></tr>
<tr class="codeline" data-linenumber="102"><td class="num" id="LN102">102</td><td class="line">  <span class='comment'>* \brief Reallocates aligned memory.</span></td></tr>
<tr class="codeline" data-linenumber="103"><td class="num" id="LN103">103</td><td class="line">  <span class='comment'>* Since we know that our handmade version is based on std::malloc</span></td></tr>
<tr class="codeline" data-linenumber="104"><td class="num" id="LN104">104</td><td class="line">  <span class='comment'>* we can use std::realloc to implement efficient reallocation.</span></td></tr>
<tr class="codeline" data-linenumber="105"><td class="num" id="LN105">105</td><td class="line">  <span class='comment'>*/</span></td></tr>
<tr class="codeline" data-linenumber="106"><td class="num" id="LN106">106</td><td class="line"><span class='keyword'>inline</span> <span class='keyword'>void</span>* handmade_aligned_realloc(<span class='keyword'>void</span>* ptr, std::size_t size, std::size_t = 0)</td></tr>
<tr class="codeline" data-linenumber="107"><td class="num" id="LN107">107</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="108"><td class="num" id="LN108">108</td><td class="line">  <span class='keyword'>if</span> (ptr == 0) <span class='keyword'>return</span> handmade_aligned_malloc(size);</td></tr>
<tr class="codeline" data-linenumber="109"><td class="num" id="LN109">109</td><td class="line">  <span class='keyword'>void</span> *original = *(<span class='keyword'>reinterpret_cast</span>&lt;<span class='keyword'>void</span>**&gt;(ptr) - 1);</td></tr>
<tr class="codeline" data-linenumber="110"><td class="num" id="LN110">110</td><td class="line">  std::ptrdiff_t previous_offset = <span class='keyword'>static_cast</span>&lt;<span class='keyword'>char</span> *&gt;(ptr)-<span class='keyword'>static_cast</span>&lt;<span class='keyword'>char</span> *&gt;(original);</td></tr>
<tr class="codeline" data-linenumber="111"><td class="num" id="LN111">111</td><td class="line">  original = std::realloc(original,size+<span class='macro'>EIGEN_DEFAULT_ALIGN_BYTES<span class='expansion'>16</span></span>);</td></tr>
<tr class="codeline" data-linenumber="112"><td class="num" id="LN112">112</td><td class="line">  <span class='keyword'>if</span> (original == 0) <span class='keyword'>return</span> 0;</td></tr>
<tr class="codeline" data-linenumber="113"><td class="num" id="LN113">113</td><td class="line">  <span class='keyword'>void</span> *aligned = <span class='keyword'>reinterpret_cast</span>&lt;<span class='keyword'>void</span>*&gt;((<span class='keyword'>reinterpret_cast</span>&lt;std::size_t&gt;(original) &amp; ~(std::size_t(<span class='macro'>EIGEN_DEFAULT_ALIGN_BYTES<span class='expansion'>16</span></span>-1))) + <span class='macro'>EIGEN_DEFAULT_ALIGN_BYTES<span class='expansion'>16</span></span>);</td></tr>
<tr class="codeline" data-linenumber="114"><td class="num" id="LN114">114</td><td class="line">  <span class='keyword'>void</span> *previous_aligned = <span class='keyword'>static_cast</span>&lt;<span class='keyword'>char</span> *&gt;(original)+previous_offset;</td></tr>
<tr class="codeline" data-linenumber="115"><td class="num" id="LN115">115</td><td class="line">  <span class='keyword'>if</span>(aligned!=previous_aligned)</td></tr>
<tr class="codeline" data-linenumber="116"><td class="num" id="LN116">116</td><td class="line">    std::memmove(aligned, previous_aligned, size);</td></tr>
<tr class="codeline" data-linenumber="117"><td class="num" id="LN117">117</td><td class="line">  </td></tr>
<tr class="codeline" data-linenumber="118"><td class="num" id="LN118">118</td><td class="line">  *(<span class='keyword'>reinterpret_cast</span>&lt;<span class='keyword'>void</span>**&gt;(aligned) - 1) = original;</td></tr>
<tr class="codeline" data-linenumber="119"><td class="num" id="LN119">119</td><td class="line">  <span class='keyword'>return</span> aligned;</td></tr>
<tr class="codeline" data-linenumber="120"><td class="num" id="LN120">120</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="121"><td class="num" id="LN121">121</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="122"><td class="num" id="LN122">122</td><td class="line"><span class='comment'>/*****************************************************************************</span></td></tr>
<tr class="codeline" data-linenumber="123"><td class="num" id="LN123">123</td><td class="line"><span class='comment'>*** Implementation of portable aligned versions of malloc/free/realloc     ***</span></td></tr>
<tr class="codeline" data-linenumber="124"><td class="num" id="LN124">124</td><td class="line"><span class='comment'>*****************************************************************************/</span></td></tr>
<tr class="codeline" data-linenumber="125"><td class="num" id="LN125">125</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="126"><td class="num" id="LN126">126</td><td class="line"><span class='directive'>#ifdef EIGEN_NO_MALLOC</span></td></tr>
<tr class="codeline" data-linenumber="127"><td class="num" id="LN127">127</td><td class="line">EIGEN_DEVICE_FUNC <span class='keyword'>inline</span> <span class='keyword'>void</span> check_that_malloc_is_allowed()</td></tr>
<tr class="codeline" data-linenumber="128"><td class="num" id="LN128">128</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="129"><td class="num" id="LN129">129</td><td class="line">  <span class='macro'>eigen_assert(<span class='keyword'>false</span> &amp;&amp; <span class='string_literal'>"heap allocation is forbidden (EIGEN_NO_MALLOC is defined)"</span>)<span class='expansion'>(__builtin_expect(!(false &amp;&amp; "heap allocation is forbidden (EIGEN_NO_MALLOC is defined)"<br>), 0) ? __assert_rtn(__func__, "/Users/u237002/Dropbox/Hacking/sat/arts/3rdparty/Eigen/src/Core/util/Memory.h"<br>, 129, "false &amp;&amp; \"heap allocation is forbidden (EIGEN_NO_MALLOC is defined)\""<br>) : (void)0)</span></span>;</td></tr>
<tr class="codeline" data-linenumber="130"><td class="num" id="LN130">130</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="131"><td class="num" id="LN131">131</td><td class="line"><span class='directive'>#elif defined EIGEN_RUNTIME_NO_MALLOC</span></td></tr>
<tr class="codeline" data-linenumber="132"><td class="num" id="LN132">132</td><td class="line">EIGEN_DEVICE_FUNC <span class='keyword'>inline</span> <span class='keyword'>bool</span> is_malloc_allowed_impl(<span class='keyword'>bool</span> update, <span class='keyword'>bool</span> new_value = <span class='keyword'>false</span>)</td></tr>
<tr class="codeline" data-linenumber="133"><td class="num" id="LN133">133</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="134"><td class="num" id="LN134">134</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>bool</span> value = <span class='keyword'>true</span>;</td></tr>
<tr class="codeline" data-linenumber="135"><td class="num" id="LN135">135</td><td class="line">  <span class='keyword'>if</span> (update == 1)</td></tr>
<tr class="codeline" data-linenumber="136"><td class="num" id="LN136">136</td><td class="line">    value = new_value;</td></tr>
<tr class="codeline" data-linenumber="137"><td class="num" id="LN137">137</td><td class="line">  <span class='keyword'>return</span> value;</td></tr>
<tr class="codeline" data-linenumber="138"><td class="num" id="LN138">138</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="139"><td class="num" id="LN139">139</td><td class="line">EIGEN_DEVICE_FUNC <span class='keyword'>inline</span> <span class='keyword'>bool</span> is_malloc_allowed() { <span class='keyword'>return</span> is_malloc_allowed_impl(<span class='keyword'>false</span>); }</td></tr>
<tr class="codeline" data-linenumber="140"><td class="num" id="LN140">140</td><td class="line">EIGEN_DEVICE_FUNC <span class='keyword'>inline</span> <span class='keyword'>bool</span> set_is_malloc_allowed(<span class='keyword'>bool</span> new_value) { <span class='keyword'>return</span> is_malloc_allowed_impl(<span class='keyword'>true</span>, new_value); }</td></tr>
<tr class="codeline" data-linenumber="141"><td class="num" id="LN141">141</td><td class="line">EIGEN_DEVICE_FUNC <span class='keyword'>inline</span> <span class='keyword'>void</span> check_that_malloc_is_allowed()</td></tr>
<tr class="codeline" data-linenumber="142"><td class="num" id="LN142">142</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="143"><td class="num" id="LN143">143</td><td class="line">  <span class='macro'>eigen_assert(is_malloc_allowed() &amp;&amp; <span class='string_literal'>"heap allocation is forbidden (EIGEN_RUNTIME_NO_MALLOC is defined and g_is_malloc_allowed is false)"</span>)<span class='expansion'>(__builtin_expect(!(is_malloc_allowed() &amp;&amp; "heap allocation is forbidden (EIGEN_RUNTIME_NO_MALLOC is defined and g_is_malloc_allowed is false)"<br>), 0) ? __assert_rtn(__func__, "/Users/u237002/Dropbox/Hacking/sat/arts/3rdparty/Eigen/src/Core/util/Memory.h"<br>, 143, "is_malloc_allowed() &amp;&amp; \"heap allocation is forbidden (EIGEN_RUNTIME_NO_MALLOC is defined and g_is_malloc_allowed is false)\""<br>) : (void)0)</span></span>;</td></tr>
<tr class="codeline" data-linenumber="144"><td class="num" id="LN144">144</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="145"><td class="num" id="LN145">145</td><td class="line"><span class='directive'>#else</span> </td></tr>
<tr class="codeline" data-linenumber="146"><td class="num" id="LN146">146</td><td class="line">EIGEN_DEVICE_FUNC <span class='keyword'>inline</span> <span class='keyword'>void</span> check_that_malloc_is_allowed()</td></tr>
<tr class="codeline" data-linenumber="147"><td class="num" id="LN147">147</td><td class="line">{}</td></tr>
<tr class="codeline" data-linenumber="148"><td class="num" id="LN148">148</td><td class="line"><span class='directive'>#endif</span></td></tr>
<tr class="codeline" data-linenumber="149"><td class="num" id="LN149">149</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="150"><td class="num" id="LN150">150</td><td class="line"><span class='comment'>/** \internal Allocates \a size bytes. The returned pointer is guaranteed to have 16 or 32 bytes alignment depending on the requirements.</span></td></tr>
<tr class="codeline" data-linenumber="151"><td class="num" id="LN151">151</td><td class="line">  <span class='comment'>* On allocation error, the returned pointer is null, and std::bad_alloc is thrown.</span></td></tr>
<tr class="codeline" data-linenumber="152"><td class="num" id="LN152">152</td><td class="line">  <span class='comment'>*/</span></td></tr>
<tr class="codeline" data-linenumber="153"><td class="num" id="LN153">153</td><td class="line">EIGEN_DEVICE_FUNC <span class='keyword'>inline</span> <span class='keyword'>void</span>* aligned_malloc(std::size_t size)</td></tr>
<tr class="codeline" data-linenumber="154"><td class="num" id="LN154">154</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="155"><td class="num" id="LN155">155</td><td class="line">  check_that_malloc_is_allowed();</td></tr>
<tr class="codeline" data-linenumber="156"><td class="num" id="LN156">156</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="157"><td class="num" id="LN157">157</td><td class="line">  <span class='keyword'>void</span> *result;</td></tr>
<tr class="codeline" data-linenumber="158"><td class="num" id="LN158">158</td><td class="line">  <span class='directive'>#if (<span class='macro'>EIGEN_DEFAULT_ALIGN_BYTES<span class='expansion'>16</span></span>==0) || <span class='macro'>EIGEN_MALLOC_ALREADY_ALIGNED<span class='expansion'>1</span></span></span></td></tr>
<tr class="codeline" data-linenumber="159"><td class="num" id="LN159">159</td><td class="line">    result = <span class="mrange">std::malloc(size)</span>;</td></tr>
<tr><td class="num"></td><td class="line"><div id="Path27" class="msg msgEvent" style="margin-left:14ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">27</div></td><td><div class="PathNav"><a href="#Path26" title="Previous event (26)">&#x2190;</a></div></td></td><td>Memory is allocated</td><td><div class="PathNav"><a href="#Path28" title="Next event (28)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr class="codeline" data-linenumber="160"><td class="num" id="LN160">160</td><td class="line">    <span class='directive'>#if <span class='macro'>EIGEN_DEFAULT_ALIGN_BYTES<span class='expansion'>16</span></span>==16</span></td></tr>
<tr class="codeline" data-linenumber="161"><td class="num" id="LN161">161</td><td class="line">    <span class='macro'>eigen_assert((size&lt;16 || (std::size_t(result)%16)==0) &amp;&amp; <span class='string_literal'>"System's malloc returned an unaligned pointer. Compile with EIGEN_MALLOC_ALREADY_ALIGNED=0 to fallback to handmade alignd memory allocator."</span>)<span class='expansion'>(__builtin_expect(!((size&lt;16 || (std::size_t(result)%16)==<br>0) &amp;&amp; "System's malloc returned an unaligned pointer. Compile with EIGEN_MALLOC_ALREADY_ALIGNED=0 to fallback to handmade alignd memory allocator."<br>), 0) ? __assert_rtn(__func__, "/Users/u237002/Dropbox/Hacking/sat/arts/3rdparty/Eigen/src/Core/util/Memory.h"<br>, 161, "(size&lt;16 || (std::size_t(result)%16)==0) &amp;&amp; \"System's malloc returned an unaligned pointer. Compile with EIGEN_MALLOC_ALREADY_ALIGNED=0 to fallback to handmade alignd memory allocator.\""<br>) : (void)0)</span></span>;</td></tr>
<tr><td class="num"></td><td class="line"><div id="Path28" class="msg msgControl" style="margin-left:5ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexControl">28</div></td><td><div class="PathNav"><a href="#Path27" title="Previous event (27)">&#x2190;</a></div></td></td><td>'?' condition is false</td><td><div class="PathNav"><a href="#Path29" title="Next event (29)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr class="codeline" data-linenumber="162"><td class="num" id="LN162">162</td><td class="line">    <span class='directive'>#endif</span></td></tr>
<tr class="codeline" data-linenumber="163"><td class="num" id="LN163">163</td><td class="line">  <span class='directive'>#else</span></td></tr>
<tr class="codeline" data-linenumber="164"><td class="num" id="LN164">164</td><td class="line">    result = handmade_aligned_malloc(size);</td></tr>
<tr class="codeline" data-linenumber="165"><td class="num" id="LN165">165</td><td class="line">  <span class='directive'>#endif</span></td></tr>
<tr class="codeline" data-linenumber="166"><td class="num" id="LN166">166</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="167"><td class="num" id="LN167">167</td><td class="line">  <span class='keyword'>if</span>(<span class="mrange">!result</span> &amp;&amp; size)</td></tr>
<tr><td class="num"></td><td class="line"><div id="Path29" class="msg msgEvent" style="margin-left:6ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">29</div></td><td><div class="PathNav"><a href="#Path28" title="Previous event (28)">&#x2190;</a></div></td></td><td>Assuming 'result' is non-null</td><td><div class="PathNav"><a href="#Path30" title="Next event (30)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr class="codeline" data-linenumber="168"><td class="num" id="LN168">168</td><td class="line">    throw_std_bad_alloc();</td></tr>
<tr class="codeline" data-linenumber="169"><td class="num" id="LN169">169</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="170"><td class="num" id="LN170">170</td><td class="line">  <span class='keyword'>return</span> result;</td></tr>
<tr class="codeline" data-linenumber="171"><td class="num" id="LN171">171</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="172"><td class="num" id="LN172">172</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="173"><td class="num" id="LN173">173</td><td class="line"><span class='comment'>/** \internal Frees memory allocated with aligned_malloc. */</span></td></tr>
<tr class="codeline" data-linenumber="174"><td class="num" id="LN174">174</td><td class="line">EIGEN_DEVICE_FUNC <span class='keyword'>inline</span> <span class='keyword'>void</span> aligned_free(<span class='keyword'>void</span> *ptr)</td></tr>
<tr class="codeline" data-linenumber="175"><td class="num" id="LN175">175</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="176"><td class="num" id="LN176">176</td><td class="line">  <span class='directive'>#if (<span class='macro'>EIGEN_DEFAULT_ALIGN_BYTES<span class='expansion'>16</span></span>==0) || <span class='macro'>EIGEN_MALLOC_ALREADY_ALIGNED<span class='expansion'>1</span></span></span></td></tr>
<tr class="codeline" data-linenumber="177"><td class="num" id="LN177">177</td><td class="line">    <span class="mrange">std::free(ptr)</span>;</td></tr>
<tr><td class="num"></td><td class="line"><div id="Path51" class="msg msgEvent" style="margin-left:5ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">51</div></td><td><div class="PathNav"><a href="#Path50" title="Previous event (50)">&#x2190;</a></div></td></td><td>Memory is released</td><td><div class="PathNav"><a href="#Path52" title="Next event (52)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr class="codeline" data-linenumber="178"><td class="num" id="LN178">178</td><td class="line">  <span class='directive'>#else</span></td></tr>
<tr class="codeline" data-linenumber="179"><td class="num" id="LN179">179</td><td class="line">    handmade_aligned_free(ptr);</td></tr>
<tr class="codeline" data-linenumber="180"><td class="num" id="LN180">180</td><td class="line">  <span class='directive'>#endif</span></td></tr>
<tr class="codeline" data-linenumber="181"><td class="num" id="LN181">181</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="182"><td class="num" id="LN182">182</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="183"><td class="num" id="LN183">183</td><td class="line"><span class='comment'>/**</span></td></tr>
<tr class="codeline" data-linenumber="184"><td class="num" id="LN184">184</td><td class="line">  <span class='comment'>* \internal</span></td></tr>
<tr class="codeline" data-linenumber="185"><td class="num" id="LN185">185</td><td class="line">  <span class='comment'>* \brief Reallocates an aligned block of memory.</span></td></tr>
<tr class="codeline" data-linenumber="186"><td class="num" id="LN186">186</td><td class="line">  <span class='comment'>* \throws std::bad_alloc on allocation failure</span></td></tr>
<tr class="codeline" data-linenumber="187"><td class="num" id="LN187">187</td><td class="line">  <span class='comment'>*/</span></td></tr>
<tr class="codeline" data-linenumber="188"><td class="num" id="LN188">188</td><td class="line"><span class='keyword'>inline</span> <span class='keyword'>void</span>* aligned_realloc(<span class='keyword'>void</span> *ptr, std::size_t new_size, std::size_t old_size)</td></tr>
<tr class="codeline" data-linenumber="189"><td class="num" id="LN189">189</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="190"><td class="num" id="LN190">190</td><td class="line">  <span class='macro'>EIGEN_UNUSED_VARIABLE(old_size)<span class='expansion'>Eigen::internal::ignore_unused_variable(old_size);</span></span>;</td></tr>
<tr class="codeline" data-linenumber="191"><td class="num" id="LN191">191</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="192"><td class="num" id="LN192">192</td><td class="line">  <span class='keyword'>void</span> *result;</td></tr>
<tr class="codeline" data-linenumber="193"><td class="num" id="LN193">193</td><td class="line"><span class='directive'>#if (<span class='macro'>EIGEN_DEFAULT_ALIGN_BYTES<span class='expansion'>16</span></span>==0) || <span class='macro'>EIGEN_MALLOC_ALREADY_ALIGNED<span class='expansion'>1</span></span></span></td></tr>
<tr class="codeline" data-linenumber="194"><td class="num" id="LN194">194</td><td class="line">  result = std::realloc(ptr,new_size);</td></tr>
<tr class="codeline" data-linenumber="195"><td class="num" id="LN195">195</td><td class="line"><span class='directive'>#else</span></td></tr>
<tr class="codeline" data-linenumber="196"><td class="num" id="LN196">196</td><td class="line">  result = handmade_aligned_realloc(ptr,new_size,old_size);</td></tr>
<tr class="codeline" data-linenumber="197"><td class="num" id="LN197">197</td><td class="line"><span class='directive'>#endif</span></td></tr>
<tr class="codeline" data-linenumber="198"><td class="num" id="LN198">198</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="199"><td class="num" id="LN199">199</td><td class="line">  <span class='keyword'>if</span> (!result &amp;&amp; new_size)</td></tr>
<tr class="codeline" data-linenumber="200"><td class="num" id="LN200">200</td><td class="line">    throw_std_bad_alloc();</td></tr>
<tr class="codeline" data-linenumber="201"><td class="num" id="LN201">201</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="202"><td class="num" id="LN202">202</td><td class="line">  <span class='keyword'>return</span> result;</td></tr>
<tr class="codeline" data-linenumber="203"><td class="num" id="LN203">203</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="204"><td class="num" id="LN204">204</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="205"><td class="num" id="LN205">205</td><td class="line"><span class='comment'>/*****************************************************************************</span></td></tr>
<tr class="codeline" data-linenumber="206"><td class="num" id="LN206">206</td><td class="line"><span class='comment'>*** Implementation of conditionally aligned functions                      ***</span></td></tr>
<tr class="codeline" data-linenumber="207"><td class="num" id="LN207">207</td><td class="line"><span class='comment'>*****************************************************************************/</span></td></tr>
<tr class="codeline" data-linenumber="208"><td class="num" id="LN208">208</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="209"><td class="num" id="LN209">209</td><td class="line"><span class='comment'>/** \internal Allocates \a size bytes. If Align is true, then the returned ptr is 16-byte-aligned.</span></td></tr>
<tr class="codeline" data-linenumber="210"><td class="num" id="LN210">210</td><td class="line">  <span class='comment'>* On allocation error, the returned pointer is null, and a std::bad_alloc is thrown.</span></td></tr>
<tr class="codeline" data-linenumber="211"><td class="num" id="LN211">211</td><td class="line">  <span class='comment'>*/</span></td></tr>
<tr class="codeline" data-linenumber="212"><td class="num" id="LN212">212</td><td class="line"><span class='keyword'>template</span>&lt;<span class='keyword'>bool</span> Align&gt; EIGEN_DEVICE_FUNC <span class='keyword'>inline</span> <span class='keyword'>void</span>* conditional_aligned_malloc(std::size_t size)</td></tr>
<tr class="codeline" data-linenumber="213"><td class="num" id="LN213">213</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="214"><td class="num" id="LN214">214</td><td class="line">  <span class='keyword'>return</span> <span class="mrange"><span class="mrange">aligned_malloc(size)</span></span>;</td></tr>
<tr><td class="num"></td><td class="line"><div id="Path26" class="msg msgEvent" style="margin-left:10ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">26</div></td><td><div class="PathNav"><a href="#Path25" title="Previous event (25)">&#x2190;</a></div></td></td><td>Calling 'aligned_malloc'</td><td><div class="PathNav"><a href="#Path27" title="Next event (27)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr><td class="num"></td><td class="line"><div id="Path30" class="msg msgEvent" style="margin-left:10ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">30</div></td><td><div class="PathNav"><a href="#Path29" title="Previous event (29)">&#x2190;</a></div></td></td><td>Returned allocated memory</td><td><div class="PathNav"><a href="#Path31" title="Next event (31)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr class="codeline" data-linenumber="215"><td class="num" id="LN215">215</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="216"><td class="num" id="LN216">216</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="217"><td class="num" id="LN217">217</td><td class="line"><span class='keyword'>template</span>&lt;&gt; EIGEN_DEVICE_FUNC <span class='keyword'>inline</span> <span class='keyword'>void</span>* conditional_aligned_malloc&lt;<span class='keyword'>false</span>&gt;(std::size_t size)</td></tr>
<tr class="codeline" data-linenumber="218"><td class="num" id="LN218">218</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="219"><td class="num" id="LN219">219</td><td class="line">  check_that_malloc_is_allowed();</td></tr>
<tr class="codeline" data-linenumber="220"><td class="num" id="LN220">220</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="221"><td class="num" id="LN221">221</td><td class="line">  <span class='keyword'>void</span> *result = std::malloc(size);</td></tr>
<tr class="codeline" data-linenumber="222"><td class="num" id="LN222">222</td><td class="line">  <span class='keyword'>if</span>(!result &amp;&amp; size)</td></tr>
<tr class="codeline" data-linenumber="223"><td class="num" id="LN223">223</td><td class="line">    throw_std_bad_alloc();</td></tr>
<tr class="codeline" data-linenumber="224"><td class="num" id="LN224">224</td><td class="line">  <span class='keyword'>return</span> result;</td></tr>
<tr class="codeline" data-linenumber="225"><td class="num" id="LN225">225</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="226"><td class="num" id="LN226">226</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="227"><td class="num" id="LN227">227</td><td class="line"><span class='comment'>/** \internal Frees memory allocated with conditional_aligned_malloc */</span></td></tr>
<tr class="codeline" data-linenumber="228"><td class="num" id="LN228">228</td><td class="line"><span class='keyword'>template</span>&lt;<span class='keyword'>bool</span> Align&gt; EIGEN_DEVICE_FUNC <span class='keyword'>inline</span> <span class='keyword'>void</span> conditional_aligned_free(<span class='keyword'>void</span> *ptr)</td></tr>
<tr class="codeline" data-linenumber="229"><td class="num" id="LN229">229</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="230"><td class="num" id="LN230">230</td><td class="line">  <span class="mrange"><span class="mrange">aligned_free(ptr)</span></span>;</td></tr>
<tr><td class="num"></td><td class="line"><div id="Path50" class="msg msgEvent" style="margin-left:3ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">50</div></td><td><div class="PathNav"><a href="#Path49" title="Previous event (49)">&#x2190;</a></div></td></td><td>Calling 'aligned_free'</td><td><div class="PathNav"><a href="#Path51" title="Next event (51)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr><td class="num"></td><td class="line"><div id="Path52" class="msg msgEvent" style="margin-left:3ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">52</div></td><td><div class="PathNav"><a href="#Path51" title="Previous event (51)">&#x2190;</a></div></td></td><td>Returning; memory was released via 1st parameter</td><td><div class="PathNav"><a href="#Path53" title="Next event (53)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr class="codeline" data-linenumber="231"><td class="num" id="LN231">231</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="232"><td class="num" id="LN232">232</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="233"><td class="num" id="LN233">233</td><td class="line"><span class='keyword'>template</span>&lt;&gt; EIGEN_DEVICE_FUNC <span class='keyword'>inline</span> <span class='keyword'>void</span> conditional_aligned_free&lt;<span class='keyword'>false</span>&gt;(<span class='keyword'>void</span> *ptr)</td></tr>
<tr class="codeline" data-linenumber="234"><td class="num" id="LN234">234</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="235"><td class="num" id="LN235">235</td><td class="line">  std::free(ptr);</td></tr>
<tr class="codeline" data-linenumber="236"><td class="num" id="LN236">236</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="237"><td class="num" id="LN237">237</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="238"><td class="num" id="LN238">238</td><td class="line"><span class='keyword'>template</span>&lt;<span class='keyword'>bool</span> Align&gt; <span class='keyword'>inline</span> <span class='keyword'>void</span>* conditional_aligned_realloc(<span class='keyword'>void</span>* ptr, std::size_t new_size, std::size_t old_size)</td></tr>
<tr class="codeline" data-linenumber="239"><td class="num" id="LN239">239</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="240"><td class="num" id="LN240">240</td><td class="line">  <span class='keyword'>return</span> aligned_realloc(ptr, new_size, old_size);</td></tr>
<tr class="codeline" data-linenumber="241"><td class="num" id="LN241">241</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="242"><td class="num" id="LN242">242</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="243"><td class="num" id="LN243">243</td><td class="line"><span class='keyword'>template</span>&lt;&gt; <span class='keyword'>inline</span> <span class='keyword'>void</span>* conditional_aligned_realloc&lt;<span class='keyword'>false</span>&gt;(<span class='keyword'>void</span>* ptr, std::size_t new_size, std::size_t)</td></tr>
<tr class="codeline" data-linenumber="244"><td class="num" id="LN244">244</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="245"><td class="num" id="LN245">245</td><td class="line">  <span class='keyword'>return</span> std::realloc(ptr, new_size);</td></tr>
<tr class="codeline" data-linenumber="246"><td class="num" id="LN246">246</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="247"><td class="num" id="LN247">247</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="248"><td class="num" id="LN248">248</td><td class="line"><span class='comment'>/*****************************************************************************</span></td></tr>
<tr class="codeline" data-linenumber="249"><td class="num" id="LN249">249</td><td class="line"><span class='comment'>*** Construction/destruction of array elements                             ***</span></td></tr>
<tr class="codeline" data-linenumber="250"><td class="num" id="LN250">250</td><td class="line"><span class='comment'>*****************************************************************************/</span></td></tr>
<tr class="codeline" data-linenumber="251"><td class="num" id="LN251">251</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="252"><td class="num" id="LN252">252</td><td class="line"><span class='comment'>/** \internal Destructs the elements of an array.</span></td></tr>
<tr class="codeline" data-linenumber="253"><td class="num" id="LN253">253</td><td class="line">  <span class='comment'>* The \a size parameters tells on how many objects to call the destructor of T.</span></td></tr>
<tr class="codeline" data-linenumber="254"><td class="num" id="LN254">254</td><td class="line">  <span class='comment'>*/</span></td></tr>
<tr class="codeline" data-linenumber="255"><td class="num" id="LN255">255</td><td class="line"><span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> T&gt; EIGEN_DEVICE_FUNC <span class='keyword'>inline</span> <span class='keyword'>void</span> destruct_elements_of_array(T *ptr, std::size_t size)</td></tr>
<tr class="codeline" data-linenumber="256"><td class="num" id="LN256">256</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="257"><td class="num" id="LN257">257</td><td class="line">  <span class='comment'>// always destruct an array starting from the end.</span></td></tr>
<tr class="codeline" data-linenumber="258"><td class="num" id="LN258">258</td><td class="line">  <span class='keyword'>if</span>(ptr)</td></tr>
<tr class="codeline" data-linenumber="259"><td class="num" id="LN259">259</td><td class="line">    <span class='keyword'>while</span>(size) ptr[--size].~T();</td></tr>
<tr class="codeline" data-linenumber="260"><td class="num" id="LN260">260</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="261"><td class="num" id="LN261">261</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="262"><td class="num" id="LN262">262</td><td class="line"><span class='comment'>/** \internal Constructs the elements of an array.</span></td></tr>
<tr class="codeline" data-linenumber="263"><td class="num" id="LN263">263</td><td class="line">  <span class='comment'>* The \a size parameter tells on how many objects to call the constructor of T.</span></td></tr>
<tr class="codeline" data-linenumber="264"><td class="num" id="LN264">264</td><td class="line">  <span class='comment'>*/</span></td></tr>
<tr class="codeline" data-linenumber="265"><td class="num" id="LN265">265</td><td class="line"><span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> T&gt; EIGEN_DEVICE_FUNC <span class='keyword'>inline</span> T* construct_elements_of_array(T *ptr, std::size_t size)</td></tr>
<tr class="codeline" data-linenumber="266"><td class="num" id="LN266">266</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="267"><td class="num" id="LN267">267</td><td class="line">  std::size_t i;</td></tr>
<tr class="codeline" data-linenumber="268"><td class="num" id="LN268">268</td><td class="line">  <span class='macro'>EIGEN_TRY<span class='expansion'>try</span></span></td></tr>
<tr class="codeline" data-linenumber="269"><td class="num" id="LN269">269</td><td class="line">  {</td></tr>
<tr class="codeline" data-linenumber="270"><td class="num" id="LN270">270</td><td class="line">      <span class='keyword'>for</span> (i = 0; i &lt; size; ++i) ::<span class='keyword'>new</span> (ptr + i) T;</td></tr>
<tr class="codeline" data-linenumber="271"><td class="num" id="LN271">271</td><td class="line">      <span class='keyword'>return</span> ptr;</td></tr>
<tr class="codeline" data-linenumber="272"><td class="num" id="LN272">272</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="273"><td class="num" id="LN273">273</td><td class="line">  <span class='macro'>EIGEN_CATCH(...)<span class='expansion'>catch (...)</span></span></td></tr>
<tr class="codeline" data-linenumber="274"><td class="num" id="LN274">274</td><td class="line">  {</td></tr>
<tr class="codeline" data-linenumber="275"><td class="num" id="LN275">275</td><td class="line">    destruct_elements_of_array(ptr, i);</td></tr>
<tr class="codeline" data-linenumber="276"><td class="num" id="LN276">276</td><td class="line">    <span class='macro'>EIGEN_THROW<span class='expansion'>throw</span></span>;</td></tr>
<tr class="codeline" data-linenumber="277"><td class="num" id="LN277">277</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="278"><td class="num" id="LN278">278</td><td class="line">  <span class='keyword'>return</span> <span class='macro'>NULL<span class='expansion'>__null</span></span>;</td></tr>
<tr class="codeline" data-linenumber="279"><td class="num" id="LN279">279</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="280"><td class="num" id="LN280">280</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="281"><td class="num" id="LN281">281</td><td class="line"><span class='comment'>/*****************************************************************************</span></td></tr>
<tr class="codeline" data-linenumber="282"><td class="num" id="LN282">282</td><td class="line"><span class='comment'>*** Implementation of aligned new/delete-like functions                    ***</span></td></tr>
<tr class="codeline" data-linenumber="283"><td class="num" id="LN283">283</td><td class="line"><span class='comment'>*****************************************************************************/</span></td></tr>
<tr class="codeline" data-linenumber="284"><td class="num" id="LN284">284</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="285"><td class="num" id="LN285">285</td><td class="line"><span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> T&gt;</td></tr>
<tr class="codeline" data-linenumber="286"><td class="num" id="LN286">286</td><td class="line">EIGEN_DEVICE_FUNC <span class='macro'>EIGEN_ALWAYS_INLINE<span class='expansion'>__attribute__((always_inline)) inline</span></span> <span class='keyword'>void</span> check_size_for_overflow(std::size_t size)</td></tr>
<tr class="codeline" data-linenumber="287"><td class="num" id="LN287">287</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="288"><td class="num" id="LN288">288</td><td class="line">  <span class='keyword'>if</span>(size &gt; std::size_t(-1) / <span class='keyword'>sizeof</span>(T))</td></tr>
<tr class="codeline" data-linenumber="289"><td class="num" id="LN289">289</td><td class="line">    throw_std_bad_alloc();</td></tr>
<tr class="codeline" data-linenumber="290"><td class="num" id="LN290">290</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="291"><td class="num" id="LN291">291</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="292"><td class="num" id="LN292">292</td><td class="line"><span class='comment'>/** \internal Allocates \a size objects of type T. The returned pointer is guaranteed to have 16 bytes alignment.</span></td></tr>
<tr class="codeline" data-linenumber="293"><td class="num" id="LN293">293</td><td class="line">  <span class='comment'>* On allocation error, the returned pointer is undefined, but a std::bad_alloc is thrown.</span></td></tr>
<tr class="codeline" data-linenumber="294"><td class="num" id="LN294">294</td><td class="line">  <span class='comment'>* The default constructor of T is called.</span></td></tr>
<tr class="codeline" data-linenumber="295"><td class="num" id="LN295">295</td><td class="line">  <span class='comment'>*/</span></td></tr>
<tr class="codeline" data-linenumber="296"><td class="num" id="LN296">296</td><td class="line"><span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> T&gt; EIGEN_DEVICE_FUNC <span class='keyword'>inline</span> T* aligned_new(std::size_t size)</td></tr>
<tr class="codeline" data-linenumber="297"><td class="num" id="LN297">297</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="298"><td class="num" id="LN298">298</td><td class="line">  check_size_for_overflow&lt;T&gt;(size);</td></tr>
<tr class="codeline" data-linenumber="299"><td class="num" id="LN299">299</td><td class="line">  T *result = <span class='keyword'>reinterpret_cast</span>&lt;T*&gt;(aligned_malloc(<span class='keyword'>sizeof</span>(T)*size));</td></tr>
<tr class="codeline" data-linenumber="300"><td class="num" id="LN300">300</td><td class="line">  <span class='macro'>EIGEN_TRY<span class='expansion'>try</span></span></td></tr>
<tr class="codeline" data-linenumber="301"><td class="num" id="LN301">301</td><td class="line">  {</td></tr>
<tr class="codeline" data-linenumber="302"><td class="num" id="LN302">302</td><td class="line">    <span class='keyword'>return</span> construct_elements_of_array(result, size);</td></tr>
<tr class="codeline" data-linenumber="303"><td class="num" id="LN303">303</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="304"><td class="num" id="LN304">304</td><td class="line">  <span class='macro'>EIGEN_CATCH(...)<span class='expansion'>catch (...)</span></span></td></tr>
<tr class="codeline" data-linenumber="305"><td class="num" id="LN305">305</td><td class="line">  {</td></tr>
<tr class="codeline" data-linenumber="306"><td class="num" id="LN306">306</td><td class="line">    aligned_free(result);</td></tr>
<tr class="codeline" data-linenumber="307"><td class="num" id="LN307">307</td><td class="line">    <span class='macro'>EIGEN_THROW<span class='expansion'>throw</span></span>;</td></tr>
<tr class="codeline" data-linenumber="308"><td class="num" id="LN308">308</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="309"><td class="num" id="LN309">309</td><td class="line">  <span class='keyword'>return</span> result;</td></tr>
<tr class="codeline" data-linenumber="310"><td class="num" id="LN310">310</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="311"><td class="num" id="LN311">311</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="312"><td class="num" id="LN312">312</td><td class="line"><span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> T, <span class='keyword'>bool</span> Align&gt; EIGEN_DEVICE_FUNC <span class='keyword'>inline</span> T* conditional_aligned_new(std::size_t size)</td></tr>
<tr class="codeline" data-linenumber="313"><td class="num" id="LN313">313</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="314"><td class="num" id="LN314">314</td><td class="line">  check_size_for_overflow&lt;T&gt;(size);</td></tr>
<tr class="codeline" data-linenumber="315"><td class="num" id="LN315">315</td><td class="line">  T *result = <span class='keyword'>reinterpret_cast</span>&lt;T*&gt;(conditional_aligned_malloc&lt;Align&gt;(<span class='keyword'>sizeof</span>(T)*size));</td></tr>
<tr class="codeline" data-linenumber="316"><td class="num" id="LN316">316</td><td class="line">  <span class='macro'>EIGEN_TRY<span class='expansion'>try</span></span></td></tr>
<tr class="codeline" data-linenumber="317"><td class="num" id="LN317">317</td><td class="line">  {</td></tr>
<tr class="codeline" data-linenumber="318"><td class="num" id="LN318">318</td><td class="line">    <span class='keyword'>return</span> construct_elements_of_array(result, size);</td></tr>
<tr class="codeline" data-linenumber="319"><td class="num" id="LN319">319</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="320"><td class="num" id="LN320">320</td><td class="line">  <span class='macro'>EIGEN_CATCH(...)<span class='expansion'>catch (...)</span></span></td></tr>
<tr class="codeline" data-linenumber="321"><td class="num" id="LN321">321</td><td class="line">  {</td></tr>
<tr class="codeline" data-linenumber="322"><td class="num" id="LN322">322</td><td class="line">    conditional_aligned_free&lt;Align&gt;(result);</td></tr>
<tr class="codeline" data-linenumber="323"><td class="num" id="LN323">323</td><td class="line">    <span class='macro'>EIGEN_THROW<span class='expansion'>throw</span></span>;</td></tr>
<tr class="codeline" data-linenumber="324"><td class="num" id="LN324">324</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="325"><td class="num" id="LN325">325</td><td class="line">  <span class='keyword'>return</span> result;</td></tr>
<tr class="codeline" data-linenumber="326"><td class="num" id="LN326">326</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="327"><td class="num" id="LN327">327</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="328"><td class="num" id="LN328">328</td><td class="line"><span class='comment'>/** \internal Deletes objects constructed with aligned_new</span></td></tr>
<tr class="codeline" data-linenumber="329"><td class="num" id="LN329">329</td><td class="line">  <span class='comment'>* The \a size parameters tells on how many objects to call the destructor of T.</span></td></tr>
<tr class="codeline" data-linenumber="330"><td class="num" id="LN330">330</td><td class="line">  <span class='comment'>*/</span></td></tr>
<tr class="codeline" data-linenumber="331"><td class="num" id="LN331">331</td><td class="line"><span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> T&gt; EIGEN_DEVICE_FUNC <span class='keyword'>inline</span> <span class='keyword'>void</span> aligned_delete(T *ptr, std::size_t size)</td></tr>
<tr class="codeline" data-linenumber="332"><td class="num" id="LN332">332</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="333"><td class="num" id="LN333">333</td><td class="line">  destruct_elements_of_array&lt;T&gt;(ptr, size);</td></tr>
<tr class="codeline" data-linenumber="334"><td class="num" id="LN334">334</td><td class="line">  aligned_free(ptr);</td></tr>
<tr class="codeline" data-linenumber="335"><td class="num" id="LN335">335</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="336"><td class="num" id="LN336">336</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="337"><td class="num" id="LN337">337</td><td class="line"><span class='comment'>/** \internal Deletes objects constructed with conditional_aligned_new</span></td></tr>
<tr class="codeline" data-linenumber="338"><td class="num" id="LN338">338</td><td class="line">  <span class='comment'>* The \a size parameters tells on how many objects to call the destructor of T.</span></td></tr>
<tr class="codeline" data-linenumber="339"><td class="num" id="LN339">339</td><td class="line">  <span class='comment'>*/</span></td></tr>
<tr class="codeline" data-linenumber="340"><td class="num" id="LN340">340</td><td class="line"><span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> T, <span class='keyword'>bool</span> Align&gt; EIGEN_DEVICE_FUNC <span class='keyword'>inline</span> <span class='keyword'>void</span> conditional_aligned_delete(T *ptr, std::size_t size)</td></tr>
<tr class="codeline" data-linenumber="341"><td class="num" id="LN341">341</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="342"><td class="num" id="LN342">342</td><td class="line">  destruct_elements_of_array&lt;T&gt;(ptr, size);</td></tr>
<tr class="codeline" data-linenumber="343"><td class="num" id="LN343">343</td><td class="line">  conditional_aligned_free&lt;Align&gt;(ptr);</td></tr>
<tr class="codeline" data-linenumber="344"><td class="num" id="LN344">344</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="345"><td class="num" id="LN345">345</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="346"><td class="num" id="LN346">346</td><td class="line"><span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> T, <span class='keyword'>bool</span> Align&gt; EIGEN_DEVICE_FUNC <span class='keyword'>inline</span> T* conditional_aligned_realloc_new(T* pts, std::size_t new_size, std::size_t old_size)</td></tr>
<tr class="codeline" data-linenumber="347"><td class="num" id="LN347">347</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="348"><td class="num" id="LN348">348</td><td class="line">  check_size_for_overflow&lt;T&gt;(new_size);</td></tr>
<tr class="codeline" data-linenumber="349"><td class="num" id="LN349">349</td><td class="line">  check_size_for_overflow&lt;T&gt;(old_size);</td></tr>
<tr class="codeline" data-linenumber="350"><td class="num" id="LN350">350</td><td class="line">  <span class='keyword'>if</span>(new_size &lt; old_size)</td></tr>
<tr class="codeline" data-linenumber="351"><td class="num" id="LN351">351</td><td class="line">    destruct_elements_of_array(pts+new_size, old_size-new_size);</td></tr>
<tr class="codeline" data-linenumber="352"><td class="num" id="LN352">352</td><td class="line">  T *result = <span class='keyword'>reinterpret_cast</span>&lt;T*&gt;(conditional_aligned_realloc&lt;Align&gt;(<span class='keyword'>reinterpret_cast</span>&lt;<span class='keyword'>void</span>*&gt;(pts), <span class='keyword'>sizeof</span>(T)*new_size, <span class='keyword'>sizeof</span>(T)*old_size));</td></tr>
<tr class="codeline" data-linenumber="353"><td class="num" id="LN353">353</td><td class="line">  <span class='keyword'>if</span>(new_size &gt; old_size)</td></tr>
<tr class="codeline" data-linenumber="354"><td class="num" id="LN354">354</td><td class="line">  {</td></tr>
<tr class="codeline" data-linenumber="355"><td class="num" id="LN355">355</td><td class="line">    <span class='macro'>EIGEN_TRY<span class='expansion'>try</span></span></td></tr>
<tr class="codeline" data-linenumber="356"><td class="num" id="LN356">356</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="357"><td class="num" id="LN357">357</td><td class="line">      construct_elements_of_array(result+old_size, new_size-old_size);</td></tr>
<tr class="codeline" data-linenumber="358"><td class="num" id="LN358">358</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="359"><td class="num" id="LN359">359</td><td class="line">    <span class='macro'>EIGEN_CATCH(...)<span class='expansion'>catch (...)</span></span></td></tr>
<tr class="codeline" data-linenumber="360"><td class="num" id="LN360">360</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="361"><td class="num" id="LN361">361</td><td class="line">      conditional_aligned_free&lt;Align&gt;(result);</td></tr>
<tr class="codeline" data-linenumber="362"><td class="num" id="LN362">362</td><td class="line">      <span class='macro'>EIGEN_THROW<span class='expansion'>throw</span></span>;</td></tr>
<tr class="codeline" data-linenumber="363"><td class="num" id="LN363">363</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="364"><td class="num" id="LN364">364</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="365"><td class="num" id="LN365">365</td><td class="line">  <span class='keyword'>return</span> result;</td></tr>
<tr class="codeline" data-linenumber="366"><td class="num" id="LN366">366</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="367"><td class="num" id="LN367">367</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="368"><td class="num" id="LN368">368</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="369"><td class="num" id="LN369">369</td><td class="line"><span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> T, <span class='keyword'>bool</span> Align&gt; EIGEN_DEVICE_FUNC <span class='keyword'>inline</span> T* conditional_aligned_new_auto(std::size_t size)</td></tr>
<tr class="codeline" data-linenumber="370"><td class="num" id="LN370">370</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="371"><td class="num" id="LN371">371</td><td class="line">  <span class='keyword'>if</span>(size==0)</td></tr>
<tr><td class="num"></td><td class="line"><div id="Path24" class="msg msgControl" style="margin-left:3ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexControl">24</div></td><td><div class="PathNav"><a href="#Path23" title="Previous event (23)">&#x2190;</a></div></td></td><td>Taking false branch</td><td><div class="PathNav"><a href="#Path25" title="Next event (25)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr class="codeline" data-linenumber="372"><td class="num" id="LN372">372</td><td class="line">    <span class='keyword'>return</span> 0; <span class='comment'>// short-cut. Also fixes Bug 884</span></td></tr>
<tr class="codeline" data-linenumber="373"><td class="num" id="LN373">373</td><td class="line">  check_size_for_overflow&lt;T&gt;(size);</td></tr>
<tr class="codeline" data-linenumber="374"><td class="num" id="LN374">374</td><td class="line">  T *result = <span class='keyword'>reinterpret_cast</span>&lt;T*&gt;(<span class="mrange"><span class="mrange">conditional_aligned_malloc&lt;Align&gt;(<span class='keyword'>sizeof</span>(T)*size)</span></span>);</td></tr>
<tr><td class="num"></td><td class="line"><div id="Path25" class="msg msgEvent" style="margin-left:36ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">25</div></td><td><div class="PathNav"><a href="#Path24" title="Previous event (24)">&#x2190;</a></div></td></td><td>Calling 'conditional_aligned_malloc&lt;true&gt;'</td><td><div class="PathNav"><a href="#Path26" title="Next event (26)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr><td class="num"></td><td class="line"><div id="Path31" class="msg msgEvent" style="margin-left:36ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">31</div></td><td><div class="PathNav"><a href="#Path30" title="Previous event (30)">&#x2190;</a></div></td></td><td>Returned allocated memory</td><td><div class="PathNav"><a href="#Path32" title="Next event (32)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr class="codeline" data-linenumber="375"><td class="num" id="LN375">375</td><td class="line">  <span class='keyword'>if</span>(NumTraits&lt;T&gt;::RequireInitialization)</td></tr>
<tr><td class="num"></td><td class="line"><div id="Path32" class="msg msgControl" style="margin-left:3ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexControl">32</div></td><td><div class="PathNav"><a href="#Path31" title="Previous event (31)">&#x2190;</a></div></td></td><td>Taking false branch</td><td><div class="PathNav"><a href="#Path33" title="Next event (33)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr class="codeline" data-linenumber="376"><td class="num" id="LN376">376</td><td class="line">  {</td></tr>
<tr class="codeline" data-linenumber="377"><td class="num" id="LN377">377</td><td class="line">    <span class='macro'>EIGEN_TRY<span class='expansion'>try</span></span></td></tr>
<tr class="codeline" data-linenumber="378"><td class="num" id="LN378">378</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="379"><td class="num" id="LN379">379</td><td class="line">      construct_elements_of_array(result, size);</td></tr>
<tr class="codeline" data-linenumber="380"><td class="num" id="LN380">380</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="381"><td class="num" id="LN381">381</td><td class="line">    <span class='macro'>EIGEN_CATCH(...)<span class='expansion'>catch (...)</span></span></td></tr>
<tr class="codeline" data-linenumber="382"><td class="num" id="LN382">382</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="383"><td class="num" id="LN383">383</td><td class="line">      conditional_aligned_free&lt;Align&gt;(result);</td></tr>
<tr class="codeline" data-linenumber="384"><td class="num" id="LN384">384</td><td class="line">      <span class='macro'>EIGEN_THROW<span class='expansion'>throw</span></span>;</td></tr>
<tr class="codeline" data-linenumber="385"><td class="num" id="LN385">385</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="386"><td class="num" id="LN386">386</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="387"><td class="num" id="LN387">387</td><td class="line">  <span class='keyword'>return</span> result;</td></tr>
<tr class="codeline" data-linenumber="388"><td class="num" id="LN388">388</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="389"><td class="num" id="LN389">389</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="390"><td class="num" id="LN390">390</td><td class="line"><span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> T, <span class='keyword'>bool</span> Align&gt; <span class='keyword'>inline</span> T* conditional_aligned_realloc_new_auto(T* pts, std::size_t new_size, std::size_t old_size)</td></tr>
<tr class="codeline" data-linenumber="391"><td class="num" id="LN391">391</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="392"><td class="num" id="LN392">392</td><td class="line">  check_size_for_overflow&lt;T&gt;(new_size);</td></tr>
<tr class="codeline" data-linenumber="393"><td class="num" id="LN393">393</td><td class="line">  check_size_for_overflow&lt;T&gt;(old_size);</td></tr>
<tr class="codeline" data-linenumber="394"><td class="num" id="LN394">394</td><td class="line">  <span class='keyword'>if</span>(NumTraits&lt;T&gt;::RequireInitialization &amp;&amp; (new_size &lt; old_size))</td></tr>
<tr class="codeline" data-linenumber="395"><td class="num" id="LN395">395</td><td class="line">    destruct_elements_of_array(pts+new_size, old_size-new_size);</td></tr>
<tr class="codeline" data-linenumber="396"><td class="num" id="LN396">396</td><td class="line">  T *result = <span class='keyword'>reinterpret_cast</span>&lt;T*&gt;(conditional_aligned_realloc&lt;Align&gt;(<span class='keyword'>reinterpret_cast</span>&lt;<span class='keyword'>void</span>*&gt;(pts), <span class='keyword'>sizeof</span>(T)*new_size, <span class='keyword'>sizeof</span>(T)*old_size));</td></tr>
<tr class="codeline" data-linenumber="397"><td class="num" id="LN397">397</td><td class="line">  <span class='keyword'>if</span>(NumTraits&lt;T&gt;::RequireInitialization &amp;&amp; (new_size &gt; old_size))</td></tr>
<tr class="codeline" data-linenumber="398"><td class="num" id="LN398">398</td><td class="line">  {</td></tr>
<tr class="codeline" data-linenumber="399"><td class="num" id="LN399">399</td><td class="line">    <span class='macro'>EIGEN_TRY<span class='expansion'>try</span></span></td></tr>
<tr class="codeline" data-linenumber="400"><td class="num" id="LN400">400</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="401"><td class="num" id="LN401">401</td><td class="line">      construct_elements_of_array(result+old_size, new_size-old_size);</td></tr>
<tr class="codeline" data-linenumber="402"><td class="num" id="LN402">402</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="403"><td class="num" id="LN403">403</td><td class="line">    <span class='macro'>EIGEN_CATCH(...)<span class='expansion'>catch (...)</span></span></td></tr>
<tr class="codeline" data-linenumber="404"><td class="num" id="LN404">404</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="405"><td class="num" id="LN405">405</td><td class="line">      conditional_aligned_free&lt;Align&gt;(result);</td></tr>
<tr class="codeline" data-linenumber="406"><td class="num" id="LN406">406</td><td class="line">      <span class='macro'>EIGEN_THROW<span class='expansion'>throw</span></span>;</td></tr>
<tr class="codeline" data-linenumber="407"><td class="num" id="LN407">407</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="408"><td class="num" id="LN408">408</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="409"><td class="num" id="LN409">409</td><td class="line">  <span class='keyword'>return</span> result;</td></tr>
<tr class="codeline" data-linenumber="410"><td class="num" id="LN410">410</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="411"><td class="num" id="LN411">411</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="412"><td class="num" id="LN412">412</td><td class="line"><span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> T, <span class='keyword'>bool</span> Align&gt; EIGEN_DEVICE_FUNC <span class='keyword'>inline</span> <span class='keyword'>void</span> conditional_aligned_delete_auto(T *ptr, std::size_t size)</td></tr>
<tr class="codeline" data-linenumber="413"><td class="num" id="LN413">413</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="414"><td class="num" id="LN414">414</td><td class="line">  <span class='keyword'>if</span>(NumTraits&lt;T&gt;::RequireInitialization)</td></tr>
<tr><td class="num"></td><td class="line"><div id="Path48" class="msg msgControl" style="margin-left:3ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexControl">48</div></td><td><div class="PathNav"><a href="#Path47" title="Previous event (47)">&#x2190;</a></div></td></td><td>Taking false branch</td><td><div class="PathNav"><a href="#Path49" title="Next event (49)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr class="codeline" data-linenumber="415"><td class="num" id="LN415">415</td><td class="line">    destruct_elements_of_array&lt;T&gt;(ptr, size);</td></tr>
<tr class="codeline" data-linenumber="416"><td class="num" id="LN416">416</td><td class="line">  <span class="mrange"><span class="mrange">conditional_aligned_free&lt;Align&gt;(ptr)</span></span>;</td></tr>
<tr><td class="num"></td><td class="line"><div id="Path49" class="msg msgEvent" style="margin-left:3ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">49</div></td><td><div class="PathNav"><a href="#Path48" title="Previous event (48)">&#x2190;</a></div></td></td><td>Calling 'conditional_aligned_free&lt;true&gt;'</td><td><div class="PathNav"><a href="#Path50" title="Next event (50)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr><td class="num"></td><td class="line"><div id="Path53" class="msg msgEvent" style="margin-left:3ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">53</div></td><td><div class="PathNav"><a href="#Path52" title="Previous event (52)">&#x2190;</a></div></td></td><td>Returning; memory was released via 1st parameter</td><td><div class="PathNav"><a href="#Path54" title="Next event (54)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr class="codeline" data-linenumber="417"><td class="num" id="LN417">417</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="418"><td class="num" id="LN418">418</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="419"><td class="num" id="LN419">419</td><td class="line"><span class='comment'>/****************************************************************************/</span></td></tr>
<tr class="codeline" data-linenumber="420"><td class="num" id="LN420">420</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="421"><td class="num" id="LN421">421</td><td class="line"><span class='comment'>/** \internal Returns the index of the first element of the array that is well aligned with respect to the requested \a Alignment.</span></td></tr>
<tr class="codeline" data-linenumber="422"><td class="num" id="LN422">422</td><td class="line">  <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="423"><td class="num" id="LN423">423</td><td class="line">  <span class='comment'>* \tparam Alignment requested alignment in Bytes.</span></td></tr>
<tr class="codeline" data-linenumber="424"><td class="num" id="LN424">424</td><td class="line">  <span class='comment'>* \param array the address of the start of the array</span></td></tr>
<tr class="codeline" data-linenumber="425"><td class="num" id="LN425">425</td><td class="line">  <span class='comment'>* \param size the size of the array</span></td></tr>
<tr class="codeline" data-linenumber="426"><td class="num" id="LN426">426</td><td class="line">  <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="427"><td class="num" id="LN427">427</td><td class="line">  <span class='comment'>* \note If no element of the array is well aligned or the requested alignment is not a multiple of a scalar,</span></td></tr>
<tr class="codeline" data-linenumber="428"><td class="num" id="LN428">428</td><td class="line">  <span class='comment'>* the size of the array is returned. For example with SSE, the requested alignment is typically 16-bytes. If</span></td></tr>
<tr class="codeline" data-linenumber="429"><td class="num" id="LN429">429</td><td class="line">  <span class='comment'>* packet size for the given scalar type is 1, then everything is considered well-aligned.</span></td></tr>
<tr class="codeline" data-linenumber="430"><td class="num" id="LN430">430</td><td class="line">  <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="431"><td class="num" id="LN431">431</td><td class="line">  <span class='comment'>* \note Otherwise, if the Alignment is larger that the scalar size, we rely on the assumptions that sizeof(Scalar) is a</span></td></tr>
<tr class="codeline" data-linenumber="432"><td class="num" id="LN432">432</td><td class="line">  <span class='comment'>* power of 2. On the other hand, we do not assume that the array address is a multiple of sizeof(Scalar), as that fails for</span></td></tr>
<tr class="codeline" data-linenumber="433"><td class="num" id="LN433">433</td><td class="line">  <span class='comment'>* example with Scalar=double on certain 32-bit platforms, see bug #79.</span></td></tr>
<tr class="codeline" data-linenumber="434"><td class="num" id="LN434">434</td><td class="line">  <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="435"><td class="num" id="LN435">435</td><td class="line">  <span class='comment'>* There is also the variant first_aligned(const MatrixBase&amp;) defined in DenseCoeffsBase.h.</span></td></tr>
<tr class="codeline" data-linenumber="436"><td class="num" id="LN436">436</td><td class="line">  <span class='comment'>* \sa first_default_aligned()</span></td></tr>
<tr class="codeline" data-linenumber="437"><td class="num" id="LN437">437</td><td class="line">  <span class='comment'>*/</span></td></tr>
<tr class="codeline" data-linenumber="438"><td class="num" id="LN438">438</td><td class="line"><span class='keyword'>template</span>&lt;<span class='keyword'>int</span> Alignment, <span class='keyword'>typename</span> Scalar, <span class='keyword'>typename</span> Index&gt;</td></tr>
<tr class="codeline" data-linenumber="439"><td class="num" id="LN439">439</td><td class="line">EIGEN_DEVICE_FUNC <span class='keyword'>inline</span> Index first_aligned(<span class='keyword'>const</span> Scalar* array, Index size)</td></tr>
<tr class="codeline" data-linenumber="440"><td class="num" id="LN440">440</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="441"><td class="num" id="LN441">441</td><td class="line">  <span class='keyword'>const</span> Index ScalarSize = <span class='keyword'>sizeof</span>(Scalar);</td></tr>
<tr class="codeline" data-linenumber="442"><td class="num" id="LN442">442</td><td class="line">  <span class='keyword'>const</span> Index AlignmentSize = Alignment / ScalarSize;</td></tr>
<tr class="codeline" data-linenumber="443"><td class="num" id="LN443">443</td><td class="line">  <span class='keyword'>const</span> Index AlignmentMask = AlignmentSize-1;</td></tr>
<tr class="codeline" data-linenumber="444"><td class="num" id="LN444">444</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="445"><td class="num" id="LN445">445</td><td class="line">  <span class='keyword'>if</span>(AlignmentSize&lt;=1)</td></tr>
<tr class="codeline" data-linenumber="446"><td class="num" id="LN446">446</td><td class="line">  {</td></tr>
<tr class="codeline" data-linenumber="447"><td class="num" id="LN447">447</td><td class="line">    <span class='comment'>// Either the requested alignment if smaller than a scalar, or it exactly match a 1 scalar</span></td></tr>
<tr class="codeline" data-linenumber="448"><td class="num" id="LN448">448</td><td class="line">    <span class='comment'>// so that all elements of the array have the same alignment.</span></td></tr>
<tr class="codeline" data-linenumber="449"><td class="num" id="LN449">449</td><td class="line">    <span class='keyword'>return</span> 0;</td></tr>
<tr class="codeline" data-linenumber="450"><td class="num" id="LN450">450</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="451"><td class="num" id="LN451">451</td><td class="line">  <span class='keyword'>else</span> <span class='keyword'>if</span>( (UIntPtr(array) &amp; (<span class='keyword'>sizeof</span>(Scalar)-1)) || (Alignment%ScalarSize)!=0)</td></tr>
<tr class="codeline" data-linenumber="452"><td class="num" id="LN452">452</td><td class="line">  {</td></tr>
<tr class="codeline" data-linenumber="453"><td class="num" id="LN453">453</td><td class="line">    <span class='comment'>// The array is not aligned to the size of a single scalar, or the requested alignment is not a multiple of the scalar size.</span></td></tr>
<tr class="codeline" data-linenumber="454"><td class="num" id="LN454">454</td><td class="line">    <span class='comment'>// Consequently, no element of the array is well aligned.</span></td></tr>
<tr class="codeline" data-linenumber="455"><td class="num" id="LN455">455</td><td class="line">    <span class='keyword'>return</span> size;</td></tr>
<tr class="codeline" data-linenumber="456"><td class="num" id="LN456">456</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="457"><td class="num" id="LN457">457</td><td class="line">  <span class='keyword'>else</span></td></tr>
<tr class="codeline" data-linenumber="458"><td class="num" id="LN458">458</td><td class="line">  {</td></tr>
<tr class="codeline" data-linenumber="459"><td class="num" id="LN459">459</td><td class="line">    Index first = (AlignmentSize - (Index((UIntPtr(array)/<span class='keyword'>sizeof</span>(Scalar))) &amp; AlignmentMask)) &amp; AlignmentMask;</td></tr>
<tr class="codeline" data-linenumber="460"><td class="num" id="LN460">460</td><td class="line">    <span class='keyword'>return</span> (first &lt; size) ? first : size;</td></tr>
<tr class="codeline" data-linenumber="461"><td class="num" id="LN461">461</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="462"><td class="num" id="LN462">462</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="463"><td class="num" id="LN463">463</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="464"><td class="num" id="LN464">464</td><td class="line"><span class='comment'>/** \internal Returns the index of the first element of the array that is well aligned with respect the largest packet requirement.</span></td></tr>
<tr class="codeline" data-linenumber="465"><td class="num" id="LN465">465</td><td class="line">   <span class='comment'>* \sa first_aligned(Scalar*,Index) and first_default_aligned(DenseBase&lt;Derived&gt;) */</span></td></tr>
<tr class="codeline" data-linenumber="466"><td class="num" id="LN466">466</td><td class="line"><span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> Scalar, <span class='keyword'>typename</span> Index&gt;</td></tr>
<tr class="codeline" data-linenumber="467"><td class="num" id="LN467">467</td><td class="line">EIGEN_DEVICE_FUNC <span class='keyword'>inline</span> Index first_default_aligned(<span class='keyword'>const</span> Scalar* array, Index size)</td></tr>
<tr class="codeline" data-linenumber="468"><td class="num" id="LN468">468</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="469"><td class="num" id="LN469">469</td><td class="line">  <span class='keyword'>typedef</span> <span class='keyword'>typename</span> packet_traits&lt;Scalar&gt;::type DefaultPacketType;</td></tr>
<tr class="codeline" data-linenumber="470"><td class="num" id="LN470">470</td><td class="line">  <span class='keyword'>return</span> first_aligned&lt;unpacket_traits&lt;DefaultPacketType&gt;::alignment&gt;(array, size);</td></tr>
<tr class="codeline" data-linenumber="471"><td class="num" id="LN471">471</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="472"><td class="num" id="LN472">472</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="473"><td class="num" id="LN473">473</td><td class="line"><span class='comment'>/** \internal Returns the smallest integer multiple of \a base and greater or equal to \a size</span></td></tr>
<tr class="codeline" data-linenumber="474"><td class="num" id="LN474">474</td><td class="line">  <span class='comment'>*/</span> </td></tr>
<tr class="codeline" data-linenumber="475"><td class="num" id="LN475">475</td><td class="line"><span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> Index&gt; </td></tr>
<tr class="codeline" data-linenumber="476"><td class="num" id="LN476">476</td><td class="line"><span class='keyword'>inline</span> Index first_multiple(Index size, Index base)</td></tr>
<tr class="codeline" data-linenumber="477"><td class="num" id="LN477">477</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="478"><td class="num" id="LN478">478</td><td class="line">  <span class='keyword'>return</span> ((size+base-1)/base)*base;</td></tr>
<tr class="codeline" data-linenumber="479"><td class="num" id="LN479">479</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="480"><td class="num" id="LN480">480</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="481"><td class="num" id="LN481">481</td><td class="line"><span class='comment'>// std::copy is much slower than memcpy, so let's introduce a smart_copy which</span></td></tr>
<tr class="codeline" data-linenumber="482"><td class="num" id="LN482">482</td><td class="line"><span class='comment'>// use memcpy on trivial types, i.e., on types that does not require an initialization ctor.</span></td></tr>
<tr class="codeline" data-linenumber="483"><td class="num" id="LN483">483</td><td class="line"><span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> T, <span class='keyword'>bool</span> UseMemcpy&gt; <span class='keyword'>struct</span> smart_copy_helper;</td></tr>
<tr class="codeline" data-linenumber="484"><td class="num" id="LN484">484</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="485"><td class="num" id="LN485">485</td><td class="line"><span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> T&gt; EIGEN_DEVICE_FUNC <span class='keyword'>void</span> smart_copy(<span class='keyword'>const</span> T* start, <span class='keyword'>const</span> T* end, T* target)</td></tr>
<tr class="codeline" data-linenumber="486"><td class="num" id="LN486">486</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="487"><td class="num" id="LN487">487</td><td class="line">  smart_copy_helper&lt;T,!NumTraits&lt;T&gt;::RequireInitialization&gt;::run(start, end, target);</td></tr>
<tr class="codeline" data-linenumber="488"><td class="num" id="LN488">488</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="489"><td class="num" id="LN489">489</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="490"><td class="num" id="LN490">490</td><td class="line"><span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> T&gt; <span class='keyword'>struct</span> smart_copy_helper&lt;T,<span class='keyword'>true</span>&gt; {</td></tr>
<tr class="codeline" data-linenumber="491"><td class="num" id="LN491">491</td><td class="line">  EIGEN_DEVICE_FUNC <span class='keyword'>static</span> <span class='keyword'>inline</span> <span class='keyword'>void</span> run(<span class='keyword'>const</span> T* start, <span class='keyword'>const</span> T* end, T* target)</td></tr>
<tr class="codeline" data-linenumber="492"><td class="num" id="LN492">492</td><td class="line">  {</td></tr>
<tr class="codeline" data-linenumber="493"><td class="num" id="LN493">493</td><td class="line">    IntPtr size = IntPtr(end)-IntPtr(start);</td></tr>
<tr class="codeline" data-linenumber="494"><td class="num" id="LN494">494</td><td class="line">    <span class='keyword'>if</span>(size==0) <span class='keyword'>return</span>;</td></tr>
<tr class="codeline" data-linenumber="495"><td class="num" id="LN495">495</td><td class="line">    eigen_internal_assert(start!=0 &amp;&amp; end!=0 &amp;&amp; target!=0);</td></tr>
<tr class="codeline" data-linenumber="496"><td class="num" id="LN496">496</td><td class="line">    std::memcpy(target, start, size);</td></tr>
<tr class="codeline" data-linenumber="497"><td class="num" id="LN497">497</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="498"><td class="num" id="LN498">498</td><td class="line">};</td></tr>
<tr class="codeline" data-linenumber="499"><td class="num" id="LN499">499</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="500"><td class="num" id="LN500">500</td><td class="line"><span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> T&gt; <span class='keyword'>struct</span> smart_copy_helper&lt;T,<span class='keyword'>false</span>&gt; {</td></tr>
<tr class="codeline" data-linenumber="501"><td class="num" id="LN501">501</td><td class="line">  EIGEN_DEVICE_FUNC <span class='keyword'>static</span> <span class='keyword'>inline</span> <span class='keyword'>void</span> run(<span class='keyword'>const</span> T* start, <span class='keyword'>const</span> T* end, T* target)</td></tr>
<tr class="codeline" data-linenumber="502"><td class="num" id="LN502">502</td><td class="line">  { std::copy(start, end, target); }</td></tr>
<tr class="codeline" data-linenumber="503"><td class="num" id="LN503">503</td><td class="line">};</td></tr>
<tr class="codeline" data-linenumber="504"><td class="num" id="LN504">504</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="505"><td class="num" id="LN505">505</td><td class="line"><span class='comment'>// intelligent memmove. falls back to std::memmove for POD types, uses std::copy otherwise. </span></td></tr>
<tr class="codeline" data-linenumber="506"><td class="num" id="LN506">506</td><td class="line"><span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> T, <span class='keyword'>bool</span> UseMemmove&gt; <span class='keyword'>struct</span> smart_memmove_helper;</td></tr>
<tr class="codeline" data-linenumber="507"><td class="num" id="LN507">507</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="508"><td class="num" id="LN508">508</td><td class="line"><span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> T&gt; <span class='keyword'>void</span> smart_memmove(<span class='keyword'>const</span> T* start, <span class='keyword'>const</span> T* end, T* target)</td></tr>
<tr class="codeline" data-linenumber="509"><td class="num" id="LN509">509</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="510"><td class="num" id="LN510">510</td><td class="line">  smart_memmove_helper&lt;T,!NumTraits&lt;T&gt;::RequireInitialization&gt;::run(start, end, target);</td></tr>
<tr class="codeline" data-linenumber="511"><td class="num" id="LN511">511</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="512"><td class="num" id="LN512">512</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="513"><td class="num" id="LN513">513</td><td class="line"><span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> T&gt; <span class='keyword'>struct</span> smart_memmove_helper&lt;T,<span class='keyword'>true</span>&gt; {</td></tr>
<tr class="codeline" data-linenumber="514"><td class="num" id="LN514">514</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>inline</span> <span class='keyword'>void</span> run(<span class='keyword'>const</span> T* start, <span class='keyword'>const</span> T* end, T* target)</td></tr>
<tr class="codeline" data-linenumber="515"><td class="num" id="LN515">515</td><td class="line">  {</td></tr>
<tr class="codeline" data-linenumber="516"><td class="num" id="LN516">516</td><td class="line">    IntPtr size = IntPtr(end)-IntPtr(start);</td></tr>
<tr class="codeline" data-linenumber="517"><td class="num" id="LN517">517</td><td class="line">    <span class='keyword'>if</span>(size==0) <span class='keyword'>return</span>;</td></tr>
<tr class="codeline" data-linenumber="518"><td class="num" id="LN518">518</td><td class="line">    eigen_internal_assert(start!=0 &amp;&amp; end!=0 &amp;&amp; target!=0);</td></tr>
<tr class="codeline" data-linenumber="519"><td class="num" id="LN519">519</td><td class="line">    std::memmove(target, start, size);</td></tr>
<tr class="codeline" data-linenumber="520"><td class="num" id="LN520">520</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="521"><td class="num" id="LN521">521</td><td class="line">};</td></tr>
<tr class="codeline" data-linenumber="522"><td class="num" id="LN522">522</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="523"><td class="num" id="LN523">523</td><td class="line"><span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> T&gt; <span class='keyword'>struct</span> smart_memmove_helper&lt;T,<span class='keyword'>false</span>&gt; {</td></tr>
<tr class="codeline" data-linenumber="524"><td class="num" id="LN524">524</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>inline</span> <span class='keyword'>void</span> run(<span class='keyword'>const</span> T* start, <span class='keyword'>const</span> T* end, T* target)</td></tr>
<tr class="codeline" data-linenumber="525"><td class="num" id="LN525">525</td><td class="line">  { </td></tr>
<tr class="codeline" data-linenumber="526"><td class="num" id="LN526">526</td><td class="line">    <span class='keyword'>if</span> (UIntPtr(target) &lt; UIntPtr(start))</td></tr>
<tr class="codeline" data-linenumber="527"><td class="num" id="LN527">527</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="528"><td class="num" id="LN528">528</td><td class="line">      std::copy(start, end, target);</td></tr>
<tr class="codeline" data-linenumber="529"><td class="num" id="LN529">529</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="530"><td class="num" id="LN530">530</td><td class="line">    <span class='keyword'>else</span>                                 </td></tr>
<tr class="codeline" data-linenumber="531"><td class="num" id="LN531">531</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="532"><td class="num" id="LN532">532</td><td class="line">      std::ptrdiff_t count = (std::ptrdiff_t(end)-std::ptrdiff_t(start)) / <span class='keyword'>sizeof</span>(T);</td></tr>
<tr class="codeline" data-linenumber="533"><td class="num" id="LN533">533</td><td class="line">      std::copy_backward(start, end, target + count); </td></tr>
<tr class="codeline" data-linenumber="534"><td class="num" id="LN534">534</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="535"><td class="num" id="LN535">535</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="536"><td class="num" id="LN536">536</td><td class="line">};</td></tr>
<tr class="codeline" data-linenumber="537"><td class="num" id="LN537">537</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="538"><td class="num" id="LN538">538</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="539"><td class="num" id="LN539">539</td><td class="line"><span class='comment'>/*****************************************************************************</span></td></tr>
<tr class="codeline" data-linenumber="540"><td class="num" id="LN540">540</td><td class="line"><span class='comment'>*** Implementation of runtime stack allocation (falling back to malloc)    ***</span></td></tr>
<tr class="codeline" data-linenumber="541"><td class="num" id="LN541">541</td><td class="line"><span class='comment'>*****************************************************************************/</span></td></tr>
<tr class="codeline" data-linenumber="542"><td class="num" id="LN542">542</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="543"><td class="num" id="LN543">543</td><td class="line"><span class='comment'>// you can overwrite Eigen's default behavior regarding alloca by defining EIGEN_ALLOCA</span></td></tr>
<tr class="codeline" data-linenumber="544"><td class="num" id="LN544">544</td><td class="line"><span class='comment'>// to the appropriate stack allocation function</span></td></tr>
<tr class="codeline" data-linenumber="545"><td class="num" id="LN545">545</td><td class="line"><span class='directive'>#ifndef <span class='macro'>EIGEN_ALLOCA<span class='expansion'>alloca</span></span></span></td></tr>
<tr class="codeline" data-linenumber="546"><td class="num" id="LN546">546</td><td class="line">  <span class='directive'>#if <span class='macro'>EIGEN_OS_LINUX<span class='expansion'>0</span></span> || <span class='macro'>EIGEN_OS_MAC<span class='expansion'>1</span></span> || (defined alloca)</span></td></tr>
<tr class="codeline" data-linenumber="547"><td class="num" id="LN547">547</td><td class="line">    <span class='directive'>#define <span class='macro'>EIGEN_ALLOCA<span class='expansion'>alloca</span></span> alloca</span></td></tr>
<tr class="codeline" data-linenumber="548"><td class="num" id="LN548">548</td><td class="line">  <span class='directive'>#elif <span class='macro'>EIGEN_COMP_MSVC<span class='expansion'>0</span></span></span></td></tr>
<tr class="codeline" data-linenumber="549"><td class="num" id="LN549">549</td><td class="line">    <span class='directive'>#define <span class='macro'>EIGEN_ALLOCA<span class='expansion'>alloca</span></span> _alloca</span></td></tr>
<tr class="codeline" data-linenumber="550"><td class="num" id="LN550">550</td><td class="line">  <span class='directive'>#endif</span></td></tr>
<tr class="codeline" data-linenumber="551"><td class="num" id="LN551">551</td><td class="line"><span class='directive'>#endif</span></td></tr>
<tr class="codeline" data-linenumber="552"><td class="num" id="LN552">552</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="553"><td class="num" id="LN553">553</td><td class="line"><span class='comment'>// This helper class construct the allocated memory, and takes care of destructing and freeing the handled data</span></td></tr>
<tr class="codeline" data-linenumber="554"><td class="num" id="LN554">554</td><td class="line"><span class='comment'>// at destruction time. In practice this helper class is mainly useful to avoid memory leak in case of exceptions.</span></td></tr>
<tr class="codeline" data-linenumber="555"><td class="num" id="LN555">555</td><td class="line"><span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> T&gt; <span class='keyword'>class</span> aligned_stack_memory_handler : noncopyable</td></tr>
<tr class="codeline" data-linenumber="556"><td class="num" id="LN556">556</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="557"><td class="num" id="LN557">557</td><td class="line">  <span class='keyword'>public</span>:</td></tr>
<tr class="codeline" data-linenumber="558"><td class="num" id="LN558">558</td><td class="line">    <span class='comment'>/* Creates a stack_memory_handler responsible for the buffer \a ptr of size \a size.</span></td></tr>
<tr class="codeline" data-linenumber="559"><td class="num" id="LN559">559</td><td class="line">     <span class='comment'>* Note that \a ptr can be 0 regardless of the other parameters.</span></td></tr>
<tr class="codeline" data-linenumber="560"><td class="num" id="LN560">560</td><td class="line">     <span class='comment'>* This constructor takes care of constructing/initializing the elements of the buffer if required by the scalar type T (see NumTraits&lt;T&gt;::RequireInitialization).</span></td></tr>
<tr class="codeline" data-linenumber="561"><td class="num" id="LN561">561</td><td class="line">     <span class='comment'>* In this case, the buffer elements will also be destructed when this handler will be destructed.</span></td></tr>
<tr class="codeline" data-linenumber="562"><td class="num" id="LN562">562</td><td class="line">     <span class='comment'>* Finally, if \a dealloc is true, then the pointer \a ptr is freed.</span></td></tr>
<tr class="codeline" data-linenumber="563"><td class="num" id="LN563">563</td><td class="line">     <span class='comment'>**/</span></td></tr>
<tr class="codeline" data-linenumber="564"><td class="num" id="LN564">564</td><td class="line">    aligned_stack_memory_handler(T* ptr, std::size_t size, <span class='keyword'>bool</span> dealloc)</td></tr>
<tr class="codeline" data-linenumber="565"><td class="num" id="LN565">565</td><td class="line">      : m_ptr(ptr), m_size(size), m_deallocate(dealloc)</td></tr>
<tr class="codeline" data-linenumber="566"><td class="num" id="LN566">566</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="567"><td class="num" id="LN567">567</td><td class="line">      <span class='keyword'>if</span>(NumTraits&lt;T&gt;::RequireInitialization &amp;&amp; m_ptr)</td></tr>
<tr class="codeline" data-linenumber="568"><td class="num" id="LN568">568</td><td class="line">        Eigen::internal::construct_elements_of_array(m_ptr, size);</td></tr>
<tr class="codeline" data-linenumber="569"><td class="num" id="LN569">569</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="570"><td class="num" id="LN570">570</td><td class="line">    ~aligned_stack_memory_handler()</td></tr>
<tr class="codeline" data-linenumber="571"><td class="num" id="LN571">571</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="572"><td class="num" id="LN572">572</td><td class="line">      <span class='keyword'>if</span>(NumTraits&lt;T&gt;::RequireInitialization &amp;&amp; m_ptr)</td></tr>
<tr class="codeline" data-linenumber="573"><td class="num" id="LN573">573</td><td class="line">        Eigen::internal::destruct_elements_of_array&lt;T&gt;(m_ptr, m_size);</td></tr>
<tr class="codeline" data-linenumber="574"><td class="num" id="LN574">574</td><td class="line">      <span class='keyword'>if</span>(m_deallocate)</td></tr>
<tr class="codeline" data-linenumber="575"><td class="num" id="LN575">575</td><td class="line">        Eigen::internal::aligned_free(m_ptr);</td></tr>
<tr class="codeline" data-linenumber="576"><td class="num" id="LN576">576</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="577"><td class="num" id="LN577">577</td><td class="line">  <span class='keyword'>protected</span>:</td></tr>
<tr class="codeline" data-linenumber="578"><td class="num" id="LN578">578</td><td class="line">    T* m_ptr;</td></tr>
<tr class="codeline" data-linenumber="579"><td class="num" id="LN579">579</td><td class="line">    std::size_t m_size;</td></tr>
<tr class="codeline" data-linenumber="580"><td class="num" id="LN580">580</td><td class="line">    <span class='keyword'>bool</span> m_deallocate;</td></tr>
<tr class="codeline" data-linenumber="581"><td class="num" id="LN581">581</td><td class="line">};</td></tr>
<tr class="codeline" data-linenumber="582"><td class="num" id="LN582">582</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="583"><td class="num" id="LN583">583</td><td class="line"><span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> T&gt; <span class='keyword'>class</span> scoped_array : noncopyable</td></tr>
<tr class="codeline" data-linenumber="584"><td class="num" id="LN584">584</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="585"><td class="num" id="LN585">585</td><td class="line">  T* m_ptr;</td></tr>
<tr class="codeline" data-linenumber="586"><td class="num" id="LN586">586</td><td class="line"><span class='keyword'>public</span>:</td></tr>
<tr class="codeline" data-linenumber="587"><td class="num" id="LN587">587</td><td class="line">  <span class='keyword'>explicit</span> scoped_array(std::ptrdiff_t size)</td></tr>
<tr class="codeline" data-linenumber="588"><td class="num" id="LN588">588</td><td class="line">  {</td></tr>
<tr class="codeline" data-linenumber="589"><td class="num" id="LN589">589</td><td class="line">    m_ptr = <span class='keyword'>new</span> T[size];</td></tr>
<tr class="codeline" data-linenumber="590"><td class="num" id="LN590">590</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="591"><td class="num" id="LN591">591</td><td class="line">  ~scoped_array()</td></tr>
<tr class="codeline" data-linenumber="592"><td class="num" id="LN592">592</td><td class="line">  {</td></tr>
<tr class="codeline" data-linenumber="593"><td class="num" id="LN593">593</td><td class="line">    <span class='keyword'>delete</span>[] m_ptr;</td></tr>
<tr class="codeline" data-linenumber="594"><td class="num" id="LN594">594</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="595"><td class="num" id="LN595">595</td><td class="line">  T&amp; <span class='keyword'>operator</span>[](std::ptrdiff_t i) { <span class='keyword'>return</span> m_ptr[i]; }</td></tr>
<tr class="codeline" data-linenumber="596"><td class="num" id="LN596">596</td><td class="line">  <span class='keyword'>const</span> T&amp; <span class='keyword'>operator</span>[](std::ptrdiff_t i) <span class='keyword'>const</span> { <span class='keyword'>return</span> m_ptr[i]; }</td></tr>
<tr class="codeline" data-linenumber="597"><td class="num" id="LN597">597</td><td class="line">  T* &amp;ptr() { <span class='keyword'>return</span> m_ptr; }</td></tr>
<tr class="codeline" data-linenumber="598"><td class="num" id="LN598">598</td><td class="line">  <span class='keyword'>const</span> T* ptr() <span class='keyword'>const</span> { <span class='keyword'>return</span> m_ptr; }</td></tr>
<tr class="codeline" data-linenumber="599"><td class="num" id="LN599">599</td><td class="line">  <span class='keyword'>operator</span> <span class='keyword'>const</span> T*() <span class='keyword'>const</span> { <span class='keyword'>return</span> m_ptr; }</td></tr>
<tr class="codeline" data-linenumber="600"><td class="num" id="LN600">600</td><td class="line">};</td></tr>
<tr class="codeline" data-linenumber="601"><td class="num" id="LN601">601</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="602"><td class="num" id="LN602">602</td><td class="line"><span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> T&gt; <span class='keyword'>void</span> swap(scoped_array&lt;T&gt; &amp;a,scoped_array&lt;T&gt; &amp;b)</td></tr>
<tr class="codeline" data-linenumber="603"><td class="num" id="LN603">603</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="604"><td class="num" id="LN604">604</td><td class="line">  std::swap(a.ptr(),b.ptr());</td></tr>
<tr class="codeline" data-linenumber="605"><td class="num" id="LN605">605</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="606"><td class="num" id="LN606">606</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="607"><td class="num" id="LN607">607</td><td class="line">} <span class='comment'>// end namespace internal</span></td></tr>
<tr class="codeline" data-linenumber="608"><td class="num" id="LN608">608</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="609"><td class="num" id="LN609">609</td><td class="line"><span class='comment'>/** \internal</span></td></tr>
<tr class="codeline" data-linenumber="610"><td class="num" id="LN610">610</td><td class="line">  <span class='comment'>* Declares, allocates and construct an aligned buffer named NAME of SIZE elements of type TYPE on the stack</span></td></tr>
<tr class="codeline" data-linenumber="611"><td class="num" id="LN611">611</td><td class="line">  <span class='comment'>* if SIZE is smaller than EIGEN_STACK_ALLOCATION_LIMIT, and if stack allocation is supported by the platform</span></td></tr>
<tr class="codeline" data-linenumber="612"><td class="num" id="LN612">612</td><td class="line">  <span class='comment'>* (currently, this is Linux and Visual Studio only). Otherwise the memory is allocated on the heap.</span></td></tr>
<tr class="codeline" data-linenumber="613"><td class="num" id="LN613">613</td><td class="line">  <span class='comment'>* The allocated buffer is automatically deleted when exiting the scope of this declaration.</span></td></tr>
<tr class="codeline" data-linenumber="614"><td class="num" id="LN614">614</td><td class="line">  <span class='comment'>* If BUFFER is non null, then the declared variable is simply an alias for BUFFER, and no allocation/deletion occurs.</span></td></tr>
<tr class="codeline" data-linenumber="615"><td class="num" id="LN615">615</td><td class="line">  <span class='comment'>* Here is an example:</span></td></tr>
<tr class="codeline" data-linenumber="616"><td class="num" id="LN616">616</td><td class="line">  <span class='comment'>* \code</span></td></tr>
<tr class="codeline" data-linenumber="617"><td class="num" id="LN617">617</td><td class="line">  <span class='comment'>* {</span></td></tr>
<tr class="codeline" data-linenumber="618"><td class="num" id="LN618">618</td><td class="line">  <span class='comment'>*   ei_declare_aligned_stack_constructed_variable(float,data,size,0);</span></td></tr>
<tr class="codeline" data-linenumber="619"><td class="num" id="LN619">619</td><td class="line">  <span class='comment'>*   // use data[0] to data[size-1]</span></td></tr>
<tr class="codeline" data-linenumber="620"><td class="num" id="LN620">620</td><td class="line">  <span class='comment'>* }</span></td></tr>
<tr class="codeline" data-linenumber="621"><td class="num" id="LN621">621</td><td class="line">  <span class='comment'>* \endcode</span></td></tr>
<tr class="codeline" data-linenumber="622"><td class="num" id="LN622">622</td><td class="line">  <span class='comment'>* The underlying stack allocation function can controlled with the EIGEN_ALLOCA preprocessor token.</span></td></tr>
<tr class="codeline" data-linenumber="623"><td class="num" id="LN623">623</td><td class="line">  <span class='comment'>*/</span></td></tr>
<tr class="codeline" data-linenumber="624"><td class="num" id="LN624">624</td><td class="line"><span class='directive'>#ifdef <span class='macro'>EIGEN_ALLOCA<span class='expansion'>alloca</span></span></span></td></tr>
<tr class="codeline" data-linenumber="625"><td class="num" id="LN625">625</td><td class="line">  </td></tr>
<tr class="codeline" data-linenumber="626"><td class="num" id="LN626">626</td><td class="line">  <span class='directive'>#if <span class='macro'>EIGEN_DEFAULT_ALIGN_BYTES<span class='expansion'>16</span></span>&gt;0</span></td></tr>
<tr class="codeline" data-linenumber="627"><td class="num" id="LN627">627</td><td class="line">    <span class='comment'>// We always manually re-align the result of EIGEN_ALLOCA.</span></td></tr>
<tr class="codeline" data-linenumber="628"><td class="num" id="LN628">628</td><td class="line">    <span class='comment'>// If alloca is already aligned, the compiler should be smart enough to optimize away the re-alignment.</span></td></tr>
<tr class="codeline" data-linenumber="629"><td class="num" id="LN629">629</td><td class="line">    <span class='directive'>#define <span class='macro'>EIGEN_ALIGNED_ALLOCA(SIZE)<span class='expansion'>reinterpret_cast&lt;void*&gt;((internal::UIntPtr(__builtin_alloca<br>(SIZE+16 -1)) + 16 -1) &amp; ~(std::size_t(16 -1)))</span></span> reinterpret_cast&lt;void*&gt;((internal::UIntPtr(<span class='macro'>EIGEN_ALLOCA(SIZE+EIGEN_DEFAULT_ALIGN_BYTES-1)<span class='expansion'>__builtin_alloca(SIZE+16 -1)</span></span>) + <span class='macro'>EIGEN_DEFAULT_ALIGN_BYTES<span class='expansion'>16</span></span>-1) &amp; ~(std::size_t(<span class='macro'>EIGEN_DEFAULT_ALIGN_BYTES<span class='expansion'>16</span></span>-1)))</span></td></tr>
<tr class="codeline" data-linenumber="630"><td class="num" id="LN630">630</td><td class="line">  <span class='directive'>#else</span></td></tr>
<tr class="codeline" data-linenumber="631"><td class="num" id="LN631">631</td><td class="line">    <span class='directive'>#define <span class='macro'>EIGEN_ALIGNED_ALLOCA(SIZE)<span class='expansion'>reinterpret_cast&lt;void*&gt;((internal::UIntPtr(__builtin_alloca<br>(SIZE+16 -1)) + 16 -1) &amp; ~(std::size_t(16 -1)))</span></span> <span class='macro'>EIGEN_ALLOCA(SIZE)<span class='expansion'>__builtin_alloca(SIZE)</span></span></span></td></tr>
<tr class="codeline" data-linenumber="632"><td class="num" id="LN632">632</td><td class="line">  <span class='directive'>#endif</span></td></tr>
<tr class="codeline" data-linenumber="633"><td class="num" id="LN633">633</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="634"><td class="num" id="LN634">634</td><td class="line">  <span class='directive'>#define <span class='macro'>ei_declare_aligned_stack_constructed_variable(TYPE,NAME,SIZE,BUFFER)<span class='expansion'>Eigen::internal::check_size_for_overflow&lt;TYPE&gt;(SIZE); TYPE<br>* NAME = (BUFFER)!=0 ? (BUFFER) : reinterpret_cast&lt;TYPE*&gt;<br>( (sizeof(TYPE)*SIZE&lt;=131072) ? reinterpret_cast&lt;void*&gt;<br>((internal::UIntPtr(__builtin_alloca(sizeof(TYPE)*SIZE+16 -1)<br>) + 16 -1) &amp; ~(std::size_t(16 -1))) : Eigen::internal::aligned_malloc<br>(sizeof(TYPE)*SIZE) ); Eigen::internal::aligned_stack_memory_handler<br>&lt;TYPE&gt; NAME_stack_memory_destructor((BUFFER)==0 ? NAME :<br> 0,SIZE,sizeof(TYPE)*SIZE&gt;131072)</span></span> \</span></td></tr>
<tr class="codeline" data-linenumber="635"><td class="num" id="LN635">635</td><td class="line">    <span class='directive'>Eigen::internal::check_size_for_overflow&lt;TYPE&gt;(SIZE); \</span></td></tr>
<tr class="codeline" data-linenumber="636"><td class="num" id="LN636">636</td><td class="line">    <span class='directive'>TYPE* NAME = (BUFFER)!=0 ? (BUFFER) \</span></td></tr>
<tr class="codeline" data-linenumber="637"><td class="num" id="LN637">637</td><td class="line">               <span class='directive'>: reinterpret_cast&lt;TYPE*&gt;( \</span></td></tr>
<tr class="codeline" data-linenumber="638"><td class="num" id="LN638">638</td><td class="line">                      <span class='directive'>(sizeof(TYPE)*SIZE&lt;=<span class='macro'>EIGEN_STACK_ALLOCATION_LIMIT<span class='expansion'>131072</span></span>) ? <span class='macro'>EIGEN_ALIGNED_ALLOCA(sizeof(TYPE)*SIZE)<span class='expansion'>reinterpret_cast&lt;void*&gt;((internal::UIntPtr(__builtin_alloca<br>(sizeof(TYPE)*SIZE+16 -1)) + 16 -1) &amp; ~(std::size_t(16 -1<br>)))</span></span> \</span></td></tr>
<tr class="codeline" data-linenumber="639"><td class="num" id="LN639">639</td><td class="line">                    <span class='directive'>: Eigen::internal::aligned_malloc(sizeof(TYPE)*SIZE) );  \</span></td></tr>
<tr class="codeline" data-linenumber="640"><td class="num" id="LN640">640</td><td class="line">    <span class='directive'>Eigen::internal::aligned_stack_memory_handler&lt;TYPE&gt; <span class='macro'>EIGEN_CAT(NAME,_stack_memory_destructor)<span class='expansion'>NAME_stack_memory_destructor</span></span>((BUFFER)==0 ? NAME : 0,SIZE,sizeof(TYPE)*SIZE&gt;<span class='macro'>EIGEN_STACK_ALLOCATION_LIMIT<span class='expansion'>131072</span></span>)</span></td></tr>
<tr class="codeline" data-linenumber="641"><td class="num" id="LN641">641</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="642"><td class="num" id="LN642">642</td><td class="line"><span class='directive'>#else</span></td></tr>
<tr class="codeline" data-linenumber="643"><td class="num" id="LN643">643</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="644"><td class="num" id="LN644">644</td><td class="line">  <span class='directive'>#define <span class='macro'>ei_declare_aligned_stack_constructed_variable(TYPE,NAME,SIZE,BUFFER)<span class='expansion'>Eigen::internal::check_size_for_overflow&lt;TYPE&gt;(SIZE); TYPE<br>* NAME = (BUFFER)!=0 ? (BUFFER) : reinterpret_cast&lt;TYPE*&gt;<br>( (sizeof(TYPE)*SIZE&lt;=131072) ? reinterpret_cast&lt;void*&gt;<br>((internal::UIntPtr(__builtin_alloca(sizeof(TYPE)*SIZE+16 -1)<br>) + 16 -1) &amp; ~(std::size_t(16 -1))) : Eigen::internal::aligned_malloc<br>(sizeof(TYPE)*SIZE) ); Eigen::internal::aligned_stack_memory_handler<br>&lt;TYPE&gt; NAME_stack_memory_destructor((BUFFER)==0 ? NAME :<br> 0,SIZE,sizeof(TYPE)*SIZE&gt;131072)</span></span> \</span></td></tr>
<tr class="codeline" data-linenumber="645"><td class="num" id="LN645">645</td><td class="line">    <span class='directive'>Eigen::internal::check_size_for_overflow&lt;TYPE&gt;(SIZE); \</span></td></tr>
<tr class="codeline" data-linenumber="646"><td class="num" id="LN646">646</td><td class="line">    <span class='directive'>TYPE* NAME = (BUFFER)!=0 ? BUFFER : reinterpret_cast&lt;TYPE*&gt;(Eigen::internal::aligned_malloc(sizeof(TYPE)*SIZE));    \</span></td></tr>
<tr class="codeline" data-linenumber="647"><td class="num" id="LN647">647</td><td class="line">    <span class='directive'>Eigen::internal::aligned_stack_memory_handler&lt;TYPE&gt; <span class='macro'>EIGEN_CAT(NAME,_stack_memory_destructor)<span class='expansion'>NAME_stack_memory_destructor</span></span>((BUFFER)==0 ? NAME : 0,SIZE,true)</span></td></tr>
<tr class="codeline" data-linenumber="648"><td class="num" id="LN648">648</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="649"><td class="num" id="LN649">649</td><td class="line"><span class='directive'>#endif</span></td></tr>
<tr class="codeline" data-linenumber="650"><td class="num" id="LN650">650</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="651"><td class="num" id="LN651">651</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="652"><td class="num" id="LN652">652</td><td class="line"><span class='comment'>/*****************************************************************************</span></td></tr>
<tr class="codeline" data-linenumber="653"><td class="num" id="LN653">653</td><td class="line"><span class='comment'>*** Implementation of EIGEN_MAKE_ALIGNED_OPERATOR_NEW [_IF]                ***</span></td></tr>
<tr class="codeline" data-linenumber="654"><td class="num" id="LN654">654</td><td class="line"><span class='comment'>*****************************************************************************/</span></td></tr>
<tr class="codeline" data-linenumber="655"><td class="num" id="LN655">655</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="656"><td class="num" id="LN656">656</td><td class="line"><span class='directive'>#if <span class='macro'>EIGEN_MAX_ALIGN_BYTES<span class='expansion'>16</span></span>!=0</span></td></tr>
<tr class="codeline" data-linenumber="657"><td class="num" id="LN657">657</td><td class="line">  <span class='directive'>#define <span class='macro'>EIGEN_MAKE_ALIGNED_OPERATOR_NEW_NOTHROW(NeedsToAlign)<span class='expansion'>void* operator new(std::size_t size, const std::nothrow_t&amp;<br>) noexcept(true) { try { return Eigen::internal::conditional_aligned_malloc<br>&lt;NeedsToAlign&gt;(size); } catch (...) { return 0; } }</span></span> \</span></td></tr>
<tr class="codeline" data-linenumber="658"><td class="num" id="LN658">658</td><td class="line">      <span class='directive'>void* operator new(std::size_t size, const std::nothrow_t&amp;) <span class='macro'>EIGEN_NO_THROW<span class='expansion'>noexcept(true)</span></span> { \</span></td></tr>
<tr class="codeline" data-linenumber="659"><td class="num" id="LN659">659</td><td class="line">        <span class='directive'><span class='macro'>EIGEN_TRY<span class='expansion'>try</span></span> { return Eigen::internal::conditional_aligned_malloc&lt;NeedsToAlign&gt;(size); } \</span></td></tr>
<tr class="codeline" data-linenumber="660"><td class="num" id="LN660">660</td><td class="line">        <span class='directive'><span class='macro'>EIGEN_CATCH (...)<span class='expansion'>catch (...)</span></span> { return 0; } \</span></td></tr>
<tr class="codeline" data-linenumber="661"><td class="num" id="LN661">661</td><td class="line">      <span class='directive'>}</span></td></tr>
<tr class="codeline" data-linenumber="662"><td class="num" id="LN662">662</td><td class="line">  <span class='directive'>#define <span class='macro'>EIGEN_MAKE_ALIGNED_OPERATOR_NEW_IF(NeedsToAlign)<span class='expansion'>void *operator new(std::size_t size) { return Eigen::internal<br>::conditional_aligned_malloc&lt;NeedsToAlign&gt;(size); } void<br> *operator new[](std::size_t size) { return Eigen::internal::<br>conditional_aligned_malloc&lt;NeedsToAlign&gt;(size); } void operator<br> delete(void * ptr) noexcept(true) { Eigen::internal::conditional_aligned_free<br>&lt;NeedsToAlign&gt;(ptr); } void operator delete[](void * ptr<br>) noexcept(true) { Eigen::internal::conditional_aligned_free&lt;<br>NeedsToAlign&gt;(ptr); } void operator delete(void * ptr, std<br>::size_t ) noexcept(true) { Eigen::internal::conditional_aligned_free<br>&lt;NeedsToAlign&gt;(ptr); } void operator delete[](void * ptr<br>, std::size_t ) noexcept(true) { Eigen::internal::conditional_aligned_free<br>&lt;NeedsToAlign&gt;(ptr); } static void *operator new(std::size_t<br> size, void *ptr) { return ::operator new(size,ptr); } static<br> void *operator new[](std::size_t size, void* ptr) { return ::<br>operator new[](size,ptr); } void operator delete(void * memory<br>, void *ptr) noexcept(true) { return ::operator delete(memory<br>,ptr); } void operator delete[](void * memory, void *ptr) noexcept<br>(true) { return ::operator delete[](memory,ptr); } void* operator<br> new(std::size_t size, const std::nothrow_t&amp;) noexcept(true<br>) { try { return Eigen::internal::conditional_aligned_malloc&lt;<br>NeedsToAlign&gt;(size); } catch (...) { return 0; } } void operator<br> delete(void *ptr, const std::nothrow_t&amp;) noexcept(true) {<br> Eigen::internal::conditional_aligned_free&lt;NeedsToAlign&gt;<br>(ptr); } typedef void eigen_aligned_operator_new_marker_type;</span></span> \</span></td></tr>
<tr class="codeline" data-linenumber="663"><td class="num" id="LN663">663</td><td class="line">      <span class='directive'>void *operator new(std::size_t size) { \</span></td></tr>
<tr class="codeline" data-linenumber="664"><td class="num" id="LN664">664</td><td class="line">        <span class='directive'>return Eigen::internal::conditional_aligned_malloc&lt;NeedsToAlign&gt;(size); \</span></td></tr>
<tr class="codeline" data-linenumber="665"><td class="num" id="LN665">665</td><td class="line">      <span class='directive'>} \</span></td></tr>
<tr class="codeline" data-linenumber="666"><td class="num" id="LN666">666</td><td class="line">      <span class='directive'>void *operator new[](std::size_t size) { \</span></td></tr>
<tr class="codeline" data-linenumber="667"><td class="num" id="LN667">667</td><td class="line">        <span class='directive'>return Eigen::internal::conditional_aligned_malloc&lt;NeedsToAlign&gt;(size); \</span></td></tr>
<tr class="codeline" data-linenumber="668"><td class="num" id="LN668">668</td><td class="line">      <span class='directive'>} \</span></td></tr>
<tr class="codeline" data-linenumber="669"><td class="num" id="LN669">669</td><td class="line">      <span class='directive'>void operator delete(void * ptr) <span class='macro'>EIGEN_NO_THROW<span class='expansion'>noexcept(true)</span></span> { Eigen::internal::conditional_aligned_free&lt;NeedsToAlign&gt;(ptr); } \</span></td></tr>
<tr class="codeline" data-linenumber="670"><td class="num" id="LN670">670</td><td class="line">      <span class='directive'>void operator delete[](void * ptr) <span class='macro'>EIGEN_NO_THROW<span class='expansion'>noexcept(true)</span></span> { Eigen::internal::conditional_aligned_free&lt;NeedsToAlign&gt;(ptr); } \</span></td></tr>
<tr class="codeline" data-linenumber="671"><td class="num" id="LN671">671</td><td class="line">      <span class='directive'>void operator delete(void * ptr, std::size_t /* sz */) <span class='macro'>EIGEN_NO_THROW<span class='expansion'>noexcept(true)</span></span> { Eigen::internal::conditional_aligned_free&lt;NeedsToAlign&gt;(ptr); } \</span></td></tr>
<tr class="codeline" data-linenumber="672"><td class="num" id="LN672">672</td><td class="line">      <span class='directive'>void operator delete[](void * ptr, std::size_t /* sz */) <span class='macro'>EIGEN_NO_THROW<span class='expansion'>noexcept(true)</span></span> { Eigen::internal::conditional_aligned_free&lt;NeedsToAlign&gt;(ptr); } \</span></td></tr>
<tr class="codeline" data-linenumber="673"><td class="num" id="LN673">673</td><td class="line">      <span class='directive'>/* in-place new and delete. since (at least afaik) there is no actual   */ \</span></td></tr>
<tr class="codeline" data-linenumber="674"><td class="num" id="LN674">674</td><td class="line">      <span class='directive'>/* memory allocated we can safely let the default implementation handle */ \</span></td></tr>
<tr class="codeline" data-linenumber="675"><td class="num" id="LN675">675</td><td class="line">      <span class='directive'>/* this particular case. */ \</span></td></tr>
<tr class="codeline" data-linenumber="676"><td class="num" id="LN676">676</td><td class="line">      <span class='directive'>static void *operator new(std::size_t size, void *ptr) { return ::operator new(size,ptr); } \</span></td></tr>
<tr class="codeline" data-linenumber="677"><td class="num" id="LN677">677</td><td class="line">      <span class='directive'>static void *operator new[](std::size_t size, void* ptr) { return ::operator new[](size,ptr); } \</span></td></tr>
<tr class="codeline" data-linenumber="678"><td class="num" id="LN678">678</td><td class="line">      <span class='directive'>void operator delete(void * memory, void *ptr) <span class='macro'>EIGEN_NO_THROW<span class='expansion'>noexcept(true)</span></span> { return ::operator delete(memory,ptr); } \</span></td></tr>
<tr class="codeline" data-linenumber="679"><td class="num" id="LN679">679</td><td class="line">      <span class='directive'>void operator delete[](void * memory, void *ptr) <span class='macro'>EIGEN_NO_THROW<span class='expansion'>noexcept(true)</span></span> { return ::operator delete[](memory,ptr); } \</span></td></tr>
<tr class="codeline" data-linenumber="680"><td class="num" id="LN680">680</td><td class="line">      <span class='directive'>/* nothrow-new (returns zero instead of std::bad_alloc) */ \</span></td></tr>
<tr class="codeline" data-linenumber="681"><td class="num" id="LN681">681</td><td class="line">      <span class='directive'><span class='macro'>EIGEN_MAKE_ALIGNED_OPERATOR_NEW_NOTHROW(NeedsToAlign)<span class='expansion'>void* operator new(std::size_t size, const std::nothrow_t&amp;<br>) noexcept(true) { try { return Eigen::internal::conditional_aligned_malloc<br>&lt;NeedsToAlign&gt;(size); } catch (...) { return 0; } }</span></span> \</span></td></tr>
<tr class="codeline" data-linenumber="682"><td class="num" id="LN682">682</td><td class="line">      <span class='directive'>void operator delete(void *ptr, const std::nothrow_t&amp;) <span class='macro'>EIGEN_NO_THROW<span class='expansion'>noexcept(true)</span></span> { \</span></td></tr>
<tr class="codeline" data-linenumber="683"><td class="num" id="LN683">683</td><td class="line">        <span class='directive'>Eigen::internal::conditional_aligned_free&lt;NeedsToAlign&gt;(ptr); \</span></td></tr>
<tr class="codeline" data-linenumber="684"><td class="num" id="LN684">684</td><td class="line">      <span class='directive'>} \</span></td></tr>
<tr class="codeline" data-linenumber="685"><td class="num" id="LN685">685</td><td class="line">      <span class='directive'>typedef void eigen_aligned_operator_new_marker_type;</span></td></tr>
<tr class="codeline" data-linenumber="686"><td class="num" id="LN686">686</td><td class="line"><span class='directive'>#else</span></td></tr>
<tr class="codeline" data-linenumber="687"><td class="num" id="LN687">687</td><td class="line">  <span class='directive'>#define <span class='macro'>EIGEN_MAKE_ALIGNED_OPERATOR_NEW_IF(NeedsToAlign)<span class='expansion'>void *operator new(std::size_t size) { return Eigen::internal<br>::conditional_aligned_malloc&lt;NeedsToAlign&gt;(size); } void<br> *operator new[](std::size_t size) { return Eigen::internal::<br>conditional_aligned_malloc&lt;NeedsToAlign&gt;(size); } void operator<br> delete(void * ptr) noexcept(true) { Eigen::internal::conditional_aligned_free<br>&lt;NeedsToAlign&gt;(ptr); } void operator delete[](void * ptr<br>) noexcept(true) { Eigen::internal::conditional_aligned_free&lt;<br>NeedsToAlign&gt;(ptr); } void operator delete(void * ptr, std<br>::size_t ) noexcept(true) { Eigen::internal::conditional_aligned_free<br>&lt;NeedsToAlign&gt;(ptr); } void operator delete[](void * ptr<br>, std::size_t ) noexcept(true) { Eigen::internal::conditional_aligned_free<br>&lt;NeedsToAlign&gt;(ptr); } static void *operator new(std::size_t<br> size, void *ptr) { return ::operator new(size,ptr); } static<br> void *operator new[](std::size_t size, void* ptr) { return ::<br>operator new[](size,ptr); } void operator delete(void * memory<br>, void *ptr) noexcept(true) { return ::operator delete(memory<br>,ptr); } void operator delete[](void * memory, void *ptr) noexcept<br>(true) { return ::operator delete[](memory,ptr); } void* operator<br> new(std::size_t size, const std::nothrow_t&amp;) noexcept(true<br>) { try { return Eigen::internal::conditional_aligned_malloc&lt;<br>NeedsToAlign&gt;(size); } catch (...) { return 0; } } void operator<br> delete(void *ptr, const std::nothrow_t&amp;) noexcept(true) {<br> Eigen::internal::conditional_aligned_free&lt;NeedsToAlign&gt;<br>(ptr); } typedef void eigen_aligned_operator_new_marker_type;</span></span></span></td></tr>
<tr class="codeline" data-linenumber="688"><td class="num" id="LN688">688</td><td class="line"><span class='directive'>#endif</span></td></tr>
<tr class="codeline" data-linenumber="689"><td class="num" id="LN689">689</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="690"><td class="num" id="LN690">690</td><td class="line"><span class='directive'>#define <span class='macro'>EIGEN_MAKE_ALIGNED_OPERATOR_NEW<span class='expansion'>void *operator new(std::size_t size) { return Eigen::internal<br>::conditional_aligned_malloc&lt;true&gt;(size); } void *operator<br> new[](std::size_t size) { return Eigen::internal::conditional_aligned_malloc<br>&lt;true&gt;(size); } void operator delete(void * ptr) noexcept<br>(true) { Eigen::internal::conditional_aligned_free&lt;true&gt;<br>(ptr); } void operator delete[](void * ptr) noexcept(true) { Eigen<br>::internal::conditional_aligned_free&lt;true&gt;(ptr); } void<br> operator delete(void * ptr, std::size_t ) noexcept(true) { Eigen<br>::internal::conditional_aligned_free&lt;true&gt;(ptr); } void<br> operator delete[](void * ptr, std::size_t ) noexcept(true) {<br> Eigen::internal::conditional_aligned_free&lt;true&gt;(ptr); }<br> static void *operator new(std::size_t size, void *ptr) { return<br> ::operator new(size,ptr); } static void *operator new[](std::<br>size_t size, void* ptr) { return ::operator new[](size,ptr); }<br> void operator delete(void * memory, void *ptr) noexcept(true<br>) { return ::operator delete(memory,ptr); } void operator delete<br>[](void * memory, void *ptr) noexcept(true) { return ::operator<br> delete[](memory,ptr); } void* operator new(std::size_t size,<br> const std::nothrow_t&amp;) noexcept(true) { try { return Eigen<br>::internal::conditional_aligned_malloc&lt;true&gt;(size); } catch<br> (...) { return 0; } } void operator delete(void *ptr, const std<br>::nothrow_t&amp;) noexcept(true) { Eigen::internal::conditional_aligned_free<br>&lt;true&gt;(ptr); } typedef void eigen_aligned_operator_new_marker_type<br>;</span></span> <span class='macro'>EIGEN_MAKE_ALIGNED_OPERATOR_NEW_IF(true)<span class='expansion'>void *operator new(std::size_t size) { return Eigen::internal<br>::conditional_aligned_malloc&lt;true&gt;(size); } void *operator<br> new[](std::size_t size) { return Eigen::internal::conditional_aligned_malloc<br>&lt;true&gt;(size); } void operator delete(void * ptr) noexcept<br>(true) { Eigen::internal::conditional_aligned_free&lt;true&gt;<br>(ptr); } void operator delete[](void * ptr) noexcept(true) { Eigen<br>::internal::conditional_aligned_free&lt;true&gt;(ptr); } void<br> operator delete(void * ptr, std::size_t ) noexcept(true) { Eigen<br>::internal::conditional_aligned_free&lt;true&gt;(ptr); } void<br> operator delete[](void * ptr, std::size_t ) noexcept(true) {<br> Eigen::internal::conditional_aligned_free&lt;true&gt;(ptr); }<br> static void *operator new(std::size_t size, void *ptr) { return<br> ::operator new(size,ptr); } static void *operator new[](std::<br>size_t size, void* ptr) { return ::operator new[](size,ptr); }<br> void operator delete(void * memory, void *ptr) noexcept(true<br>) { return ::operator delete(memory,ptr); } void operator delete<br>[](void * memory, void *ptr) noexcept(true) { return ::operator<br> delete[](memory,ptr); } void* operator new(std::size_t size,<br> const std::nothrow_t&amp;) noexcept(true) { try { return Eigen<br>::internal::conditional_aligned_malloc&lt;true&gt;(size); } catch<br> (...) { return 0; } } void operator delete(void *ptr, const std<br>::nothrow_t&amp;) noexcept(true) { Eigen::internal::conditional_aligned_free<br>&lt;true&gt;(ptr); } typedef void eigen_aligned_operator_new_marker_type<br>;</span></span></span></td></tr>
<tr class="codeline" data-linenumber="691"><td class="num" id="LN691">691</td><td class="line"><span class='directive'>#define <span class='macro'>EIGEN_MAKE_ALIGNED_OPERATOR_NEW_IF_VECTORIZABLE_FIXED_SIZE(Scalar,Size)<span class='expansion'>void *operator new(std::size_t size) { return Eigen::internal<br>::conditional_aligned_malloc&lt;bool(((Size)!=Eigen::Dynamic)<br> &amp;&amp; ((sizeof(Scalar)*(Size))%16==0))&gt;(size); } void<br> *operator new[](std::size_t size) { return Eigen::internal::<br>conditional_aligned_malloc&lt;bool(((Size)!=Eigen::Dynamic) &amp;&amp;<br> ((sizeof(Scalar)*(Size))%16==0))&gt;(size); } void operator delete<br>(void * ptr) noexcept(true) { Eigen::internal::conditional_aligned_free<br>&lt;bool(((Size)!=Eigen::Dynamic) &amp;&amp; ((sizeof(Scalar)<br>*(Size))%16==0))&gt;(ptr); } void operator delete[](void * ptr<br>) noexcept(true) { Eigen::internal::conditional_aligned_free&lt;<br>bool(((Size)!=Eigen::Dynamic) &amp;&amp; ((sizeof(Scalar)*(Size<br>))%16==0))&gt;(ptr); } void operator delete(void * ptr, std::<br>size_t ) noexcept(true) { Eigen::internal::conditional_aligned_free<br>&lt;bool(((Size)!=Eigen::Dynamic) &amp;&amp; ((sizeof(Scalar)<br>*(Size))%16==0))&gt;(ptr); } void operator delete[](void * ptr<br>, std::size_t ) noexcept(true) { Eigen::internal::conditional_aligned_free<br>&lt;bool(((Size)!=Eigen::Dynamic) &amp;&amp; ((sizeof(Scalar)<br>*(Size))%16==0))&gt;(ptr); } static void *operator new(std::size_t<br> size, void *ptr) { return ::operator new(size,ptr); } static<br> void *operator new[](std::size_t size, void* ptr) { return ::<br>operator new[](size,ptr); } void operator delete(void * memory<br>, void *ptr) noexcept(true) { return ::operator delete(memory<br>,ptr); } void operator delete[](void * memory, void *ptr) noexcept<br>(true) { return ::operator delete[](memory,ptr); } void* operator<br> new(std::size_t size, const std::nothrow_t&amp;) noexcept(true<br>) { try { return Eigen::internal::conditional_aligned_malloc&lt;<br>bool(((Size)!=Eigen::Dynamic) &amp;&amp; ((sizeof(Scalar)*(Size<br>))%16==0))&gt;(size); } catch (...) { return 0; } } void operator<br> delete(void *ptr, const std::nothrow_t&amp;) noexcept(true) {<br> Eigen::internal::conditional_aligned_free&lt;bool(((Size)!=Eigen<br>::Dynamic) &amp;&amp; ((sizeof(Scalar)*(Size))%16==0))&gt;(ptr<br>); } typedef void eigen_aligned_operator_new_marker_type;</span></span> \</span></td></tr>
<tr class="codeline" data-linenumber="692"><td class="num" id="LN692">692</td><td class="line">  <span class='directive'><span class='macro'>EIGEN_MAKE_ALIGNED_OPERATOR_NEW_IF(bool(((Size)!=Eigen::Dynamic) &amp;&amp; ((sizeof(Scalar)*(Size))%EIGEN_MAX_ALIGN_BYTES==0)))<span class='expansion'>void *operator new(std::size_t size) { return Eigen::internal<br>::conditional_aligned_malloc&lt;bool(((Size)!=Eigen::Dynamic)<br> &amp;&amp; ((sizeof(Scalar)*(Size))%16==0))&gt;(size); } void<br> *operator new[](std::size_t size) { return Eigen::internal::<br>conditional_aligned_malloc&lt;bool(((Size)!=Eigen::Dynamic) &amp;&amp;<br> ((sizeof(Scalar)*(Size))%16==0))&gt;(size); } void operator delete<br>(void * ptr) noexcept(true) { Eigen::internal::conditional_aligned_free<br>&lt;bool(((Size)!=Eigen::Dynamic) &amp;&amp; ((sizeof(Scalar)<br>*(Size))%16==0))&gt;(ptr); } void operator delete[](void * ptr<br>) noexcept(true) { Eigen::internal::conditional_aligned_free&lt;<br>bool(((Size)!=Eigen::Dynamic) &amp;&amp; ((sizeof(Scalar)*(Size<br>))%16==0))&gt;(ptr); } void operator delete(void * ptr, std::<br>size_t ) noexcept(true) { Eigen::internal::conditional_aligned_free<br>&lt;bool(((Size)!=Eigen::Dynamic) &amp;&amp; ((sizeof(Scalar)<br>*(Size))%16==0))&gt;(ptr); } void operator delete[](void * ptr<br>, std::size_t ) noexcept(true) { Eigen::internal::conditional_aligned_free<br>&lt;bool(((Size)!=Eigen::Dynamic) &amp;&amp; ((sizeof(Scalar)<br>*(Size))%16==0))&gt;(ptr); } static void *operator new(std::size_t<br> size, void *ptr) { return ::operator new(size,ptr); } static<br> void *operator new[](std::size_t size, void* ptr) { return ::<br>operator new[](size,ptr); } void operator delete(void * memory<br>, void *ptr) noexcept(true) { return ::operator delete(memory<br>,ptr); } void operator delete[](void * memory, void *ptr) noexcept<br>(true) { return ::operator delete[](memory,ptr); } void* operator<br> new(std::size_t size, const std::nothrow_t&amp;) noexcept(true<br>) { try { return Eigen::internal::conditional_aligned_malloc&lt;<br>bool(((Size)!=Eigen::Dynamic) &amp;&amp; ((sizeof(Scalar)*(Size<br>))%16==0))&gt;(size); } catch (...) { return 0; } } void operator<br> delete(void *ptr, const std::nothrow_t&amp;) noexcept(true) {<br> Eigen::internal::conditional_aligned_free&lt;bool(((Size)!=Eigen<br>::Dynamic) &amp;&amp; ((sizeof(Scalar)*(Size))%16==0))&gt;(ptr<br>); } typedef void eigen_aligned_operator_new_marker_type;</span></span></span></td></tr>
<tr class="codeline" data-linenumber="693"><td class="num" id="LN693">693</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="694"><td class="num" id="LN694">694</td><td class="line"><span class='comment'>/****************************************************************************/</span></td></tr>
<tr class="codeline" data-linenumber="695"><td class="num" id="LN695">695</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="696"><td class="num" id="LN696">696</td><td class="line"><span class='comment'>/** \class aligned_allocator</span></td></tr>
<tr class="codeline" data-linenumber="697"><td class="num" id="LN697">697</td><td class="line"><span class='comment'>* \ingroup Core_Module</span></td></tr>
<tr class="codeline" data-linenumber="698"><td class="num" id="LN698">698</td><td class="line"><span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="699"><td class="num" id="LN699">699</td><td class="line"><span class='comment'>* \brief STL compatible allocator to use with types requiring a non standrad alignment.</span></td></tr>
<tr class="codeline" data-linenumber="700"><td class="num" id="LN700">700</td><td class="line"><span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="701"><td class="num" id="LN701">701</td><td class="line"><span class='comment'>* The memory is aligned as for dynamically aligned matrix/array types such as MatrixXd.</span></td></tr>
<tr class="codeline" data-linenumber="702"><td class="num" id="LN702">702</td><td class="line"><span class='comment'>* By default, it will thus provide at least 16 bytes alignment and more in following cases:</span></td></tr>
<tr class="codeline" data-linenumber="703"><td class="num" id="LN703">703</td><td class="line"><span class='comment'>*  - 32 bytes alignment if AVX is enabled.</span></td></tr>
<tr class="codeline" data-linenumber="704"><td class="num" id="LN704">704</td><td class="line"><span class='comment'>*  - 64 bytes alignment if AVX512 is enabled.</span></td></tr>
<tr class="codeline" data-linenumber="705"><td class="num" id="LN705">705</td><td class="line"><span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="706"><td class="num" id="LN706">706</td><td class="line"><span class='comment'>* This can be controled using the \c EIGEN_MAX_ALIGN_BYTES macro as documented</span></td></tr>
<tr class="codeline" data-linenumber="707"><td class="num" id="LN707">707</td><td class="line"><span class='comment'>* \link TopicPreprocessorDirectivesPerformance there \endlink.</span></td></tr>
<tr class="codeline" data-linenumber="708"><td class="num" id="LN708">708</td><td class="line"><span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="709"><td class="num" id="LN709">709</td><td class="line"><span class='comment'>* Example:</span></td></tr>
<tr class="codeline" data-linenumber="710"><td class="num" id="LN710">710</td><td class="line"><span class='comment'>* \code</span></td></tr>
<tr class="codeline" data-linenumber="711"><td class="num" id="LN711">711</td><td class="line"><span class='comment'>* // Matrix4f requires 16 bytes alignment:</span></td></tr>
<tr class="codeline" data-linenumber="712"><td class="num" id="LN712">712</td><td class="line"><span class='comment'>* std::map&lt; int, Matrix4f, std::less&lt;int&gt;,</span> </td></tr>
<tr class="codeline" data-linenumber="713"><td class="num" id="LN713">713</td><td class="line"><span class='comment'>*           aligned_allocator&lt;std::pair&lt;const int, Matrix4f&gt; &gt; &gt; my_map_mat4;</span></td></tr>
<tr class="codeline" data-linenumber="714"><td class="num" id="LN714">714</td><td class="line"><span class='comment'>* // Vector3f does not require 16 bytes alignment, no need to use Eigen's allocator:</span></td></tr>
<tr class="codeline" data-linenumber="715"><td class="num" id="LN715">715</td><td class="line"><span class='comment'>* std::map&lt; int, Vector3f &gt; my_map_vec3;</span></td></tr>
<tr class="codeline" data-linenumber="716"><td class="num" id="LN716">716</td><td class="line"><span class='comment'>* \endcode</span></td></tr>
<tr class="codeline" data-linenumber="717"><td class="num" id="LN717">717</td><td class="line"><span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="718"><td class="num" id="LN718">718</td><td class="line"><span class='comment'>* \sa \blank \ref TopicStlContainers.</span></td></tr>
<tr class="codeline" data-linenumber="719"><td class="num" id="LN719">719</td><td class="line"><span class='comment'>*/</span></td></tr>
<tr class="codeline" data-linenumber="720"><td class="num" id="LN720">720</td><td class="line"><span class='keyword'>template</span>&lt;<span class='keyword'>class</span> T&gt;</td></tr>
<tr class="codeline" data-linenumber="721"><td class="num" id="LN721">721</td><td class="line"><span class='keyword'>class</span> aligned_allocator : <span class='keyword'>public</span> std::allocator&lt;T&gt;</td></tr>
<tr class="codeline" data-linenumber="722"><td class="num" id="LN722">722</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="723"><td class="num" id="LN723">723</td><td class="line"><span class='keyword'>public</span>:</td></tr>
<tr class="codeline" data-linenumber="724"><td class="num" id="LN724">724</td><td class="line">  <span class='keyword'>typedef</span> std::size_t     size_type;</td></tr>
<tr class="codeline" data-linenumber="725"><td class="num" id="LN725">725</td><td class="line">  <span class='keyword'>typedef</span> std::ptrdiff_t  difference_type;</td></tr>
<tr class="codeline" data-linenumber="726"><td class="num" id="LN726">726</td><td class="line">  <span class='keyword'>typedef</span> T*              pointer;</td></tr>
<tr class="codeline" data-linenumber="727"><td class="num" id="LN727">727</td><td class="line">  <span class='keyword'>typedef</span> <span class='keyword'>const</span> T*        const_pointer;</td></tr>
<tr class="codeline" data-linenumber="728"><td class="num" id="LN728">728</td><td class="line">  <span class='keyword'>typedef</span> T&amp;              reference;</td></tr>
<tr class="codeline" data-linenumber="729"><td class="num" id="LN729">729</td><td class="line">  <span class='keyword'>typedef</span> <span class='keyword'>const</span> T&amp;        const_reference;</td></tr>
<tr class="codeline" data-linenumber="730"><td class="num" id="LN730">730</td><td class="line">  <span class='keyword'>typedef</span> T               value_type;</td></tr>
<tr class="codeline" data-linenumber="731"><td class="num" id="LN731">731</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="732"><td class="num" id="LN732">732</td><td class="line">  <span class='keyword'>template</span>&lt;<span class='keyword'>class</span> U&gt;</td></tr>
<tr class="codeline" data-linenumber="733"><td class="num" id="LN733">733</td><td class="line">  <span class='keyword'>struct</span> rebind</td></tr>
<tr class="codeline" data-linenumber="734"><td class="num" id="LN734">734</td><td class="line">  {</td></tr>
<tr class="codeline" data-linenumber="735"><td class="num" id="LN735">735</td><td class="line">    <span class='keyword'>typedef</span> aligned_allocator&lt;U&gt; other;</td></tr>
<tr class="codeline" data-linenumber="736"><td class="num" id="LN736">736</td><td class="line">  };</td></tr>
<tr class="codeline" data-linenumber="737"><td class="num" id="LN737">737</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="738"><td class="num" id="LN738">738</td><td class="line">  aligned_allocator() : std::allocator&lt;T&gt;() {}</td></tr>
<tr class="codeline" data-linenumber="739"><td class="num" id="LN739">739</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="740"><td class="num" id="LN740">740</td><td class="line">  aligned_allocator(<span class='keyword'>const</span> aligned_allocator&amp; other) : std::allocator&lt;T&gt;(other) {}</td></tr>
<tr class="codeline" data-linenumber="741"><td class="num" id="LN741">741</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="742"><td class="num" id="LN742">742</td><td class="line">  <span class='keyword'>template</span>&lt;<span class='keyword'>class</span> U&gt;</td></tr>
<tr class="codeline" data-linenumber="743"><td class="num" id="LN743">743</td><td class="line">  aligned_allocator(<span class='keyword'>const</span> aligned_allocator&lt;U&gt;&amp; other) : std::allocator&lt;T&gt;(other) {}</td></tr>
<tr class="codeline" data-linenumber="744"><td class="num" id="LN744">744</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="745"><td class="num" id="LN745">745</td><td class="line">  ~aligned_allocator() {}</td></tr>
<tr class="codeline" data-linenumber="746"><td class="num" id="LN746">746</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="747"><td class="num" id="LN747">747</td><td class="line">  pointer allocate(size_type num, <span class='keyword'>const</span> <span class='keyword'>void</span>* <span class='comment'>/*hint*/</span> = 0)</td></tr>
<tr class="codeline" data-linenumber="748"><td class="num" id="LN748">748</td><td class="line">  {</td></tr>
<tr class="codeline" data-linenumber="749"><td class="num" id="LN749">749</td><td class="line">    internal::check_size_for_overflow&lt;T&gt;(num);</td></tr>
<tr class="codeline" data-linenumber="750"><td class="num" id="LN750">750</td><td class="line">    <span class='keyword'>return</span> <span class='keyword'>static_cast</span>&lt;pointer&gt;( internal::aligned_malloc(num * <span class='keyword'>sizeof</span>(T)) );</td></tr>
<tr class="codeline" data-linenumber="751"><td class="num" id="LN751">751</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="752"><td class="num" id="LN752">752</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="753"><td class="num" id="LN753">753</td><td class="line">  <span class='keyword'>void</span> deallocate(pointer p, size_type <span class='comment'>/*num*/</span>)</td></tr>
<tr class="codeline" data-linenumber="754"><td class="num" id="LN754">754</td><td class="line">  {</td></tr>
<tr class="codeline" data-linenumber="755"><td class="num" id="LN755">755</td><td class="line">    internal::aligned_free(p);</td></tr>
<tr class="codeline" data-linenumber="756"><td class="num" id="LN756">756</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="757"><td class="num" id="LN757">757</td><td class="line">};</td></tr>
<tr class="codeline" data-linenumber="758"><td class="num" id="LN758">758</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="759"><td class="num" id="LN759">759</td><td class="line"><span class='comment'>//---------- Cache sizes ----------</span></td></tr>
<tr class="codeline" data-linenumber="760"><td class="num" id="LN760">760</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="761"><td class="num" id="LN761">761</td><td class="line"><span class='directive'>#if !defined(EIGEN_NO_CPUID)</span></td></tr>
<tr class="codeline" data-linenumber="762"><td class="num" id="LN762">762</td><td class="line"><span class='directive'>#  if <span class='macro'>EIGEN_COMP_GNUC<span class='expansion'>1</span></span> &amp;&amp; <span class='macro'>EIGEN_ARCH_i386_OR_x86_64<span class='expansion'>1</span></span></span></td></tr>
<tr class="codeline" data-linenumber="763"><td class="num" id="LN763">763</td><td class="line"><span class='directive'>#    if defined(<span class='macro'>__PIC__<span class='expansion'>2</span></span>) &amp;&amp; <span class='macro'>EIGEN_ARCH_i386<span class='expansion'>0</span></span></span></td></tr>
<tr class="codeline" data-linenumber="764"><td class="num" id="LN764">764</td><td class="line">       <span class='comment'>// Case for x86 with PIC</span></td></tr>
<tr class="codeline" data-linenumber="765"><td class="num" id="LN765">765</td><td class="line"><span class='directive'>#      define <span class='macro'>EIGEN_CPUID(abcd,func,id)<span class='expansion'>__asm__ __volatile__ ("xchg{q}\t{%%}rbx, %q1; cpuid; xchg{q}\t{%%}rbx, %q1"<br>: "=a" (abcd[0]), "=&amp;r" (abcd[1]), "=c" (abcd[2]), "=d" (<br>abcd[3]) : "0" (func), "2" (id));</span></span> \</span></td></tr>
<tr class="codeline" data-linenumber="766"><td class="num" id="LN766">766</td><td class="line">         <span class='directive'>__asm__ __volatile__ ("xchgl %%ebx, %k1;cpuid; xchgl %%ebx,%k1": "=a" (abcd[0]), "=&amp;r" (abcd[1]), "=c" (abcd[2]), "=d" (abcd[3]) : "a" (func), "c" (id));</span></td></tr>
<tr class="codeline" data-linenumber="767"><td class="num" id="LN767">767</td><td class="line"><span class='directive'>#    elif defined(<span class='macro'>__PIC__<span class='expansion'>2</span></span>) &amp;&amp; <span class='macro'>EIGEN_ARCH_x86_64<span class='expansion'>1</span></span></span></td></tr>
<tr class="codeline" data-linenumber="768"><td class="num" id="LN768">768</td><td class="line">       <span class='comment'>// Case for x64 with PIC. In theory this is only a problem with recent gcc and with medium or large code model, not with the default small code model.</span></td></tr>
<tr class="codeline" data-linenumber="769"><td class="num" id="LN769">769</td><td class="line">       <span class='comment'>// However, we cannot detect which code model is used, and the xchg overhead is negligible anyway.</span></td></tr>
<tr class="codeline" data-linenumber="770"><td class="num" id="LN770">770</td><td class="line"><span class='directive'>#      define <span class='macro'>EIGEN_CPUID(abcd,func,id)<span class='expansion'>__asm__ __volatile__ ("xchg{q}\t{%%}rbx, %q1; cpuid; xchg{q}\t{%%}rbx, %q1"<br>: "=a" (abcd[0]), "=&amp;r" (abcd[1]), "=c" (abcd[2]), "=d" (<br>abcd[3]) : "0" (func), "2" (id));</span></span> \</span></td></tr>
<tr class="codeline" data-linenumber="771"><td class="num" id="LN771">771</td><td class="line">        <span class='directive'>__asm__ __volatile__ ("xchg{q}\t{%%}rbx, %q1; cpuid; xchg{q}\t{%%}rbx, %q1": "=a" (abcd[0]), "=&amp;r" (abcd[1]), "=c" (abcd[2]), "=d" (abcd[3]) : "0" (func), "2" (id));</span></td></tr>
<tr class="codeline" data-linenumber="772"><td class="num" id="LN772">772</td><td class="line"><span class='directive'>#    else</span></td></tr>
<tr class="codeline" data-linenumber="773"><td class="num" id="LN773">773</td><td class="line">       <span class='comment'>// Case for x86_64 or x86 w/o PIC</span></td></tr>
<tr class="codeline" data-linenumber="774"><td class="num" id="LN774">774</td><td class="line"><span class='directive'>#      define <span class='macro'>EIGEN_CPUID(abcd,func,id)<span class='expansion'>__asm__ __volatile__ ("xchg{q}\t{%%}rbx, %q1; cpuid; xchg{q}\t{%%}rbx, %q1"<br>: "=a" (abcd[0]), "=&amp;r" (abcd[1]), "=c" (abcd[2]), "=d" (<br>abcd[3]) : "0" (func), "2" (id));</span></span> \</span></td></tr>
<tr class="codeline" data-linenumber="775"><td class="num" id="LN775">775</td><td class="line">         <span class='directive'>__asm__ __volatile__ ("cpuid": "=a" (abcd[0]), "=b" (abcd[1]), "=c" (abcd[2]), "=d" (abcd[3]) : "0" (func), "2" (id) );</span></td></tr>
<tr class="codeline" data-linenumber="776"><td class="num" id="LN776">776</td><td class="line"><span class='directive'>#    endif</span></td></tr>
<tr class="codeline" data-linenumber="777"><td class="num" id="LN777">777</td><td class="line"><span class='directive'>#  elif <span class='macro'>EIGEN_COMP_MSVC<span class='expansion'>0</span></span></span></td></tr>
<tr class="codeline" data-linenumber="778"><td class="num" id="LN778">778</td><td class="line"><span class='directive'>#    if (<span class='macro'>EIGEN_COMP_MSVC<span class='expansion'>0</span></span> &gt; 1500) &amp;&amp; <span class='macro'>EIGEN_ARCH_i386_OR_x86_64<span class='expansion'>1</span></span></span></td></tr>
<tr class="codeline" data-linenumber="779"><td class="num" id="LN779">779</td><td class="line"><span class='directive'>#      define <span class='macro'>EIGEN_CPUID(abcd,func,id)<span class='expansion'>__asm__ __volatile__ ("xchg{q}\t{%%}rbx, %q1; cpuid; xchg{q}\t{%%}rbx, %q1"<br>: "=a" (abcd[0]), "=&amp;r" (abcd[1]), "=c" (abcd[2]), "=d" (<br>abcd[3]) : "0" (func), "2" (id));</span></span> __cpuidex((int*)abcd,func,id)</span></td></tr>
<tr class="codeline" data-linenumber="780"><td class="num" id="LN780">780</td><td class="line"><span class='directive'>#    endif</span></td></tr>
<tr class="codeline" data-linenumber="781"><td class="num" id="LN781">781</td><td class="line"><span class='directive'>#  endif</span></td></tr>
<tr class="codeline" data-linenumber="782"><td class="num" id="LN782">782</td><td class="line"><span class='directive'>#endif</span></td></tr>
<tr class="codeline" data-linenumber="783"><td class="num" id="LN783">783</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="784"><td class="num" id="LN784">784</td><td class="line"><span class='keyword'>namespace</span> internal {</td></tr>
<tr class="codeline" data-linenumber="785"><td class="num" id="LN785">785</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="786"><td class="num" id="LN786">786</td><td class="line"><span class='directive'>#ifdef EIGEN_CPUID</span></td></tr>
<tr class="codeline" data-linenumber="787"><td class="num" id="LN787">787</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="788"><td class="num" id="LN788">788</td><td class="line"><span class='keyword'>inline</span> <span class='keyword'>bool</span> cpuid_is_vendor(<span class='keyword'>int</span> abcd[4], <span class='keyword'>const</span> <span class='keyword'>int</span> vendor[3])</td></tr>
<tr class="codeline" data-linenumber="789"><td class="num" id="LN789">789</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="790"><td class="num" id="LN790">790</td><td class="line">  <span class='keyword'>return</span> abcd[1]==vendor[0] &amp;&amp; abcd[3]==vendor[1] &amp;&amp; abcd[2]==vendor[2];</td></tr>
<tr class="codeline" data-linenumber="791"><td class="num" id="LN791">791</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="792"><td class="num" id="LN792">792</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="793"><td class="num" id="LN793">793</td><td class="line"><span class='keyword'>inline</span> <span class='keyword'>void</span> queryCacheSizes_intel_direct(<span class='keyword'>int</span>&amp; l1, <span class='keyword'>int</span>&amp; l2, <span class='keyword'>int</span>&amp; l3)</td></tr>
<tr class="codeline" data-linenumber="794"><td class="num" id="LN794">794</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="795"><td class="num" id="LN795">795</td><td class="line">  <span class='keyword'>int</span> abcd[4];</td></tr>
<tr class="codeline" data-linenumber="796"><td class="num" id="LN796">796</td><td class="line">  l1 = l2 = l3 = 0;</td></tr>
<tr class="codeline" data-linenumber="797"><td class="num" id="LN797">797</td><td class="line">  <span class='keyword'>int</span> cache_id = 0;</td></tr>
<tr class="codeline" data-linenumber="798"><td class="num" id="LN798">798</td><td class="line">  <span class='keyword'>int</span> cache_type = 0;</td></tr>
<tr class="codeline" data-linenumber="799"><td class="num" id="LN799">799</td><td class="line">  <span class='keyword'>do</span> {</td></tr>
<tr class="codeline" data-linenumber="800"><td class="num" id="LN800">800</td><td class="line">    abcd[0] = abcd[1] = abcd[2] = abcd[3] = 0;</td></tr>
<tr class="codeline" data-linenumber="801"><td class="num" id="LN801">801</td><td class="line">    <span class='macro'>EIGEN_CPUID(abcd,0x4,cache_id)<span class='expansion'>__asm__ __volatile__ ("xchg{q}\t{%%}rbx, %q1; cpuid; xchg{q}\t{%%}rbx, %q1"<br>: "=a" (abcd[0]), "=&amp;r" (abcd[1]), "=c" (abcd[2]), "=d" (<br>abcd[3]) : "0" (0x4), "2" (cache_id));</span></span>;</td></tr>
<tr class="codeline" data-linenumber="802"><td class="num" id="LN802">802</td><td class="line">    cache_type  = (abcd[0] &amp; 0x0F) &gt;&gt; 0;</td></tr>
<tr class="codeline" data-linenumber="803"><td class="num" id="LN803">803</td><td class="line">    <span class='keyword'>if</span>(cache_type==1||cache_type==3) <span class='comment'>// data or unified cache</span></td></tr>
<tr class="codeline" data-linenumber="804"><td class="num" id="LN804">804</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="805"><td class="num" id="LN805">805</td><td class="line">      <span class='keyword'>int</span> cache_level = (abcd[0] &amp; 0xE0) &gt;&gt; 5;  <span class='comment'>// A[7:5]</span></td></tr>
<tr class="codeline" data-linenumber="806"><td class="num" id="LN806">806</td><td class="line">      <span class='keyword'>int</span> ways        = (abcd[1] &amp; 0xFFC00000) &gt;&gt; 22; <span class='comment'>// B[31:22]</span></td></tr>
<tr class="codeline" data-linenumber="807"><td class="num" id="LN807">807</td><td class="line">      <span class='keyword'>int</span> partitions  = (abcd[1] &amp; 0x003FF000) &gt;&gt; 12; <span class='comment'>// B[21:12]</span></td></tr>
<tr class="codeline" data-linenumber="808"><td class="num" id="LN808">808</td><td class="line">      <span class='keyword'>int</span> line_size   = (abcd[1] &amp; 0x00000FFF) &gt;&gt;  0; <span class='comment'>// B[11:0]</span></td></tr>
<tr class="codeline" data-linenumber="809"><td class="num" id="LN809">809</td><td class="line">      <span class='keyword'>int</span> sets        = (abcd[2]);                    <span class='comment'>// C[31:0]</span></td></tr>
<tr class="codeline" data-linenumber="810"><td class="num" id="LN810">810</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="811"><td class="num" id="LN811">811</td><td class="line">      <span class='keyword'>int</span> cache_size = (ways+1) * (partitions+1) * (line_size+1) * (sets+1);</td></tr>
<tr class="codeline" data-linenumber="812"><td class="num" id="LN812">812</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="813"><td class="num" id="LN813">813</td><td class="line">      <span class='keyword'>switch</span>(cache_level)</td></tr>
<tr class="codeline" data-linenumber="814"><td class="num" id="LN814">814</td><td class="line">      {</td></tr>
<tr class="codeline" data-linenumber="815"><td class="num" id="LN815">815</td><td class="line">        <span class='keyword'>case</span> 1: l1 = cache_size; <span class='keyword'>break</span>;</td></tr>
<tr class="codeline" data-linenumber="816"><td class="num" id="LN816">816</td><td class="line">        <span class='keyword'>case</span> 2: l2 = cache_size; <span class='keyword'>break</span>;</td></tr>
<tr class="codeline" data-linenumber="817"><td class="num" id="LN817">817</td><td class="line">        <span class='keyword'>case</span> 3: l3 = cache_size; <span class='keyword'>break</span>;</td></tr>
<tr class="codeline" data-linenumber="818"><td class="num" id="LN818">818</td><td class="line">        <span class='keyword'>default</span>: <span class='keyword'>break</span>;</td></tr>
<tr class="codeline" data-linenumber="819"><td class="num" id="LN819">819</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="820"><td class="num" id="LN820">820</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="821"><td class="num" id="LN821">821</td><td class="line">    cache_id++;</td></tr>
<tr class="codeline" data-linenumber="822"><td class="num" id="LN822">822</td><td class="line">  } <span class='keyword'>while</span>(cache_type&gt;0 &amp;&amp; cache_id&lt;16);</td></tr>
<tr class="codeline" data-linenumber="823"><td class="num" id="LN823">823</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="824"><td class="num" id="LN824">824</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="825"><td class="num" id="LN825">825</td><td class="line"><span class='keyword'>inline</span> <span class='keyword'>void</span> queryCacheSizes_intel_codes(<span class='keyword'>int</span>&amp; l1, <span class='keyword'>int</span>&amp; l2, <span class='keyword'>int</span>&amp; l3)</td></tr>
<tr class="codeline" data-linenumber="826"><td class="num" id="LN826">826</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="827"><td class="num" id="LN827">827</td><td class="line">  <span class='keyword'>int</span> abcd[4];</td></tr>
<tr class="codeline" data-linenumber="828"><td class="num" id="LN828">828</td><td class="line">  abcd[0] = abcd[1] = abcd[2] = abcd[3] = 0;</td></tr>
<tr class="codeline" data-linenumber="829"><td class="num" id="LN829">829</td><td class="line">  l1 = l2 = l3 = 0;</td></tr>
<tr class="codeline" data-linenumber="830"><td class="num" id="LN830">830</td><td class="line">  <span class='macro'>EIGEN_CPUID(abcd,0x00000002,0)<span class='expansion'>__asm__ __volatile__ ("xchg{q}\t{%%}rbx, %q1; cpuid; xchg{q}\t{%%}rbx, %q1"<br>: "=a" (abcd[0]), "=&amp;r" (abcd[1]), "=c" (abcd[2]), "=d" (<br>abcd[3]) : "0" (0x00000002), "2" (0));</span></span>;</td></tr>
<tr class="codeline" data-linenumber="831"><td class="num" id="LN831">831</td><td class="line">  <span class='keyword'>unsigned</span> <span class='keyword'>char</span> * bytes = <span class='keyword'>reinterpret_cast</span>&lt;<span class='keyword'>unsigned</span> <span class='keyword'>char</span> *&gt;(abcd)+2;</td></tr>
<tr class="codeline" data-linenumber="832"><td class="num" id="LN832">832</td><td class="line">  <span class='keyword'>bool</span> check_for_p2_core2 = <span class='keyword'>false</span>;</td></tr>
<tr class="codeline" data-linenumber="833"><td class="num" id="LN833">833</td><td class="line">  <span class='keyword'>for</span>(<span class='keyword'>int</span> i=0; i&lt;14; ++i)</td></tr>
<tr class="codeline" data-linenumber="834"><td class="num" id="LN834">834</td><td class="line">  {</td></tr>
<tr class="codeline" data-linenumber="835"><td class="num" id="LN835">835</td><td class="line">    <span class='keyword'>switch</span>(bytes[i])</td></tr>
<tr class="codeline" data-linenumber="836"><td class="num" id="LN836">836</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="837"><td class="num" id="LN837">837</td><td class="line">      <span class='keyword'>case</span> 0x0A: l1 = 8; <span class='keyword'>break</span>;   <span class='comment'>// 0Ah   data L1 cache, 8 KB, 2 ways, 32 byte lines</span></td></tr>
<tr class="codeline" data-linenumber="838"><td class="num" id="LN838">838</td><td class="line">      <span class='keyword'>case</span> 0x0C: l1 = 16; <span class='keyword'>break</span>;  <span class='comment'>// 0Ch   data L1 cache, 16 KB, 4 ways, 32 byte lines</span></td></tr>
<tr class="codeline" data-linenumber="839"><td class="num" id="LN839">839</td><td class="line">      <span class='keyword'>case</span> 0x0E: l1 = 24; <span class='keyword'>break</span>;  <span class='comment'>// 0Eh   data L1 cache, 24 KB, 6 ways, 64 byte lines</span></td></tr>
<tr class="codeline" data-linenumber="840"><td class="num" id="LN840">840</td><td class="line">      <span class='keyword'>case</span> 0x10: l1 = 16; <span class='keyword'>break</span>;  <span class='comment'>// 10h   data L1 cache, 16 KB, 4 ways, 32 byte lines (IA-64)</span></td></tr>
<tr class="codeline" data-linenumber="841"><td class="num" id="LN841">841</td><td class="line">      <span class='keyword'>case</span> 0x15: l1 = 16; <span class='keyword'>break</span>;  <span class='comment'>// 15h   code L1 cache, 16 KB, 4 ways, 32 byte lines (IA-64)</span></td></tr>
<tr class="codeline" data-linenumber="842"><td class="num" id="LN842">842</td><td class="line">      <span class='keyword'>case</span> 0x2C: l1 = 32; <span class='keyword'>break</span>;  <span class='comment'>// 2Ch   data L1 cache, 32 KB, 8 ways, 64 byte lines</span></td></tr>
<tr class="codeline" data-linenumber="843"><td class="num" id="LN843">843</td><td class="line">      <span class='keyword'>case</span> 0x30: l1 = 32; <span class='keyword'>break</span>;  <span class='comment'>// 30h   code L1 cache, 32 KB, 8 ways, 64 byte lines</span></td></tr>
<tr class="codeline" data-linenumber="844"><td class="num" id="LN844">844</td><td class="line">      <span class='keyword'>case</span> 0x60: l1 = 16; <span class='keyword'>break</span>;  <span class='comment'>// 60h   data L1 cache, 16 KB, 8 ways, 64 byte lines, sectored</span></td></tr>
<tr class="codeline" data-linenumber="845"><td class="num" id="LN845">845</td><td class="line">      <span class='keyword'>case</span> 0x66: l1 = 8; <span class='keyword'>break</span>;   <span class='comment'>// 66h   data L1 cache, 8 KB, 4 ways, 64 byte lines, sectored</span></td></tr>
<tr class="codeline" data-linenumber="846"><td class="num" id="LN846">846</td><td class="line">      <span class='keyword'>case</span> 0x67: l1 = 16; <span class='keyword'>break</span>;  <span class='comment'>// 67h   data L1 cache, 16 KB, 4 ways, 64 byte lines, sectored</span></td></tr>
<tr class="codeline" data-linenumber="847"><td class="num" id="LN847">847</td><td class="line">      <span class='keyword'>case</span> 0x68: l1 = 32; <span class='keyword'>break</span>;  <span class='comment'>// 68h   data L1 cache, 32 KB, 4 ways, 64 byte lines, sectored</span></td></tr>
<tr class="codeline" data-linenumber="848"><td class="num" id="LN848">848</td><td class="line">      <span class='keyword'>case</span> 0x1A: l2 = 96; <span class='keyword'>break</span>;   <span class='comment'>// code and data L2 cache, 96 KB, 6 ways, 64 byte lines (IA-64)</span></td></tr>
<tr class="codeline" data-linenumber="849"><td class="num" id="LN849">849</td><td class="line">      <span class='keyword'>case</span> 0x22: l3 = 512; <span class='keyword'>break</span>;   <span class='comment'>// code and data L3 cache, 512 KB, 4 ways (!), 64 byte lines, dual-sectored</span></td></tr>
<tr class="codeline" data-linenumber="850"><td class="num" id="LN850">850</td><td class="line">      <span class='keyword'>case</span> 0x23: l3 = 1024; <span class='keyword'>break</span>;   <span class='comment'>// code and data L3 cache, 1024 KB, 8 ways, 64 byte lines, dual-sectored</span></td></tr>
<tr class="codeline" data-linenumber="851"><td class="num" id="LN851">851</td><td class="line">      <span class='keyword'>case</span> 0x25: l3 = 2048; <span class='keyword'>break</span>;   <span class='comment'>// code and data L3 cache, 2048 KB, 8 ways, 64 byte lines, dual-sectored</span></td></tr>
<tr class="codeline" data-linenumber="852"><td class="num" id="LN852">852</td><td class="line">      <span class='keyword'>case</span> 0x29: l3 = 4096; <span class='keyword'>break</span>;   <span class='comment'>// code and data L3 cache, 4096 KB, 8 ways, 64 byte lines, dual-sectored</span></td></tr>
<tr class="codeline" data-linenumber="853"><td class="num" id="LN853">853</td><td class="line">      <span class='keyword'>case</span> 0x39: l2 = 128; <span class='keyword'>break</span>;   <span class='comment'>// code and data L2 cache, 128 KB, 4 ways, 64 byte lines, sectored</span></td></tr>
<tr class="codeline" data-linenumber="854"><td class="num" id="LN854">854</td><td class="line">      <span class='keyword'>case</span> 0x3A: l2 = 192; <span class='keyword'>break</span>;   <span class='comment'>// code and data L2 cache, 192 KB, 6 ways, 64 byte lines, sectored</span></td></tr>
<tr class="codeline" data-linenumber="855"><td class="num" id="LN855">855</td><td class="line">      <span class='keyword'>case</span> 0x3B: l2 = 128; <span class='keyword'>break</span>;   <span class='comment'>// code and data L2 cache, 128 KB, 2 ways, 64 byte lines, sectored</span></td></tr>
<tr class="codeline" data-linenumber="856"><td class="num" id="LN856">856</td><td class="line">      <span class='keyword'>case</span> 0x3C: l2 = 256; <span class='keyword'>break</span>;   <span class='comment'>// code and data L2 cache, 256 KB, 4 ways, 64 byte lines, sectored</span></td></tr>
<tr class="codeline" data-linenumber="857"><td class="num" id="LN857">857</td><td class="line">      <span class='keyword'>case</span> 0x3D: l2 = 384; <span class='keyword'>break</span>;   <span class='comment'>// code and data L2 cache, 384 KB, 6 ways, 64 byte lines, sectored</span></td></tr>
<tr class="codeline" data-linenumber="858"><td class="num" id="LN858">858</td><td class="line">      <span class='keyword'>case</span> 0x3E: l2 = 512; <span class='keyword'>break</span>;   <span class='comment'>// code and data L2 cache, 512 KB, 4 ways, 64 byte lines, sectored</span></td></tr>
<tr class="codeline" data-linenumber="859"><td class="num" id="LN859">859</td><td class="line">      <span class='keyword'>case</span> 0x40: l2 = 0; <span class='keyword'>break</span>;   <span class='comment'>// no integrated L2 cache (P6 core) or L3 cache (P4 core)</span></td></tr>
<tr class="codeline" data-linenumber="860"><td class="num" id="LN860">860</td><td class="line">      <span class='keyword'>case</span> 0x41: l2 = 128; <span class='keyword'>break</span>;   <span class='comment'>// code and data L2 cache, 128 KB, 4 ways, 32 byte lines</span></td></tr>
<tr class="codeline" data-linenumber="861"><td class="num" id="LN861">861</td><td class="line">      <span class='keyword'>case</span> 0x42: l2 = 256; <span class='keyword'>break</span>;   <span class='comment'>// code and data L2 cache, 256 KB, 4 ways, 32 byte lines</span></td></tr>
<tr class="codeline" data-linenumber="862"><td class="num" id="LN862">862</td><td class="line">      <span class='keyword'>case</span> 0x43: l2 = 512; <span class='keyword'>break</span>;   <span class='comment'>// code and data L2 cache, 512 KB, 4 ways, 32 byte lines</span></td></tr>
<tr class="codeline" data-linenumber="863"><td class="num" id="LN863">863</td><td class="line">      <span class='keyword'>case</span> 0x44: l2 = 1024; <span class='keyword'>break</span>;   <span class='comment'>// code and data L2 cache, 1024 KB, 4 ways, 32 byte lines</span></td></tr>
<tr class="codeline" data-linenumber="864"><td class="num" id="LN864">864</td><td class="line">      <span class='keyword'>case</span> 0x45: l2 = 2048; <span class='keyword'>break</span>;   <span class='comment'>// code and data L2 cache, 2048 KB, 4 ways, 32 byte lines</span></td></tr>
<tr class="codeline" data-linenumber="865"><td class="num" id="LN865">865</td><td class="line">      <span class='keyword'>case</span> 0x46: l3 = 4096; <span class='keyword'>break</span>;   <span class='comment'>// code and data L3 cache, 4096 KB, 4 ways, 64 byte lines</span></td></tr>
<tr class="codeline" data-linenumber="866"><td class="num" id="LN866">866</td><td class="line">      <span class='keyword'>case</span> 0x47: l3 = 8192; <span class='keyword'>break</span>;   <span class='comment'>// code and data L3 cache, 8192 KB, 8 ways, 64 byte lines</span></td></tr>
<tr class="codeline" data-linenumber="867"><td class="num" id="LN867">867</td><td class="line">      <span class='keyword'>case</span> 0x48: l2 = 3072; <span class='keyword'>break</span>;   <span class='comment'>// code and data L2 cache, 3072 KB, 12 ways, 64 byte lines</span></td></tr>
<tr class="codeline" data-linenumber="868"><td class="num" id="LN868">868</td><td class="line">      <span class='keyword'>case</span> 0x49: <span class='keyword'>if</span>(l2!=0) l3 = 4096; <span class='keyword'>else</span> {check_for_p2_core2=<span class='keyword'>true</span>; l3 = l2 = 4096;} <span class='keyword'>break</span>;<span class='comment'>// code and data L3 cache, 4096 KB, 16 ways, 64 byte lines (P4) or L2 for core2</span></td></tr>
<tr class="codeline" data-linenumber="869"><td class="num" id="LN869">869</td><td class="line">      <span class='keyword'>case</span> 0x4A: l3 = 6144; <span class='keyword'>break</span>;   <span class='comment'>// code and data L3 cache, 6144 KB, 12 ways, 64 byte lines</span></td></tr>
<tr class="codeline" data-linenumber="870"><td class="num" id="LN870">870</td><td class="line">      <span class='keyword'>case</span> 0x4B: l3 = 8192; <span class='keyword'>break</span>;   <span class='comment'>// code and data L3 cache, 8192 KB, 16 ways, 64 byte lines</span></td></tr>
<tr class="codeline" data-linenumber="871"><td class="num" id="LN871">871</td><td class="line">      <span class='keyword'>case</span> 0x4C: l3 = 12288; <span class='keyword'>break</span>;   <span class='comment'>// code and data L3 cache, 12288 KB, 12 ways, 64 byte lines</span></td></tr>
<tr class="codeline" data-linenumber="872"><td class="num" id="LN872">872</td><td class="line">      <span class='keyword'>case</span> 0x4D: l3 = 16384; <span class='keyword'>break</span>;   <span class='comment'>// code and data L3 cache, 16384 KB, 16 ways, 64 byte lines</span></td></tr>
<tr class="codeline" data-linenumber="873"><td class="num" id="LN873">873</td><td class="line">      <span class='keyword'>case</span> 0x4E: l2 = 6144; <span class='keyword'>break</span>;   <span class='comment'>// code and data L2 cache, 6144 KB, 24 ways, 64 byte lines</span></td></tr>
<tr class="codeline" data-linenumber="874"><td class="num" id="LN874">874</td><td class="line">      <span class='keyword'>case</span> 0x78: l2 = 1024; <span class='keyword'>break</span>;   <span class='comment'>// code and data L2 cache, 1024 KB, 4 ways, 64 byte lines</span></td></tr>
<tr class="codeline" data-linenumber="875"><td class="num" id="LN875">875</td><td class="line">      <span class='keyword'>case</span> 0x79: l2 = 128; <span class='keyword'>break</span>;   <span class='comment'>// code and data L2 cache, 128 KB, 8 ways, 64 byte lines, dual-sectored</span></td></tr>
<tr class="codeline" data-linenumber="876"><td class="num" id="LN876">876</td><td class="line">      <span class='keyword'>case</span> 0x7A: l2 = 256; <span class='keyword'>break</span>;   <span class='comment'>// code and data L2 cache, 256 KB, 8 ways, 64 byte lines, dual-sectored</span></td></tr>
<tr class="codeline" data-linenumber="877"><td class="num" id="LN877">877</td><td class="line">      <span class='keyword'>case</span> 0x7B: l2 = 512; <span class='keyword'>break</span>;   <span class='comment'>// code and data L2 cache, 512 KB, 8 ways, 64 byte lines, dual-sectored</span></td></tr>
<tr class="codeline" data-linenumber="878"><td class="num" id="LN878">878</td><td class="line">      <span class='keyword'>case</span> 0x7C: l2 = 1024; <span class='keyword'>break</span>;   <span class='comment'>// code and data L2 cache, 1024 KB, 8 ways, 64 byte lines, dual-sectored</span></td></tr>
<tr class="codeline" data-linenumber="879"><td class="num" id="LN879">879</td><td class="line">      <span class='keyword'>case</span> 0x7D: l2 = 2048; <span class='keyword'>break</span>;   <span class='comment'>// code and data L2 cache, 2048 KB, 8 ways, 64 byte lines</span></td></tr>
<tr class="codeline" data-linenumber="880"><td class="num" id="LN880">880</td><td class="line">      <span class='keyword'>case</span> 0x7E: l2 = 256; <span class='keyword'>break</span>;   <span class='comment'>// code and data L2 cache, 256 KB, 8 ways, 128 byte lines, sect. (IA-64)</span></td></tr>
<tr class="codeline" data-linenumber="881"><td class="num" id="LN881">881</td><td class="line">      <span class='keyword'>case</span> 0x7F: l2 = 512; <span class='keyword'>break</span>;   <span class='comment'>// code and data L2 cache, 512 KB, 2 ways, 64 byte lines</span></td></tr>
<tr class="codeline" data-linenumber="882"><td class="num" id="LN882">882</td><td class="line">      <span class='keyword'>case</span> 0x80: l2 = 512; <span class='keyword'>break</span>;   <span class='comment'>// code and data L2 cache, 512 KB, 8 ways, 64 byte lines</span></td></tr>
<tr class="codeline" data-linenumber="883"><td class="num" id="LN883">883</td><td class="line">      <span class='keyword'>case</span> 0x81: l2 = 128; <span class='keyword'>break</span>;   <span class='comment'>// code and data L2 cache, 128 KB, 8 ways, 32 byte lines</span></td></tr>
<tr class="codeline" data-linenumber="884"><td class="num" id="LN884">884</td><td class="line">      <span class='keyword'>case</span> 0x82: l2 = 256; <span class='keyword'>break</span>;   <span class='comment'>// code and data L2 cache, 256 KB, 8 ways, 32 byte lines</span></td></tr>
<tr class="codeline" data-linenumber="885"><td class="num" id="LN885">885</td><td class="line">      <span class='keyword'>case</span> 0x83: l2 = 512; <span class='keyword'>break</span>;   <span class='comment'>// code and data L2 cache, 512 KB, 8 ways, 32 byte lines</span></td></tr>
<tr class="codeline" data-linenumber="886"><td class="num" id="LN886">886</td><td class="line">      <span class='keyword'>case</span> 0x84: l2 = 1024; <span class='keyword'>break</span>;   <span class='comment'>// code and data L2 cache, 1024 KB, 8 ways, 32 byte lines</span></td></tr>
<tr class="codeline" data-linenumber="887"><td class="num" id="LN887">887</td><td class="line">      <span class='keyword'>case</span> 0x85: l2 = 2048; <span class='keyword'>break</span>;   <span class='comment'>// code and data L2 cache, 2048 KB, 8 ways, 32 byte lines</span></td></tr>
<tr class="codeline" data-linenumber="888"><td class="num" id="LN888">888</td><td class="line">      <span class='keyword'>case</span> 0x86: l2 = 512; <span class='keyword'>break</span>;   <span class='comment'>// code and data L2 cache, 512 KB, 4 ways, 64 byte lines</span></td></tr>
<tr class="codeline" data-linenumber="889"><td class="num" id="LN889">889</td><td class="line">      <span class='keyword'>case</span> 0x87: l2 = 1024; <span class='keyword'>break</span>;   <span class='comment'>// code and data L2 cache, 1024 KB, 8 ways, 64 byte lines</span></td></tr>
<tr class="codeline" data-linenumber="890"><td class="num" id="LN890">890</td><td class="line">      <span class='keyword'>case</span> 0x88: l3 = 2048; <span class='keyword'>break</span>;   <span class='comment'>// code and data L3 cache, 2048 KB, 4 ways, 64 byte lines (IA-64)</span></td></tr>
<tr class="codeline" data-linenumber="891"><td class="num" id="LN891">891</td><td class="line">      <span class='keyword'>case</span> 0x89: l3 = 4096; <span class='keyword'>break</span>;   <span class='comment'>// code and data L3 cache, 4096 KB, 4 ways, 64 byte lines (IA-64)</span></td></tr>
<tr class="codeline" data-linenumber="892"><td class="num" id="LN892">892</td><td class="line">      <span class='keyword'>case</span> 0x8A: l3 = 8192; <span class='keyword'>break</span>;   <span class='comment'>// code and data L3 cache, 8192 KB, 4 ways, 64 byte lines (IA-64)</span></td></tr>
<tr class="codeline" data-linenumber="893"><td class="num" id="LN893">893</td><td class="line">      <span class='keyword'>case</span> 0x8D: l3 = 3072; <span class='keyword'>break</span>;   <span class='comment'>// code and data L3 cache, 3072 KB, 12 ways, 128 byte lines (IA-64)</span></td></tr>
<tr class="codeline" data-linenumber="894"><td class="num" id="LN894">894</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="895"><td class="num" id="LN895">895</td><td class="line">      <span class='keyword'>default</span>: <span class='keyword'>break</span>;</td></tr>
<tr class="codeline" data-linenumber="896"><td class="num" id="LN896">896</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="897"><td class="num" id="LN897">897</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="898"><td class="num" id="LN898">898</td><td class="line">  <span class='keyword'>if</span>(check_for_p2_core2 &amp;&amp; l2 == l3)</td></tr>
<tr class="codeline" data-linenumber="899"><td class="num" id="LN899">899</td><td class="line">    l3 = 0;</td></tr>
<tr class="codeline" data-linenumber="900"><td class="num" id="LN900">900</td><td class="line">  l1 *= 1024;</td></tr>
<tr class="codeline" data-linenumber="901"><td class="num" id="LN901">901</td><td class="line">  l2 *= 1024;</td></tr>
<tr class="codeline" data-linenumber="902"><td class="num" id="LN902">902</td><td class="line">  l3 *= 1024;</td></tr>
<tr class="codeline" data-linenumber="903"><td class="num" id="LN903">903</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="904"><td class="num" id="LN904">904</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="905"><td class="num" id="LN905">905</td><td class="line"><span class='keyword'>inline</span> <span class='keyword'>void</span> queryCacheSizes_intel(<span class='keyword'>int</span>&amp; l1, <span class='keyword'>int</span>&amp; l2, <span class='keyword'>int</span>&amp; l3, <span class='keyword'>int</span> max_std_funcs)</td></tr>
<tr class="codeline" data-linenumber="906"><td class="num" id="LN906">906</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="907"><td class="num" id="LN907">907</td><td class="line">  <span class='keyword'>if</span>(max_std_funcs&gt;=4)</td></tr>
<tr class="codeline" data-linenumber="908"><td class="num" id="LN908">908</td><td class="line">    queryCacheSizes_intel_direct(l1,l2,l3);</td></tr>
<tr class="codeline" data-linenumber="909"><td class="num" id="LN909">909</td><td class="line">  <span class='keyword'>else</span></td></tr>
<tr class="codeline" data-linenumber="910"><td class="num" id="LN910">910</td><td class="line">    queryCacheSizes_intel_codes(l1,l2,l3);</td></tr>
<tr class="codeline" data-linenumber="911"><td class="num" id="LN911">911</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="912"><td class="num" id="LN912">912</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="913"><td class="num" id="LN913">913</td><td class="line"><span class='keyword'>inline</span> <span class='keyword'>void</span> queryCacheSizes_amd(<span class='keyword'>int</span>&amp; l1, <span class='keyword'>int</span>&amp; l2, <span class='keyword'>int</span>&amp; l3)</td></tr>
<tr class="codeline" data-linenumber="914"><td class="num" id="LN914">914</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="915"><td class="num" id="LN915">915</td><td class="line">  <span class='keyword'>int</span> abcd[4];</td></tr>
<tr class="codeline" data-linenumber="916"><td class="num" id="LN916">916</td><td class="line">  abcd[0] = abcd[1] = abcd[2] = abcd[3] = 0;</td></tr>
<tr class="codeline" data-linenumber="917"><td class="num" id="LN917">917</td><td class="line">  <span class='macro'>EIGEN_CPUID(abcd,0x80000005,0)<span class='expansion'>__asm__ __volatile__ ("xchg{q}\t{%%}rbx, %q1; cpuid; xchg{q}\t{%%}rbx, %q1"<br>: "=a" (abcd[0]), "=&amp;r" (abcd[1]), "=c" (abcd[2]), "=d" (<br>abcd[3]) : "0" (0x80000005), "2" (0));</span></span>;</td></tr>
<tr class="codeline" data-linenumber="918"><td class="num" id="LN918">918</td><td class="line">  l1 = (abcd[2] &gt;&gt; 24) * 1024; <span class='comment'>// C[31:24] = L1 size in KB</span></td></tr>
<tr class="codeline" data-linenumber="919"><td class="num" id="LN919">919</td><td class="line">  abcd[0] = abcd[1] = abcd[2] = abcd[3] = 0;</td></tr>
<tr class="codeline" data-linenumber="920"><td class="num" id="LN920">920</td><td class="line">  <span class='macro'>EIGEN_CPUID(abcd,0x80000006,0)<span class='expansion'>__asm__ __volatile__ ("xchg{q}\t{%%}rbx, %q1; cpuid; xchg{q}\t{%%}rbx, %q1"<br>: "=a" (abcd[0]), "=&amp;r" (abcd[1]), "=c" (abcd[2]), "=d" (<br>abcd[3]) : "0" (0x80000006), "2" (0));</span></span>;</td></tr>
<tr class="codeline" data-linenumber="921"><td class="num" id="LN921">921</td><td class="line">  l2 = (abcd[2] &gt;&gt; 16) * 1024; <span class='comment'>// C[31;16] = l2 cache size in KB</span></td></tr>
<tr class="codeline" data-linenumber="922"><td class="num" id="LN922">922</td><td class="line">  l3 = ((abcd[3] &amp; 0xFFFC000) &gt;&gt; 18) * 512 * 1024; <span class='comment'>// D[31;18] = l3 cache size in 512KB</span></td></tr>
<tr class="codeline" data-linenumber="923"><td class="num" id="LN923">923</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="924"><td class="num" id="LN924">924</td><td class="line"><span class='directive'>#endif</span></td></tr>
<tr class="codeline" data-linenumber="925"><td class="num" id="LN925">925</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="926"><td class="num" id="LN926">926</td><td class="line"><span class='comment'>/** \internal</span></td></tr>
<tr class="codeline" data-linenumber="927"><td class="num" id="LN927">927</td><td class="line"> <span class='comment'>* Queries and returns the cache sizes in Bytes of the L1, L2, and L3 data caches respectively */</span></td></tr>
<tr class="codeline" data-linenumber="928"><td class="num" id="LN928">928</td><td class="line"><span class='keyword'>inline</span> <span class='keyword'>void</span> queryCacheSizes(<span class='keyword'>int</span>&amp; l1, <span class='keyword'>int</span>&amp; l2, <span class='keyword'>int</span>&amp; l3)</td></tr>
<tr class="codeline" data-linenumber="929"><td class="num" id="LN929">929</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="930"><td class="num" id="LN930">930</td><td class="line">  <span class='directive'>#ifdef EIGEN_CPUID</span></td></tr>
<tr class="codeline" data-linenumber="931"><td class="num" id="LN931">931</td><td class="line">  <span class='keyword'>int</span> abcd[4];</td></tr>
<tr class="codeline" data-linenumber="932"><td class="num" id="LN932">932</td><td class="line">  <span class='keyword'>const</span> <span class='keyword'>int</span> GenuineIntel[] = {0x756e6547, 0x49656e69, 0x6c65746e};</td></tr>
<tr class="codeline" data-linenumber="933"><td class="num" id="LN933">933</td><td class="line">  <span class='keyword'>const</span> <span class='keyword'>int</span> AuthenticAMD[] = {0x68747541, 0x69746e65, 0x444d4163};</td></tr>
<tr class="codeline" data-linenumber="934"><td class="num" id="LN934">934</td><td class="line">  <span class='keyword'>const</span> <span class='keyword'>int</span> AMDisbetter_[] = {0x69444d41, 0x74656273, 0x21726574}; <span class='comment'>// "AMDisbetter!"</span></td></tr>
<tr class="codeline" data-linenumber="935"><td class="num" id="LN935">935</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="936"><td class="num" id="LN936">936</td><td class="line">  <span class='comment'>// identify the CPU vendor</span></td></tr>
<tr class="codeline" data-linenumber="937"><td class="num" id="LN937">937</td><td class="line">  <span class='macro'>EIGEN_CPUID(abcd,0x0,0)<span class='expansion'>__asm__ __volatile__ ("xchg{q}\t{%%}rbx, %q1; cpuid; xchg{q}\t{%%}rbx, %q1"<br>: "=a" (abcd[0]), "=&amp;r" (abcd[1]), "=c" (abcd[2]), "=d" (<br>abcd[3]) : "0" (0x0), "2" (0));</span></span>;</td></tr>
<tr class="codeline" data-linenumber="938"><td class="num" id="LN938">938</td><td class="line">  <span class='keyword'>int</span> max_std_funcs = abcd[1];</td></tr>
<tr class="codeline" data-linenumber="939"><td class="num" id="LN939">939</td><td class="line">  <span class='keyword'>if</span>(cpuid_is_vendor(abcd,GenuineIntel))</td></tr>
<tr class="codeline" data-linenumber="940"><td class="num" id="LN940">940</td><td class="line">    queryCacheSizes_intel(l1,l2,l3,max_std_funcs);</td></tr>
<tr class="codeline" data-linenumber="941"><td class="num" id="LN941">941</td><td class="line">  <span class='keyword'>else</span> <span class='keyword'>if</span>(cpuid_is_vendor(abcd,AuthenticAMD) || cpuid_is_vendor(abcd,AMDisbetter_))</td></tr>
<tr class="codeline" data-linenumber="942"><td class="num" id="LN942">942</td><td class="line">    queryCacheSizes_amd(l1,l2,l3);</td></tr>
<tr class="codeline" data-linenumber="943"><td class="num" id="LN943">943</td><td class="line">  <span class='keyword'>else</span></td></tr>
<tr class="codeline" data-linenumber="944"><td class="num" id="LN944">944</td><td class="line">    <span class='comment'>// by default let's use Intel's API</span></td></tr>
<tr class="codeline" data-linenumber="945"><td class="num" id="LN945">945</td><td class="line">    queryCacheSizes_intel(l1,l2,l3,max_std_funcs);</td></tr>
<tr class="codeline" data-linenumber="946"><td class="num" id="LN946">946</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="947"><td class="num" id="LN947">947</td><td class="line">  <span class='comment'>// here is the list of other vendors:</span></td></tr>
<tr class="codeline" data-linenumber="948"><td class="num" id="LN948">948</td><td class="line"><span class='comment'>//   ||cpuid_is_vendor(abcd,"VIA VIA VIA ")</span></td></tr>
<tr class="codeline" data-linenumber="949"><td class="num" id="LN949">949</td><td class="line"><span class='comment'>//   ||cpuid_is_vendor(abcd,"CyrixInstead")</span></td></tr>
<tr class="codeline" data-linenumber="950"><td class="num" id="LN950">950</td><td class="line"><span class='comment'>//   ||cpuid_is_vendor(abcd,"CentaurHauls")</span></td></tr>
<tr class="codeline" data-linenumber="951"><td class="num" id="LN951">951</td><td class="line"><span class='comment'>//   ||cpuid_is_vendor(abcd,"GenuineTMx86")</span></td></tr>
<tr class="codeline" data-linenumber="952"><td class="num" id="LN952">952</td><td class="line"><span class='comment'>//   ||cpuid_is_vendor(abcd,"TransmetaCPU")</span></td></tr>
<tr class="codeline" data-linenumber="953"><td class="num" id="LN953">953</td><td class="line"><span class='comment'>//   ||cpuid_is_vendor(abcd,"RiseRiseRise")</span></td></tr>
<tr class="codeline" data-linenumber="954"><td class="num" id="LN954">954</td><td class="line"><span class='comment'>//   ||cpuid_is_vendor(abcd,"Geode by NSC")</span></td></tr>
<tr class="codeline" data-linenumber="955"><td class="num" id="LN955">955</td><td class="line"><span class='comment'>//   ||cpuid_is_vendor(abcd,"SiS SiS SiS ")</span></td></tr>
<tr class="codeline" data-linenumber="956"><td class="num" id="LN956">956</td><td class="line"><span class='comment'>//   ||cpuid_is_vendor(abcd,"UMC UMC UMC ")</span></td></tr>
<tr class="codeline" data-linenumber="957"><td class="num" id="LN957">957</td><td class="line"><span class='comment'>//   ||cpuid_is_vendor(abcd,"NexGenDriven")</span></td></tr>
<tr class="codeline" data-linenumber="958"><td class="num" id="LN958">958</td><td class="line">  <span class='directive'>#else</span></td></tr>
<tr class="codeline" data-linenumber="959"><td class="num" id="LN959">959</td><td class="line">  l1 = l2 = l3 = -1;</td></tr>
<tr class="codeline" data-linenumber="960"><td class="num" id="LN960">960</td><td class="line">  <span class='directive'>#endif</span></td></tr>
<tr class="codeline" data-linenumber="961"><td class="num" id="LN961">961</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="962"><td class="num" id="LN962">962</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="963"><td class="num" id="LN963">963</td><td class="line"><span class='comment'>/** \internal</span></td></tr>
<tr class="codeline" data-linenumber="964"><td class="num" id="LN964">964</td><td class="line"> <span class='comment'>* \returns the size in Bytes of the L1 data cache */</span></td></tr>
<tr class="codeline" data-linenumber="965"><td class="num" id="LN965">965</td><td class="line"><span class='keyword'>inline</span> <span class='keyword'>int</span> queryL1CacheSize()</td></tr>
<tr class="codeline" data-linenumber="966"><td class="num" id="LN966">966</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="967"><td class="num" id="LN967">967</td><td class="line">  <span class='keyword'>int</span> l1(-1), l2, l3;</td></tr>
<tr class="codeline" data-linenumber="968"><td class="num" id="LN968">968</td><td class="line">  queryCacheSizes(l1,l2,l3);</td></tr>
<tr class="codeline" data-linenumber="969"><td class="num" id="LN969">969</td><td class="line">  <span class='keyword'>return</span> l1;</td></tr>
<tr class="codeline" data-linenumber="970"><td class="num" id="LN970">970</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="971"><td class="num" id="LN971">971</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="972"><td class="num" id="LN972">972</td><td class="line"><span class='comment'>/** \internal</span></td></tr>
<tr class="codeline" data-linenumber="973"><td class="num" id="LN973">973</td><td class="line"> <span class='comment'>* \returns the size in Bytes of the L2 or L3 cache if this later is present */</span></td></tr>
<tr class="codeline" data-linenumber="974"><td class="num" id="LN974">974</td><td class="line"><span class='keyword'>inline</span> <span class='keyword'>int</span> queryTopLevelCacheSize()</td></tr>
<tr class="codeline" data-linenumber="975"><td class="num" id="LN975">975</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="976"><td class="num" id="LN976">976</td><td class="line">  <span class='keyword'>int</span> l1, l2(-1), l3(-1);</td></tr>
<tr class="codeline" data-linenumber="977"><td class="num" id="LN977">977</td><td class="line">  queryCacheSizes(l1,l2,l3);</td></tr>
<tr class="codeline" data-linenumber="978"><td class="num" id="LN978">978</td><td class="line">  <span class='keyword'>return</span> (std::max)(l2,l3);</td></tr>
<tr class="codeline" data-linenumber="979"><td class="num" id="LN979">979</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="980"><td class="num" id="LN980">980</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="981"><td class="num" id="LN981">981</td><td class="line">} <span class='comment'>// end namespace internal</span></td></tr>
<tr class="codeline" data-linenumber="982"><td class="num" id="LN982">982</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="983"><td class="num" id="LN983">983</td><td class="line">} <span class='comment'>// end namespace Eigen</span></td></tr>
<tr class="codeline" data-linenumber="984"><td class="num" id="LN984">984</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="985"><td class="num" id="LN985">985</td><td class="line"><span class='directive'>#endif // EIGEN_MEMORY_H</span></td></tr>
</table><hr class=divider>
<div id=File42683>
<div class=FileNav><a href="#File34297">&#x2190;</a></div><h4 class=FileName>/Users/u237002/Dropbox/Hacking/sat/arts/3rdparty/Eigen/src/Core/Ref.h</h4>
</div>
<table class="code" data-fileid="42683">
<tr class="codeline" data-linenumber="1"><td class="num" id="LN1">1</td><td class="line"><span class='comment'>// This file is part of Eigen, a lightweight C++ template library</span></td></tr>
<tr class="codeline" data-linenumber="2"><td class="num" id="LN2">2</td><td class="line"><span class='comment'>// for linear algebra.</span></td></tr>
<tr class="codeline" data-linenumber="3"><td class="num" id="LN3">3</td><td class="line"><span class='comment'>//</span></td></tr>
<tr class="codeline" data-linenumber="4"><td class="num" id="LN4">4</td><td class="line"><span class='comment'>// Copyright (C) 2012 Gael Guennebaud &lt;gael.guennebaud@inria.fr&gt;</span></td></tr>
<tr class="codeline" data-linenumber="5"><td class="num" id="LN5">5</td><td class="line"><span class='comment'>//</span></td></tr>
<tr class="codeline" data-linenumber="6"><td class="num" id="LN6">6</td><td class="line"><span class='comment'>// This Source Code Form is subject to the terms of the Mozilla</span></td></tr>
<tr class="codeline" data-linenumber="7"><td class="num" id="LN7">7</td><td class="line"><span class='comment'>// Public License v. 2.0. If a copy of the MPL was not distributed</span></td></tr>
<tr class="codeline" data-linenumber="8"><td class="num" id="LN8">8</td><td class="line"><span class='comment'>// with this file, You can obtain one at http://mozilla.org/MPL/2.0/.</span></td></tr>
<tr class="codeline" data-linenumber="9"><td class="num" id="LN9">9</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="10"><td class="num" id="LN10">10</td><td class="line"><span class='directive'>#ifndef EIGEN_REF_H</span></td></tr>
<tr class="codeline" data-linenumber="11"><td class="num" id="LN11">11</td><td class="line"><span class='directive'>#define EIGEN_REF_H</span></td></tr>
<tr class="codeline" data-linenumber="12"><td class="num" id="LN12">12</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="13"><td class="num" id="LN13">13</td><td class="line"><span class='keyword'>namespace</span> Eigen { </td></tr>
<tr class="codeline" data-linenumber="14"><td class="num" id="LN14">14</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="15"><td class="num" id="LN15">15</td><td class="line"><span class='keyword'>namespace</span> internal {</td></tr>
<tr class="codeline" data-linenumber="16"><td class="num" id="LN16">16</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="17"><td class="num" id="LN17">17</td><td class="line"><span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> _PlainObjectType, <span class='keyword'>int</span> _Options, <span class='keyword'>typename</span> _StrideType&gt;</td></tr>
<tr class="codeline" data-linenumber="18"><td class="num" id="LN18">18</td><td class="line"><span class='keyword'>struct</span> traits&lt;Ref&lt;_PlainObjectType, _Options, _StrideType&gt; &gt;</td></tr>
<tr class="codeline" data-linenumber="19"><td class="num" id="LN19">19</td><td class="line">  : <span class='keyword'>public</span> traits&lt;Map&lt;_PlainObjectType, _Options, _StrideType&gt; &gt;</td></tr>
<tr class="codeline" data-linenumber="20"><td class="num" id="LN20">20</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="21"><td class="num" id="LN21">21</td><td class="line">  <span class='keyword'>typedef</span> _PlainObjectType PlainObjectType;</td></tr>
<tr class="codeline" data-linenumber="22"><td class="num" id="LN22">22</td><td class="line">  <span class='keyword'>typedef</span> _StrideType StrideType;</td></tr>
<tr class="codeline" data-linenumber="23"><td class="num" id="LN23">23</td><td class="line">  <span class='keyword'>enum</span> {</td></tr>
<tr class="codeline" data-linenumber="24"><td class="num" id="LN24">24</td><td class="line">    Options = _Options,</td></tr>
<tr class="codeline" data-linenumber="25"><td class="num" id="LN25">25</td><td class="line">    Flags = traits&lt;Map&lt;_PlainObjectType, _Options, _StrideType&gt; &gt;::Flags | NestByRefBit,</td></tr>
<tr class="codeline" data-linenumber="26"><td class="num" id="LN26">26</td><td class="line">    Alignment = traits&lt;Map&lt;_PlainObjectType, _Options, _StrideType&gt; &gt;::Alignment</td></tr>
<tr class="codeline" data-linenumber="27"><td class="num" id="LN27">27</td><td class="line">  };</td></tr>
<tr class="codeline" data-linenumber="28"><td class="num" id="LN28">28</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="29"><td class="num" id="LN29">29</td><td class="line">  <span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> Derived&gt; <span class='keyword'>struct</span> match {</td></tr>
<tr class="codeline" data-linenumber="30"><td class="num" id="LN30">30</td><td class="line">    <span class='keyword'>enum</span> {</td></tr>
<tr class="codeline" data-linenumber="31"><td class="num" id="LN31">31</td><td class="line">      HasDirectAccess = internal::has_direct_access&lt;Derived&gt;::ret,</td></tr>
<tr class="codeline" data-linenumber="32"><td class="num" id="LN32">32</td><td class="line">      StorageOrderMatch = PlainObjectType::IsVectorAtCompileTime || Derived::IsVectorAtCompileTime || ((PlainObjectType::Flags&amp;RowMajorBit)==(Derived::Flags&amp;RowMajorBit)),</td></tr>
<tr class="codeline" data-linenumber="33"><td class="num" id="LN33">33</td><td class="line">      InnerStrideMatch = <span class='keyword'>int</span>(StrideType::InnerStrideAtCompileTime)==<span class='keyword'>int</span>(Dynamic)</td></tr>
<tr class="codeline" data-linenumber="34"><td class="num" id="LN34">34</td><td class="line">                      || <span class='keyword'>int</span>(StrideType::InnerStrideAtCompileTime)==<span class='keyword'>int</span>(Derived::InnerStrideAtCompileTime)</td></tr>
<tr class="codeline" data-linenumber="35"><td class="num" id="LN35">35</td><td class="line">                      || (<span class='keyword'>int</span>(StrideType::InnerStrideAtCompileTime)==0 &amp;&amp; <span class='keyword'>int</span>(Derived::InnerStrideAtCompileTime)==1),</td></tr>
<tr class="codeline" data-linenumber="36"><td class="num" id="LN36">36</td><td class="line">      OuterStrideMatch = Derived::IsVectorAtCompileTime</td></tr>
<tr class="codeline" data-linenumber="37"><td class="num" id="LN37">37</td><td class="line">                      || <span class='keyword'>int</span>(StrideType::OuterStrideAtCompileTime)==<span class='keyword'>int</span>(Dynamic) || <span class='keyword'>int</span>(StrideType::OuterStrideAtCompileTime)==<span class='keyword'>int</span>(Derived::OuterStrideAtCompileTime),</td></tr>
<tr class="codeline" data-linenumber="38"><td class="num" id="LN38">38</td><td class="line">      <span class='comment'>// NOTE, this indirection of evaluator&lt;Derived&gt;::Alignment is needed</span></td></tr>
<tr class="codeline" data-linenumber="39"><td class="num" id="LN39">39</td><td class="line">      <span class='comment'>// to workaround a very strange bug in MSVC related to the instantiation</span></td></tr>
<tr class="codeline" data-linenumber="40"><td class="num" id="LN40">40</td><td class="line">      <span class='comment'>// of has_*ary_operator in evaluator&lt;CwiseNullaryOp&gt;.</span></td></tr>
<tr class="codeline" data-linenumber="41"><td class="num" id="LN41">41</td><td class="line">      <span class='comment'>// This line is surprisingly very sensitive. For instance, simply adding parenthesis</span></td></tr>
<tr class="codeline" data-linenumber="42"><td class="num" id="LN42">42</td><td class="line">      <span class='comment'>// as "DerivedAlignment = (int(evaluator&lt;Derived&gt;::Alignment))," will make MSVC fail...</span></td></tr>
<tr class="codeline" data-linenumber="43"><td class="num" id="LN43">43</td><td class="line">      DerivedAlignment = <span class='keyword'>int</span>(evaluator&lt;Derived&gt;::Alignment),</td></tr>
<tr class="codeline" data-linenumber="44"><td class="num" id="LN44">44</td><td class="line">      AlignmentMatch = (<span class='keyword'>int</span>(traits&lt;PlainObjectType&gt;::Alignment)==<span class='keyword'>int</span>(Unaligned)) || (DerivedAlignment &gt;= <span class='keyword'>int</span>(Alignment)), <span class='comment'>// FIXME the first condition is not very clear, it should be replaced by the required alignment</span></td></tr>
<tr class="codeline" data-linenumber="45"><td class="num" id="LN45">45</td><td class="line">      ScalarTypeMatch = internal::is_same&lt;<span class='keyword'>typename</span> PlainObjectType::Scalar, <span class='keyword'>typename</span> Derived::Scalar&gt;::value,</td></tr>
<tr class="codeline" data-linenumber="46"><td class="num" id="LN46">46</td><td class="line">      MatchAtCompileTime = HasDirectAccess &amp;&amp; StorageOrderMatch &amp;&amp; InnerStrideMatch &amp;&amp; OuterStrideMatch &amp;&amp; AlignmentMatch &amp;&amp; ScalarTypeMatch</td></tr>
<tr class="codeline" data-linenumber="47"><td class="num" id="LN47">47</td><td class="line">    };</td></tr>
<tr class="codeline" data-linenumber="48"><td class="num" id="LN48">48</td><td class="line">    <span class='keyword'>typedef</span> <span class='keyword'>typename</span> internal::conditional&lt;MatchAtCompileTime,internal::true_type,internal::false_type&gt;::type type;</td></tr>
<tr class="codeline" data-linenumber="49"><td class="num" id="LN49">49</td><td class="line">  };</td></tr>
<tr class="codeline" data-linenumber="50"><td class="num" id="LN50">50</td><td class="line">  </td></tr>
<tr class="codeline" data-linenumber="51"><td class="num" id="LN51">51</td><td class="line">};</td></tr>
<tr class="codeline" data-linenumber="52"><td class="num" id="LN52">52</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="53"><td class="num" id="LN53">53</td><td class="line"><span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> Derived&gt;</td></tr>
<tr class="codeline" data-linenumber="54"><td class="num" id="LN54">54</td><td class="line"><span class='keyword'>struct</span> traits&lt;RefBase&lt;Derived&gt; &gt; : <span class='keyword'>public</span> traits&lt;Derived&gt; {};</td></tr>
<tr class="codeline" data-linenumber="55"><td class="num" id="LN55">55</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="56"><td class="num" id="LN56">56</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="57"><td class="num" id="LN57">57</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="58"><td class="num" id="LN58">58</td><td class="line"><span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> Derived&gt; <span class='keyword'>class</span> RefBase</td></tr>
<tr class="codeline" data-linenumber="59"><td class="num" id="LN59">59</td><td class="line"> : <span class='keyword'>public</span> MapBase&lt;Derived&gt;</td></tr>
<tr class="codeline" data-linenumber="60"><td class="num" id="LN60">60</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="61"><td class="num" id="LN61">61</td><td class="line">  <span class='keyword'>typedef</span> <span class='keyword'>typename</span> internal::traits&lt;Derived&gt;::PlainObjectType PlainObjectType;</td></tr>
<tr class="codeline" data-linenumber="62"><td class="num" id="LN62">62</td><td class="line">  <span class='keyword'>typedef</span> <span class='keyword'>typename</span> internal::traits&lt;Derived&gt;::StrideType StrideType;</td></tr>
<tr class="codeline" data-linenumber="63"><td class="num" id="LN63">63</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="64"><td class="num" id="LN64">64</td><td class="line"><span class='keyword'>public</span>:</td></tr>
<tr class="codeline" data-linenumber="65"><td class="num" id="LN65">65</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="66"><td class="num" id="LN66">66</td><td class="line">  <span class='keyword'>typedef</span> MapBase&lt;Derived&gt; Base;</td></tr>
<tr class="codeline" data-linenumber="67"><td class="num" id="LN67">67</td><td class="line">  <span class='macro'>EIGEN_DENSE_PUBLIC_INTERFACE(RefBase)<span class='expansion'>typedef typename Eigen::internal::traits&lt;RefBase&gt;::Scalar<br> Scalar; typedef typename Eigen::NumTraits&lt;Scalar&gt;::Real<br> RealScalar; typedef typename Base::CoeffReturnType CoeffReturnType<br>; typedef typename Eigen::internal::ref_selector&lt;RefBase&gt;<br>::type Nested; typedef typename Eigen::internal::traits&lt;RefBase<br>&gt;::StorageKind StorageKind; typedef typename Eigen::internal<br>::traits&lt;RefBase&gt;::StorageIndex StorageIndex; enum { RowsAtCompileTime<br> = Eigen::internal::traits&lt;RefBase&gt;::RowsAtCompileTime,<br> ColsAtCompileTime = Eigen::internal::traits&lt;RefBase&gt;::<br>ColsAtCompileTime, Flags = Eigen::internal::traits&lt;RefBase<br>&gt;::Flags, SizeAtCompileTime = Base::SizeAtCompileTime, MaxSizeAtCompileTime<br> = Base::MaxSizeAtCompileTime, IsVectorAtCompileTime = Base::<br>IsVectorAtCompileTime }; using Base::derived; using Base::const_cast_derived<br>; typedef typename Base::PacketScalar PacketScalar;</span></span></td></tr>
<tr class="codeline" data-linenumber="68"><td class="num" id="LN68">68</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="69"><td class="num" id="LN69">69</td><td class="line">  EIGEN_DEVICE_FUNC <span class='keyword'>inline</span> Index innerStride() <span class='keyword'>const</span></td></tr>
<tr class="codeline" data-linenumber="70"><td class="num" id="LN70">70</td><td class="line">  {</td></tr>
<tr class="codeline" data-linenumber="71"><td class="num" id="LN71">71</td><td class="line">    <span class='keyword'>return</span> StrideType::InnerStrideAtCompileTime != 0 ? m_stride.inner() : 1;</td></tr>
<tr class="codeline" data-linenumber="72"><td class="num" id="LN72">72</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="73"><td class="num" id="LN73">73</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="74"><td class="num" id="LN74">74</td><td class="line">  EIGEN_DEVICE_FUNC <span class='keyword'>inline</span> Index outerStride() <span class='keyword'>const</span></td></tr>
<tr class="codeline" data-linenumber="75"><td class="num" id="LN75">75</td><td class="line">  {</td></tr>
<tr class="codeline" data-linenumber="76"><td class="num" id="LN76">76</td><td class="line">    <span class='keyword'>return</span> StrideType::OuterStrideAtCompileTime != 0 ? m_stride.outer()</td></tr>
<tr class="codeline" data-linenumber="77"><td class="num" id="LN77">77</td><td class="line">         : IsVectorAtCompileTime ? <span class='keyword'>this</span>-&gt;size()</td></tr>
<tr class="codeline" data-linenumber="78"><td class="num" id="LN78">78</td><td class="line">         : <span class='keyword'>int</span>(Flags)&amp;RowMajorBit ? <span class='keyword'>this</span>-&gt;cols()</td></tr>
<tr class="codeline" data-linenumber="79"><td class="num" id="LN79">79</td><td class="line">         : <span class='keyword'>this</span>-&gt;rows();</td></tr>
<tr class="codeline" data-linenumber="80"><td class="num" id="LN80">80</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="81"><td class="num" id="LN81">81</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="82"><td class="num" id="LN82">82</td><td class="line">  EIGEN_DEVICE_FUNC RefBase()</td></tr>
<tr class="codeline" data-linenumber="83"><td class="num" id="LN83">83</td><td class="line">    : Base(0,RowsAtCompileTime==Dynamic?0:RowsAtCompileTime,ColsAtCompileTime==Dynamic?0:ColsAtCompileTime),</td></tr>
<tr class="codeline" data-linenumber="84"><td class="num" id="LN84">84</td><td class="line">      <span class='comment'>// Stride&lt;&gt; does not allow default ctor for Dynamic strides, so let' initialize it with dummy values:</span></td></tr>
<tr class="codeline" data-linenumber="85"><td class="num" id="LN85">85</td><td class="line">      m_stride(StrideType::OuterStrideAtCompileTime==Dynamic?0:StrideType::OuterStrideAtCompileTime,</td></tr>
<tr class="codeline" data-linenumber="86"><td class="num" id="LN86">86</td><td class="line">               StrideType::InnerStrideAtCompileTime==Dynamic?0:StrideType::InnerStrideAtCompileTime)</td></tr>
<tr class="codeline" data-linenumber="87"><td class="num" id="LN87">87</td><td class="line">  {}</td></tr>
<tr class="codeline" data-linenumber="88"><td class="num" id="LN88">88</td><td class="line">  </td></tr>
<tr class="codeline" data-linenumber="89"><td class="num" id="LN89">89</td><td class="line">  <span class='macro'>EIGEN_INHERIT_ASSIGNMENT_OPERATORS(RefBase)<span class='expansion'>using Base::operator =; inline RefBase&amp; operator=(const RefBase<br>&amp; other) { Base::operator=(other); return *this; } template<br> &lt;typename OtherDerived&gt; inline RefBase&amp; operator=(<br>const DenseBase&lt;OtherDerived&gt;&amp; other) { Base::operator<br>=(other.derived()); return *this; }</span></span></td></tr>
<tr class="codeline" data-linenumber="90"><td class="num" id="LN90">90</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="91"><td class="num" id="LN91">91</td><td class="line"><span class='keyword'>protected</span>:</td></tr>
<tr class="codeline" data-linenumber="92"><td class="num" id="LN92">92</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="93"><td class="num" id="LN93">93</td><td class="line">  <span class='keyword'>typedef</span> Stride&lt;StrideType::OuterStrideAtCompileTime,StrideType::InnerStrideAtCompileTime&gt; StrideBase;</td></tr>
<tr class="codeline" data-linenumber="94"><td class="num" id="LN94">94</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="95"><td class="num" id="LN95">95</td><td class="line">  <span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> Expression&gt;</td></tr>
<tr class="codeline" data-linenumber="96"><td class="num" id="LN96">96</td><td class="line">  EIGEN_DEVICE_FUNC <span class='keyword'>void</span> construct(Expression&amp; expr)</td></tr>
<tr class="codeline" data-linenumber="97"><td class="num" id="LN97">97</td><td class="line">  {</td></tr>
<tr class="codeline" data-linenumber="98"><td class="num" id="LN98">98</td><td class="line">    <span class='macro'>EIGEN_STATIC_ASSERT_SAME_MATRIX_SIZE(PlainObjectType,Expression)<span class='expansion'>static_assert(( (int(Eigen::internal::size_of_xpr_at_compile_time<br>&lt;PlainObjectType&gt;::ret)==0 &amp;&amp; int(Eigen::internal<br>::size_of_xpr_at_compile_time&lt;Expression&gt;::ret)==0) || (<br> (int(PlainObjectType::RowsAtCompileTime)==Eigen::Dynamic || int<br>(Expression::RowsAtCompileTime)==Eigen::Dynamic || int(PlainObjectType<br>::RowsAtCompileTime)==int(Expression::RowsAtCompileTime)) &amp;&amp;<br> (int(PlainObjectType::ColsAtCompileTime)==Eigen::Dynamic || int<br>(Expression::ColsAtCompileTime)==Eigen::Dynamic || int(PlainObjectType<br>::ColsAtCompileTime)==int(Expression::ColsAtCompileTime)) ) )<br>,"YOU_MIXED_MATRICES_OF_DIFFERENT_SIZES");</span></span>;</td></tr>
<tr class="codeline" data-linenumber="99"><td class="num" id="LN99">99</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="100"><td class="num" id="LN100">100</td><td class="line">    <span class='keyword'>if</span>(PlainObjectType::RowsAtCompileTime==1)</td></tr>
<tr><td class="num"></td><td class="line"><div id="Path64" class="msg msgControl" style="margin-left:5ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexControl">64</div></td><td><div class="PathNav"><a href="#Path63" title="Previous event (63)">&#x2190;</a></div></td></td><td>Taking false branch</td><td><div class="PathNav"><a href="#Path65" title="Next event (65)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr class="codeline" data-linenumber="101"><td class="num" id="LN101">101</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="102"><td class="num" id="LN102">102</td><td class="line">      <span class='macro'>eigen_assert(expr.rows()==1 || expr.cols()==1)<span class='expansion'>(__builtin_expect(!(expr.rows()==1 || expr.cols()==1), 0) ? __assert_rtn<br>(__func__, "/Users/u237002/Dropbox/Hacking/sat/arts/3rdparty/Eigen/src/Core/Ref.h"<br>, 102, "expr.rows()==1 || expr.cols()==1") : (void)0)</span></span>;</td></tr>
<tr class="codeline" data-linenumber="103"><td class="num" id="LN103">103</td><td class="line">      ::<span class='keyword'>new</span> (<span class='keyword'>static_cast</span>&lt;Base*&gt;(<span class='keyword'>this</span>)) Base(expr.data(), 1, expr.size());</td></tr>
<tr class="codeline" data-linenumber="104"><td class="num" id="LN104">104</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="105"><td class="num" id="LN105">105</td><td class="line">    <span class='keyword'>else</span> <span class='keyword'>if</span>(PlainObjectType::ColsAtCompileTime==1)</td></tr>
<tr><td class="num"></td><td class="line"><div id="Path65" class="msg msgControl" style="margin-left:10ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexControl">65</div></td><td><div class="PathNav"><a href="#Path64" title="Previous event (64)">&#x2190;</a></div></td></td><td>Taking true branch</td><td><div class="PathNav"><a href="#Path66" title="Next event (66)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr class="codeline" data-linenumber="106"><td class="num" id="LN106">106</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="107"><td class="num" id="LN107">107</td><td class="line">      <span class='macro'>eigen_assert(expr.rows()==1 || expr.cols()==1)<span class='expansion'>(__builtin_expect(!(expr.rows()==1 || expr.cols()==1), 0) ? __assert_rtn<br>(__func__, "/Users/u237002/Dropbox/Hacking/sat/arts/3rdparty/Eigen/src/Core/Ref.h"<br>, 107, "expr.rows()==1 || expr.cols()==1") : (void)0)</span></span>;</td></tr>
<tr><td class="num"></td><td class="line"><div id="Path66" class="msg msgControl" style="margin-left:7ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexControl">66</div></td><td><div class="PathNav"><a href="#Path65" title="Previous event (65)">&#x2190;</a></div></td></td><td>'?' condition is false</td><td><div class="PathNav"><a href="#Path67" title="Next event (67)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr class="codeline" data-linenumber="108"><td class="num" id="LN108">108</td><td class="line">      ::<span class='keyword'>new</span> (<span class='keyword'>static_cast</span>&lt;Base*&gt;(<span class='keyword'>this</span>)) Base(<span class="mrange">expr.data()</span>, expr.size(), 1);</td></tr>
<tr><td class="num"></td><td class="line"><div id="Path67" class="msg msgEvent" style="margin-left:45ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">67</div></td><td><div class="PathNav"><a href="#Path66" title="Previous event (66)">&#x2190;</a></div></td></td><td>Calling 'PlainObjectBase::data'</td><td><div class="PathNav"><a href="#Path68" title="Next event (68)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr class="codeline" data-linenumber="109"><td class="num" id="LN109">109</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="110"><td class="num" id="LN110">110</td><td class="line">    <span class='keyword'>else</span></td></tr>
<tr class="codeline" data-linenumber="111"><td class="num" id="LN111">111</td><td class="line">      ::<span class='keyword'>new</span> (<span class='keyword'>static_cast</span>&lt;Base*&gt;(<span class='keyword'>this</span>)) Base(expr.data(), expr.rows(), expr.cols());</td></tr>
<tr class="codeline" data-linenumber="112"><td class="num" id="LN112">112</td><td class="line">    </td></tr>
<tr class="codeline" data-linenumber="113"><td class="num" id="LN113">113</td><td class="line">    <span class='keyword'>if</span>(Expression::IsVectorAtCompileTime &amp;&amp; (!PlainObjectType::IsVectorAtCompileTime) &amp;&amp; ((Expression::Flags&amp;RowMajorBit)!=(PlainObjectType::Flags&amp;RowMajorBit)))</td></tr>
<tr class="codeline" data-linenumber="114"><td class="num" id="LN114">114</td><td class="line">      ::<span class='keyword'>new</span> (&amp;m_stride) StrideBase(expr.innerStride(), StrideType::InnerStrideAtCompileTime==0?0:1);</td></tr>
<tr class="codeline" data-linenumber="115"><td class="num" id="LN115">115</td><td class="line">    <span class='keyword'>else</span></td></tr>
<tr class="codeline" data-linenumber="116"><td class="num" id="LN116">116</td><td class="line">      ::<span class='keyword'>new</span> (&amp;m_stride) StrideBase(StrideType::OuterStrideAtCompileTime==0?0:expr.outerStride(),</td></tr>
<tr class="codeline" data-linenumber="117"><td class="num" id="LN117">117</td><td class="line">                                   StrideType::InnerStrideAtCompileTime==0?0:expr.innerStride());    </td></tr>
<tr class="codeline" data-linenumber="118"><td class="num" id="LN118">118</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="119"><td class="num" id="LN119">119</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="120"><td class="num" id="LN120">120</td><td class="line">  StrideBase m_stride;</td></tr>
<tr class="codeline" data-linenumber="121"><td class="num" id="LN121">121</td><td class="line">};</td></tr>
<tr class="codeline" data-linenumber="122"><td class="num" id="LN122">122</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="123"><td class="num" id="LN123">123</td><td class="line"><span class='comment'>/** \class Ref</span></td></tr>
<tr class="codeline" data-linenumber="124"><td class="num" id="LN124">124</td><td class="line">  <span class='comment'>* \ingroup Core_Module</span></td></tr>
<tr class="codeline" data-linenumber="125"><td class="num" id="LN125">125</td><td class="line">  <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="126"><td class="num" id="LN126">126</td><td class="line">  <span class='comment'>* \brief A matrix or vector expression mapping an existing expression</span></td></tr>
<tr class="codeline" data-linenumber="127"><td class="num" id="LN127">127</td><td class="line">  <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="128"><td class="num" id="LN128">128</td><td class="line">  <span class='comment'>* \tparam PlainObjectType the equivalent matrix type of the mapped data</span></td></tr>
<tr class="codeline" data-linenumber="129"><td class="num" id="LN129">129</td><td class="line">  <span class='comment'>* \tparam Options specifies the pointer alignment in bytes. It can be: \c #Aligned128, , \c #Aligned64, \c #Aligned32, \c #Aligned16, \c #Aligned8 or \c #Unaligned.</span></td></tr>
<tr class="codeline" data-linenumber="130"><td class="num" id="LN130">130</td><td class="line">  <span class='comment'>*                 The default is \c #Unaligned.</span></td></tr>
<tr class="codeline" data-linenumber="131"><td class="num" id="LN131">131</td><td class="line">  <span class='comment'>* \tparam StrideType optionally specifies strides. By default, Ref implies a contiguous storage along the inner dimension (inner stride==1),</span></td></tr>
<tr class="codeline" data-linenumber="132"><td class="num" id="LN132">132</td><td class="line">  <span class='comment'>*                   but accepts a variable outer stride (leading dimension).</span></td></tr>
<tr class="codeline" data-linenumber="133"><td class="num" id="LN133">133</td><td class="line">  <span class='comment'>*                   This can be overridden by specifying strides.</span></td></tr>
<tr class="codeline" data-linenumber="134"><td class="num" id="LN134">134</td><td class="line">  <span class='comment'>*                   The type passed here must be a specialization of the Stride template, see examples below.</span></td></tr>
<tr class="codeline" data-linenumber="135"><td class="num" id="LN135">135</td><td class="line">  <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="136"><td class="num" id="LN136">136</td><td class="line">  <span class='comment'>* This class provides a way to write non-template functions taking Eigen objects as parameters while limiting the number of copies.</span></td></tr>
<tr class="codeline" data-linenumber="137"><td class="num" id="LN137">137</td><td class="line">  <span class='comment'>* A Ref&lt;&gt; object can represent either a const expression or a l-value:</span></td></tr>
<tr class="codeline" data-linenumber="138"><td class="num" id="LN138">138</td><td class="line">  <span class='comment'>* \code</span></td></tr>
<tr class="codeline" data-linenumber="139"><td class="num" id="LN139">139</td><td class="line">  <span class='comment'>* // in-out argument:</span></td></tr>
<tr class="codeline" data-linenumber="140"><td class="num" id="LN140">140</td><td class="line">  <span class='comment'>* void foo1(Ref&lt;VectorXf&gt; x);</span></td></tr>
<tr class="codeline" data-linenumber="141"><td class="num" id="LN141">141</td><td class="line">  <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="142"><td class="num" id="LN142">142</td><td class="line">  <span class='comment'>* // read-only const argument:</span></td></tr>
<tr class="codeline" data-linenumber="143"><td class="num" id="LN143">143</td><td class="line">  <span class='comment'>* void foo2(const Ref&lt;const VectorXf&gt;&amp; x);</span></td></tr>
<tr class="codeline" data-linenumber="144"><td class="num" id="LN144">144</td><td class="line">  <span class='comment'>* \endcode</span></td></tr>
<tr class="codeline" data-linenumber="145"><td class="num" id="LN145">145</td><td class="line">  <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="146"><td class="num" id="LN146">146</td><td class="line">  <span class='comment'>* In the in-out case, the input argument must satisfy the constraints of the actual Ref&lt;&gt; type, otherwise a compilation issue will be triggered.</span></td></tr>
<tr class="codeline" data-linenumber="147"><td class="num" id="LN147">147</td><td class="line">  <span class='comment'>* By default, a Ref&lt;VectorXf&gt; can reference any dense vector expression of float having a contiguous memory layout.</span></td></tr>
<tr class="codeline" data-linenumber="148"><td class="num" id="LN148">148</td><td class="line">  <span class='comment'>* Likewise, a Ref&lt;MatrixXf&gt; can reference any column-major dense matrix expression of float whose column's elements are contiguously stored with</span></td></tr>
<tr class="codeline" data-linenumber="149"><td class="num" id="LN149">149</td><td class="line">  <span class='comment'>* the possibility to have a constant space in-between each column, i.e. the inner stride must be equal to 1, but the outer stride (or leading dimension)</span></td></tr>
<tr class="codeline" data-linenumber="150"><td class="num" id="LN150">150</td><td class="line">  <span class='comment'>* can be greater than the number of rows.</span></td></tr>
<tr class="codeline" data-linenumber="151"><td class="num" id="LN151">151</td><td class="line">  <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="152"><td class="num" id="LN152">152</td><td class="line">  <span class='comment'>* In the const case, if the input expression does not match the above requirement, then it is evaluated into a temporary before being passed to the function.</span></td></tr>
<tr class="codeline" data-linenumber="153"><td class="num" id="LN153">153</td><td class="line">  <span class='comment'>* Here are some examples:</span></td></tr>
<tr class="codeline" data-linenumber="154"><td class="num" id="LN154">154</td><td class="line">  <span class='comment'>* \code</span></td></tr>
<tr class="codeline" data-linenumber="155"><td class="num" id="LN155">155</td><td class="line">  <span class='comment'>* MatrixXf A;</span></td></tr>
<tr class="codeline" data-linenumber="156"><td class="num" id="LN156">156</td><td class="line">  <span class='comment'>* VectorXf a;</span></td></tr>
<tr class="codeline" data-linenumber="157"><td class="num" id="LN157">157</td><td class="line">  <span class='comment'>* foo1(a.head());             // OK</span></td></tr>
<tr class="codeline" data-linenumber="158"><td class="num" id="LN158">158</td><td class="line">  <span class='comment'>* foo1(A.col());              // OK</span></td></tr>
<tr class="codeline" data-linenumber="159"><td class="num" id="LN159">159</td><td class="line">  <span class='comment'>* foo1(A.row());              // Compilation error because here innerstride!=1</span></td></tr>
<tr class="codeline" data-linenumber="160"><td class="num" id="LN160">160</td><td class="line">  <span class='comment'>* foo2(A.row());              // Compilation error because A.row() is a 1xN object while foo2 is expecting a Nx1 object</span></td></tr>
<tr class="codeline" data-linenumber="161"><td class="num" id="LN161">161</td><td class="line">  <span class='comment'>* foo2(A.row().transpose());  // The row is copied into a contiguous temporary</span></td></tr>
<tr class="codeline" data-linenumber="162"><td class="num" id="LN162">162</td><td class="line">  <span class='comment'>* foo2(2*a);                  // The expression is evaluated into a temporary</span></td></tr>
<tr class="codeline" data-linenumber="163"><td class="num" id="LN163">163</td><td class="line">  <span class='comment'>* foo2(A.col().segment(2,4)); // No temporary</span></td></tr>
<tr class="codeline" data-linenumber="164"><td class="num" id="LN164">164</td><td class="line">  <span class='comment'>* \endcode</span></td></tr>
<tr class="codeline" data-linenumber="165"><td class="num" id="LN165">165</td><td class="line">  <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="166"><td class="num" id="LN166">166</td><td class="line">  <span class='comment'>* The range of inputs that can be referenced without temporary can be enlarged using the last two template parameters.</span></td></tr>
<tr class="codeline" data-linenumber="167"><td class="num" id="LN167">167</td><td class="line">  <span class='comment'>* Here is an example accepting an innerstride!=1:</span></td></tr>
<tr class="codeline" data-linenumber="168"><td class="num" id="LN168">168</td><td class="line">  <span class='comment'>* \code</span></td></tr>
<tr class="codeline" data-linenumber="169"><td class="num" id="LN169">169</td><td class="line">  <span class='comment'>* // in-out argument:</span></td></tr>
<tr class="codeline" data-linenumber="170"><td class="num" id="LN170">170</td><td class="line">  <span class='comment'>* void foo3(Ref&lt;VectorXf,0,InnerStride&lt;&gt; &gt; x);</span></td></tr>
<tr class="codeline" data-linenumber="171"><td class="num" id="LN171">171</td><td class="line">  <span class='comment'>* foo3(A.row());              // OK</span></td></tr>
<tr class="codeline" data-linenumber="172"><td class="num" id="LN172">172</td><td class="line">  <span class='comment'>* \endcode</span></td></tr>
<tr class="codeline" data-linenumber="173"><td class="num" id="LN173">173</td><td class="line">  <span class='comment'>* The downside here is that the function foo3 might be significantly slower than foo1 because it won't be able to exploit vectorization, and will involve more</span></td></tr>
<tr class="codeline" data-linenumber="174"><td class="num" id="LN174">174</td><td class="line">  <span class='comment'>* expensive address computations even if the input is contiguously stored in memory. To overcome this issue, one might propose to overload internally calling a</span></td></tr>
<tr class="codeline" data-linenumber="175"><td class="num" id="LN175">175</td><td class="line">  <span class='comment'>* template function, e.g.:</span></td></tr>
<tr class="codeline" data-linenumber="176"><td class="num" id="LN176">176</td><td class="line">  <span class='comment'>* \code</span></td></tr>
<tr class="codeline" data-linenumber="177"><td class="num" id="LN177">177</td><td class="line">  <span class='comment'>* // in the .h:</span></td></tr>
<tr class="codeline" data-linenumber="178"><td class="num" id="LN178">178</td><td class="line">  <span class='comment'>* void foo(const Ref&lt;MatrixXf&gt;&amp; A);</span></td></tr>
<tr class="codeline" data-linenumber="179"><td class="num" id="LN179">179</td><td class="line">  <span class='comment'>* void foo(const Ref&lt;MatrixXf,0,Stride&lt;&gt; &gt;&amp; A);</span></td></tr>
<tr class="codeline" data-linenumber="180"><td class="num" id="LN180">180</td><td class="line">  <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="181"><td class="num" id="LN181">181</td><td class="line">  <span class='comment'>* // in the .cpp:</span></td></tr>
<tr class="codeline" data-linenumber="182"><td class="num" id="LN182">182</td><td class="line">  <span class='comment'>* template&lt;typename TypeOfA&gt; void foo_impl(const TypeOfA&amp; A) {</span></td></tr>
<tr class="codeline" data-linenumber="183"><td class="num" id="LN183">183</td><td class="line">  <span class='comment'>*     ... // crazy code goes here</span></td></tr>
<tr class="codeline" data-linenumber="184"><td class="num" id="LN184">184</td><td class="line">  <span class='comment'>* }</span></td></tr>
<tr class="codeline" data-linenumber="185"><td class="num" id="LN185">185</td><td class="line">  <span class='comment'>* void foo(const Ref&lt;MatrixXf&gt;&amp; A) { foo_impl(A); }</span></td></tr>
<tr class="codeline" data-linenumber="186"><td class="num" id="LN186">186</td><td class="line">  <span class='comment'>* void foo(const Ref&lt;MatrixXf,0,Stride&lt;&gt; &gt;&amp; A) { foo_impl(A); }</span></td></tr>
<tr class="codeline" data-linenumber="187"><td class="num" id="LN187">187</td><td class="line">  <span class='comment'>* \endcode</span></td></tr>
<tr class="codeline" data-linenumber="188"><td class="num" id="LN188">188</td><td class="line">  <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="189"><td class="num" id="LN189">189</td><td class="line">  <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="190"><td class="num" id="LN190">190</td><td class="line">  <span class='comment'>* \sa PlainObjectBase::Map(), \ref TopicStorageOrders</span></td></tr>
<tr class="codeline" data-linenumber="191"><td class="num" id="LN191">191</td><td class="line">  <span class='comment'>*/</span></td></tr>
<tr class="codeline" data-linenumber="192"><td class="num" id="LN192">192</td><td class="line"><span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> PlainObjectType, <span class='keyword'>int</span> Options, <span class='keyword'>typename</span> StrideType&gt; <span class='keyword'>class</span> Ref</td></tr>
<tr class="codeline" data-linenumber="193"><td class="num" id="LN193">193</td><td class="line">  : <span class='keyword'>public</span> RefBase&lt;Ref&lt;PlainObjectType, Options, StrideType&gt; &gt;</td></tr>
<tr class="codeline" data-linenumber="194"><td class="num" id="LN194">194</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="195"><td class="num" id="LN195">195</td><td class="line">  <span class='keyword'>private</span>:</td></tr>
<tr class="codeline" data-linenumber="196"><td class="num" id="LN196">196</td><td class="line">    <span class='keyword'>typedef</span> internal::traits&lt;Ref&gt; Traits;</td></tr>
<tr class="codeline" data-linenumber="197"><td class="num" id="LN197">197</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> Derived&gt;</td></tr>
<tr class="codeline" data-linenumber="198"><td class="num" id="LN198">198</td><td class="line">    EIGEN_DEVICE_FUNC <span class='keyword'>inline</span> Ref(<span class='keyword'>const</span> PlainObjectBase&lt;Derived&gt;&amp; expr,</td></tr>
<tr class="codeline" data-linenumber="199"><td class="num" id="LN199">199</td><td class="line">                                 <span class='keyword'>typename</span> internal::enable_if&lt;<span class='keyword'>bool</span>(Traits::<span class='keyword'>template</span> match&lt;Derived&gt;::MatchAtCompileTime),Derived&gt;::type* = 0);</td></tr>
<tr class="codeline" data-linenumber="200"><td class="num" id="LN200">200</td><td class="line">  <span class='keyword'>public</span>:</td></tr>
<tr class="codeline" data-linenumber="201"><td class="num" id="LN201">201</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="202"><td class="num" id="LN202">202</td><td class="line">    <span class='keyword'>typedef</span> RefBase&lt;Ref&gt; Base;</td></tr>
<tr class="codeline" data-linenumber="203"><td class="num" id="LN203">203</td><td class="line">    <span class='macro'>EIGEN_DENSE_PUBLIC_INTERFACE(Ref)<span class='expansion'>typedef typename Eigen::internal::traits&lt;Ref&gt;::Scalar Scalar<br>; typedef typename Eigen::NumTraits&lt;Scalar&gt;::Real RealScalar<br>; typedef typename Base::CoeffReturnType CoeffReturnType; typedef<br> typename Eigen::internal::ref_selector&lt;Ref&gt;::type Nested<br>; typedef typename Eigen::internal::traits&lt;Ref&gt;::StorageKind<br> StorageKind; typedef typename Eigen::internal::traits&lt;Ref<br>&gt;::StorageIndex StorageIndex; enum { RowsAtCompileTime = Eigen<br>::internal::traits&lt;Ref&gt;::RowsAtCompileTime, ColsAtCompileTime<br> = Eigen::internal::traits&lt;Ref&gt;::ColsAtCompileTime, Flags<br> = Eigen::internal::traits&lt;Ref&gt;::Flags, SizeAtCompileTime<br> = Base::SizeAtCompileTime, MaxSizeAtCompileTime = Base::MaxSizeAtCompileTime<br>, IsVectorAtCompileTime = Base::IsVectorAtCompileTime }; using<br> Base::derived; using Base::const_cast_derived; typedef typename<br> Base::PacketScalar PacketScalar;</span></span></td></tr>
<tr class="codeline" data-linenumber="204"><td class="num" id="LN204">204</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="205"><td class="num" id="LN205">205</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="206"><td class="num" id="LN206">206</td><td class="line">    <span class='directive'>#ifndef EIGEN_PARSED_BY_DOXYGEN</span></td></tr>
<tr class="codeline" data-linenumber="207"><td class="num" id="LN207">207</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> Derived&gt;</td></tr>
<tr class="codeline" data-linenumber="208"><td class="num" id="LN208">208</td><td class="line">    EIGEN_DEVICE_FUNC <span class='keyword'>inline</span> Ref(PlainObjectBase&lt;Derived&gt;&amp; expr,</td></tr>
<tr class="codeline" data-linenumber="209"><td class="num" id="LN209">209</td><td class="line">                                 <span class='keyword'>typename</span> internal::enable_if&lt;<span class='keyword'>bool</span>(Traits::<span class='keyword'>template</span> match&lt;Derived&gt;::MatchAtCompileTime),Derived&gt;::type* = 0)</td></tr>
<tr class="codeline" data-linenumber="210"><td class="num" id="LN210">210</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="211"><td class="num" id="LN211">211</td><td class="line">      <span class='macro'>EIGEN_STATIC_ASSERT(<span class='keyword'>bool</span>(Traits::<span class='keyword'>template</span> match&lt;Derived&gt;::MatchAtCompileTime), STORAGE_LAYOUT_DOES_NOT_MATCH)<span class='expansion'>static_assert(bool(Traits::template match&lt;Derived&gt;::MatchAtCompileTime<br>),"STORAGE_LAYOUT_DOES_NOT_MATCH");</span></span>;</td></tr>
<tr class="codeline" data-linenumber="212"><td class="num" id="LN212">212</td><td class="line">      <span class="mrange">Base::construct(expr.derived())</span>;</td></tr>
<tr><td class="num"></td><td class="line"><div id="Path63" class="msg msgEvent" style="margin-left:7ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">63</div></td><td><div class="PathNav"><a href="#Path62" title="Previous event (62)">&#x2190;</a></div></td></td><td>Calling 'RefBase::construct'</td><td><div class="PathNav"><a href="#Path64" title="Next event (64)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr class="codeline" data-linenumber="213"><td class="num" id="LN213">213</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="214"><td class="num" id="LN214">214</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> Derived&gt;</td></tr>
<tr class="codeline" data-linenumber="215"><td class="num" id="LN215">215</td><td class="line">    EIGEN_DEVICE_FUNC <span class='keyword'>inline</span> Ref(<span class='keyword'>const</span> DenseBase&lt;Derived&gt;&amp; expr,</td></tr>
<tr class="codeline" data-linenumber="216"><td class="num" id="LN216">216</td><td class="line">                                 <span class='keyword'>typename</span> internal::enable_if&lt;<span class='keyword'>bool</span>(Traits::<span class='keyword'>template</span> match&lt;Derived&gt;::MatchAtCompileTime),Derived&gt;::type* = 0)</td></tr>
<tr class="codeline" data-linenumber="217"><td class="num" id="LN217">217</td><td class="line">    <span class='directive'>#else</span></td></tr>
<tr class="codeline" data-linenumber="218"><td class="num" id="LN218">218</td><td class="line">    <span class='comment'>/** Implicit constructor from any dense expression */</span></td></tr>
<tr class="codeline" data-linenumber="219"><td class="num" id="LN219">219</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> Derived&gt;</td></tr>
<tr class="codeline" data-linenumber="220"><td class="num" id="LN220">220</td><td class="line">    <span class='keyword'>inline</span> Ref(DenseBase&lt;Derived&gt;&amp; expr)</td></tr>
<tr class="codeline" data-linenumber="221"><td class="num" id="LN221">221</td><td class="line">    <span class='directive'>#endif</span></td></tr>
<tr class="codeline" data-linenumber="222"><td class="num" id="LN222">222</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="223"><td class="num" id="LN223">223</td><td class="line">      <span class='macro'>EIGEN_STATIC_ASSERT(<span class='keyword'>bool</span>(internal::is_lvalue&lt;Derived&gt;::value), THIS_EXPRESSION_IS_NOT_A_LVALUE__IT_IS_READ_ONLY)<span class='expansion'>static_assert(bool(internal::is_lvalue&lt;Derived&gt;::value)<br>,"THIS_EXPRESSION_IS_NOT_A_LVALUE__IT_IS_READ_ONLY");</span></span>;</td></tr>
<tr class="codeline" data-linenumber="224"><td class="num" id="LN224">224</td><td class="line">      <span class='macro'>EIGEN_STATIC_ASSERT(<span class='keyword'>bool</span>(Traits::<span class='keyword'>template</span> match&lt;Derived&gt;::MatchAtCompileTime), STORAGE_LAYOUT_DOES_NOT_MATCH)<span class='expansion'>static_assert(bool(Traits::template match&lt;Derived&gt;::MatchAtCompileTime<br>),"STORAGE_LAYOUT_DOES_NOT_MATCH");</span></span>;</td></tr>
<tr class="codeline" data-linenumber="225"><td class="num" id="LN225">225</td><td class="line">      <span class='macro'>EIGEN_STATIC_ASSERT(!Derived::IsPlainObjectBase,THIS_EXPRESSION_IS_NOT_A_LVALUE__IT_IS_READ_ONLY)<span class='expansion'>static_assert(!Derived::IsPlainObjectBase,"THIS_EXPRESSION_IS_NOT_A_LVALUE__IT_IS_READ_ONLY"<br>);</span></span>;</td></tr>
<tr class="codeline" data-linenumber="226"><td class="num" id="LN226">226</td><td class="line">      Base::construct(expr.const_cast_derived());</td></tr>
<tr class="codeline" data-linenumber="227"><td class="num" id="LN227">227</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="228"><td class="num" id="LN228">228</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="229"><td class="num" id="LN229">229</td><td class="line">    <span class='macro'>EIGEN_INHERIT_ASSIGNMENT_OPERATORS(Ref)<span class='expansion'>using Base::operator =; inline Ref&amp; operator=(const Ref&amp;<br> other) { Base::operator=(other); return *this; } template &lt;<br>typename OtherDerived&gt; inline Ref&amp; operator=(const DenseBase<br>&lt;OtherDerived&gt;&amp; other) { Base::operator=(other.derived<br>()); return *this; }</span></span></td></tr>
<tr class="codeline" data-linenumber="230"><td class="num" id="LN230">230</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="231"><td class="num" id="LN231">231</td><td class="line">};</td></tr>
<tr class="codeline" data-linenumber="232"><td class="num" id="LN232">232</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="233"><td class="num" id="LN233">233</td><td class="line"><span class='comment'>// this is the const ref version</span></td></tr>
<tr class="codeline" data-linenumber="234"><td class="num" id="LN234">234</td><td class="line"><span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> TPlainObjectType, <span class='keyword'>int</span> Options, <span class='keyword'>typename</span> StrideType&gt; <span class='keyword'>class</span> Ref&lt;<span class='keyword'>const</span> TPlainObjectType, Options, StrideType&gt;</td></tr>
<tr class="codeline" data-linenumber="235"><td class="num" id="LN235">235</td><td class="line">  : <span class='keyword'>public</span> RefBase&lt;Ref&lt;<span class='keyword'>const</span> TPlainObjectType, Options, StrideType&gt; &gt;</td></tr>
<tr class="codeline" data-linenumber="236"><td class="num" id="LN236">236</td><td class="line">{</td></tr>
<tr class="codeline" data-linenumber="237"><td class="num" id="LN237">237</td><td class="line">    <span class='keyword'>typedef</span> internal::traits&lt;Ref&gt; Traits;</td></tr>
<tr class="codeline" data-linenumber="238"><td class="num" id="LN238">238</td><td class="line">  <span class='keyword'>public</span>:</td></tr>
<tr class="codeline" data-linenumber="239"><td class="num" id="LN239">239</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="240"><td class="num" id="LN240">240</td><td class="line">    <span class='keyword'>typedef</span> RefBase&lt;Ref&gt; Base;</td></tr>
<tr class="codeline" data-linenumber="241"><td class="num" id="LN241">241</td><td class="line">    <span class='macro'>EIGEN_DENSE_PUBLIC_INTERFACE(Ref)<span class='expansion'>typedef typename Eigen::internal::traits&lt;Ref&gt;::Scalar Scalar<br>; typedef typename Eigen::NumTraits&lt;Scalar&gt;::Real RealScalar<br>; typedef typename Base::CoeffReturnType CoeffReturnType; typedef<br> typename Eigen::internal::ref_selector&lt;Ref&gt;::type Nested<br>; typedef typename Eigen::internal::traits&lt;Ref&gt;::StorageKind<br> StorageKind; typedef typename Eigen::internal::traits&lt;Ref<br>&gt;::StorageIndex StorageIndex; enum { RowsAtCompileTime = Eigen<br>::internal::traits&lt;Ref&gt;::RowsAtCompileTime, ColsAtCompileTime<br> = Eigen::internal::traits&lt;Ref&gt;::ColsAtCompileTime, Flags<br> = Eigen::internal::traits&lt;Ref&gt;::Flags, SizeAtCompileTime<br> = Base::SizeAtCompileTime, MaxSizeAtCompileTime = Base::MaxSizeAtCompileTime<br>, IsVectorAtCompileTime = Base::IsVectorAtCompileTime }; using<br> Base::derived; using Base::const_cast_derived; typedef typename<br> Base::PacketScalar PacketScalar;</span></span></td></tr>
<tr class="codeline" data-linenumber="242"><td class="num" id="LN242">242</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="243"><td class="num" id="LN243">243</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> Derived&gt;</td></tr>
<tr class="codeline" data-linenumber="244"><td class="num" id="LN244">244</td><td class="line">    EIGEN_DEVICE_FUNC <span class='keyword'>inline</span> Ref(<span class='keyword'>const</span> DenseBase&lt;Derived&gt;&amp; expr,</td></tr>
<tr class="codeline" data-linenumber="245"><td class="num" id="LN245">245</td><td class="line">                                 <span class='keyword'>typename</span> internal::enable_if&lt;<span class='keyword'>bool</span>(Traits::<span class='keyword'>template</span> match&lt;Derived&gt;::ScalarTypeMatch),Derived&gt;::type* = 0)</td></tr>
<tr class="codeline" data-linenumber="246"><td class="num" id="LN246">246</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="247"><td class="num" id="LN247">247</td><td class="line"><span class='comment'>//      std::cout &lt;&lt; match_helper&lt;Derived&gt;::HasDirectAccess &lt;&lt; "," &lt;&lt; match_helper&lt;Derived&gt;::OuterStrideMatch &lt;&lt; "," &lt;&lt; match_helper&lt;Derived&gt;::InnerStrideMatch &lt;&lt; "\n";</span></td></tr>
<tr class="codeline" data-linenumber="248"><td class="num" id="LN248">248</td><td class="line"><span class='comment'>//      std::cout &lt;&lt; int(StrideType::OuterStrideAtCompileTime) &lt;&lt; " - " &lt;&lt; int(Derived::OuterStrideAtCompileTime) &lt;&lt; "\n";</span></td></tr>
<tr class="codeline" data-linenumber="249"><td class="num" id="LN249">249</td><td class="line"><span class='comment'>//      std::cout &lt;&lt; int(StrideType::InnerStrideAtCompileTime) &lt;&lt; " - " &lt;&lt; int(Derived::InnerStrideAtCompileTime) &lt;&lt; "\n";</span></td></tr>
<tr class="codeline" data-linenumber="250"><td class="num" id="LN250">250</td><td class="line">      construct(expr.derived(), <span class='keyword'>typename</span> Traits::<span class='keyword'>template</span> match&lt;Derived&gt;::type());</td></tr>
<tr class="codeline" data-linenumber="251"><td class="num" id="LN251">251</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="252"><td class="num" id="LN252">252</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="253"><td class="num" id="LN253">253</td><td class="line">    EIGEN_DEVICE_FUNC <span class='keyword'>inline</span> Ref(<span class='keyword'>const</span> Ref&amp; other) : Base(other) {</td></tr>
<tr class="codeline" data-linenumber="254"><td class="num" id="LN254">254</td><td class="line">      <span class='comment'>// copy constructor shall not copy the m_object, to avoid unnecessary malloc and copy</span></td></tr>
<tr class="codeline" data-linenumber="255"><td class="num" id="LN255">255</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="256"><td class="num" id="LN256">256</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="257"><td class="num" id="LN257">257</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> OtherRef&gt;</td></tr>
<tr class="codeline" data-linenumber="258"><td class="num" id="LN258">258</td><td class="line">    EIGEN_DEVICE_FUNC <span class='keyword'>inline</span> Ref(<span class='keyword'>const</span> RefBase&lt;OtherRef&gt;&amp; other) {</td></tr>
<tr class="codeline" data-linenumber="259"><td class="num" id="LN259">259</td><td class="line">      construct(other.derived(), <span class='keyword'>typename</span> Traits::<span class='keyword'>template</span> match&lt;OtherRef&gt;::type());</td></tr>
<tr class="codeline" data-linenumber="260"><td class="num" id="LN260">260</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="261"><td class="num" id="LN261">261</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="262"><td class="num" id="LN262">262</td><td class="line">  <span class='keyword'>protected</span>:</td></tr>
<tr class="codeline" data-linenumber="263"><td class="num" id="LN263">263</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="264"><td class="num" id="LN264">264</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> Expression&gt;</td></tr>
<tr class="codeline" data-linenumber="265"><td class="num" id="LN265">265</td><td class="line">    EIGEN_DEVICE_FUNC <span class='keyword'>void</span> construct(<span class='keyword'>const</span> Expression&amp; expr,internal::true_type)</td></tr>
<tr class="codeline" data-linenumber="266"><td class="num" id="LN266">266</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="267"><td class="num" id="LN267">267</td><td class="line">      Base::construct(expr);</td></tr>
<tr class="codeline" data-linenumber="268"><td class="num" id="LN268">268</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="269"><td class="num" id="LN269">269</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="270"><td class="num" id="LN270">270</td><td class="line">    <span class='keyword'>template</span>&lt;<span class='keyword'>typename</span> Expression&gt;</td></tr>
<tr class="codeline" data-linenumber="271"><td class="num" id="LN271">271</td><td class="line">    EIGEN_DEVICE_FUNC <span class='keyword'>void</span> construct(<span class='keyword'>const</span> Expression&amp; expr, internal::false_type)</td></tr>
<tr class="codeline" data-linenumber="272"><td class="num" id="LN272">272</td><td class="line">    {</td></tr>
<tr class="codeline" data-linenumber="273"><td class="num" id="LN273">273</td><td class="line">      internal::call_assignment_no_alias(m_object,expr,internal::assign_op&lt;Scalar,Scalar&gt;());</td></tr>
<tr class="codeline" data-linenumber="274"><td class="num" id="LN274">274</td><td class="line">      Base::construct(m_object);</td></tr>
<tr class="codeline" data-linenumber="275"><td class="num" id="LN275">275</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="276"><td class="num" id="LN276">276</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="277"><td class="num" id="LN277">277</td><td class="line">  <span class='keyword'>protected</span>:</td></tr>
<tr class="codeline" data-linenumber="278"><td class="num" id="LN278">278</td><td class="line">    TPlainObjectType m_object;</td></tr>
<tr class="codeline" data-linenumber="279"><td class="num" id="LN279">279</td><td class="line">};</td></tr>
<tr class="codeline" data-linenumber="280"><td class="num" id="LN280">280</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="281"><td class="num" id="LN281">281</td><td class="line">} <span class='comment'>// end namespace Eigen</span></td></tr>
<tr class="codeline" data-linenumber="282"><td class="num" id="LN282">282</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="283"><td class="num" id="LN283">283</td><td class="line"><span class='directive'>#endif // EIGEN_REF_H</span></td></tr>
</table></body></html>
